import{C as wl,F as et,P as Fv,S as Tl,T as Mt,a as Zr,H as fr,M as ja,b as C8,c as We,d as ft,A as T8,U as xr,e as Cn,f as $d,g as zs,h as Om,i as Dd,j as a,k as Sa,m as de,X as Qe,l as q3,B as H3,L as V3,n as qd,o as D8,p as ia,q as B0,r as Lv,E as z0,s as Kt,t as st,D as rr,u as tn,v as gt,w as wr,x as ua,y as H2,W as O8,z as k8,G as P8,I as M8,J as F8,K as hr,N as en,O as Rv,Q as ks,R as Od,V as Tn,Y as Wn,Z as Vt,_ as Dn,$ as Lm,a0 as lr,a1 as L8,a2 as Hd,a3 as G3,a4 as R8,a5 as K3,a6 as Na,a7 as zb,a8 as Ub,a9 as uu,aa as Wo,ab as qp,ac as cs,ad as Jr,ae as ma,af as fu,ag as Rm,ah as Vd,ai as Gd,aj as Xo,ak as Zo,al as Hp,am as Iv,an as V2,ao as U0,ap as G2,aq as $b,ar as $0,as as Us,at as Y3,au as K2,av as Vp,aw as Y2,ax as W3,ay as W2,az as I8,aA as B8,aB as z8,aC as U8,aD as Bv,aE as $8}from"./ui-CBJxdPH3.js";import{u as qb,L as X3,r as _,N as Hb,a as Vb,b as q8,c as H8,d as V8,e as dr,B as G8,R as K8}from"./router-kjBgdyu6.js";import{r as q0,a as Y8,g as Ws}from"./vendor-RGnvvjkK.js";import{c as W8}from"./supabase-Cvbl-XDS.js";import{c as Z3}from"./utils-DGHYb1Cd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();var Gp={exports:{}},yd={},Kp={exports:{}},Yp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X2;function X8(){return X2||(X2=1,function(e){function t(G,K){var ce=G.length;G.push(K);e:for(;0<ce;){var le=ce-1>>>1,ne=G[le];if(0<s(ne,K))G[le]=K,G[ce]=ne,ce=le;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var K=G[0],ce=G.pop();if(ce!==K){G[0]=ce;e:for(var le=0,ne=G.length,Z=ne>>>1;le<Z;){var F=2*(le+1)-1,U=G[F],Y=F+1,Q=G[Y];if(0>s(U,ce))Y<ne&&0>s(Q,U)?(G[le]=Q,G[Y]=ce,le=Y):(G[le]=U,G[F]=ce,le=F);else if(Y<ne&&0>s(Q,ce))G[le]=Q,G[Y]=ce,le=Y;else break e}}return K}function s(G,K){var ce=G.sortIndex-K.sortIndex;return ce!==0?ce:G.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var f=[],m=[],x=1,h=null,v=3,g=!1,y=!1,b=!1,j=!1,w=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var K=r(m);K!==null;){if(K.callback===null)n(m);else if(K.startTime<=G)n(m),K.sortIndex=K.expirationTime,t(f,K);else break;K=r(m)}}function T(G){if(b=!1,D(G),!y)if(r(f)!==null)y=!0,k||(k=!0,P());else{var K=r(m);K!==null&&V(T,K.startTime-G)}}var k=!1,C=-1,M=5,I=-1;function R(){return j?!0:!(e.unstable_now()-I<M)}function L(){if(j=!1,k){var G=e.unstable_now();I=G;var K=!0;try{e:{y=!1,b&&(b=!1,A(C),C=-1),g=!0;var ce=v;try{t:{for(D(G),h=r(f);h!==null&&!(h.expirationTime>G&&R());){var le=h.callback;if(typeof le=="function"){h.callback=null,v=h.priorityLevel;var ne=le(h.expirationTime<=G);if(G=e.unstable_now(),typeof ne=="function"){h.callback=ne,D(G),K=!0;break t}h===r(f)&&n(f),D(G)}else n(f);h=r(f)}if(h!==null)K=!0;else{var Z=r(m);Z!==null&&V(T,Z.startTime-G),K=!1}}break e}finally{h=null,v=ce,g=!1}K=void 0}}finally{K?P():k=!1}}}var P;if(typeof S=="function")P=function(){S(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,z=O.port2;O.port1.onmessage=L,P=function(){z.postMessage(null)}}else P=function(){w(L,0)};function V(G,K){C=w(function(){G(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(G){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var ce=v;v=K;try{return G()}finally{v=ce}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ce=v;v=G;try{return K()}finally{v=ce}},e.unstable_scheduleCallback=function(G,K,ce){var le=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?le+ce:le):ce=le,G){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ce+ne,G={id:x++,callback:K,priorityLevel:G,startTime:ce,expirationTime:ne,sortIndex:-1},ce>le?(G.sortIndex=ce,t(m,G),r(f)===null&&G===r(m)&&(b?(A(C),C=-1):b=!0,V(T,ce-le))):(G.sortIndex=ne,t(f,G),y||g||(y=!0,k||(k=!0,P()))),G},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(G){var K=v;return function(){var ce=v;v=K;try{return G.apply(this,arguments)}finally{v=ce}}}}(Yp)),Yp}var Z2;function Z8(){return Z2||(Z2=1,Kp.exports=X8()),Kp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2;function Q8(){if(Q2)return yd;Q2=1;var e=Z8(),t=q0(),r=Y8();function n(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(n(188))}function f(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(n(188));return o!==i?null:i}for(var u=i,p=o;;){var N=u.return;if(N===null)break;var E=N.alternate;if(E===null){if(p=N.return,p!==null){u=p;continue}break}if(N.child===E.child){for(E=N.child;E;){if(E===u)return d(N),i;if(E===p)return d(N),o;E=E.sibling}throw Error(n(188))}if(u.return!==p.return)u=N,p=E;else{for(var B=!1,H=N.child;H;){if(H===u){B=!0,u=N,p=E;break}if(H===p){B=!0,p=N,u=E;break}H=H.sibling}if(!B){for(H=E.child;H;){if(H===u){B=!0,u=E,p=N;break}if(H===p){B=!0,p=E,u=N;break}H=H.sibling}if(!B)throw Error(n(189))}}if(u.alternate!==p)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var x=Object.assign,h=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),S=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function P(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var O=Symbol.for("react.client.reference");function z(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===O?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case y:return"Fragment";case j:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case g:return"Portal";case S:return(i.displayName||"Context")+".Provider";case A:return(i._context.displayName||"Context")+".Consumer";case D:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return o=i.displayName||null,o!==null?o:z(i.type)||"Memo";case M:o=i._payload,i=i._init;try{return z(i(o))}catch{}}return null}var V=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},le=[],ne=-1;function Z(i){return{current:i}}function F(i){0>ne||(i.current=le[ne],le[ne]=null,ne--)}function U(i,o){ne++,le[ne]=i.current,i.current=o}var Y=Z(null),Q=Z(null),ee=Z(null),De=Z(null);function ke(i,o){switch(U(ee,o),U(Q,i),U(Y,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?v2(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=v2(o),i=b2(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}F(Y),U(Y,i)}function fe(){F(Y),F(Q),F(ee)}function Ee(i){i.memoizedState!==null&&U(De,i);var o=Y.current,u=b2(o,i.type);o!==u&&(U(Q,i),U(Y,u))}function Ie(i){Q.current===i&&(F(Y),F(Q)),De.current===i&&(F(De),hd._currentValue=ce)}var Ne=Object.prototype.hasOwnProperty,Je=e.unstable_scheduleCallback,qe=e.unstable_cancelCallback,Bt=e.unstable_shouldYield,at=e.unstable_requestPaint,Re=e.unstable_now,Br=e.unstable_getCurrentPriorityLevel,cn=e.unstable_ImmediatePriority,Zn=e.unstable_UserBlockingPriority,Ln=e.unstable_NormalPriority,zu=e.unstable_LowPriority,Zl=e.unstable_IdlePriority,dn=e.log,Ql=e.unstable_setDisableYieldValue,xs=null,zr=null;function aa(i){if(typeof dn=="function"&&Ql(i),zr&&typeof zr.setStrictMode=="function")try{zr.setStrictMode(xs,i)}catch{}}var xa=Math.clz32?Math.clz32:qu,Uu=Math.log,$u=Math.LN2;function qu(i){return i>>>=0,i===0?32:31-(Uu(i)/$u|0)|0}var Yi=256,Wi=4194304;function Qn(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Jl(i,o,u){var p=i.pendingLanes;if(p===0)return 0;var N=0,E=i.suspendedLanes,B=i.pingedLanes;i=i.warmLanes;var H=p&134217727;return H!==0?(p=H&~E,p!==0?N=Qn(p):(B&=H,B!==0?N=Qn(B):u||(u=H&~i,u!==0&&(N=Qn(u))))):(H=p&~E,H!==0?N=Qn(H):B!==0?N=Qn(B):u||(u=p&~i,u!==0&&(N=Qn(u)))),N===0?0:o!==0&&o!==N&&(o&E)===0&&(E=N&-N,u=o&-o,E>=u||E===32&&(u&4194048)!==0)?o:N}function Xi(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Hu(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nc(){var i=Yi;return Yi<<=1,(Yi&4194048)===0&&(Yi=256),i}function wc(){var i=Wi;return Wi<<=1,(Wi&62914560)===0&&(Wi=4194304),i}function _c(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Zi(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function eo(i,o,u,p,N,E){var B=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var H=i.entanglements,ie=i.expirationTimes,he=i.hiddenUpdates;for(u=B&~u;0<u;){var Se=31-xa(u),Ce=1<<Se;H[Se]=0,ie[Se]=-1;var be=he[Se];if(be!==null)for(he[Se]=null,Se=0;Se<be.length;Se++){var je=be[Se];je!==null&&(je.lane&=-536870913)}u&=~Ce}p!==0&&Vu(i,p,0),E!==0&&N===0&&i.tag!==0&&(i.suspendedLanes|=E&~(B&~o))}function Vu(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var p=31-xa(o);i.entangledLanes|=o,i.entanglements[p]=i.entanglements[p]|1073741824|u&4194090}function Gu(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-xa(u),N=1<<p;N&o|i[p]&o&&(i[p]|=o),u&=~N}}function Ec(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Sc(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ku(){var i=K.p;return i!==0?i:(i=window.event,i===void 0?32:I2(i.type))}function Ix(i,o){var u=K.p;try{return K.p=i,o()}finally{K.p=u}}var Jn=Math.random().toString(36).slice(2),Cr="__reactFiber$"+Jn,Tr="__reactProps$"+Jn,ai="__reactContainer$"+Jn,Ac="__reactEvents$"+Jn,Bx="__reactListeners$"+Jn,q="__reactHandles$"+Jn,re="__reactResources$"+Jn,W="__reactMarker$"+Jn;function J(i){delete i[Cr],delete i[Tr],delete i[Ac],delete i[Bx],delete i[q]}function te(i){var o=i[Cr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ai]||u[Cr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=w2(i);i!==null;){if(u=i[Cr])return u;i=w2(i)}return o}i=u,u=i.parentNode}return null}function ae(i){if(i=i[Cr]||i[ai]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function pe(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(n(33))}function we(i){var o=i[re];return o||(o=i[re]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function me(i){i[W]=!0}var ve=new Set,ye={};function Oe(i,o){Me(i,o),Me(i+"Capture",o)}function Me(i,o){for(ye[i]=o,i=0;i<o.length;i++)ve.add(o[i])}var ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pe={},Be={};function Ze(i){return Ne.call(Be,i)?!0:Ne.call(Pe,i)?!1:ze.test(i)?Be[i]=!0:(Pe[i]=!0,!1)}function Et(i,o,u){if(Ze(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function St(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Ft(i,o,u,p){if(p===null)i.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+p)}}var hs,ni;function un(i){if(hs===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);hs=o&&o[1]||"",ni=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+i+ni}var Rn=!1;function Qi(i,o){if(!i||Rn)return"";Rn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(je){var be=je}Reflect.construct(i,[],Ce)}else{try{Ce.call()}catch(je){be=je}i.call(Ce.prototype)}}else{try{throw Error()}catch(je){be=je}(Ce=i())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(je){if(je&&be&&typeof je.stack=="string")return[je.stack,be.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=p.DetermineComponentFrameRoot(),B=E[0],H=E[1];if(B&&H){var ie=B.split(`
`),he=H.split(`
`);for(N=p=0;p<ie.length&&!ie[p].includes("DetermineComponentFrameRoot");)p++;for(;N<he.length&&!he[N].includes("DetermineComponentFrameRoot");)N++;if(p===ie.length||N===he.length)for(p=ie.length-1,N=he.length-1;1<=p&&0<=N&&ie[p]!==he[N];)N--;for(;1<=p&&0<=N;p--,N--)if(ie[p]!==he[N]){if(p!==1||N!==1)do if(p--,N--,0>N||ie[p]!==he[N]){var Se=`
`+ie[p].replace(" at new "," at ");return i.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",i.displayName)),Se}while(1<=p&&0<=N);break}}}finally{Rn=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?un(u):""}function In(i){switch(i.tag){case 26:case 27:case 5:return un(i.type);case 16:return un("Lazy");case 13:return un("Suspense");case 19:return un("SuspenseList");case 0:case 15:return Qi(i.type,!1);case 11:return Qi(i.type.render,!1);case 1:return Qi(i.type,!0);case 31:return un("Activity");default:return""}}function fj(i){try{var o="";do o+=In(i),i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function fn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function mj(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wO(i){var o=mj(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var N=u.get,E=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return N.call(this)},set:function(B){p=""+B,E.call(this,B)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(B){p=""+B},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Yu(i){i._valueTracker||(i._valueTracker=wO(i))}function xj(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=mj(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function Wu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var _O=/[\n"\\]/g;function mn(i){return i.replace(_O,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function zx(i,o,u,p,N,E,B,H){i.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?i.type=B:i.removeAttribute("type"),o!=null?B==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+fn(o)):i.value!==""+fn(o)&&(i.value=""+fn(o)):B!=="submit"&&B!=="reset"||i.removeAttribute("value"),o!=null?Ux(i,B,fn(o)):u!=null?Ux(i,B,fn(u)):p!=null&&i.removeAttribute("value"),N==null&&E!=null&&(i.defaultChecked=!!E),N!=null&&(i.checked=N&&typeof N!="function"&&typeof N!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?i.name=""+fn(H):i.removeAttribute("name")}function hj(i,o,u,p,N,E,B,H){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.type=E),o!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||o!=null))return;u=u!=null?""+fn(u):"",o=o!=null?""+fn(o):u,H||o===i.value||(i.value=o),i.defaultValue=o}p=p??N,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=H?i.checked:!!p,i.defaultChecked=!!p,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(i.name=B)}function Ux(i,o,u){o==="number"&&Wu(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function to(i,o,u,p){if(i=i.options,o){o={};for(var N=0;N<u.length;N++)o["$"+u[N]]=!0;for(u=0;u<i.length;u++)N=o.hasOwnProperty("$"+i[u].value),i[u].selected!==N&&(i[u].selected=N),N&&p&&(i[u].defaultSelected=!0)}else{for(u=""+fn(u),o=null,N=0;N<i.length;N++){if(i[N].value===u){i[N].selected=!0,p&&(i[N].defaultSelected=!0);return}o!==null||i[N].disabled||(o=i[N])}o!==null&&(o.selected=!0)}}function pj(i,o,u){if(o!=null&&(o=""+fn(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+fn(u):""}function gj(i,o,u,p){if(o==null){if(p!=null){if(u!=null)throw Error(n(92));if(V(p)){if(1<p.length)throw Error(n(93));p=p[0]}u=p}u==null&&(u=""),o=u}u=fn(o),i.defaultValue=u,p=i.textContent,p===u&&p!==""&&p!==null&&(i.value=p)}function ro(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var EO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vj(i,o,u){var p=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":p?i.setProperty(o,u):typeof u!="number"||u===0||EO.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function bj(i,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(i=i.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var N in o)p=o[N],o.hasOwnProperty(N)&&u[N]!==p&&vj(i,N,p)}else for(var E in o)o.hasOwnProperty(E)&&vj(i,E,o[E])}function $x(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),AO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xu(i){return AO.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var qx=null;function Hx(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ao=null,no=null;function yj(i){var o=ae(i);if(o&&(i=o.stateNode)){var u=i[Tr]||null;e:switch(i=o.stateNode,o.type){case"input":if(zx(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+mn(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var N=p[Tr]||null;if(!N)throw Error(n(90));zx(p,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(o=0;o<u.length;o++)p=u[o],p.form===i.form&&xj(p)}break e;case"textarea":pj(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&to(i,!!u.multiple,o,!1)}}}var Vx=!1;function jj(i,o,u){if(Vx)return i(o,u);Vx=!0;try{var p=i(o);return p}finally{if(Vx=!1,(ao!==null||no!==null)&&(Lf(),ao&&(o=ao,i=no,no=ao=null,yj(o),i)))for(o=0;o<i.length;o++)yj(i[o])}}function Cc(i,o){var u=i.stateNode;if(u===null)return null;var p=u[Tr]||null;if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gx=!1;if(ps)try{var Tc={};Object.defineProperty(Tc,"passive",{get:function(){Gx=!0}}),window.addEventListener("test",Tc,Tc),window.removeEventListener("test",Tc,Tc)}catch{Gx=!1}var si=null,Kx=null,Zu=null;function Nj(){if(Zu)return Zu;var i,o=Kx,u=o.length,p,N="value"in si?si.value:si.textContent,E=N.length;for(i=0;i<u&&o[i]===N[i];i++);var B=u-i;for(p=1;p<=B&&o[u-p]===N[E-p];p++);return Zu=N.slice(i,1<p?1-p:void 0)}function Qu(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ju(){return!0}function wj(){return!1}function Ca(i){function o(u,p,N,E,B){this._reactName=u,this._targetInst=N,this.type=p,this.nativeEvent=E,this.target=B,this.currentTarget=null;for(var H in i)i.hasOwnProperty(H)&&(u=i[H],this[H]=u?u(E):E[H]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Ju:wj,this.isPropagationStopped=wj,this}return x(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ju)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ju)},persist:function(){},isPersistent:Ju}),o}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=Ca(Ji),Dc=x({},Ji,{view:0,detail:0}),CO=Ca(Dc),Yx,Wx,Oc,tf=x({},Dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zx,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Oc&&(Oc&&i.type==="mousemove"?(Yx=i.screenX-Oc.screenX,Wx=i.screenY-Oc.screenY):Wx=Yx=0,Oc=i),Yx)},movementY:function(i){return"movementY"in i?i.movementY:Wx}}),_j=Ca(tf),TO=x({},tf,{dataTransfer:0}),DO=Ca(TO),OO=x({},Dc,{relatedTarget:0}),Xx=Ca(OO),kO=x({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),PO=Ca(kO),MO=x({},Ji,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),FO=Ca(MO),LO=x({},Ji,{data:0}),Ej=Ca(LO),RO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zO(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=BO[i])?!!o[i]:!1}function Zx(){return zO}var UO=x({},Dc,{key:function(i){if(i.key){var o=RO[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Qu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?IO[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zx,charCode:function(i){return i.type==="keypress"?Qu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$O=Ca(UO),qO=x({},tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sj=Ca(qO),HO=x({},Dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zx}),VO=Ca(HO),GO=x({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),KO=Ca(GO),YO=x({},tf,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),WO=Ca(YO),XO=x({},Ji,{newState:0,oldState:0}),ZO=Ca(XO),QO=[9,13,27,32],Qx=ps&&"CompositionEvent"in window,kc=null;ps&&"documentMode"in document&&(kc=document.documentMode);var JO=ps&&"TextEvent"in window&&!kc,Aj=ps&&(!Qx||kc&&8<kc&&11>=kc),Cj=" ",Tj=!1;function Dj(i,o){switch(i){case"keyup":return QO.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oj(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var so=!1;function ek(i,o){switch(i){case"compositionend":return Oj(o);case"keypress":return o.which!==32?null:(Tj=!0,Cj);case"textInput":return i=o.data,i===Cj&&Tj?null:i;default:return null}}function tk(i,o){if(so)return i==="compositionend"||!Qx&&Dj(i,o)?(i=Nj(),Zu=Kx=si=null,so=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Aj&&o.locale!=="ko"?null:o.data;default:return null}}var rk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kj(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!rk[i.type]:o==="textarea"}function Pj(i,o,u,p){ao?no?no.push(p):no=[p]:ao=p,o=$f(o,"onChange"),0<o.length&&(u=new ef("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var Pc=null,Mc=null;function ak(i){m2(i,0)}function rf(i){var o=pe(i);if(xj(o))return i}function Mj(i,o){if(i==="change")return o}var Fj=!1;if(ps){var Jx;if(ps){var eh="oninput"in document;if(!eh){var Lj=document.createElement("div");Lj.setAttribute("oninput","return;"),eh=typeof Lj.oninput=="function"}Jx=eh}else Jx=!1;Fj=Jx&&(!document.documentMode||9<document.documentMode)}function Rj(){Pc&&(Pc.detachEvent("onpropertychange",Ij),Mc=Pc=null)}function Ij(i){if(i.propertyName==="value"&&rf(Mc)){var o=[];Pj(o,Mc,i,Hx(i)),jj(ak,o)}}function nk(i,o,u){i==="focusin"?(Rj(),Pc=o,Mc=u,Pc.attachEvent("onpropertychange",Ij)):i==="focusout"&&Rj()}function sk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return rf(Mc)}function ik(i,o){if(i==="click")return rf(o)}function lk(i,o){if(i==="input"||i==="change")return rf(o)}function ok(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ia=typeof Object.is=="function"?Object.is:ok;function Fc(i,o){if(Ia(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var N=u[p];if(!Ne.call(o,N)||!Ia(i[N],o[N]))return!1}return!0}function Bj(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function zj(i,o){var u=Bj(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Bj(u)}}function Uj(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Uj(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function $j(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Wu(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Wu(i.document)}return o}function th(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var ck=ps&&"documentMode"in document&&11>=document.documentMode,io=null,rh=null,Lc=null,ah=!1;function qj(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ah||io==null||io!==Wu(p)||(p=io,"selectionStart"in p&&th(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Lc&&Fc(Lc,p)||(Lc=p,p=$f(rh,"onSelect"),0<p.length&&(o=new ef("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=io)))}function el(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var lo={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionrun:el("Transition","TransitionRun"),transitionstart:el("Transition","TransitionStart"),transitioncancel:el("Transition","TransitionCancel"),transitionend:el("Transition","TransitionEnd")},nh={},Hj={};ps&&(Hj=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function tl(i){if(nh[i])return nh[i];if(!lo[i])return i;var o=lo[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Hj)return nh[i]=o[u];return i}var Vj=tl("animationend"),Gj=tl("animationiteration"),Kj=tl("animationstart"),dk=tl("transitionrun"),uk=tl("transitionstart"),fk=tl("transitioncancel"),Yj=tl("transitionend"),Wj=new Map,sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sh.push("scrollEnd");function Bn(i,o){Wj.set(i,o),Oe(o,[i])}var Xj=new WeakMap;function xn(i,o){if(typeof i=="object"&&i!==null){var u=Xj.get(i);return u!==void 0?u:(o={value:i,source:o,stack:fj(o)},Xj.set(i,o),o)}return{value:i,source:o,stack:fj(o)}}var hn=[],oo=0,ih=0;function af(){for(var i=oo,o=ih=oo=0;o<i;){var u=hn[o];hn[o++]=null;var p=hn[o];hn[o++]=null;var N=hn[o];hn[o++]=null;var E=hn[o];if(hn[o++]=null,p!==null&&N!==null){var B=p.pending;B===null?N.next=N:(N.next=B.next,B.next=N),p.pending=N}E!==0&&Zj(u,N,E)}}function nf(i,o,u,p){hn[oo++]=i,hn[oo++]=o,hn[oo++]=u,hn[oo++]=p,ih|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function lh(i,o,u,p){return nf(i,o,u,p),sf(i)}function co(i,o){return nf(i,null,null,o),sf(i)}function Zj(i,o,u){i.lanes|=u;var p=i.alternate;p!==null&&(p.lanes|=u);for(var N=!1,E=i.return;E!==null;)E.childLanes|=u,p=E.alternate,p!==null&&(p.childLanes|=u),E.tag===22&&(i=E.stateNode,i===null||i._visibility&1||(N=!0)),i=E,E=E.return;return i.tag===3?(E=i.stateNode,N&&o!==null&&(N=31-xa(u),i=E.hiddenUpdates,p=i[N],p===null?i[N]=[o]:p.push(o),o.lane=u|536870912),E):null}function sf(i){if(50<ld)throw ld=0,mp=null,Error(n(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var uo={};function mk(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ba(i,o,u,p){return new mk(i,o,u,p)}function oh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function gs(i,o){var u=i.alternate;return u===null?(u=Ba(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Qj(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function lf(i,o,u,p,N,E){var B=0;if(p=i,typeof i=="function")oh(i)&&(B=1);else if(typeof i=="string")B=h8(i,u,Y.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=Ba(31,u,o,N),i.elementType=I,i.lanes=E,i;case y:return rl(u.children,N,E,o);case b:B=8,N|=24;break;case j:return i=Ba(12,u,o,N|2),i.elementType=j,i.lanes=E,i;case T:return i=Ba(13,u,o,N),i.elementType=T,i.lanes=E,i;case k:return i=Ba(19,u,o,N),i.elementType=k,i.lanes=E,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case w:case S:B=10;break e;case A:B=9;break e;case D:B=11;break e;case C:B=14;break e;case M:B=16,p=null;break e}B=29,u=Error(n(130,i===null?"null":typeof i,"")),p=null}return o=Ba(B,u,o,N),o.elementType=i,o.type=p,o.lanes=E,o}function rl(i,o,u,p){return i=Ba(7,i,p,o),i.lanes=u,i}function ch(i,o,u){return i=Ba(6,i,null,o),i.lanes=u,i}function dh(i,o,u){return o=Ba(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var fo=[],mo=0,of=null,cf=0,pn=[],gn=0,al=null,vs=1,bs="";function nl(i,o){fo[mo++]=cf,fo[mo++]=of,of=i,cf=o}function Jj(i,o,u){pn[gn++]=vs,pn[gn++]=bs,pn[gn++]=al,al=i;var p=vs;i=bs;var N=32-xa(p)-1;p&=~(1<<N),u+=1;var E=32-xa(o)+N;if(30<E){var B=N-N%5;E=(p&(1<<B)-1).toString(32),p>>=B,N-=B,vs=1<<32-xa(o)+N|u<<N|p,bs=E+i}else vs=1<<E|u<<N|p,bs=i}function uh(i){i.return!==null&&(nl(i,1),Jj(i,1,0))}function fh(i){for(;i===of;)of=fo[--mo],fo[mo]=null,cf=fo[--mo],fo[mo]=null;for(;i===al;)al=pn[--gn],pn[gn]=null,bs=pn[--gn],pn[gn]=null,vs=pn[--gn],pn[gn]=null}var ha=null,Zt=null,xt=!1,sl=null,es=!1,mh=Error(n(519));function il(i){var o=Error(n(418,""));throw Bc(xn(o,i)),mh}function eN(i){var o=i.stateNode,u=i.type,p=i.memoizedProps;switch(o[Cr]=i,o[Tr]=p,u){case"dialog":lt("cancel",o),lt("close",o);break;case"iframe":case"object":case"embed":lt("load",o);break;case"video":case"audio":for(u=0;u<cd.length;u++)lt(cd[u],o);break;case"source":lt("error",o);break;case"img":case"image":case"link":lt("error",o),lt("load",o);break;case"details":lt("toggle",o);break;case"input":lt("invalid",o),hj(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Yu(o);break;case"select":lt("invalid",o);break;case"textarea":lt("invalid",o),gj(o,p.value,p.defaultValue,p.children),Yu(o)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||p.suppressHydrationWarning===!0||g2(o.textContent,u)?(p.popover!=null&&(lt("beforetoggle",o),lt("toggle",o)),p.onScroll!=null&&lt("scroll",o),p.onScrollEnd!=null&&lt("scrollend",o),p.onClick!=null&&(o.onclick=qf),o=!0):o=!1,o||il(i)}function tN(i){for(ha=i.return;ha;)switch(ha.tag){case 5:case 13:es=!1;return;case 27:case 3:es=!0;return;default:ha=ha.return}}function Rc(i){if(i!==ha)return!1;if(!xt)return tN(i),xt=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Tp(i.type,i.memoizedProps)),u=!u),u&&Zt&&il(i),tN(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(o===0){Zt=Un(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;i=i.nextSibling}Zt=null}}else o===27?(o=Zt,ji(i.type)?(i=Pp,Pp=null,Zt=i):Zt=o):Zt=ha?Un(i.stateNode.nextSibling):null;return!0}function Ic(){Zt=ha=null,xt=!1}function rN(){var i=sl;return i!==null&&(Oa===null?Oa=i:Oa.push.apply(Oa,i),sl=null),i}function Bc(i){sl===null?sl=[i]:sl.push(i)}var xh=Z(null),ll=null,ys=null;function ii(i,o,u){U(xh,o._currentValue),o._currentValue=u}function js(i){i._currentValue=xh.current,F(xh)}function hh(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function ph(i,o,u,p){var N=i.child;for(N!==null&&(N.return=i);N!==null;){var E=N.dependencies;if(E!==null){var B=N.child;E=E.firstContext;e:for(;E!==null;){var H=E;E=N;for(var ie=0;ie<o.length;ie++)if(H.context===o[ie]){E.lanes|=u,H=E.alternate,H!==null&&(H.lanes|=u),hh(E.return,u,i),p||(B=null);break e}E=H.next}}else if(N.tag===18){if(B=N.return,B===null)throw Error(n(341));B.lanes|=u,E=B.alternate,E!==null&&(E.lanes|=u),hh(B,u,i),B=null}else B=N.child;if(B!==null)B.return=N;else for(B=N;B!==null;){if(B===i){B=null;break}if(N=B.sibling,N!==null){N.return=B.return,B=N;break}B=B.return}N=B}}function zc(i,o,u,p){i=null;for(var N=o,E=!1;N!==null;){if(!E){if((N.flags&524288)!==0)E=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var B=N.alternate;if(B===null)throw Error(n(387));if(B=B.memoizedProps,B!==null){var H=N.type;Ia(N.pendingProps.value,B.value)||(i!==null?i.push(H):i=[H])}}else if(N===De.current){if(B=N.alternate,B===null)throw Error(n(387));B.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(i!==null?i.push(hd):i=[hd])}N=N.return}i!==null&&ph(o,i,u,p),o.flags|=262144}function df(i){for(i=i.firstContext;i!==null;){if(!Ia(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ol(i){ll=i,ys=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function na(i){return aN(ll,i)}function uf(i,o){return ll===null&&ol(i),aN(i,o)}function aN(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},ys===null){if(i===null)throw Error(n(308));ys=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ys=ys.next=o;return u}var xk=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,p){i.push(p)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},hk=e.unstable_scheduleCallback,pk=e.unstable_NormalPriority,br={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gh(){return{controller:new xk,data:new Map,refCount:0}}function Uc(i){i.refCount--,i.refCount===0&&hk(pk,function(){i.controller.abort()})}var $c=null,vh=0,xo=0,ho=null;function gk(i,o){if($c===null){var u=$c=[];vh=0,xo=yp(),ho={status:"pending",value:void 0,then:function(p){u.push(p)}}}return vh++,o.then(nN,nN),o}function nN(){if(--vh===0&&$c!==null){ho!==null&&(ho.status="fulfilled");var i=$c;$c=null,xo=0,ho=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function vk(i,o){var u=[],p={status:"pending",value:null,reason:null,then:function(N){u.push(N)}};return i.then(function(){p.status="fulfilled",p.value=o;for(var N=0;N<u.length;N++)(0,u[N])(o)},function(N){for(p.status="rejected",p.reason=N,N=0;N<u.length;N++)(0,u[N])(void 0)}),p}var sN=G.S;G.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&gk(i,o),sN!==null&&sN(i,o)};var cl=Z(null);function bh(){var i=cl.current;return i!==null?i:Lt.pooledCache}function ff(i,o){o===null?U(cl,cl.current):U(cl,o.pool)}function iN(){var i=bh();return i===null?null:{parent:br._currentValue,pool:i}}var qc=Error(n(460)),lN=Error(n(474)),mf=Error(n(542)),yh={then:function(){}};function oN(i){return i=i.status,i==="fulfilled"||i==="rejected"}function xf(){}function cN(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(xf,xf),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,uN(i),i;default:if(typeof o.status=="string")o.then(xf,xf);else{if(i=Lt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=o,i.status="pending",i.then(function(p){if(o.status==="pending"){var N=o;N.status="fulfilled",N.value=p}},function(p){if(o.status==="pending"){var N=o;N.status="rejected",N.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,uN(i),i}throw Hc=o,qc}}var Hc=null;function dN(){if(Hc===null)throw Error(n(459));var i=Hc;return Hc=null,i}function uN(i){if(i===qc||i===mf)throw Error(n(483))}var li=!1;function jh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function oi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ci(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(vt&2)!==0){var N=p.pending;return N===null?o.next=o:(o.next=N.next,N.next=o),p.pending=o,o=sf(i),Zj(i,null,u),o}return nf(i,p,o,u),sf(i)}function Vc(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Gu(i,u)}}function wh(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var N=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var B={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?N=E=B:E=E.next=B,u=u.next}while(u!==null);E===null?N=E=o:E=E.next=o}else N=E=o;u={baseState:p.baseState,firstBaseUpdate:N,lastBaseUpdate:E,shared:p.shared,callbacks:p.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var _h=!1;function Gc(){if(_h){var i=ho;if(i!==null)throw i}}function Kc(i,o,u,p){_h=!1;var N=i.updateQueue;li=!1;var E=N.firstBaseUpdate,B=N.lastBaseUpdate,H=N.shared.pending;if(H!==null){N.shared.pending=null;var ie=H,he=ie.next;ie.next=null,B===null?E=he:B.next=he,B=ie;var Se=i.alternate;Se!==null&&(Se=Se.updateQueue,H=Se.lastBaseUpdate,H!==B&&(H===null?Se.firstBaseUpdate=he:H.next=he,Se.lastBaseUpdate=ie))}if(E!==null){var Ce=N.baseState;B=0,Se=he=ie=null,H=E;do{var be=H.lane&-536870913,je=be!==H.lane;if(je?(ot&be)===be:(p&be)===be){be!==0&&be===xo&&(_h=!0),Se!==null&&(Se=Se.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Xe=i,Ke=H;be=o;var Tt=u;switch(Ke.tag){case 1:if(Xe=Ke.payload,typeof Xe=="function"){Ce=Xe.call(Tt,Ce,be);break e}Ce=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Ke.payload,be=typeof Xe=="function"?Xe.call(Tt,Ce,be):Xe,be==null)break e;Ce=x({},Ce,be);break e;case 2:li=!0}}be=H.callback,be!==null&&(i.flags|=64,je&&(i.flags|=8192),je=N.callbacks,je===null?N.callbacks=[be]:je.push(be))}else je={lane:be,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Se===null?(he=Se=je,ie=Ce):Se=Se.next=je,B|=be;if(H=H.next,H===null){if(H=N.shared.pending,H===null)break;je=H,H=je.next,je.next=null,N.lastBaseUpdate=je,N.shared.pending=null}}while(!0);Se===null&&(ie=Ce),N.baseState=ie,N.firstBaseUpdate=he,N.lastBaseUpdate=Se,E===null&&(N.shared.lanes=0),gi|=B,i.lanes=B,i.memoizedState=Ce}}function fN(i,o){if(typeof i!="function")throw Error(n(191,i));i.call(o)}function mN(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)fN(u[i],o)}var po=Z(null),hf=Z(0);function xN(i,o){i=Cs,U(hf,i),U(po,o),Cs=i|o.baseLanes}function Eh(){U(hf,Cs),U(po,po.current)}function Sh(){Cs=hf.current,F(po),F(hf)}var di=0,rt=null,At=null,or=null,pf=!1,go=!1,dl=!1,gf=0,Yc=0,vo=null,bk=0;function nr(){throw Error(n(321))}function Ah(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Ia(i[u],o[u]))return!1;return!0}function Ch(i,o,u,p,N,E){return di=E,rt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=i===null||i.memoizedState===null?ZN:QN,dl=!1,E=u(p,N),dl=!1,go&&(E=pN(o,u,p,N)),hN(i),E}function hN(i){G.H=wf;var o=At!==null&&At.next!==null;if(di=0,or=At=rt=null,pf=!1,Yc=0,vo=null,o)throw Error(n(300));i===null||Dr||(i=i.dependencies,i!==null&&df(i)&&(Dr=!0))}function pN(i,o,u,p){rt=i;var N=0;do{if(go&&(vo=null),Yc=0,go=!1,25<=N)throw Error(n(301));if(N+=1,or=At=null,i.updateQueue!=null){var E=i.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}G.H=Sk,E=o(u,p)}while(go);return E}function yk(){var i=G.H,o=i.useState()[0];return o=typeof o.then=="function"?Wc(o):o,i=i.useState()[0],(At!==null?At.memoizedState:null)!==i&&(rt.flags|=1024),o}function Th(){var i=gf!==0;return gf=0,i}function Dh(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function Oh(i){if(pf){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}pf=!1}di=0,or=At=rt=null,go=!1,Yc=gf=0,vo=null}function Ta(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?rt.memoizedState=or=i:or=or.next=i,or}function cr(){if(At===null){var i=rt.alternate;i=i!==null?i.memoizedState:null}else i=At.next;var o=or===null?rt.memoizedState:or.next;if(o!==null)or=o,At=i;else{if(i===null)throw rt.alternate===null?Error(n(467)):Error(n(310));At=i,i={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},or===null?rt.memoizedState=or=i:or=or.next=i}return or}function kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wc(i){var o=Yc;return Yc+=1,vo===null&&(vo=[]),i=cN(vo,i,o),o=rt,(or===null?o.memoizedState:or.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?ZN:QN),i}function vf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Wc(i);if(i.$$typeof===S)return na(i)}throw Error(n(438,String(i)))}function Ph(i){var o=null,u=rt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var p=rt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(N){return N.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=kh(),rt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),p=0;p<i;p++)u[p]=R;return o.index++,u}function Ns(i,o){return typeof o=="function"?o(i):o}function bf(i){var o=cr();return Mh(o,At,i)}function Mh(i,o,u){var p=i.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=u;var N=i.baseQueue,E=p.pending;if(E!==null){if(N!==null){var B=N.next;N.next=E.next,E.next=B}o.baseQueue=N=E,p.pending=null}if(E=i.baseState,N===null)i.memoizedState=E;else{o=N.next;var H=B=null,ie=null,he=o,Se=!1;do{var Ce=he.lane&-536870913;if(Ce!==he.lane?(ot&Ce)===Ce:(di&Ce)===Ce){var be=he.revertLane;if(be===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ce===xo&&(Se=!0);else if((di&be)===be){he=he.next,be===xo&&(Se=!0);continue}else Ce={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},ie===null?(H=ie=Ce,B=E):ie=ie.next=Ce,rt.lanes|=be,gi|=be;Ce=he.action,dl&&u(E,Ce),E=he.hasEagerState?he.eagerState:u(E,Ce)}else be={lane:Ce,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},ie===null?(H=ie=be,B=E):ie=ie.next=be,rt.lanes|=Ce,gi|=Ce;he=he.next}while(he!==null&&he!==o);if(ie===null?B=E:ie.next=H,!Ia(E,i.memoizedState)&&(Dr=!0,Se&&(u=ho,u!==null)))throw u;i.memoizedState=E,i.baseState=B,i.baseQueue=ie,p.lastRenderedState=E}return N===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function Fh(i){var o=cr(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var p=u.dispatch,N=u.pending,E=o.memoizedState;if(N!==null){u.pending=null;var B=N=N.next;do E=i(E,B.action),B=B.next;while(B!==N);Ia(E,o.memoizedState)||(Dr=!0),o.memoizedState=E,o.baseQueue===null&&(o.baseState=E),u.lastRenderedState=E}return[E,p]}function gN(i,o,u){var p=rt,N=cr(),E=xt;if(E){if(u===void 0)throw Error(n(407));u=u()}else u=o();var B=!Ia((At||N).memoizedState,u);B&&(N.memoizedState=u,Dr=!0),N=N.queue;var H=yN.bind(null,p,N,i);if(Xc(2048,8,H,[i]),N.getSnapshot!==o||B||or!==null&&or.memoizedState.tag&1){if(p.flags|=2048,bo(9,yf(),bN.bind(null,p,N,u,o),null),Lt===null)throw Error(n(349));E||(di&124)!==0||vN(p,o,u)}return u}function vN(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=rt.updateQueue,o===null?(o=kh(),rt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function bN(i,o,u,p){o.value=u,o.getSnapshot=p,jN(o)&&NN(i)}function yN(i,o,u){return u(function(){jN(o)&&NN(i)})}function jN(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Ia(i,u)}catch{return!0}}function NN(i){var o=co(i,2);o!==null&&Ha(o,i,2)}function Lh(i){var o=Ta();if(typeof i=="function"){var u=i;if(i=u(),dl){aa(!0);try{u()}finally{aa(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:i},o}function wN(i,o,u,p){return i.baseState=u,Mh(i,At,typeof p=="function"?p:Ns)}function jk(i,o,u,p,N){if(Nf(i))throw Error(n(485));if(i=o.action,i!==null){var E={payload:N,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){E.listeners.push(B)}};G.T!==null?u(!0):E.isTransition=!1,p(E),u=o.pending,u===null?(E.next=o.pending=E,_N(o,E)):(E.next=u.next,o.pending=u.next=E)}}function _N(i,o){var u=o.action,p=o.payload,N=i.state;if(o.isTransition){var E=G.T,B={};G.T=B;try{var H=u(N,p),ie=G.S;ie!==null&&ie(B,H),EN(i,o,H)}catch(he){Rh(i,o,he)}finally{G.T=E}}else try{E=u(N,p),EN(i,o,E)}catch(he){Rh(i,o,he)}}function EN(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){SN(i,o,p)},function(p){return Rh(i,o,p)}):SN(i,o,u)}function SN(i,o,u){o.status="fulfilled",o.value=u,AN(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,_N(i,u)))}function Rh(i,o,u){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=u,AN(o),o=o.next;while(o!==p)}i.action=null}function AN(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function CN(i,o){return o}function TN(i,o){if(xt){var u=Lt.formState;if(u!==null){e:{var p=rt;if(xt){if(Zt){t:{for(var N=Zt,E=es;N.nodeType!==8;){if(!E){N=null;break t}if(N=Un(N.nextSibling),N===null){N=null;break t}}E=N.data,N=E==="F!"||E==="F"?N:null}if(N){Zt=Un(N.nextSibling),p=N.data==="F!";break e}}il(p)}p=!1}p&&(o=u[0])}}return u=Ta(),u.memoizedState=u.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CN,lastRenderedState:o},u.queue=p,u=YN.bind(null,rt,p),p.dispatch=u,p=Lh(!1),E=$h.bind(null,rt,!1,p.queue),p=Ta(),N={state:o,dispatch:null,action:i,pending:null},p.queue=N,u=jk.bind(null,rt,N,E,u),N.dispatch=u,p.memoizedState=i,[o,u,!1]}function DN(i){var o=cr();return ON(o,At,i)}function ON(i,o,u){if(o=Mh(i,o,CN)[0],i=bf(Ns)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=Wc(o)}catch(B){throw B===qc?mf:B}else p=o;o=cr();var N=o.queue,E=N.dispatch;return u!==o.memoizedState&&(rt.flags|=2048,bo(9,yf(),Nk.bind(null,N,u),null)),[p,E,i]}function Nk(i,o){i.action=o}function kN(i){var o=cr(),u=At;if(u!==null)return ON(o,u,i);cr(),o=o.memoizedState,u=cr();var p=u.queue.dispatch;return u.memoizedState=i,[o,p,!1]}function bo(i,o,u,p){return i={tag:i,create:u,deps:p,inst:o,next:null},o=rt.updateQueue,o===null&&(o=kh(),rt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i),i}function yf(){return{destroy:void 0,resource:void 0}}function PN(){return cr().memoizedState}function jf(i,o,u,p){var N=Ta();p=p===void 0?null:p,rt.flags|=i,N.memoizedState=bo(1|o,yf(),u,p)}function Xc(i,o,u,p){var N=cr();p=p===void 0?null:p;var E=N.memoizedState.inst;At!==null&&p!==null&&Ah(p,At.memoizedState.deps)?N.memoizedState=bo(o,E,u,p):(rt.flags|=i,N.memoizedState=bo(1|o,E,u,p))}function MN(i,o){jf(8390656,8,i,o)}function FN(i,o){Xc(2048,8,i,o)}function LN(i,o){return Xc(4,2,i,o)}function RN(i,o){return Xc(4,4,i,o)}function IN(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function BN(i,o,u){u=u!=null?u.concat([i]):null,Xc(4,4,IN.bind(null,o,i),u)}function Ih(){}function zN(i,o){var u=cr();o=o===void 0?null:o;var p=u.memoizedState;return o!==null&&Ah(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function UN(i,o){var u=cr();o=o===void 0?null:o;var p=u.memoizedState;if(o!==null&&Ah(o,p[1]))return p[0];if(p=i(),dl){aa(!0);try{i()}finally{aa(!1)}}return u.memoizedState=[p,o],p}function Bh(i,o,u){return u===void 0||(di&1073741824)!==0?i.memoizedState=o:(i.memoizedState=u,i=Hw(),rt.lanes|=i,gi|=i,u)}function $N(i,o,u,p){return Ia(u,o)?u:po.current!==null?(i=Bh(i,u,p),Ia(i,o)||(Dr=!0),i):(di&42)===0?(Dr=!0,i.memoizedState=u):(i=Hw(),rt.lanes|=i,gi|=i,o)}function qN(i,o,u,p,N){var E=K.p;K.p=E!==0&&8>E?E:8;var B=G.T,H={};G.T=H,$h(i,!1,o,u);try{var ie=N(),he=G.S;if(he!==null&&he(H,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Se=vk(ie,p);Zc(i,o,Se,qa(i))}else Zc(i,o,p,qa(i))}catch(Ce){Zc(i,o,{then:function(){},status:"rejected",reason:Ce},qa())}finally{K.p=E,G.T=B}}function wk(){}function zh(i,o,u,p){if(i.tag!==5)throw Error(n(476));var N=HN(i).queue;qN(i,N,o,ce,u===null?wk:function(){return VN(i),u(p)})}function HN(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:ce},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function VN(i){var o=HN(i).next.queue;Zc(i,o,{},qa())}function Uh(){return na(hd)}function GN(){return cr().memoizedState}function KN(){return cr().memoizedState}function _k(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=qa();i=oi(u);var p=ci(o,i,u);p!==null&&(Ha(p,o,u),Vc(p,o,u)),o={cache:gh()},i.payload=o;return}o=o.return}}function Ek(i,o,u){var p=qa();u={lane:p,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Nf(i)?WN(o,u):(u=lh(i,o,u,p),u!==null&&(Ha(u,i,p),XN(u,o,p)))}function YN(i,o,u){var p=qa();Zc(i,o,u,p)}function Zc(i,o,u,p){var N={lane:p,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Nf(i))WN(o,N);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=o.lastRenderedReducer,E!==null))try{var B=o.lastRenderedState,H=E(B,u);if(N.hasEagerState=!0,N.eagerState=H,Ia(H,B))return nf(i,o,N,0),Lt===null&&af(),!1}catch{}finally{}if(u=lh(i,o,N,p),u!==null)return Ha(u,i,p),XN(u,o,p),!0}return!1}function $h(i,o,u,p){if(p={lane:2,revertLane:yp(),action:p,hasEagerState:!1,eagerState:null,next:null},Nf(i)){if(o)throw Error(n(479))}else o=lh(i,u,p,2),o!==null&&Ha(o,i,2)}function Nf(i){var o=i.alternate;return i===rt||o!==null&&o===rt}function WN(i,o){go=pf=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function XN(i,o,u){if((u&4194048)!==0){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Gu(i,u)}}var wf={readContext:na,use:vf,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useLayoutEffect:nr,useInsertionEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useSyncExternalStore:nr,useId:nr,useHostTransitionStatus:nr,useFormState:nr,useActionState:nr,useOptimistic:nr,useMemoCache:nr,useCacheRefresh:nr},ZN={readContext:na,use:vf,useCallback:function(i,o){return Ta().memoizedState=[i,o===void 0?null:o],i},useContext:na,useEffect:MN,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,jf(4194308,4,IN.bind(null,o,i),u)},useLayoutEffect:function(i,o){return jf(4194308,4,i,o)},useInsertionEffect:function(i,o){jf(4,2,i,o)},useMemo:function(i,o){var u=Ta();o=o===void 0?null:o;var p=i();if(dl){aa(!0);try{i()}finally{aa(!1)}}return u.memoizedState=[p,o],p},useReducer:function(i,o,u){var p=Ta();if(u!==void 0){var N=u(o);if(dl){aa(!0);try{u(o)}finally{aa(!1)}}}else N=o;return p.memoizedState=p.baseState=N,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:N},p.queue=i,i=i.dispatch=Ek.bind(null,rt,i),[p.memoizedState,i]},useRef:function(i){var o=Ta();return i={current:i},o.memoizedState=i},useState:function(i){i=Lh(i);var o=i.queue,u=YN.bind(null,rt,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:Ih,useDeferredValue:function(i,o){var u=Ta();return Bh(u,i,o)},useTransition:function(){var i=Lh(!1);return i=qN.bind(null,rt,i.queue,!0,!1),Ta().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var p=rt,N=Ta();if(xt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),Lt===null)throw Error(n(349));(ot&124)!==0||vN(p,o,u)}N.memoizedState=u;var E={value:u,getSnapshot:o};return N.queue=E,MN(yN.bind(null,p,E,i),[i]),p.flags|=2048,bo(9,yf(),bN.bind(null,p,E,u,o),null),u},useId:function(){var i=Ta(),o=Lt.identifierPrefix;if(xt){var u=bs,p=vs;u=(p&~(1<<32-xa(p)-1)).toString(32)+u,o="«"+o+"R"+u,u=gf++,0<u&&(o+="H"+u.toString(32)),o+="»"}else u=bk++,o="«"+o+"r"+u.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:Uh,useFormState:TN,useActionState:TN,useOptimistic:function(i){var o=Ta();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=$h.bind(null,rt,!0,u),u.dispatch=o,[i,o]},useMemoCache:Ph,useCacheRefresh:function(){return Ta().memoizedState=_k.bind(null,rt)}},QN={readContext:na,use:vf,useCallback:zN,useContext:na,useEffect:FN,useImperativeHandle:BN,useInsertionEffect:LN,useLayoutEffect:RN,useMemo:UN,useReducer:bf,useRef:PN,useState:function(){return bf(Ns)},useDebugValue:Ih,useDeferredValue:function(i,o){var u=cr();return $N(u,At.memoizedState,i,o)},useTransition:function(){var i=bf(Ns)[0],o=cr().memoizedState;return[typeof i=="boolean"?i:Wc(i),o]},useSyncExternalStore:gN,useId:GN,useHostTransitionStatus:Uh,useFormState:DN,useActionState:DN,useOptimistic:function(i,o){var u=cr();return wN(u,At,i,o)},useMemoCache:Ph,useCacheRefresh:KN},Sk={readContext:na,use:vf,useCallback:zN,useContext:na,useEffect:FN,useImperativeHandle:BN,useInsertionEffect:LN,useLayoutEffect:RN,useMemo:UN,useReducer:Fh,useRef:PN,useState:function(){return Fh(Ns)},useDebugValue:Ih,useDeferredValue:function(i,o){var u=cr();return At===null?Bh(u,i,o):$N(u,At.memoizedState,i,o)},useTransition:function(){var i=Fh(Ns)[0],o=cr().memoizedState;return[typeof i=="boolean"?i:Wc(i),o]},useSyncExternalStore:gN,useId:GN,useHostTransitionStatus:Uh,useFormState:kN,useActionState:kN,useOptimistic:function(i,o){var u=cr();return At!==null?wN(u,At,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Ph,useCacheRefresh:KN},yo=null,Qc=0;function _f(i){var o=Qc;return Qc+=1,yo===null&&(yo=[]),cN(yo,i,o)}function Jc(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Ef(i,o){throw o.$$typeof===h?Error(n(525)):(i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function JN(i){var o=i._init;return o(i._payload)}function ew(i){function o(ue,oe){if(i){var xe=ue.deletions;xe===null?(ue.deletions=[oe],ue.flags|=16):xe.push(oe)}}function u(ue,oe){if(!i)return null;for(;oe!==null;)o(ue,oe),oe=oe.sibling;return null}function p(ue){for(var oe=new Map;ue!==null;)ue.key!==null?oe.set(ue.key,ue):oe.set(ue.index,ue),ue=ue.sibling;return oe}function N(ue,oe){return ue=gs(ue,oe),ue.index=0,ue.sibling=null,ue}function E(ue,oe,xe){return ue.index=xe,i?(xe=ue.alternate,xe!==null?(xe=xe.index,xe<oe?(ue.flags|=67108866,oe):xe):(ue.flags|=67108866,oe)):(ue.flags|=1048576,oe)}function B(ue){return i&&ue.alternate===null&&(ue.flags|=67108866),ue}function H(ue,oe,xe,Ae){return oe===null||oe.tag!==6?(oe=ch(xe,ue.mode,Ae),oe.return=ue,oe):(oe=N(oe,xe),oe.return=ue,oe)}function ie(ue,oe,xe,Ae){var $e=xe.type;return $e===y?Se(ue,oe,xe.props.children,Ae,xe.key):oe!==null&&(oe.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===M&&JN($e)===oe.type)?(oe=N(oe,xe.props),Jc(oe,xe),oe.return=ue,oe):(oe=lf(xe.type,xe.key,xe.props,null,ue.mode,Ae),Jc(oe,xe),oe.return=ue,oe)}function he(ue,oe,xe,Ae){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==xe.containerInfo||oe.stateNode.implementation!==xe.implementation?(oe=dh(xe,ue.mode,Ae),oe.return=ue,oe):(oe=N(oe,xe.children||[]),oe.return=ue,oe)}function Se(ue,oe,xe,Ae,$e){return oe===null||oe.tag!==7?(oe=rl(xe,ue.mode,Ae,$e),oe.return=ue,oe):(oe=N(oe,xe),oe.return=ue,oe)}function Ce(ue,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=ch(""+oe,ue.mode,xe),oe.return=ue,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case v:return xe=lf(oe.type,oe.key,oe.props,null,ue.mode,xe),Jc(xe,oe),xe.return=ue,xe;case g:return oe=dh(oe,ue.mode,xe),oe.return=ue,oe;case M:var Ae=oe._init;return oe=Ae(oe._payload),Ce(ue,oe,xe)}if(V(oe)||P(oe))return oe=rl(oe,ue.mode,xe,null),oe.return=ue,oe;if(typeof oe.then=="function")return Ce(ue,_f(oe),xe);if(oe.$$typeof===S)return Ce(ue,uf(ue,oe),xe);Ef(ue,oe)}return null}function be(ue,oe,xe,Ae){var $e=oe!==null?oe.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return $e!==null?null:H(ue,oe,""+xe,Ae);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case v:return xe.key===$e?ie(ue,oe,xe,Ae):null;case g:return xe.key===$e?he(ue,oe,xe,Ae):null;case M:return $e=xe._init,xe=$e(xe._payload),be(ue,oe,xe,Ae)}if(V(xe)||P(xe))return $e!==null?null:Se(ue,oe,xe,Ae,null);if(typeof xe.then=="function")return be(ue,oe,_f(xe),Ae);if(xe.$$typeof===S)return be(ue,oe,uf(ue,xe),Ae);Ef(ue,xe)}return null}function je(ue,oe,xe,Ae,$e){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return ue=ue.get(xe)||null,H(oe,ue,""+Ae,$e);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case v:return ue=ue.get(Ae.key===null?xe:Ae.key)||null,ie(oe,ue,Ae,$e);case g:return ue=ue.get(Ae.key===null?xe:Ae.key)||null,he(oe,ue,Ae,$e);case M:var nt=Ae._init;return Ae=nt(Ae._payload),je(ue,oe,xe,Ae,$e)}if(V(Ae)||P(Ae))return ue=ue.get(xe)||null,Se(oe,ue,Ae,$e,null);if(typeof Ae.then=="function")return je(ue,oe,xe,_f(Ae),$e);if(Ae.$$typeof===S)return je(ue,oe,xe,uf(oe,Ae),$e);Ef(oe,Ae)}return null}function Xe(ue,oe,xe,Ae){for(var $e=null,nt=null,Ve=oe,Ye=oe=0,kr=null;Ve!==null&&Ye<xe.length;Ye++){Ve.index>Ye?(kr=Ve,Ve=null):kr=Ve.sibling;var dt=be(ue,Ve,xe[Ye],Ae);if(dt===null){Ve===null&&(Ve=kr);break}i&&Ve&&dt.alternate===null&&o(ue,Ve),oe=E(dt,oe,Ye),nt===null?$e=dt:nt.sibling=dt,nt=dt,Ve=kr}if(Ye===xe.length)return u(ue,Ve),xt&&nl(ue,Ye),$e;if(Ve===null){for(;Ye<xe.length;Ye++)Ve=Ce(ue,xe[Ye],Ae),Ve!==null&&(oe=E(Ve,oe,Ye),nt===null?$e=Ve:nt.sibling=Ve,nt=Ve);return xt&&nl(ue,Ye),$e}for(Ve=p(Ve);Ye<xe.length;Ye++)kr=je(Ve,ue,Ye,xe[Ye],Ae),kr!==null&&(i&&kr.alternate!==null&&Ve.delete(kr.key===null?Ye:kr.key),oe=E(kr,oe,Ye),nt===null?$e=kr:nt.sibling=kr,nt=kr);return i&&Ve.forEach(function(Si){return o(ue,Si)}),xt&&nl(ue,Ye),$e}function Ke(ue,oe,xe,Ae){if(xe==null)throw Error(n(151));for(var $e=null,nt=null,Ve=oe,Ye=oe=0,kr=null,dt=xe.next();Ve!==null&&!dt.done;Ye++,dt=xe.next()){Ve.index>Ye?(kr=Ve,Ve=null):kr=Ve.sibling;var Si=be(ue,Ve,dt.value,Ae);if(Si===null){Ve===null&&(Ve=kr);break}i&&Ve&&Si.alternate===null&&o(ue,Ve),oe=E(Si,oe,Ye),nt===null?$e=Si:nt.sibling=Si,nt=Si,Ve=kr}if(dt.done)return u(ue,Ve),xt&&nl(ue,Ye),$e;if(Ve===null){for(;!dt.done;Ye++,dt=xe.next())dt=Ce(ue,dt.value,Ae),dt!==null&&(oe=E(dt,oe,Ye),nt===null?$e=dt:nt.sibling=dt,nt=dt);return xt&&nl(ue,Ye),$e}for(Ve=p(Ve);!dt.done;Ye++,dt=xe.next())dt=je(Ve,ue,Ye,dt.value,Ae),dt!==null&&(i&&dt.alternate!==null&&Ve.delete(dt.key===null?Ye:dt.key),oe=E(dt,oe,Ye),nt===null?$e=dt:nt.sibling=dt,nt=dt);return i&&Ve.forEach(function(A8){return o(ue,A8)}),xt&&nl(ue,Ye),$e}function Tt(ue,oe,xe,Ae){if(typeof xe=="object"&&xe!==null&&xe.type===y&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case v:e:{for(var $e=xe.key;oe!==null;){if(oe.key===$e){if($e=xe.type,$e===y){if(oe.tag===7){u(ue,oe.sibling),Ae=N(oe,xe.props.children),Ae.return=ue,ue=Ae;break e}}else if(oe.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===M&&JN($e)===oe.type){u(ue,oe.sibling),Ae=N(oe,xe.props),Jc(Ae,xe),Ae.return=ue,ue=Ae;break e}u(ue,oe);break}else o(ue,oe);oe=oe.sibling}xe.type===y?(Ae=rl(xe.props.children,ue.mode,Ae,xe.key),Ae.return=ue,ue=Ae):(Ae=lf(xe.type,xe.key,xe.props,null,ue.mode,Ae),Jc(Ae,xe),Ae.return=ue,ue=Ae)}return B(ue);case g:e:{for($e=xe.key;oe!==null;){if(oe.key===$e)if(oe.tag===4&&oe.stateNode.containerInfo===xe.containerInfo&&oe.stateNode.implementation===xe.implementation){u(ue,oe.sibling),Ae=N(oe,xe.children||[]),Ae.return=ue,ue=Ae;break e}else{u(ue,oe);break}else o(ue,oe);oe=oe.sibling}Ae=dh(xe,ue.mode,Ae),Ae.return=ue,ue=Ae}return B(ue);case M:return $e=xe._init,xe=$e(xe._payload),Tt(ue,oe,xe,Ae)}if(V(xe))return Xe(ue,oe,xe,Ae);if(P(xe)){if($e=P(xe),typeof $e!="function")throw Error(n(150));return xe=$e.call(xe),Ke(ue,oe,xe,Ae)}if(typeof xe.then=="function")return Tt(ue,oe,_f(xe),Ae);if(xe.$$typeof===S)return Tt(ue,oe,uf(ue,xe),Ae);Ef(ue,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint"?(xe=""+xe,oe!==null&&oe.tag===6?(u(ue,oe.sibling),Ae=N(oe,xe),Ae.return=ue,ue=Ae):(u(ue,oe),Ae=ch(xe,ue.mode,Ae),Ae.return=ue,ue=Ae),B(ue)):u(ue,oe)}return function(ue,oe,xe,Ae){try{Qc=0;var $e=Tt(ue,oe,xe,Ae);return yo=null,$e}catch(Ve){if(Ve===qc||Ve===mf)throw Ve;var nt=Ba(29,Ve,null,ue.mode);return nt.lanes=Ae,nt.return=ue,nt}finally{}}}var jo=ew(!0),tw=ew(!1),vn=Z(null),ts=null;function ui(i){var o=i.alternate;U(yr,yr.current&1),U(vn,i),ts===null&&(o===null||po.current!==null||o.memoizedState!==null)&&(ts=i)}function rw(i){if(i.tag===22){if(U(yr,yr.current),U(vn,i),ts===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(ts=i)}}else fi()}function fi(){U(yr,yr.current),U(vn,vn.current)}function ws(i){F(vn),ts===i&&(ts=null),F(yr)}var yr=Z(0);function Sf(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||kp(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function qh(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:x({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Hh={enqueueSetState:function(i,o,u){i=i._reactInternals;var p=qa(),N=oi(p);N.payload=o,u!=null&&(N.callback=u),o=ci(i,N,p),o!==null&&(Ha(o,i,p),Vc(o,i,p))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=qa(),N=oi(p);N.tag=1,N.payload=o,u!=null&&(N.callback=u),o=ci(i,N,p),o!==null&&(Ha(o,i,p),Vc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=qa(),p=oi(u);p.tag=2,o!=null&&(p.callback=o),o=ci(i,p,u),o!==null&&(Ha(o,i,u),Vc(o,i,u))}};function aw(i,o,u,p,N,E,B){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,E,B):o.prototype&&o.prototype.isPureReactComponent?!Fc(u,p)||!Fc(N,E):!0}function nw(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&Hh.enqueueReplaceState(o,o.state,null)}function ul(i,o){var u=o;if("ref"in o){u={};for(var p in o)p!=="ref"&&(u[p]=o[p])}if(i=i.defaultProps){u===o&&(u=x({},u));for(var N in i)u[N]===void 0&&(u[N]=i[N])}return u}var Af=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function sw(i){Af(i)}function iw(i){console.error(i)}function lw(i){Af(i)}function Cf(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function ow(i,o,u){try{var p=i.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function Vh(i,o,u){return u=oi(u),u.tag=3,u.payload={element:null},u.callback=function(){Cf(i,o)},u}function cw(i){return i=oi(i),i.tag=3,i}function dw(i,o,u,p){var N=u.type.getDerivedStateFromError;if(typeof N=="function"){var E=p.value;i.payload=function(){return N(E)},i.callback=function(){ow(o,u,p)}}var B=u.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(i.callback=function(){ow(o,u,p),typeof N!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var H=p.stack;this.componentDidCatch(p.value,{componentStack:H!==null?H:""})})}function Ak(i,o,u,p,N){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=u.alternate,o!==null&&zc(o,u,N,!0),u=vn.current,u!==null){switch(u.tag){case 13:return ts===null?hp():u.alternate===null&&Qt===0&&(Qt=3),u.flags&=-257,u.flags|=65536,u.lanes=N,p===yh?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([p]):o.add(p),gp(i,p,N)),!1;case 22:return u.flags|=65536,p===yh?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([p]):u.add(p)),gp(i,p,N)),!1}throw Error(n(435,u.tag))}return gp(i,p,N),hp(),!1}if(xt)return o=vn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=N,p!==mh&&(i=Error(n(422),{cause:p}),Bc(xn(i,u)))):(p!==mh&&(o=Error(n(423),{cause:p}),Bc(xn(o,u))),i=i.current.alternate,i.flags|=65536,N&=-N,i.lanes|=N,p=xn(p,u),N=Vh(i.stateNode,p,N),wh(i,N),Qt!==4&&(Qt=2)),!1;var E=Error(n(520),{cause:p});if(E=xn(E,u),id===null?id=[E]:id.push(E),Qt!==4&&(Qt=2),o===null)return!0;p=xn(p,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=N&-N,u.lanes|=i,i=Vh(u.stateNode,p,i),wh(u,i),!1;case 1:if(o=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(vi===null||!vi.has(E))))return u.flags|=65536,N&=-N,u.lanes|=N,N=cw(N),dw(N,i,u,p),wh(u,N),!1}u=u.return}while(u!==null);return!1}var uw=Error(n(461)),Dr=!1;function Ur(i,o,u,p){o.child=i===null?tw(o,null,u,p):jo(o,i.child,u,p)}function fw(i,o,u,p,N){u=u.render;var E=o.ref;if("ref"in p){var B={};for(var H in p)H!=="ref"&&(B[H]=p[H])}else B=p;return ol(o),p=Ch(i,o,u,B,E,N),H=Th(),i!==null&&!Dr?(Dh(i,o,N),_s(i,o,N)):(xt&&H&&uh(o),o.flags|=1,Ur(i,o,p,N),o.child)}function mw(i,o,u,p,N){if(i===null){var E=u.type;return typeof E=="function"&&!oh(E)&&E.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=E,xw(i,o,E,p,N)):(i=lf(u.type,null,p,o,o.mode,N),i.ref=o.ref,i.return=o,o.child=i)}if(E=i.child,!Jh(i,N)){var B=E.memoizedProps;if(u=u.compare,u=u!==null?u:Fc,u(B,p)&&i.ref===o.ref)return _s(i,o,N)}return o.flags|=1,i=gs(E,p),i.ref=o.ref,i.return=o,o.child=i}function xw(i,o,u,p,N){if(i!==null){var E=i.memoizedProps;if(Fc(E,p)&&i.ref===o.ref)if(Dr=!1,o.pendingProps=p=E,Jh(i,N))(i.flags&131072)!==0&&(Dr=!0);else return o.lanes=i.lanes,_s(i,o,N)}return Gh(i,o,u,p,N)}function hw(i,o,u){var p=o.pendingProps,N=p.children,E=i!==null?i.memoizedState:null;if(p.mode==="hidden"){if((o.flags&128)!==0){if(p=E!==null?E.baseLanes|u:u,i!==null){for(N=o.child=i.child,E=0;N!==null;)E=E|N.lanes|N.childLanes,N=N.sibling;o.childLanes=E&~p}else o.childLanes=0,o.child=null;return pw(i,o,p,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&ff(o,E!==null?E.cachePool:null),E!==null?xN(o,E):Eh(),rw(o);else return o.lanes=o.childLanes=536870912,pw(i,o,E!==null?E.baseLanes|u:u,u)}else E!==null?(ff(o,E.cachePool),xN(o,E),fi(),o.memoizedState=null):(i!==null&&ff(o,null),Eh(),fi());return Ur(i,o,N,u),o.child}function pw(i,o,u,p){var N=bh();return N=N===null?null:{parent:br._currentValue,pool:N},o.memoizedState={baseLanes:u,cachePool:N},i!==null&&ff(o,null),Eh(),rw(o),i!==null&&zc(i,o,p,!0),null}function Tf(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function Gh(i,o,u,p,N){return ol(o),u=Ch(i,o,u,p,void 0,N),p=Th(),i!==null&&!Dr?(Dh(i,o,N),_s(i,o,N)):(xt&&p&&uh(o),o.flags|=1,Ur(i,o,u,N),o.child)}function gw(i,o,u,p,N,E){return ol(o),o.updateQueue=null,u=pN(o,p,u,N),hN(i),p=Th(),i!==null&&!Dr?(Dh(i,o,E),_s(i,o,E)):(xt&&p&&uh(o),o.flags|=1,Ur(i,o,u,E),o.child)}function vw(i,o,u,p,N){if(ol(o),o.stateNode===null){var E=uo,B=u.contextType;typeof B=="object"&&B!==null&&(E=na(B)),E=new u(p,E),o.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Hh,o.stateNode=E,E._reactInternals=o,E=o.stateNode,E.props=p,E.state=o.memoizedState,E.refs={},jh(o),B=u.contextType,E.context=typeof B=="object"&&B!==null?na(B):uo,E.state=o.memoizedState,B=u.getDerivedStateFromProps,typeof B=="function"&&(qh(o,u,B,p),E.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(B=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),B!==E.state&&Hh.enqueueReplaceState(E,E.state,null),Kc(o,p,E,N),Gc(),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(i===null){E=o.stateNode;var H=o.memoizedProps,ie=ul(u,H);E.props=ie;var he=E.context,Se=u.contextType;B=uo,typeof Se=="object"&&Se!==null&&(B=na(Se));var Ce=u.getDerivedStateFromProps;Se=typeof Ce=="function"||typeof E.getSnapshotBeforeUpdate=="function",H=o.pendingProps!==H,Se||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(H||he!==B)&&nw(o,E,p,B),li=!1;var be=o.memoizedState;E.state=be,Kc(o,p,E,N),Gc(),he=o.memoizedState,H||be!==he||li?(typeof Ce=="function"&&(qh(o,u,Ce,p),he=o.memoizedState),(ie=li||aw(o,u,ie,p,be,he,B))?(Se||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=he),E.props=p,E.state=he,E.context=B,p=ie):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{E=o.stateNode,Nh(i,o),B=o.memoizedProps,Se=ul(u,B),E.props=Se,Ce=o.pendingProps,be=E.context,he=u.contextType,ie=uo,typeof he=="object"&&he!==null&&(ie=na(he)),H=u.getDerivedStateFromProps,(he=typeof H=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B!==Ce||be!==ie)&&nw(o,E,p,ie),li=!1,be=o.memoizedState,E.state=be,Kc(o,p,E,N),Gc();var je=o.memoizedState;B!==Ce||be!==je||li||i!==null&&i.dependencies!==null&&df(i.dependencies)?(typeof H=="function"&&(qh(o,u,H,p),je=o.memoizedState),(Se=li||aw(o,u,Se,p,be,je,ie)||i!==null&&i.dependencies!==null&&df(i.dependencies))?(he||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,je,ie),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,je,ie)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||B===i.memoizedProps&&be===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===i.memoizedProps&&be===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=je),E.props=p,E.state=je,E.context=ie,p=Se):(typeof E.componentDidUpdate!="function"||B===i.memoizedProps&&be===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===i.memoizedProps&&be===i.memoizedState||(o.flags|=1024),p=!1)}return E=p,Tf(i,o),p=(o.flags&128)!==0,E||p?(E=o.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:E.render(),o.flags|=1,i!==null&&p?(o.child=jo(o,i.child,null,N),o.child=jo(o,null,u,N)):Ur(i,o,u,N),o.memoizedState=E.state,i=o.child):i=_s(i,o,N),i}function bw(i,o,u,p){return Ic(),o.flags|=256,Ur(i,o,u,p),o.child}var Kh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yh(i){return{baseLanes:i,cachePool:iN()}}function Wh(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=bn),i}function yw(i,o,u){var p=o.pendingProps,N=!1,E=(o.flags&128)!==0,B;if((B=E)||(B=i!==null&&i.memoizedState===null?!1:(yr.current&2)!==0),B&&(N=!0,o.flags&=-129),B=(o.flags&32)!==0,o.flags&=-33,i===null){if(xt){if(N?ui(o):fi(),xt){var H=Zt,ie;if(ie=H){e:{for(ie=H,H=es;ie.nodeType!==8;){if(!H){H=null;break e}if(ie=Un(ie.nextSibling),ie===null){H=null;break e}}H=ie}H!==null?(o.memoizedState={dehydrated:H,treeContext:al!==null?{id:vs,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},ie=Ba(18,null,null,0),ie.stateNode=H,ie.return=o,o.child=ie,ha=o,Zt=null,ie=!0):ie=!1}ie||il(o)}if(H=o.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return kp(H)?o.lanes=32:o.lanes=536870912,null;ws(o)}return H=p.children,p=p.fallback,N?(fi(),N=o.mode,H=Df({mode:"hidden",children:H},N),p=rl(p,N,u,null),H.return=o,p.return=o,H.sibling=p,o.child=H,N=o.child,N.memoizedState=Yh(u),N.childLanes=Wh(i,B,u),o.memoizedState=Kh,p):(ui(o),Xh(o,H))}if(ie=i.memoizedState,ie!==null&&(H=ie.dehydrated,H!==null)){if(E)o.flags&256?(ui(o),o.flags&=-257,o=Zh(i,o,u)):o.memoizedState!==null?(fi(),o.child=i.child,o.flags|=128,o=null):(fi(),N=p.fallback,H=o.mode,p=Df({mode:"visible",children:p.children},H),N=rl(N,H,u,null),N.flags|=2,p.return=o,N.return=o,p.sibling=N,o.child=p,jo(o,i.child,null,u),p=o.child,p.memoizedState=Yh(u),p.childLanes=Wh(i,B,u),o.memoizedState=Kh,o=N);else if(ui(o),kp(H)){if(B=H.nextSibling&&H.nextSibling.dataset,B)var he=B.dgst;B=he,p=Error(n(419)),p.stack="",p.digest=B,Bc({value:p,source:null,stack:null}),o=Zh(i,o,u)}else if(Dr||zc(i,o,u,!1),B=(u&i.childLanes)!==0,Dr||B){if(B=Lt,B!==null&&(p=u&-u,p=(p&42)!==0?1:Ec(p),p=(p&(B.suspendedLanes|u))!==0?0:p,p!==0&&p!==ie.retryLane))throw ie.retryLane=p,co(i,p),Ha(B,i,p),uw;H.data==="$?"||hp(),o=Zh(i,o,u)}else H.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=ie.treeContext,Zt=Un(H.nextSibling),ha=o,xt=!0,sl=null,es=!1,i!==null&&(pn[gn++]=vs,pn[gn++]=bs,pn[gn++]=al,vs=i.id,bs=i.overflow,al=o),o=Xh(o,p.children),o.flags|=4096);return o}return N?(fi(),N=p.fallback,H=o.mode,ie=i.child,he=ie.sibling,p=gs(ie,{mode:"hidden",children:p.children}),p.subtreeFlags=ie.subtreeFlags&65011712,he!==null?N=gs(he,N):(N=rl(N,H,u,null),N.flags|=2),N.return=o,p.return=o,p.sibling=N,o.child=p,p=N,N=o.child,H=i.child.memoizedState,H===null?H=Yh(u):(ie=H.cachePool,ie!==null?(he=br._currentValue,ie=ie.parent!==he?{parent:he,pool:he}:ie):ie=iN(),H={baseLanes:H.baseLanes|u,cachePool:ie}),N.memoizedState=H,N.childLanes=Wh(i,B,u),o.memoizedState=Kh,p):(ui(o),u=i.child,i=u.sibling,u=gs(u,{mode:"visible",children:p.children}),u.return=o,u.sibling=null,i!==null&&(B=o.deletions,B===null?(o.deletions=[i],o.flags|=16):B.push(i)),o.child=u,o.memoizedState=null,u)}function Xh(i,o){return o=Df({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Df(i,o){return i=Ba(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Zh(i,o,u){return jo(o,i.child,null,u),i=Xh(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function jw(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),hh(i.return,o,u)}function Qh(i,o,u,p,N){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:N}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=u,E.tailMode=N)}function Nw(i,o,u){var p=o.pendingProps,N=p.revealOrder,E=p.tail;if(Ur(i,o,p.children,u),p=yr.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&jw(i,u,o);else if(i.tag===19)jw(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}switch(U(yr,p),N){case"forwards":for(u=o.child,N=null;u!==null;)i=u.alternate,i!==null&&Sf(i)===null&&(N=u),u=u.sibling;u=N,u===null?(N=o.child,o.child=null):(N=u.sibling,u.sibling=null),Qh(o,!1,N,u,E);break;case"backwards":for(u=null,N=o.child,o.child=null;N!==null;){if(i=N.alternate,i!==null&&Sf(i)===null){o.child=N;break}i=N.sibling,N.sibling=u,u=N,N=i}Qh(o,!0,u,null,E);break;case"together":Qh(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function _s(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),gi|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(zc(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,u=gs(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=gs(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function Jh(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&df(i)))}function Ck(i,o,u){switch(o.tag){case 3:ke(o,o.stateNode.containerInfo),ii(o,br,i.memoizedState.cache),Ic();break;case 27:case 5:Ee(o);break;case 4:ke(o,o.stateNode.containerInfo);break;case 10:ii(o,o.type,o.memoizedProps.value);break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(ui(o),o.flags|=128,null):(u&o.child.childLanes)!==0?yw(i,o,u):(ui(o),i=_s(i,o,u),i!==null?i.sibling:null);ui(o);break;case 19:var N=(i.flags&128)!==0;if(p=(u&o.childLanes)!==0,p||(zc(i,o,u,!1),p=(u&o.childLanes)!==0),N){if(p)return Nw(i,o,u);o.flags|=128}if(N=o.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),U(yr,yr.current),p)break;return null;case 22:case 23:return o.lanes=0,hw(i,o,u);case 24:ii(o,br,i.memoizedState.cache)}return _s(i,o,u)}function ww(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)Dr=!0;else{if(!Jh(i,u)&&(o.flags&128)===0)return Dr=!1,Ck(i,o,u);Dr=(i.flags&131072)!==0}else Dr=!1,xt&&(o.flags&1048576)!==0&&Jj(o,cf,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var p=o.elementType,N=p._init;if(p=N(p._payload),o.type=p,typeof p=="function")oh(p)?(i=ul(p,i),o.tag=1,o=vw(null,o,p,i,u)):(o.tag=0,o=Gh(null,o,p,i,u));else{if(p!=null){if(N=p.$$typeof,N===D){o.tag=11,o=fw(null,o,p,i,u);break e}else if(N===C){o.tag=14,o=mw(null,o,p,i,u);break e}}throw o=z(p)||p,Error(n(306,o,""))}}return o;case 0:return Gh(i,o,o.type,o.pendingProps,u);case 1:return p=o.type,N=ul(p,o.pendingProps),vw(i,o,p,N,u);case 3:e:{if(ke(o,o.stateNode.containerInfo),i===null)throw Error(n(387));p=o.pendingProps;var E=o.memoizedState;N=E.element,Nh(i,o),Kc(o,p,null,u);var B=o.memoizedState;if(p=B.cache,ii(o,br,p),p!==E.cache&&ph(o,[br],u,!0),Gc(),p=B.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:B.cache},o.updateQueue.baseState=E,o.memoizedState=E,o.flags&256){o=bw(i,o,p,u);break e}else if(p!==N){N=xn(Error(n(424)),o),Bc(N),o=bw(i,o,p,u);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Zt=Un(i.firstChild),ha=o,xt=!0,sl=null,es=!0,u=tw(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ic(),p===N){o=_s(i,o,u);break e}Ur(i,o,p,u)}o=o.child}return o;case 26:return Tf(i,o),i===null?(u=A2(o.type,null,o.pendingProps,null))?o.memoizedState=u:xt||(u=o.type,i=o.pendingProps,p=Hf(ee.current).createElement(u),p[Cr]=o,p[Tr]=i,qr(p,u,i),me(p),o.stateNode=p):o.memoizedState=A2(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ee(o),i===null&&xt&&(p=o.stateNode=_2(o.type,o.pendingProps,ee.current),ha=o,es=!0,N=Zt,ji(o.type)?(Pp=N,Zt=Un(p.firstChild)):Zt=N),Ur(i,o,o.pendingProps.children,u),Tf(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&xt&&((N=p=Zt)&&(p=r8(p,o.type,o.pendingProps,es),p!==null?(o.stateNode=p,ha=o,Zt=Un(p.firstChild),es=!1,N=!0):N=!1),N||il(o)),Ee(o),N=o.type,E=o.pendingProps,B=i!==null?i.memoizedProps:null,p=E.children,Tp(N,E)?p=null:B!==null&&Tp(N,B)&&(o.flags|=32),o.memoizedState!==null&&(N=Ch(i,o,yk,null,null,u),hd._currentValue=N),Tf(i,o),Ur(i,o,p,u),o.child;case 6:return i===null&&xt&&((i=u=Zt)&&(u=a8(u,o.pendingProps,es),u!==null?(o.stateNode=u,ha=o,Zt=null,i=!0):i=!1),i||il(o)),null;case 13:return yw(i,o,u);case 4:return ke(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=jo(o,null,p,u):Ur(i,o,p,u),o.child;case 11:return fw(i,o,o.type,o.pendingProps,u);case 7:return Ur(i,o,o.pendingProps,u),o.child;case 8:return Ur(i,o,o.pendingProps.children,u),o.child;case 12:return Ur(i,o,o.pendingProps.children,u),o.child;case 10:return p=o.pendingProps,ii(o,o.type,p.value),Ur(i,o,p.children,u),o.child;case 9:return N=o.type._context,p=o.pendingProps.children,ol(o),N=na(N),p=p(N),o.flags|=1,Ur(i,o,p,u),o.child;case 14:return mw(i,o,o.type,o.pendingProps,u);case 15:return xw(i,o,o.type,o.pendingProps,u);case 19:return Nw(i,o,u);case 31:return p=o.pendingProps,u=o.mode,p={mode:p.mode,children:p.children},i===null?(u=Df(p,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=gs(i.child,p),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return hw(i,o,u);case 24:return ol(o),p=na(br),i===null?(N=bh(),N===null&&(N=Lt,E=gh(),N.pooledCache=E,E.refCount++,E!==null&&(N.pooledCacheLanes|=u),N=E),o.memoizedState={parent:p,cache:N},jh(o),ii(o,br,N)):((i.lanes&u)!==0&&(Nh(i,o),Kc(o,null,null,u),Gc()),N=i.memoizedState,E=o.memoizedState,N.parent!==p?(N={parent:p,cache:p},o.memoizedState=N,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=N),ii(o,br,p)):(p=E.cache,ii(o,br,p),p!==N.cache&&ph(o,[br],u,!0))),Ur(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Es(i){i.flags|=4}function _w(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!k2(o)){if(o=vn.current,o!==null&&((ot&4194048)===ot?ts!==null:(ot&62914560)!==ot&&(ot&536870912)===0||o!==ts))throw Hc=yh,lN;i.flags|=8192}}function Of(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?wc():536870912,i.lanes|=o,Eo|=o)}function ed(i,o){if(!xt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Wt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var N=i.child;N!==null;)u|=N.lanes|N.childLanes,p|=N.subtreeFlags&65011712,p|=N.flags&65011712,N.return=i,N=N.sibling;else for(N=i.child;N!==null;)u|=N.lanes|N.childLanes,p|=N.subtreeFlags,p|=N.flags,N.return=i,N=N.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function Tk(i,o,u){var p=o.pendingProps;switch(fh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(o),null;case 1:return Wt(o),null;case 3:return u=o.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),js(br),fe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Rc(o)?Es(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,rN())),Wt(o),null;case 26:return u=o.memoizedState,i===null?(Es(o),u!==null?(Wt(o),_w(o,u)):(Wt(o),o.flags&=-16777217)):u?u!==i.memoizedState?(Es(o),Wt(o),_w(o,u)):(Wt(o),o.flags&=-16777217):(i.memoizedProps!==p&&Es(o),Wt(o),o.flags&=-16777217),null;case 27:Ie(o),u=ee.current;var N=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==p&&Es(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return Wt(o),null}i=Y.current,Rc(o)?eN(o):(i=_2(N,p,u),o.stateNode=i,Es(o))}return Wt(o),null;case 5:if(Ie(o),u=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==p&&Es(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return Wt(o),null}if(i=Y.current,Rc(o))eN(o);else{switch(N=Hf(ee.current),i){case 1:i=N.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=N.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=N.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=N.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=N.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof p.is=="string"?N.createElement("select",{is:p.is}):N.createElement("select"),p.multiple?i.multiple=!0:p.size&&(i.size=p.size);break;default:i=typeof p.is=="string"?N.createElement(u,{is:p.is}):N.createElement(u)}}i[Cr]=o,i[Tr]=p;e:for(N=o.child;N!==null;){if(N.tag===5||N.tag===6)i.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===o)break e;for(;N.sibling===null;){if(N.return===null||N.return===o)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}o.stateNode=i;e:switch(qr(i,u,p),u){case"button":case"input":case"select":case"textarea":i=!!p.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Es(o)}}return Wt(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==p&&Es(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(n(166));if(i=ee.current,Rc(o)){if(i=o.stateNode,u=o.memoizedProps,p=null,N=ha,N!==null)switch(N.tag){case 27:case 5:p=N.memoizedProps}i[Cr]=o,i=!!(i.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||g2(i.nodeValue,u)),i||il(o)}else i=Hf(i).createTextNode(p),i[Cr]=o,o.stateNode=i}return Wt(o),null;case 13:if(p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(N=Rc(o),p!==null&&p.dehydrated!==null){if(i===null){if(!N)throw Error(n(318));if(N=o.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(n(317));N[Cr]=o}else Ic(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Wt(o),N=!1}else N=rN(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=N),N=!0;if(!N)return o.flags&256?(ws(o),o):(ws(o),null)}if(ws(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=p!==null,i=i!==null&&i.memoizedState!==null,u){p=o.child,N=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(N=p.alternate.memoizedState.cachePool.pool);var E=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==N&&(p.flags|=2048)}return u!==i&&u&&(o.child.flags|=8192),Of(o,o.updateQueue),Wt(o),null;case 4:return fe(),i===null&&_p(o.stateNode.containerInfo),Wt(o),null;case 10:return js(o.type),Wt(o),null;case 19:if(F(yr),N=o.memoizedState,N===null)return Wt(o),null;if(p=(o.flags&128)!==0,E=N.rendering,E===null)if(p)ed(N,!1);else{if(Qt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(E=Sf(i),E!==null){for(o.flags|=128,ed(N,!1),i=E.updateQueue,o.updateQueue=i,Of(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)Qj(u,i),u=u.sibling;return U(yr,yr.current&1|2),o.child}i=i.sibling}N.tail!==null&&Re()>Mf&&(o.flags|=128,p=!0,ed(N,!1),o.lanes=4194304)}else{if(!p)if(i=Sf(E),i!==null){if(o.flags|=128,p=!0,i=i.updateQueue,o.updateQueue=i,Of(o,i),ed(N,!0),N.tail===null&&N.tailMode==="hidden"&&!E.alternate&&!xt)return Wt(o),null}else 2*Re()-N.renderingStartTime>Mf&&u!==536870912&&(o.flags|=128,p=!0,ed(N,!1),o.lanes=4194304);N.isBackwards?(E.sibling=o.child,o.child=E):(i=N.last,i!==null?i.sibling=E:o.child=E,N.last=E)}return N.tail!==null?(o=N.tail,N.rendering=o,N.tail=o.sibling,N.renderingStartTime=Re(),o.sibling=null,i=yr.current,U(yr,p?i&1|2:i&1),o):(Wt(o),null);case 22:case 23:return ws(o),Sh(),p=o.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(u&536870912)!==0&&(o.flags&128)===0&&(Wt(o),o.subtreeFlags&6&&(o.flags|=8192)):Wt(o),u=o.updateQueue,u!==null&&Of(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048),i!==null&&F(cl),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),js(br),Wt(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function Dk(i,o){switch(fh(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return js(br),fe(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ie(o),null;case 13:if(ws(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Ic()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return F(yr),null;case 4:return fe(),null;case 10:return js(o.type),null;case 22:case 23:return ws(o),Sh(),i!==null&&F(cl),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return js(br),null;case 25:return null;default:return null}}function Ew(i,o){switch(fh(o),o.tag){case 3:js(br),fe();break;case 26:case 27:case 5:Ie(o);break;case 4:fe();break;case 13:ws(o);break;case 19:F(yr);break;case 10:js(o.type);break;case 22:case 23:ws(o),Sh(),i!==null&&F(cl);break;case 24:js(br)}}function td(i,o){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var N=p.next;u=N;do{if((u.tag&i)===i){p=void 0;var E=u.create,B=u.inst;p=E(),B.destroy=p}u=u.next}while(u!==N)}}catch(H){kt(o,o.return,H)}}function mi(i,o,u){try{var p=o.updateQueue,N=p!==null?p.lastEffect:null;if(N!==null){var E=N.next;p=E;do{if((p.tag&i)===i){var B=p.inst,H=B.destroy;if(H!==void 0){B.destroy=void 0,N=o;var ie=u,he=H;try{he()}catch(Se){kt(N,ie,Se)}}}p=p.next}while(p!==E)}}catch(Se){kt(o,o.return,Se)}}function Sw(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{mN(o,u)}catch(p){kt(i,i.return,p)}}}function Aw(i,o,u){u.props=ul(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(p){kt(i,o,p)}}function rd(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof u=="function"?i.refCleanup=u(p):u.current=p}}catch(N){kt(i,o,N)}}function rs(i,o){var u=i.ref,p=i.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(N){kt(i,o,N)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(N){kt(i,o,N)}else u.current=null}function Cw(i){var o=i.type,u=i.memoizedProps,p=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(N){kt(i,i.return,N)}}function ep(i,o,u){try{var p=i.stateNode;Zk(p,i.type,u,o),p[Tr]=o}catch(N){kt(i,i.return,N)}}function Tw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ji(i.type)||i.tag===4}function tp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Tw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ji(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rp(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=qf));else if(p!==4&&(p===27&&ji(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(rp(i,o,u),i=i.sibling;i!==null;)rp(i,o,u),i=i.sibling}function kf(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(p===27&&ji(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(kf(i,o,u),i=i.sibling;i!==null;)kf(i,o,u),i=i.sibling}function Dw(i){var o=i.stateNode,u=i.memoizedProps;try{for(var p=i.type,N=o.attributes;N.length;)o.removeAttributeNode(N[0]);qr(o,p,u),o[Cr]=i,o[Tr]=u}catch(E){kt(i,i.return,E)}}var Ss=!1,sr=!1,ap=!1,Ow=typeof WeakSet=="function"?WeakSet:Set,Or=null;function Ok(i,o){if(i=i.containerInfo,Ap=Xf,i=$j(i),th(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var N=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var B=0,H=-1,ie=-1,he=0,Se=0,Ce=i,be=null;t:for(;;){for(var je;Ce!==u||N!==0&&Ce.nodeType!==3||(H=B+N),Ce!==E||p!==0&&Ce.nodeType!==3||(ie=B+p),Ce.nodeType===3&&(B+=Ce.nodeValue.length),(je=Ce.firstChild)!==null;)be=Ce,Ce=je;for(;;){if(Ce===i)break t;if(be===u&&++he===N&&(H=B),be===E&&++Se===p&&(ie=B),(je=Ce.nextSibling)!==null)break;Ce=be,be=Ce.parentNode}Ce=je}u=H===-1||ie===-1?null:{start:H,end:ie}}else u=null}u=u||{start:0,end:0}}else u=null;for(Cp={focusedElem:i,selectionRange:u},Xf=!1,Or=o;Or!==null;)if(o=Or,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,Or=i;else for(;Or!==null;){switch(o=Or,E=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&E!==null){i=void 0,u=o,N=E.memoizedProps,E=E.memoizedState,p=u.stateNode;try{var Xe=ul(u.type,N,u.elementType===u.type);i=p.getSnapshotBeforeUpdate(Xe,E),p.__reactInternalSnapshotBeforeUpdate=i}catch(Ke){kt(u,u.return,Ke)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)Op(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Op(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=o.sibling,i!==null){i.return=o.return,Or=i;break}Or=o.return}}function kw(i,o,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:xi(i,u),p&4&&td(5,u);break;case 1:if(xi(i,u),p&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(B){kt(u,u.return,B)}else{var N=ul(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(N,o,i.__reactInternalSnapshotBeforeUpdate)}catch(B){kt(u,u.return,B)}}p&64&&Sw(u),p&512&&rd(u,u.return);break;case 3:if(xi(i,u),p&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{mN(i,o)}catch(B){kt(u,u.return,B)}}break;case 27:o===null&&p&4&&Dw(u);case 26:case 5:xi(i,u),o===null&&p&4&&Cw(u),p&512&&rd(u,u.return);break;case 12:xi(i,u);break;case 13:xi(i,u),p&4&&Fw(i,u),p&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=zk.bind(null,u),n8(i,u))));break;case 22:if(p=u.memoizedState!==null||Ss,!p){o=o!==null&&o.memoizedState!==null||sr,N=Ss;var E=sr;Ss=p,(sr=o)&&!E?hi(i,u,(u.subtreeFlags&8772)!==0):xi(i,u),Ss=N,sr=E}break;case 30:break;default:xi(i,u)}}function Pw(i){var o=i.alternate;o!==null&&(i.alternate=null,Pw(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&J(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var $t=null,Da=!1;function As(i,o,u){for(u=u.child;u!==null;)Mw(i,o,u),u=u.sibling}function Mw(i,o,u){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(xs,u)}catch{}switch(u.tag){case 26:sr||rs(u,o),As(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:sr||rs(u,o);var p=$t,N=Da;ji(u.type)&&($t=u.stateNode,Da=!1),As(i,o,u),ud(u.stateNode),$t=p,Da=N;break;case 5:sr||rs(u,o);case 6:if(p=$t,N=Da,$t=null,As(i,o,u),$t=p,Da=N,$t!==null)if(Da)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(u.stateNode)}catch(E){kt(u,o,E)}else try{$t.removeChild(u.stateNode)}catch(E){kt(u,o,E)}break;case 18:$t!==null&&(Da?(i=$t,N2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),bd(i)):N2($t,u.stateNode));break;case 4:p=$t,N=Da,$t=u.stateNode.containerInfo,Da=!0,As(i,o,u),$t=p,Da=N;break;case 0:case 11:case 14:case 15:sr||mi(2,u,o),sr||mi(4,u,o),As(i,o,u);break;case 1:sr||(rs(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"&&Aw(u,o,p)),As(i,o,u);break;case 21:As(i,o,u);break;case 22:sr=(p=sr)||u.memoizedState!==null,As(i,o,u),sr=p;break;default:As(i,o,u)}}function Fw(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{bd(i)}catch(u){kt(o,o.return,u)}}function kk(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Ow),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Ow),o;default:throw Error(n(435,i.tag))}}function np(i,o){var u=kk(i);o.forEach(function(p){var N=Uk.bind(null,i,p);u.has(p)||(u.add(p),p.then(N,N))})}function za(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var N=u[p],E=i,B=o,H=B;e:for(;H!==null;){switch(H.tag){case 27:if(ji(H.type)){$t=H.stateNode,Da=!1;break e}break;case 5:$t=H.stateNode,Da=!1;break e;case 3:case 4:$t=H.stateNode.containerInfo,Da=!0;break e}H=H.return}if($t===null)throw Error(n(160));Mw(E,B,N),$t=null,Da=!1,E=N.alternate,E!==null&&(E.return=null),N.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Lw(o,i),o=o.sibling}var zn=null;function Lw(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:za(o,i),Ua(i),p&4&&(mi(3,i,i.return),td(3,i),mi(5,i,i.return));break;case 1:za(o,i),Ua(i),p&512&&(sr||u===null||rs(u,u.return)),p&64&&Ss&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var N=zn;if(za(o,i),Ua(i),p&512&&(sr||u===null||rs(u,u.return)),p&4){var E=u!==null?u.memoizedState:null;if(p=i.memoizedState,u===null)if(p===null)if(i.stateNode===null){e:{p=i.type,u=i.memoizedProps,N=N.ownerDocument||N;t:switch(p){case"title":E=N.getElementsByTagName("title")[0],(!E||E[W]||E[Cr]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=N.createElement(p),N.head.insertBefore(E,N.querySelector("head > title"))),qr(E,p,u),E[Cr]=i,me(E),p=E;break e;case"link":var B=D2("link","href",N).get(p+(u.href||""));if(B){for(var H=0;H<B.length;H++)if(E=B[H],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){B.splice(H,1);break t}}E=N.createElement(p),qr(E,p,u),N.head.appendChild(E);break;case"meta":if(B=D2("meta","content",N).get(p+(u.content||""))){for(H=0;H<B.length;H++)if(E=B[H],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){B.splice(H,1);break t}}E=N.createElement(p),qr(E,p,u),N.head.appendChild(E);break;default:throw Error(n(468,p))}E[Cr]=i,me(E),p=E}i.stateNode=p}else O2(N,i.type,i.stateNode);else i.stateNode=T2(N,p,i.memoizedProps);else E!==p?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,p===null?O2(N,i.type,i.stateNode):T2(N,p,i.memoizedProps)):p===null&&i.stateNode!==null&&ep(i,i.memoizedProps,u.memoizedProps)}break;case 27:za(o,i),Ua(i),p&512&&(sr||u===null||rs(u,u.return)),u!==null&&p&4&&ep(i,i.memoizedProps,u.memoizedProps);break;case 5:if(za(o,i),Ua(i),p&512&&(sr||u===null||rs(u,u.return)),i.flags&32){N=i.stateNode;try{ro(N,"")}catch(je){kt(i,i.return,je)}}p&4&&i.stateNode!=null&&(N=i.memoizedProps,ep(i,N,u!==null?u.memoizedProps:N)),p&1024&&(ap=!0);break;case 6:if(za(o,i),Ua(i),p&4){if(i.stateNode===null)throw Error(n(162));p=i.memoizedProps,u=i.stateNode;try{u.nodeValue=p}catch(je){kt(i,i.return,je)}}break;case 3:if(Kf=null,N=zn,zn=Vf(o.containerInfo),za(o,i),zn=N,Ua(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(je){kt(i,i.return,je)}ap&&(ap=!1,Rw(i));break;case 4:p=zn,zn=Vf(i.stateNode.containerInfo),za(o,i),Ua(i),zn=p;break;case 12:za(o,i),Ua(i);break;case 13:za(o,i),Ua(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(dp=Re()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,np(i,p)));break;case 22:N=i.memoizedState!==null;var ie=u!==null&&u.memoizedState!==null,he=Ss,Se=sr;if(Ss=he||N,sr=Se||ie,za(o,i),sr=Se,Ss=he,Ua(i),p&8192)e:for(o=i.stateNode,o._visibility=N?o._visibility&-2:o._visibility|1,N&&(u===null||ie||Ss||sr||fl(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){ie=u=o;try{if(E=ie.stateNode,N)B=E.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{H=ie.stateNode;var Ce=ie.memoizedProps.style,be=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;H.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch(je){kt(ie,ie.return,je)}}}else if(o.tag===6){if(u===null){ie=o;try{ie.stateNode.nodeValue=N?"":ie.memoizedProps}catch(je){kt(ie,ie.return,je)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=i.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,np(i,u))));break;case 19:za(o,i),Ua(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,np(i,p)));break;case 30:break;case 21:break;default:za(o,i),Ua(i)}}function Ua(i){var o=i.flags;if(o&2){try{for(var u,p=i.return;p!==null;){if(Tw(p)){u=p;break}p=p.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var N=u.stateNode,E=tp(i);kf(i,E,N);break;case 5:var B=u.stateNode;u.flags&32&&(ro(B,""),u.flags&=-33);var H=tp(i);kf(i,H,B);break;case 3:case 4:var ie=u.stateNode.containerInfo,he=tp(i);rp(i,he,ie);break;default:throw Error(n(161))}}catch(Se){kt(i,i.return,Se)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Rw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Rw(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function xi(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)kw(i,o.alternate,o),o=o.sibling}function fl(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:mi(4,o,o.return),fl(o);break;case 1:rs(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&Aw(o,o.return,u),fl(o);break;case 27:ud(o.stateNode);case 26:case 5:rs(o,o.return),fl(o);break;case 22:o.memoizedState===null&&fl(o);break;case 30:fl(o);break;default:fl(o)}i=i.sibling}}function hi(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,N=i,E=o,B=E.flags;switch(E.tag){case 0:case 11:case 15:hi(N,E,u),td(4,E);break;case 1:if(hi(N,E,u),p=E,N=p.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(he){kt(p,p.return,he)}if(p=E,N=p.updateQueue,N!==null){var H=p.stateNode;try{var ie=N.shared.hiddenCallbacks;if(ie!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ie.length;N++)fN(ie[N],H)}catch(he){kt(p,p.return,he)}}u&&B&64&&Sw(E),rd(E,E.return);break;case 27:Dw(E);case 26:case 5:hi(N,E,u),u&&p===null&&B&4&&Cw(E),rd(E,E.return);break;case 12:hi(N,E,u);break;case 13:hi(N,E,u),u&&B&4&&Fw(N,E);break;case 22:E.memoizedState===null&&hi(N,E,u),rd(E,E.return);break;case 30:break;default:hi(N,E,u)}o=o.sibling}}function sp(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Uc(u))}function ip(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Uc(i))}function as(i,o,u,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Iw(i,o,u,p),o=o.sibling}function Iw(i,o,u,p){var N=o.flags;switch(o.tag){case 0:case 11:case 15:as(i,o,u,p),N&2048&&td(9,o);break;case 1:as(i,o,u,p);break;case 3:as(i,o,u,p),N&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Uc(i)));break;case 12:if(N&2048){as(i,o,u,p),i=o.stateNode;try{var E=o.memoizedProps,B=E.id,H=E.onPostCommit;typeof H=="function"&&H(B,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ie){kt(o,o.return,ie)}}else as(i,o,u,p);break;case 13:as(i,o,u,p);break;case 23:break;case 22:E=o.stateNode,B=o.alternate,o.memoizedState!==null?E._visibility&2?as(i,o,u,p):ad(i,o):E._visibility&2?as(i,o,u,p):(E._visibility|=2,No(i,o,u,p,(o.subtreeFlags&10256)!==0)),N&2048&&sp(B,o);break;case 24:as(i,o,u,p),N&2048&&ip(o.alternate,o);break;default:as(i,o,u,p)}}function No(i,o,u,p,N){for(N=N&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var E=i,B=o,H=u,ie=p,he=B.flags;switch(B.tag){case 0:case 11:case 15:No(E,B,H,ie,N),td(8,B);break;case 23:break;case 22:var Se=B.stateNode;B.memoizedState!==null?Se._visibility&2?No(E,B,H,ie,N):ad(E,B):(Se._visibility|=2,No(E,B,H,ie,N)),N&&he&2048&&sp(B.alternate,B);break;case 24:No(E,B,H,ie,N),N&&he&2048&&ip(B.alternate,B);break;default:No(E,B,H,ie,N)}o=o.sibling}}function ad(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,p=o,N=p.flags;switch(p.tag){case 22:ad(u,p),N&2048&&sp(p.alternate,p);break;case 24:ad(u,p),N&2048&&ip(p.alternate,p);break;default:ad(u,p)}o=o.sibling}}var nd=8192;function wo(i){if(i.subtreeFlags&nd)for(i=i.child;i!==null;)Bw(i),i=i.sibling}function Bw(i){switch(i.tag){case 26:wo(i),i.flags&nd&&i.memoizedState!==null&&g8(zn,i.memoizedState,i.memoizedProps);break;case 5:wo(i);break;case 3:case 4:var o=zn;zn=Vf(i.stateNode.containerInfo),wo(i),zn=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=nd,nd=16777216,wo(i),nd=o):wo(i));break;default:wo(i)}}function zw(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function sd(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];Or=p,$w(p,i)}zw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Uw(i),i=i.sibling}function Uw(i){switch(i.tag){case 0:case 11:case 15:sd(i),i.flags&2048&&mi(9,i,i.return);break;case 3:sd(i);break;case 12:sd(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Pf(i)):sd(i);break;default:sd(i)}}function Pf(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];Or=p,$w(p,i)}zw(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:mi(8,o,o.return),Pf(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Pf(o));break;default:Pf(o)}i=i.sibling}}function $w(i,o){for(;Or!==null;){var u=Or;switch(u.tag){case 0:case 11:case 15:mi(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Uc(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,Or=p;else e:for(u=i;Or!==null;){p=Or;var N=p.sibling,E=p.return;if(Pw(p),p===u){Or=null;break e}if(N!==null){N.return=E,Or=N;break e}Or=E}}}var Pk={getCacheForType:function(i){var o=na(br),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u}},Mk=typeof WeakMap=="function"?WeakMap:Map,vt=0,Lt=null,it=null,ot=0,bt=0,$a=null,pi=!1,_o=!1,lp=!1,Cs=0,Qt=0,gi=0,ml=0,op=0,bn=0,Eo=0,id=null,Oa=null,cp=!1,dp=0,Mf=1/0,Ff=null,vi=null,$r=0,bi=null,So=null,Ao=0,up=0,fp=null,qw=null,ld=0,mp=null;function qa(){if((vt&2)!==0&&ot!==0)return ot&-ot;if(G.T!==null){var i=xo;return i!==0?i:yp()}return Ku()}function Hw(){bn===0&&(bn=(ot&536870912)===0||xt?Nc():536870912);var i=vn.current;return i!==null&&(i.flags|=32),bn}function Ha(i,o,u){(i===Lt&&(bt===2||bt===9)||i.cancelPendingCommit!==null)&&(Co(i,0),yi(i,ot,bn,!1)),Zi(i,u),((vt&2)===0||i!==Lt)&&(i===Lt&&((vt&2)===0&&(ml|=u),Qt===4&&yi(i,ot,bn,!1)),ns(i))}function Vw(i,o,u){if((vt&6)!==0)throw Error(n(327));var p=!u&&(o&124)===0&&(o&i.expiredLanes)===0||Xi(i,o),N=p?Rk(i,o):pp(i,o,!0),E=p;do{if(N===0){_o&&!p&&yi(i,o,0,!1);break}else{if(u=i.current.alternate,E&&!Fk(u)){N=pp(i,o,!1),E=!1;continue}if(N===2){if(E=o,i.errorRecoveryDisabledLanes&E)var B=0;else B=i.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){o=B;e:{var H=i;N=id;var ie=H.current.memoizedState.isDehydrated;if(ie&&(Co(H,B).flags|=256),B=pp(H,B,!1),B!==2){if(lp&&!ie){H.errorRecoveryDisabledLanes|=E,ml|=E,N=4;break e}E=Oa,Oa=N,E!==null&&(Oa===null?Oa=E:Oa.push.apply(Oa,E))}N=B}if(E=!1,N!==2)continue}}if(N===1){Co(i,0),yi(i,o,0,!0);break}e:{switch(p=i,E=N,E){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:yi(p,o,bn,!pi);break e;case 2:Oa=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(N=dp+300-Re(),10<N)){if(yi(p,o,bn,!pi),Jl(p,0,!0)!==0)break e;p.timeoutHandle=y2(Gw.bind(null,p,u,Oa,Ff,cp,o,bn,ml,Eo,pi,E,2,-0,0),N);break e}Gw(p,u,Oa,Ff,cp,o,bn,ml,Eo,pi,E,0,-0,0)}}break}while(!0);ns(i)}function Gw(i,o,u,p,N,E,B,H,ie,he,Se,Ce,be,je){if(i.timeoutHandle=-1,Ce=o.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(xd={stylesheets:null,count:0,unsuspend:p8},Bw(o),Ce=v8(),Ce!==null)){i.cancelPendingCommit=Ce(Jw.bind(null,i,o,E,u,p,N,B,H,ie,Se,1,be,je)),yi(i,E,B,!he);return}Jw(i,o,E,u,p,N,B,H,ie)}function Fk(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var N=u[p],E=N.getSnapshot;N=N.value;try{if(!Ia(E(),N))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function yi(i,o,u,p){o&=~op,o&=~ml,i.suspendedLanes|=o,i.pingedLanes&=~o,p&&(i.warmLanes|=o),p=i.expirationTimes;for(var N=o;0<N;){var E=31-xa(N),B=1<<E;p[E]=-1,N&=~B}u!==0&&Vu(i,u,o)}function Lf(){return(vt&6)===0?(od(0),!1):!0}function xp(){if(it!==null){if(bt===0)var i=it.return;else i=it,ys=ll=null,Oh(i),yo=null,Qc=0,i=it;for(;i!==null;)Ew(i.alternate,i),i=i.return;it=null}}function Co(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,Jk(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),xp(),Lt=i,it=u=gs(i.current,null),ot=o,bt=0,$a=null,pi=!1,_o=Xi(i,o),lp=!1,Eo=bn=op=ml=gi=Qt=0,Oa=id=null,cp=!1,(o&8)!==0&&(o|=o&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=o;0<p;){var N=31-xa(p),E=1<<N;o|=i[N],p&=~E}return Cs=o,af(),u}function Kw(i,o){rt=null,G.H=wf,o===qc||o===mf?(o=dN(),bt=3):o===lN?(o=dN(),bt=4):bt=o===uw?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,$a=o,it===null&&(Qt=1,Cf(i,xn(o,i.current)))}function Yw(){var i=G.H;return G.H=wf,i===null?wf:i}function Ww(){var i=G.A;return G.A=Pk,i}function hp(){Qt=4,pi||(ot&4194048)!==ot&&vn.current!==null||(_o=!0),(gi&134217727)===0&&(ml&134217727)===0||Lt===null||yi(Lt,ot,bn,!1)}function pp(i,o,u){var p=vt;vt|=2;var N=Yw(),E=Ww();(Lt!==i||ot!==o)&&(Ff=null,Co(i,o)),o=!1;var B=Qt;e:do try{if(bt!==0&&it!==null){var H=it,ie=$a;switch(bt){case 8:xp(),B=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(o=!0);var he=bt;if(bt=0,$a=null,To(i,H,ie,he),u&&_o){B=0;break e}break;default:he=bt,bt=0,$a=null,To(i,H,ie,he)}}Lk(),B=Qt;break}catch(Se){Kw(i,Se)}while(!0);return o&&i.shellSuspendCounter++,ys=ll=null,vt=p,G.H=N,G.A=E,it===null&&(Lt=null,ot=0,af()),B}function Lk(){for(;it!==null;)Xw(it)}function Rk(i,o){var u=vt;vt|=2;var p=Yw(),N=Ww();Lt!==i||ot!==o?(Ff=null,Mf=Re()+500,Co(i,o)):_o=Xi(i,o);e:do try{if(bt!==0&&it!==null){o=it;var E=$a;t:switch(bt){case 1:bt=0,$a=null,To(i,o,E,1);break;case 2:case 9:if(oN(E)){bt=0,$a=null,Zw(o);break}o=function(){bt!==2&&bt!==9||Lt!==i||(bt=7),ns(i)},E.then(o,o);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:oN(E)?(bt=0,$a=null,Zw(o)):(bt=0,$a=null,To(i,o,E,7));break;case 5:var B=null;switch(it.tag){case 26:B=it.memoizedState;case 5:case 27:var H=it;if(!B||k2(B)){bt=0,$a=null;var ie=H.sibling;if(ie!==null)it=ie;else{var he=H.return;he!==null?(it=he,Rf(he)):it=null}break t}}bt=0,$a=null,To(i,o,E,5);break;case 6:bt=0,$a=null,To(i,o,E,6);break;case 8:xp(),Qt=6;break e;default:throw Error(n(462))}}Ik();break}catch(Se){Kw(i,Se)}while(!0);return ys=ll=null,G.H=p,G.A=N,vt=u,it!==null?0:(Lt=null,ot=0,af(),Qt)}function Ik(){for(;it!==null&&!Bt();)Xw(it)}function Xw(i){var o=ww(i.alternate,i,Cs);i.memoizedProps=i.pendingProps,o===null?Rf(i):it=o}function Zw(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=gw(u,o,o.pendingProps,o.type,void 0,ot);break;case 11:o=gw(u,o,o.pendingProps,o.type.render,o.ref,ot);break;case 5:Oh(o);default:Ew(u,o),o=it=Qj(o,Cs),o=ww(u,o,Cs)}i.memoizedProps=i.pendingProps,o===null?Rf(i):it=o}function To(i,o,u,p){ys=ll=null,Oh(o),yo=null,Qc=0;var N=o.return;try{if(Ak(i,N,o,u,ot)){Qt=1,Cf(i,xn(u,i.current)),it=null;return}}catch(E){if(N!==null)throw it=N,E;Qt=1,Cf(i,xn(u,i.current)),it=null;return}o.flags&32768?(xt||p===1?i=!0:_o||(ot&536870912)!==0?i=!1:(pi=i=!0,(p===2||p===9||p===3||p===6)&&(p=vn.current,p!==null&&p.tag===13&&(p.flags|=16384))),Qw(o,i)):Rf(o)}function Rf(i){var o=i;do{if((o.flags&32768)!==0){Qw(o,pi);return}i=o.return;var u=Tk(o.alternate,o,Cs);if(u!==null){it=u;return}if(o=o.sibling,o!==null){it=o;return}it=o=i}while(o!==null);Qt===0&&(Qt=5)}function Qw(i,o){do{var u=Dk(i.alternate,i);if(u!==null){u.flags&=32767,it=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){it=i;return}it=i=u}while(i!==null);Qt=6,it=null}function Jw(i,o,u,p,N,E,B,H,ie){i.cancelPendingCommit=null;do If();while($r!==0);if((vt&6)!==0)throw Error(n(327));if(o!==null){if(o===i.current)throw Error(n(177));if(E=o.lanes|o.childLanes,E|=ih,eo(i,u,E,B,H,ie),i===Lt&&(it=Lt=null,ot=0),So=o,bi=i,Ao=u,up=E,fp=N,qw=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,$k(Ln,function(){return n2(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=G.T,G.T=null,N=K.p,K.p=2,B=vt,vt|=4;try{Ok(i,o,u)}finally{vt=B,K.p=N,G.T=p}}$r=1,e2(),t2(),r2()}}function e2(){if($r===1){$r=0;var i=bi,o=So,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=G.T,G.T=null;var p=K.p;K.p=2;var N=vt;vt|=4;try{Lw(o,i);var E=Cp,B=$j(i.containerInfo),H=E.focusedElem,ie=E.selectionRange;if(B!==H&&H&&H.ownerDocument&&Uj(H.ownerDocument.documentElement,H)){if(ie!==null&&th(H)){var he=ie.start,Se=ie.end;if(Se===void 0&&(Se=he),"selectionStart"in H)H.selectionStart=he,H.selectionEnd=Math.min(Se,H.value.length);else{var Ce=H.ownerDocument||document,be=Ce&&Ce.defaultView||window;if(be.getSelection){var je=be.getSelection(),Xe=H.textContent.length,Ke=Math.min(ie.start,Xe),Tt=ie.end===void 0?Ke:Math.min(ie.end,Xe);!je.extend&&Ke>Tt&&(B=Tt,Tt=Ke,Ke=B);var ue=zj(H,Ke),oe=zj(H,Tt);if(ue&&oe&&(je.rangeCount!==1||je.anchorNode!==ue.node||je.anchorOffset!==ue.offset||je.focusNode!==oe.node||je.focusOffset!==oe.offset)){var xe=Ce.createRange();xe.setStart(ue.node,ue.offset),je.removeAllRanges(),Ke>Tt?(je.addRange(xe),je.extend(oe.node,oe.offset)):(xe.setEnd(oe.node,oe.offset),je.addRange(xe))}}}}for(Ce=[],je=H;je=je.parentNode;)je.nodeType===1&&Ce.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Ce.length;H++){var Ae=Ce[H];Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}}Xf=!!Ap,Cp=Ap=null}finally{vt=N,K.p=p,G.T=u}}i.current=o,$r=2}}function t2(){if($r===2){$r=0;var i=bi,o=So,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=G.T,G.T=null;var p=K.p;K.p=2;var N=vt;vt|=4;try{kw(i,o.alternate,o)}finally{vt=N,K.p=p,G.T=u}}$r=3}}function r2(){if($r===4||$r===3){$r=0,at();var i=bi,o=So,u=Ao,p=qw;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?$r=5:($r=0,So=bi=null,a2(i,i.pendingLanes));var N=i.pendingLanes;if(N===0&&(vi=null),Sc(u),o=o.stateNode,zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(xs,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=G.T,N=K.p,K.p=2,G.T=null;try{for(var E=i.onRecoverableError,B=0;B<p.length;B++){var H=p[B];E(H.value,{componentStack:H.stack})}}finally{G.T=o,K.p=N}}(Ao&3)!==0&&If(),ns(i),N=i.pendingLanes,(u&4194090)!==0&&(N&42)!==0?i===mp?ld++:(ld=0,mp=i):ld=0,od(0)}}function a2(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Uc(o)))}function If(i){return e2(),t2(),r2(),n2()}function n2(){if($r!==5)return!1;var i=bi,o=up;up=0;var u=Sc(Ao),p=G.T,N=K.p;try{K.p=32>u?32:u,G.T=null,u=fp,fp=null;var E=bi,B=Ao;if($r=0,So=bi=null,Ao=0,(vt&6)!==0)throw Error(n(331));var H=vt;if(vt|=4,Uw(E.current),Iw(E,E.current,B,u),vt=H,od(0,!1),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(xs,E)}catch{}return!0}finally{K.p=N,G.T=p,a2(i,o)}}function s2(i,o,u){o=xn(u,o),o=Vh(i.stateNode,o,2),i=ci(i,o,2),i!==null&&(Zi(i,2),ns(i))}function kt(i,o,u){if(i.tag===3)s2(i,i,u);else for(;o!==null;){if(o.tag===3){s2(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(vi===null||!vi.has(p))){i=xn(u,i),u=cw(2),p=ci(o,u,2),p!==null&&(dw(u,p,o,i),Zi(p,2),ns(p));break}}o=o.return}}function gp(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new Mk;var N=new Set;p.set(o,N)}else N=p.get(o),N===void 0&&(N=new Set,p.set(o,N));N.has(u)||(lp=!0,N.add(u),i=Bk.bind(null,i,o,u),o.then(i,i))}function Bk(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Lt===i&&(ot&u)===u&&(Qt===4||Qt===3&&(ot&62914560)===ot&&300>Re()-dp?(vt&2)===0&&Co(i,0):op|=u,Eo===ot&&(Eo=0)),ns(i)}function i2(i,o){o===0&&(o=wc()),i=co(i,o),i!==null&&(Zi(i,o),ns(i))}function zk(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),i2(i,u)}function Uk(i,o){var u=0;switch(i.tag){case 13:var p=i.stateNode,N=i.memoizedState;N!==null&&(u=N.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(o),i2(i,u)}function $k(i,o){return Je(i,o)}var Bf=null,Do=null,vp=!1,zf=!1,bp=!1,xl=0;function ns(i){i!==Do&&i.next===null&&(Do===null?Bf=Do=i:Do=Do.next=i),zf=!0,vp||(vp=!0,Hk())}function od(i,o){if(!bp&&zf){bp=!0;do for(var u=!1,p=Bf;p!==null;){if(i!==0){var N=p.pendingLanes;if(N===0)var E=0;else{var B=p.suspendedLanes,H=p.pingedLanes;E=(1<<31-xa(42|i)+1)-1,E&=N&~(B&~H),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,d2(p,E))}else E=ot,E=Jl(p,p===Lt?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(E&3)===0||Xi(p,E)||(u=!0,d2(p,E));p=p.next}while(u);bp=!1}}function qk(){l2()}function l2(){zf=vp=!1;var i=0;xl!==0&&(Qk()&&(i=xl),xl=0);for(var o=Re(),u=null,p=Bf;p!==null;){var N=p.next,E=o2(p,o);E===0?(p.next=null,u===null?Bf=N:u.next=N,N===null&&(Do=u)):(u=p,(i!==0||(E&3)!==0)&&(zf=!0)),p=N}od(i)}function o2(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,N=i.expirationTimes,E=i.pendingLanes&-62914561;0<E;){var B=31-xa(E),H=1<<B,ie=N[B];ie===-1?((H&u)===0||(H&p)!==0)&&(N[B]=Hu(H,o)):ie<=o&&(i.expiredLanes|=H),E&=~H}if(o=Lt,u=ot,u=Jl(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,u===0||i===o&&(bt===2||bt===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&qe(p),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Xi(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(p!==null&&qe(p),Sc(u)){case 2:case 8:u=Zn;break;case 32:u=Ln;break;case 268435456:u=Zl;break;default:u=Ln}return p=c2.bind(null,i),u=Je(u,p),i.callbackPriority=o,i.callbackNode=u,o}return p!==null&&p!==null&&qe(p),i.callbackPriority=2,i.callbackNode=null,2}function c2(i,o){if($r!==0&&$r!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(If()&&i.callbackNode!==u)return null;var p=ot;return p=Jl(i,i===Lt?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(Vw(i,p,o),o2(i,Re()),i.callbackNode!=null&&i.callbackNode===u?c2.bind(null,i):null)}function d2(i,o){if(If())return null;Vw(i,o,!0)}function Hk(){e8(function(){(vt&6)!==0?Je(cn,qk):l2()})}function yp(){return xl===0&&(xl=Nc()),xl}function u2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Xu(""+i)}function f2(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function Vk(i,o,u,p,N){if(o==="submit"&&u&&u.stateNode===N){var E=u2((N[Tr]||null).action),B=p.submitter;B&&(o=(o=B[Tr]||null)?u2(o.formAction):B.getAttribute("formAction"),o!==null&&(E=o,B=null));var H=new ef("action","action",null,p,N);i.push({event:H,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(xl!==0){var ie=B?f2(N,B):new FormData(N);zh(u,{pending:!0,data:ie,method:N.method,action:E},null,ie)}}else typeof E=="function"&&(H.preventDefault(),ie=B?f2(N,B):new FormData(N),zh(u,{pending:!0,data:ie,method:N.method,action:E},E,ie))},currentTarget:N}]})}}for(var jp=0;jp<sh.length;jp++){var Np=sh[jp],Gk=Np.toLowerCase(),Kk=Np[0].toUpperCase()+Np.slice(1);Bn(Gk,"on"+Kk)}Bn(Vj,"onAnimationEnd"),Bn(Gj,"onAnimationIteration"),Bn(Kj,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(dk,"onTransitionRun"),Bn(uk,"onTransitionStart"),Bn(fk,"onTransitionCancel"),Bn(Yj,"onTransitionEnd"),Me("onMouseEnter",["mouseout","mouseover"]),Me("onMouseLeave",["mouseout","mouseover"]),Me("onPointerEnter",["pointerout","pointerover"]),Me("onPointerLeave",["pointerout","pointerover"]),Oe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cd));function m2(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],N=p.event;p=p.listeners;e:{var E=void 0;if(o)for(var B=p.length-1;0<=B;B--){var H=p[B],ie=H.instance,he=H.currentTarget;if(H=H.listener,ie!==E&&N.isPropagationStopped())break e;E=H,N.currentTarget=he;try{E(N)}catch(Se){Af(Se)}N.currentTarget=null,E=ie}else for(B=0;B<p.length;B++){if(H=p[B],ie=H.instance,he=H.currentTarget,H=H.listener,ie!==E&&N.isPropagationStopped())break e;E=H,N.currentTarget=he;try{E(N)}catch(Se){Af(Se)}N.currentTarget=null,E=ie}}}}function lt(i,o){var u=o[Ac];u===void 0&&(u=o[Ac]=new Set);var p=i+"__bubble";u.has(p)||(x2(o,i,2,!1),u.add(p))}function wp(i,o,u){var p=0;o&&(p|=4),x2(u,i,p,o)}var Uf="_reactListening"+Math.random().toString(36).slice(2);function _p(i){if(!i[Uf]){i[Uf]=!0,ve.forEach(function(u){u!=="selectionchange"&&(Yk.has(u)||wp(u,!1,i),wp(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Uf]||(o[Uf]=!0,wp("selectionchange",!1,o))}}function x2(i,o,u,p){switch(I2(o)){case 2:var N=j8;break;case 8:N=N8;break;default:N=Ip}u=N.bind(null,o,u,i),N=void 0,!Gx||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(N=!0),p?N!==void 0?i.addEventListener(o,u,{capture:!0,passive:N}):i.addEventListener(o,u,!0):N!==void 0?i.addEventListener(o,u,{passive:N}):i.addEventListener(o,u,!1)}function Ep(i,o,u,p,N){var E=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var B=p.tag;if(B===3||B===4){var H=p.stateNode.containerInfo;if(H===N)break;if(B===4)for(B=p.return;B!==null;){var ie=B.tag;if((ie===3||ie===4)&&B.stateNode.containerInfo===N)return;B=B.return}for(;H!==null;){if(B=te(H),B===null)return;if(ie=B.tag,ie===5||ie===6||ie===26||ie===27){p=E=B;continue e}H=H.parentNode}}p=p.return}jj(function(){var he=E,Se=Hx(u),Ce=[];e:{var be=Wj.get(i);if(be!==void 0){var je=ef,Xe=i;switch(i){case"keypress":if(Qu(u)===0)break e;case"keydown":case"keyup":je=$O;break;case"focusin":Xe="focus",je=Xx;break;case"focusout":Xe="blur",je=Xx;break;case"beforeblur":case"afterblur":je=Xx;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=_j;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=DO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=VO;break;case Vj:case Gj:case Kj:je=PO;break;case Yj:je=KO;break;case"scroll":case"scrollend":je=CO;break;case"wheel":je=WO;break;case"copy":case"cut":case"paste":je=FO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Sj;break;case"toggle":case"beforetoggle":je=ZO}var Ke=(o&4)!==0,Tt=!Ke&&(i==="scroll"||i==="scrollend"),ue=Ke?be!==null?be+"Capture":null:be;Ke=[];for(var oe=he,xe;oe!==null;){var Ae=oe;if(xe=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||xe===null||ue===null||(Ae=Cc(oe,ue),Ae!=null&&Ke.push(dd(oe,Ae,xe))),Tt)break;oe=oe.return}0<Ke.length&&(be=new je(be,Xe,null,u,Se),Ce.push({event:be,listeners:Ke}))}}if((o&7)===0){e:{if(be=i==="mouseover"||i==="pointerover",je=i==="mouseout"||i==="pointerout",be&&u!==qx&&(Xe=u.relatedTarget||u.fromElement)&&(te(Xe)||Xe[ai]))break e;if((je||be)&&(be=Se.window===Se?Se:(be=Se.ownerDocument)?be.defaultView||be.parentWindow:window,je?(Xe=u.relatedTarget||u.toElement,je=he,Xe=Xe?te(Xe):null,Xe!==null&&(Tt=l(Xe),Ke=Xe.tag,Xe!==Tt||Ke!==5&&Ke!==27&&Ke!==6)&&(Xe=null)):(je=null,Xe=he),je!==Xe)){if(Ke=_j,Ae="onMouseLeave",ue="onMouseEnter",oe="mouse",(i==="pointerout"||i==="pointerover")&&(Ke=Sj,Ae="onPointerLeave",ue="onPointerEnter",oe="pointer"),Tt=je==null?be:pe(je),xe=Xe==null?be:pe(Xe),be=new Ke(Ae,oe+"leave",je,u,Se),be.target=Tt,be.relatedTarget=xe,Ae=null,te(Se)===he&&(Ke=new Ke(ue,oe+"enter",Xe,u,Se),Ke.target=xe,Ke.relatedTarget=Tt,Ae=Ke),Tt=Ae,je&&Xe)t:{for(Ke=je,ue=Xe,oe=0,xe=Ke;xe;xe=Oo(xe))oe++;for(xe=0,Ae=ue;Ae;Ae=Oo(Ae))xe++;for(;0<oe-xe;)Ke=Oo(Ke),oe--;for(;0<xe-oe;)ue=Oo(ue),xe--;for(;oe--;){if(Ke===ue||ue!==null&&Ke===ue.alternate)break t;Ke=Oo(Ke),ue=Oo(ue)}Ke=null}else Ke=null;je!==null&&h2(Ce,be,je,Ke,!1),Xe!==null&&Tt!==null&&h2(Ce,Tt,Xe,Ke,!0)}}e:{if(be=he?pe(he):window,je=be.nodeName&&be.nodeName.toLowerCase(),je==="select"||je==="input"&&be.type==="file")var $e=Mj;else if(kj(be))if(Fj)$e=lk;else{$e=sk;var nt=nk}else je=be.nodeName,!je||je.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?he&&$x(he.elementType)&&($e=Mj):$e=ik;if($e&&($e=$e(i,he))){Pj(Ce,$e,u,Se);break e}nt&&nt(i,be,he),i==="focusout"&&he&&be.type==="number"&&he.memoizedProps.value!=null&&Ux(be,"number",be.value)}switch(nt=he?pe(he):window,i){case"focusin":(kj(nt)||nt.contentEditable==="true")&&(io=nt,rh=he,Lc=null);break;case"focusout":Lc=rh=io=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,qj(Ce,u,Se);break;case"selectionchange":if(ck)break;case"keydown":case"keyup":qj(Ce,u,Se)}var Ve;if(Qx)e:{switch(i){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else so?Dj(i,u)&&(Ye="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ye="onCompositionStart");Ye&&(Aj&&u.locale!=="ko"&&(so||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&so&&(Ve=Nj()):(si=Se,Kx="value"in si?si.value:si.textContent,so=!0)),nt=$f(he,Ye),0<nt.length&&(Ye=new Ej(Ye,i,null,u,Se),Ce.push({event:Ye,listeners:nt}),Ve?Ye.data=Ve:(Ve=Oj(u),Ve!==null&&(Ye.data=Ve)))),(Ve=JO?ek(i,u):tk(i,u))&&(Ye=$f(he,"onBeforeInput"),0<Ye.length&&(nt=new Ej("onBeforeInput","beforeinput",null,u,Se),Ce.push({event:nt,listeners:Ye}),nt.data=Ve)),Vk(Ce,i,he,u,Se)}m2(Ce,o)})}function dd(i,o,u){return{instance:i,listener:o,currentTarget:u}}function $f(i,o){for(var u=o+"Capture",p=[];i!==null;){var N=i,E=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||E===null||(N=Cc(i,u),N!=null&&p.unshift(dd(i,N,E)),N=Cc(i,o),N!=null&&p.push(dd(i,N,E))),i.tag===3)return p;i=i.return}return[]}function Oo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function h2(i,o,u,p,N){for(var E=o._reactName,B=[];u!==null&&u!==p;){var H=u,ie=H.alternate,he=H.stateNode;if(H=H.tag,ie!==null&&ie===p)break;H!==5&&H!==26&&H!==27||he===null||(ie=he,N?(he=Cc(u,E),he!=null&&B.unshift(dd(u,he,ie))):N||(he=Cc(u,E),he!=null&&B.push(dd(u,he,ie)))),u=u.return}B.length!==0&&i.push({event:o,listeners:B})}var Wk=/\r\n?/g,Xk=/\u0000|\uFFFD/g;function p2(i){return(typeof i=="string"?i:""+i).replace(Wk,`
`).replace(Xk,"")}function g2(i,o){return o=p2(o),p2(i)===o}function qf(){}function Ct(i,o,u,p,N,E){switch(u){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||ro(i,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&ro(i,""+p);break;case"className":St(i,"class",p);break;case"tabIndex":St(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":St(i,u,p);break;case"style":bj(i,p,E);break;case"data":if(o!=="object"){St(i,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=Xu(""+p),i.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(o!=="input"&&Ct(i,o,"name",N.name,N,null),Ct(i,o,"formEncType",N.formEncType,N,null),Ct(i,o,"formMethod",N.formMethod,N,null),Ct(i,o,"formTarget",N.formTarget,N,null)):(Ct(i,o,"encType",N.encType,N,null),Ct(i,o,"method",N.method,N,null),Ct(i,o,"target",N.target,N,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=Xu(""+p),i.setAttribute(u,p);break;case"onClick":p!=null&&(i.onclick=qf);break;case"onScroll":p!=null&&lt("scroll",i);break;case"onScrollEnd":p!=null&&lt("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(u=p.__html,u!=null){if(N.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}u=Xu(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""+p):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":p===!0?i.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,p):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(u,p):i.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(u):i.setAttribute(u,p);break;case"popover":lt("beforetoggle",i),lt("toggle",i),Et(i,"popover",p);break;case"xlinkActuate":Ft(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ft(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ft(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ft(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ft(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ft(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ft(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ft(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ft(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Et(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=SO.get(u)||u,Et(i,u,p))}}function Sp(i,o,u,p,N,E){switch(u){case"style":bj(i,p,E);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(u=p.__html,u!=null){if(N.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof p=="string"?ro(i,p):(typeof p=="number"||typeof p=="bigint")&&ro(i,""+p);break;case"onScroll":p!=null&&lt("scroll",i);break;case"onScrollEnd":p!=null&&lt("scrollend",i);break;case"onClick":p!=null&&(i.onclick=qf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ye.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(N=u.endsWith("Capture"),o=u.slice(2,N?u.length-7:void 0),E=i[Tr]||null,E=E!=null?E[u]:null,typeof E=="function"&&i.removeEventListener(o,E,N),typeof p=="function")){typeof E!="function"&&E!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,p,N);break e}u in i?i[u]=p:p===!0?i.setAttribute(u,""):Et(i,u,p)}}}function qr(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",i),lt("load",i);var p=!1,N=!1,E;for(E in u)if(u.hasOwnProperty(E)){var B=u[E];if(B!=null)switch(E){case"src":p=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Ct(i,o,E,B,u,null)}}N&&Ct(i,o,"srcSet",u.srcSet,u,null),p&&Ct(i,o,"src",u.src,u,null);return;case"input":lt("invalid",i);var H=E=B=N=null,ie=null,he=null;for(p in u)if(u.hasOwnProperty(p)){var Se=u[p];if(Se!=null)switch(p){case"name":N=Se;break;case"type":B=Se;break;case"checked":ie=Se;break;case"defaultChecked":he=Se;break;case"value":E=Se;break;case"defaultValue":H=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(n(137,o));break;default:Ct(i,o,p,Se,u,null)}}hj(i,E,H,ie,he,B,N,!1),Yu(i);return;case"select":lt("invalid",i),p=B=E=null;for(N in u)if(u.hasOwnProperty(N)&&(H=u[N],H!=null))switch(N){case"value":E=H;break;case"defaultValue":B=H;break;case"multiple":p=H;default:Ct(i,o,N,H,u,null)}o=E,u=B,i.multiple=!!p,o!=null?to(i,!!p,o,!1):u!=null&&to(i,!!p,u,!0);return;case"textarea":lt("invalid",i),E=N=p=null;for(B in u)if(u.hasOwnProperty(B)&&(H=u[B],H!=null))switch(B){case"value":p=H;break;case"defaultValue":N=H;break;case"children":E=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(91));break;default:Ct(i,o,B,H,u,null)}gj(i,p,N,E),Yu(i);return;case"option":for(ie in u)if(u.hasOwnProperty(ie)&&(p=u[ie],p!=null))switch(ie){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ct(i,o,ie,p,u,null)}return;case"dialog":lt("beforetoggle",i),lt("toggle",i),lt("cancel",i),lt("close",i);break;case"iframe":case"object":lt("load",i);break;case"video":case"audio":for(p=0;p<cd.length;p++)lt(cd[p],i);break;case"image":lt("error",i),lt("load",i);break;case"details":lt("toggle",i);break;case"embed":case"source":case"link":lt("error",i),lt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in u)if(u.hasOwnProperty(he)&&(p=u[he],p!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Ct(i,o,he,p,u,null)}return;default:if($x(o)){for(Se in u)u.hasOwnProperty(Se)&&(p=u[Se],p!==void 0&&Sp(i,o,Se,p,u,void 0));return}}for(H in u)u.hasOwnProperty(H)&&(p=u[H],p!=null&&Ct(i,o,H,p,u,null))}function Zk(i,o,u,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,E=null,B=null,H=null,ie=null,he=null,Se=null;for(je in u){var Ce=u[je];if(u.hasOwnProperty(je)&&Ce!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":ie=Ce;default:p.hasOwnProperty(je)||Ct(i,o,je,null,p,Ce)}}for(var be in p){var je=p[be];if(Ce=u[be],p.hasOwnProperty(be)&&(je!=null||Ce!=null))switch(be){case"type":E=je;break;case"name":N=je;break;case"checked":he=je;break;case"defaultChecked":Se=je;break;case"value":B=je;break;case"defaultValue":H=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(137,o));break;default:je!==Ce&&Ct(i,o,be,je,p,Ce)}}zx(i,B,H,ie,he,Se,E,N);return;case"select":je=B=H=be=null;for(E in u)if(ie=u[E],u.hasOwnProperty(E)&&ie!=null)switch(E){case"value":break;case"multiple":je=ie;default:p.hasOwnProperty(E)||Ct(i,o,E,null,p,ie)}for(N in p)if(E=p[N],ie=u[N],p.hasOwnProperty(N)&&(E!=null||ie!=null))switch(N){case"value":be=E;break;case"defaultValue":H=E;break;case"multiple":B=E;default:E!==ie&&Ct(i,o,N,E,p,ie)}o=H,u=B,p=je,be!=null?to(i,!!u,be,!1):!!p!=!!u&&(o!=null?to(i,!!u,o,!0):to(i,!!u,u?[]:"",!1));return;case"textarea":je=be=null;for(H in u)if(N=u[H],u.hasOwnProperty(H)&&N!=null&&!p.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Ct(i,o,H,null,p,N)}for(B in p)if(N=p[B],E=u[B],p.hasOwnProperty(B)&&(N!=null||E!=null))switch(B){case"value":be=N;break;case"defaultValue":je=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:N!==E&&Ct(i,o,B,N,p,E)}pj(i,be,je);return;case"option":for(var Xe in u)if(be=u[Xe],u.hasOwnProperty(Xe)&&be!=null&&!p.hasOwnProperty(Xe))switch(Xe){case"selected":i.selected=!1;break;default:Ct(i,o,Xe,null,p,be)}for(ie in p)if(be=p[ie],je=u[ie],p.hasOwnProperty(ie)&&be!==je&&(be!=null||je!=null))switch(ie){case"selected":i.selected=be&&typeof be!="function"&&typeof be!="symbol";break;default:Ct(i,o,ie,be,p,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in u)be=u[Ke],u.hasOwnProperty(Ke)&&be!=null&&!p.hasOwnProperty(Ke)&&Ct(i,o,Ke,null,p,be);for(he in p)if(be=p[he],je=u[he],p.hasOwnProperty(he)&&be!==je&&(be!=null||je!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(137,o));break;default:Ct(i,o,he,be,p,je)}return;default:if($x(o)){for(var Tt in u)be=u[Tt],u.hasOwnProperty(Tt)&&be!==void 0&&!p.hasOwnProperty(Tt)&&Sp(i,o,Tt,void 0,p,be);for(Se in p)be=p[Se],je=u[Se],!p.hasOwnProperty(Se)||be===je||be===void 0&&je===void 0||Sp(i,o,Se,be,p,je);return}}for(var ue in u)be=u[ue],u.hasOwnProperty(ue)&&be!=null&&!p.hasOwnProperty(ue)&&Ct(i,o,ue,null,p,be);for(Ce in p)be=p[Ce],je=u[Ce],!p.hasOwnProperty(Ce)||be===je||be==null&&je==null||Ct(i,o,Ce,be,p,je)}var Ap=null,Cp=null;function Hf(i){return i.nodeType===9?i:i.ownerDocument}function v2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b2(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Tp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Dp=null;function Qk(){var i=window.event;return i&&i.type==="popstate"?i===Dp?!1:(Dp=i,!0):(Dp=null,!1)}var y2=typeof setTimeout=="function"?setTimeout:void 0,Jk=typeof clearTimeout=="function"?clearTimeout:void 0,j2=typeof Promise=="function"?Promise:void 0,e8=typeof queueMicrotask=="function"?queueMicrotask:typeof j2<"u"?function(i){return j2.resolve(null).then(i).catch(t8)}:y2;function t8(i){setTimeout(function(){throw i})}function ji(i){return i==="head"}function N2(i,o){var u=o,p=0,N=0;do{var E=u.nextSibling;if(i.removeChild(u),E&&E.nodeType===8)if(u=E.data,u==="/$"){if(0<p&&8>p){u=p;var B=i.ownerDocument;if(u&1&&ud(B.documentElement),u&2&&ud(B.body),u&4)for(u=B.head,ud(u),B=u.firstChild;B;){var H=B.nextSibling,ie=B.nodeName;B[W]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&B.rel.toLowerCase()==="stylesheet"||u.removeChild(B),B=H}}if(N===0){i.removeChild(E),bd(o);return}N--}else u==="$"||u==="$?"||u==="$!"?N++:p=u.charCodeAt(0)-48;else p=0;u=E}while(u);bd(o)}function Op(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Op(u),J(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function r8(i,o,u,p){for(;i.nodeType===1;){var N=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[W])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(E=i.getAttribute("rel"),E==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(E!==N.rel||i.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||i.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||i.getAttribute("title")!==(N.title==null?null:N.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(E=i.getAttribute("src"),(E!==(N.src==null?null:N.src)||i.getAttribute("type")!==(N.type==null?null:N.type)||i.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&E&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var E=N.name==null?null:""+N.name;if(N.type==="hidden"&&i.getAttribute("name")===E)return i}else return i;if(i=Un(i.nextSibling),i===null)break}return null}function a8(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Un(i.nextSibling),i===null))return null;return i}function kp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function n8(i,o){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")o();else{var p=function(){o(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function Un(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var Pp=null;function w2(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}function _2(i,o,u){switch(o=Hf(u),i){case"html":if(i=o.documentElement,!i)throw Error(n(452));return i;case"head":if(i=o.head,!i)throw Error(n(453));return i;case"body":if(i=o.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function ud(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);J(i)}var yn=new Map,E2=new Set;function Vf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ts=K.d;K.d={f:s8,r:i8,D:l8,C:o8,L:c8,m:d8,X:f8,S:u8,M:m8};function s8(){var i=Ts.f(),o=Lf();return i||o}function i8(i){var o=ae(i);o!==null&&o.tag===5&&o.type==="form"?VN(o):Ts.r(i)}var ko=typeof document>"u"?null:document;function S2(i,o,u){var p=ko;if(p&&typeof o=="string"&&o){var N=mn(o);N='link[rel="'+i+'"][href="'+N+'"]',typeof u=="string"&&(N+='[crossorigin="'+u+'"]'),E2.has(N)||(E2.add(N),i={rel:i,crossOrigin:u,href:o},p.querySelector(N)===null&&(o=p.createElement("link"),qr(o,"link",i),me(o),p.head.appendChild(o)))}}function l8(i){Ts.D(i),S2("dns-prefetch",i,null)}function o8(i,o){Ts.C(i,o),S2("preconnect",i,o)}function c8(i,o,u){Ts.L(i,o,u);var p=ko;if(p&&i&&o){var N='link[rel="preload"][as="'+mn(o)+'"]';o==="image"&&u&&u.imageSrcSet?(N+='[imagesrcset="'+mn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(N+='[imagesizes="'+mn(u.imageSizes)+'"]')):N+='[href="'+mn(i)+'"]';var E=N;switch(o){case"style":E=Po(i);break;case"script":E=Mo(i)}yn.has(E)||(i=x({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),yn.set(E,i),p.querySelector(N)!==null||o==="style"&&p.querySelector(fd(E))||o==="script"&&p.querySelector(md(E))||(o=p.createElement("link"),qr(o,"link",i),me(o),p.head.appendChild(o)))}}function d8(i,o){Ts.m(i,o);var u=ko;if(u&&i){var p=o&&typeof o.as=="string"?o.as:"script",N='link[rel="modulepreload"][as="'+mn(p)+'"][href="'+mn(i)+'"]',E=N;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Mo(i)}if(!yn.has(E)&&(i=x({rel:"modulepreload",href:i},o),yn.set(E,i),u.querySelector(N)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(md(E)))return}p=u.createElement("link"),qr(p,"link",i),me(p),u.head.appendChild(p)}}}function u8(i,o,u){Ts.S(i,o,u);var p=ko;if(p&&i){var N=we(p).hoistableStyles,E=Po(i);o=o||"default";var B=N.get(E);if(!B){var H={loading:0,preload:null};if(B=p.querySelector(fd(E)))H.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":o},u),(u=yn.get(E))&&Mp(i,u);var ie=B=p.createElement("link");me(ie),qr(ie,"link",i),ie._p=new Promise(function(he,Se){ie.onload=he,ie.onerror=Se}),ie.addEventListener("load",function(){H.loading|=1}),ie.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Gf(B,o,p)}B={type:"stylesheet",instance:B,count:1,state:H},N.set(E,B)}}}function f8(i,o){Ts.X(i,o);var u=ko;if(u&&i){var p=we(u).hoistableScripts,N=Mo(i),E=p.get(N);E||(E=u.querySelector(md(N)),E||(i=x({src:i,async:!0},o),(o=yn.get(N))&&Fp(i,o),E=u.createElement("script"),me(E),qr(E,"link",i),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(N,E))}}function m8(i,o){Ts.M(i,o);var u=ko;if(u&&i){var p=we(u).hoistableScripts,N=Mo(i),E=p.get(N);E||(E=u.querySelector(md(N)),E||(i=x({src:i,async:!0,type:"module"},o),(o=yn.get(N))&&Fp(i,o),E=u.createElement("script"),me(E),qr(E,"link",i),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(N,E))}}function A2(i,o,u,p){var N=(N=ee.current)?Vf(N):null;if(!N)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Po(u.href),u=we(N).hoistableStyles,p=u.get(o),p||(p={type:"style",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Po(u.href);var E=we(N).hoistableStyles,B=E.get(i);if(B||(N=N.ownerDocument||N,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(i,B),(E=N.querySelector(fd(i)))&&!E._p&&(B.instance=E,B.state.loading=5),yn.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},yn.set(i,u),E||x8(N,i,u,B.state))),o&&p===null)throw Error(n(528,""));return B}if(o&&p!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Mo(u),u=we(N).hoistableScripts,p=u.get(o),p||(p={type:"script",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Po(i){return'href="'+mn(i)+'"'}function fd(i){return'link[rel="stylesheet"]['+i+"]"}function C2(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function x8(i,o,u,p){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=i.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),qr(o,"link",u),me(o),i.head.appendChild(o))}function Mo(i){return'[src="'+mn(i)+'"]'}function md(i){return"script[async]"+i}function T2(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var p=i.querySelector('style[data-href~="'+mn(u.href)+'"]');if(p)return o.instance=p,me(p),p;var N=x({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),me(p),qr(p,"style",N),Gf(p,u.precedence,i),o.instance=p;case"stylesheet":N=Po(u.href);var E=i.querySelector(fd(N));if(E)return o.state.loading|=4,o.instance=E,me(E),E;p=C2(u),(N=yn.get(N))&&Mp(p,N),E=(i.ownerDocument||i).createElement("link"),me(E);var B=E;return B._p=new Promise(function(H,ie){B.onload=H,B.onerror=ie}),qr(E,"link",p),o.state.loading|=4,Gf(E,u.precedence,i),o.instance=E;case"script":return E=Mo(u.src),(N=i.querySelector(md(E)))?(o.instance=N,me(N),N):(p=u,(N=yn.get(E))&&(p=x({},u),Fp(p,N)),i=i.ownerDocument||i,N=i.createElement("script"),me(N),qr(N,"link",p),i.head.appendChild(N),o.instance=N);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,Gf(p,u.precedence,i));return o.instance}function Gf(i,o,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=p.length?p[p.length-1]:null,E=N,B=0;B<p.length;B++){var H=p[B];if(H.dataset.precedence===o)E=H;else if(E!==N)break}E?E.parentNode.insertBefore(i,E.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function Mp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Fp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Kf=null;function D2(i,o,u){if(Kf===null){var p=new Map,N=Kf=new Map;N.set(u,p)}else N=Kf,p=N.get(u),p||(p=new Map,N.set(u,p));if(p.has(i))return p;for(p.set(i,null),u=u.getElementsByTagName(i),N=0;N<u.length;N++){var E=u[N];if(!(E[W]||E[Cr]||i==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var B=E.getAttribute(o)||"";B=i+B;var H=p.get(B);H?H.push(E):p.set(B,[E])}}return p}function O2(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function h8(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function k2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var xd=null;function p8(){}function g8(i,o,u){if(xd===null)throw Error(n(475));var p=xd;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var N=Po(u.href),E=i.querySelector(fd(N));if(E){i=E._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(p.count++,p=Yf.bind(p),i.then(p,p)),o.state.loading|=4,o.instance=E,me(E);return}E=i.ownerDocument||i,u=C2(u),(N=yn.get(N))&&Mp(u,N),E=E.createElement("link"),me(E);var B=E;B._p=new Promise(function(H,ie){B.onload=H,B.onerror=ie}),qr(E,"link",u),o.instance=E}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(p.count++,o=Yf.bind(p),i.addEventListener("load",o),i.addEventListener("error",o))}}function v8(){if(xd===null)throw Error(n(475));var i=xd;return i.stylesheets&&i.count===0&&Lp(i,i.stylesheets),0<i.count?function(o){var u=setTimeout(function(){if(i.stylesheets&&Lp(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u)}}:null}function Yf(){if(this.count--,this.count===0){if(this.stylesheets)Lp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wf=null;function Lp(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wf=new Map,o.forEach(b8,i),Wf=null,Yf.call(i))}function b8(i,o){if(!(o.state.loading&4)){var u=Wf.get(i);if(u)var p=u.get(null);else{u=new Map,Wf.set(i,u);for(var N=i.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<N.length;E++){var B=N[E];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(u.set(B.dataset.precedence,B),p=B)}p&&u.set(null,p)}N=o.instance,B=N.getAttribute("data-precedence"),E=u.get(B)||p,E===p&&u.set(null,N),u.set(B,N),this.count++,p=Yf.bind(this),N.addEventListener("load",p),N.addEventListener("error",p),E?E.parentNode.insertBefore(N,E.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(N,i.firstChild)),o.state.loading|=4}}var hd={$$typeof:S,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function y8(i,o,u,p,N,E,B,H){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_c(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_c(0),this.hiddenUpdates=_c(null),this.identifierPrefix=p,this.onUncaughtError=N,this.onCaughtError=E,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function P2(i,o,u,p,N,E,B,H,ie,he,Se,Ce){return i=new y8(i,o,u,B,H,ie,he,Ce),o=1,E===!0&&(o|=24),E=Ba(3,null,null,o),i.current=E,E.stateNode=i,o=gh(),o.refCount++,i.pooledCache=o,o.refCount++,E.memoizedState={element:p,isDehydrated:u,cache:o},jh(E),i}function M2(i){return i?(i=uo,i):uo}function F2(i,o,u,p,N,E){N=M2(N),p.context===null?p.context=N:p.pendingContext=N,p=oi(o),p.payload={element:u},E=E===void 0?null:E,E!==null&&(p.callback=E),u=ci(i,p,o),u!==null&&(Ha(u,i,o),Vc(u,i,o))}function L2(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Rp(i,o){L2(i,o),(i=i.alternate)&&L2(i,o)}function R2(i){if(i.tag===13){var o=co(i,67108864);o!==null&&Ha(o,i,67108864),Rp(i,67108864)}}var Xf=!0;function j8(i,o,u,p){var N=G.T;G.T=null;var E=K.p;try{K.p=2,Ip(i,o,u,p)}finally{K.p=E,G.T=N}}function N8(i,o,u,p){var N=G.T;G.T=null;var E=K.p;try{K.p=8,Ip(i,o,u,p)}finally{K.p=E,G.T=N}}function Ip(i,o,u,p){if(Xf){var N=Bp(p);if(N===null)Ep(i,o,p,Zf,u),B2(i,p);else if(_8(N,i,o,u,p))p.stopPropagation();else if(B2(i,p),o&4&&-1<w8.indexOf(i)){for(;N!==null;){var E=ae(N);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var B=Qn(E.pendingLanes);if(B!==0){var H=E;for(H.pendingLanes|=2,H.entangledLanes|=2;B;){var ie=1<<31-xa(B);H.entanglements[1]|=ie,B&=~ie}ns(E),(vt&6)===0&&(Mf=Re()+500,od(0))}}break;case 13:H=co(E,2),H!==null&&Ha(H,E,2),Lf(),Rp(E,2)}if(E=Bp(p),E===null&&Ep(i,o,p,Zf,u),E===N)break;N=E}N!==null&&p.stopPropagation()}else Ep(i,o,p,null,u)}}function Bp(i){return i=Hx(i),zp(i)}var Zf=null;function zp(i){if(Zf=null,i=te(i),i!==null){var o=l(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=c(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Zf=i,null}function I2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Br()){case cn:return 2;case Zn:return 8;case Ln:case zu:return 32;case Zl:return 268435456;default:return 32}default:return 32}}var Up=!1,Ni=null,wi=null,_i=null,pd=new Map,gd=new Map,Ei=[],w8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B2(i,o){switch(i){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":pd.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":gd.delete(o.pointerId)}}function vd(i,o,u,p,N,E){return i===null||i.nativeEvent!==E?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:E,targetContainers:[N]},o!==null&&(o=ae(o),o!==null&&R2(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,N!==null&&o.indexOf(N)===-1&&o.push(N),i)}function _8(i,o,u,p,N){switch(o){case"focusin":return Ni=vd(Ni,i,o,u,p,N),!0;case"dragenter":return wi=vd(wi,i,o,u,p,N),!0;case"mouseover":return _i=vd(_i,i,o,u,p,N),!0;case"pointerover":var E=N.pointerId;return pd.set(E,vd(pd.get(E)||null,i,o,u,p,N)),!0;case"gotpointercapture":return E=N.pointerId,gd.set(E,vd(gd.get(E)||null,i,o,u,p,N)),!0}return!1}function z2(i){var o=te(i.target);if(o!==null){var u=l(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){i.blockedOn=o,Ix(i.priority,function(){if(u.tag===13){var p=qa();p=Ec(p);var N=co(u,p);N!==null&&Ha(N,u,p),Rp(u,p)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Qf(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Bp(i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);qx=p,u.target.dispatchEvent(p),qx=null}else return o=ae(u),o!==null&&R2(o),i.blockedOn=u,!1;o.shift()}return!0}function U2(i,o,u){Qf(i)&&u.delete(o)}function E8(){Up=!1,Ni!==null&&Qf(Ni)&&(Ni=null),wi!==null&&Qf(wi)&&(wi=null),_i!==null&&Qf(_i)&&(_i=null),pd.forEach(U2),gd.forEach(U2)}function Jf(i,o){i.blockedOn===o&&(i.blockedOn=null,Up||(Up=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,E8)))}var em=null;function $2(i){em!==i&&(em=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){em===i&&(em=null);for(var o=0;o<i.length;o+=3){var u=i[o],p=i[o+1],N=i[o+2];if(typeof p!="function"){if(zp(p||u)===null)continue;break}var E=ae(u);E!==null&&(i.splice(o,3),o-=3,zh(E,{pending:!0,data:N,method:u.method,action:p},p,N))}}))}function bd(i){function o(ie){return Jf(ie,i)}Ni!==null&&Jf(Ni,i),wi!==null&&Jf(wi,i),_i!==null&&Jf(_i,i),pd.forEach(o),gd.forEach(o);for(var u=0;u<Ei.length;u++){var p=Ei[u];p.blockedOn===i&&(p.blockedOn=null)}for(;0<Ei.length&&(u=Ei[0],u.blockedOn===null);)z2(u),u.blockedOn===null&&Ei.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var N=u[p],E=u[p+1],B=N[Tr]||null;if(typeof E=="function")B||$2(u);else if(B){var H=null;if(E&&E.hasAttribute("formAction")){if(N=E,B=E[Tr]||null)H=B.formAction;else if(zp(N)!==null)continue}else H=B.action;typeof H=="function"?u[p+1]=H:(u.splice(p,3),p-=3),$2(u)}}}function $p(i){this._internalRoot=i}tm.prototype.render=$p.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,p=qa();F2(u,p,i,o,null,null)},tm.prototype.unmount=$p.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;F2(i.current,2,null,i,null,null),Lf(),o[ai]=null}};function tm(i){this._internalRoot=i}tm.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ku();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Ei.length&&o!==0&&o<Ei[u].priority;u++);Ei.splice(u,0,i),u===0&&z2(i)}};var q2=t.version;if(q2!=="19.1.1")throw Error(n(527,q2,"19.1.1"));K.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var S8={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rm.isDisabled&&rm.supportsFiber)try{xs=rm.inject(S8),zr=rm}catch{}}return yd.createRoot=function(i,o){if(!s(i))throw Error(n(299));var u=!1,p="",N=sw,E=iw,B=lw,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(N=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(B=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(H=o.unstable_transitionCallbacks)),o=P2(i,1,!1,null,null,u,p,N,E,B,H,null),i[ai]=o.current,_p(i),new $p(o)},yd.hydrateRoot=function(i,o,u){if(!s(i))throw Error(n(299));var p=!1,N="",E=sw,B=iw,H=lw,ie=null,he=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(N=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(B=u.onCaughtError),u.onRecoverableError!==void 0&&(H=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ie=u.unstable_transitionCallbacks),u.formState!==void 0&&(he=u.formState)),o=P2(i,1,!0,o,u??null,p,N,E,B,H,ie,he),o.context=M2(null),u=o.current,p=qa(),p=Ec(p),N=oi(p),N.callback=null,ci(u,N,p),u=p,o.current.lanes=u,Zi(o,u),ns(o),i[ai]=o.current,_p(i),new tm(o)},yd.version="19.1.1",yd}var J2;function J8(){if(J2)return Gp.exports;J2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Gp.exports=Q8(),Gp.exports}var eP=J8();const tP=Ws(eP),rP="https://rrqzvktlkchregteyvuk.supabase.co",aP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJycXp2a3Rsa2NocmVndGV5dnVrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxODczMzcsImV4cCI6MjA3NTc2MzMzN30.HeUBlcXEcX6-7UjlNP_fHOJdpkz8acRp9Ih08n6OJgs",se=W8(rP,aP,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),ln=Z3((e,t)=>({user:null,userProfile:null,loading:!0,error:null,signIn:async(r,n)=>{try{e({loading:!0,error:null});const{data:s,error:l}=await se.auth.signInWithPassword({email:r,password:n});if(l)throw l;if(s.user){const{data:c,error:d}=await se.from("usuarios").select("*").eq("id",s.user.id).single();if(d)return console.error("🔴 [signIn] error fetching profile:",d),e({user:s.user,userProfile:null,loading:!1,error:d.message}),{success:!1,error:d.message};e({user:s.user,userProfile:c,loading:!1,error:null})}return{success:!0}}catch(s){return console.error("💥 [signIn] CATCH error object:",s),e({loading:!1,error:s.message}),{success:!1,error:s.message}}},signUp:async(r,n,s,l="operador")=>{try{e({loading:!0,error:null});const{data:c,error:d}=await se.auth.signUp({email:r,password:n});if(console.log("🟢 [signUp] data:",c,"error:",d),d)throw d;if(c.user){const{data:f,error:m}=await se.from("usuarios").select("*").eq("id",c.user.id).single();if(m)throw console.error("🔴 [signUp] error fetching profile:",m),m;e({user:c.user,userProfile:f,loading:!1,error:null})}return e({loading:!1}),{success:!0}}catch(c){return console.error("💥 [signUp] CATCH error object:",c),e({loading:!1,error:c.message}),{success:!1,error:c.message}}},signOut:async()=>{try{e({loading:!0}),await se.auth.signOut(),e({user:null,userProfile:null,loading:!1,error:null})}catch(r){console.error("💥 [signOut] error:",r),e({loading:!1,error:r.message})}},initializeAuth:async()=>{try{e({loading:!0});const{data:{session:r}}=await se.auth.getSession();if(r?.user){const{data:n,error:s}=await se.from("usuarios").select("*").eq("id",r.user.id).single();e(!s&&n?{user:r.user,userProfile:n,loading:!1}:{user:r.user,userProfile:null,loading:!1})}else e({user:null,userProfile:null,loading:!1})}catch(r){console.error("Error initializing auth:",r),e({user:null,userProfile:null,loading:!1,error:r.message})}},clearError:()=>e({error:null}),isAuthenticated:()=>!!t().user,isAdmin:()=>t().userProfile?.rol==="administrador",getUserRole:()=>t().userProfile?.rol||null})),nP=[{to:"/",label:"Dashboard",icon:wl},{to:"/animales",label:"Animales",icon:et},{to:"/lotes",label:"Lotes",icon:Fv},{to:"/compras",label:"Compras",icon:Tl},{to:"/ventas",label:"Ventas",icon:Mt},{to:"/pesadas",label:"Pesadas",icon:Zr},{to:"/sanidad",label:"Sanidad",icon:fr},{to:"/produccion-leche",label:"Producción Lechera",icon:ja},{to:"/tareas",label:"Tareas",icon:C8},{to:"/calendario",label:"Calendario",icon:We},{to:"/seleccion-animales",label:"Selección Animales",icon:ft},{to:"/movimientos-animales",label:"Movimientos",icon:T8},{to:"/proveedores",label:"Proveedores",icon:xr},{to:"/transporte",label:"Transporte",icon:Cn},{to:"/compradores",label:"Compradores",icon:$d},{to:"/configuracion",label:"Configuración",icon:zs},{to:"/ayuda",label:"Ayuda",icon:Om},{to:"/usuarios",label:"Usuarios",icon:Dd,adminOnly:!0}],sP=({isOpen:e,onClose:t,isMobile:r})=>{const{pathname:n}=qb(),{isAdmin:s}=ln(),l=nP.filter(f=>f.adminOnly?s():!0),c={open:{x:0,transition:{type:"spring",stiffness:300,damping:40}},closed:{x:r?"-100%":0,transition:{type:"spring",stiffness:300,damping:40}}},d={open:f=>({opacity:1,x:0,transition:{delay:f*.05,duration:.3}}),closed:{opacity:0,x:-20,transition:{duration:.3}}};return a.jsxs(a.Fragment,{children:[a.jsx(Sa,{children:r&&e&&a.jsx(de.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t})}),a.jsxs(de.nav,{className:`
          ${r?"fixed":"sticky"} 
          top-0 
          left-0 h-screen w-72 bg-rural-alternate border-r border-rural-secondary/20 
          z-50 flex flex-col overflow-y-auto
          ${r?"pt-4":"pt-2"}
        `,variants:c,animate:e?"open":"closed",initial:r?"closed":"open",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-rural-secondary/20",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsx("img",{src:"/logo.png",alt:"",className:"h-18 w-18 object-contain"})}),r&&a.jsx("button",{onClick:t,className:"p-2 hover:bg-rural-background rounded-lg transition-colors",children:a.jsx(Qe,{className:"h-5 w-5 text-rural-text"})})]}),a.jsx("div",{className:"flex-1 px-6 py-4 space-y-2",children:l.map((f,m)=>{const x=f.icon,h=n===f.to;return a.jsx(de.div,{custom:m,variants:d,animate:"open",initial:"closed",children:a.jsxs(X3,{to:f.to,onClick:r?t:void 0,className:`
                    flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200
                    ${h?"bg-rural-primary text-white shadow-md":"text-rural-text hover:bg-rural-background hover:text-rural-primary"}
                  `,children:[a.jsx(x,{className:`h-5 w-5 ${h?"text-white":"text-rural-primary"}`}),a.jsx("span",{children:f.label}),h&&a.jsx(de.div,{className:"ml-auto w-2 h-2 bg-white rounded-full",layoutId:"activeIndicator"})]})},f.to)})}),a.jsx("div",{className:"p-6 border-t border-rural-secondary/20",children:a.jsx("div",{className:"text-center text-sm text-rural-text/60",children:a.jsx("p",{children:"© 2025 JestemProgramista.pl"})})})]})]})},iP=[{to:"/",label:"Inicio",icon:wl},{to:"/animales",label:"Animales",icon:et},{to:"/produccion-leche",label:"Leche",icon:ja},{to:"/ventas",label:"Ventas",icon:Mt},{to:"/sanidad",label:"Sanidad",icon:fr}],lP=({onMenuToggle:e})=>{const{pathname:t}=qb();return a.jsx(de.nav,{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-rural-card border-t border-rural-alternate z-30 safe-area-inset-bottom",initial:{y:100},animate:{y:0},transition:{type:"spring",stiffness:300,damping:40},children:a.jsxs("div",{className:"flex items-center justify-around px-2 py-2",children:[iP.map(r=>{const n=r.icon,s=t===r.to;return a.jsxs(X3,{to:r.to,className:`
                flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 min-w-0 flex-1
                ${s?"text-rural-primary":"text-rural-text/60 hover:text-rural-primary"}
              `,children:[a.jsxs("div",{className:"relative",children:[a.jsx(n,{className:"h-5 w-5"}),s&&a.jsx(de.div,{className:"absolute -bottom-1 left-1/2 w-1 h-1 bg-rural-primary rounded-full",layoutId:"bottomIndicator",style:{x:"-50%"}})]}),a.jsx("span",{className:"text-xs font-medium mt-1 truncate",children:r.label})]},r.to)}),a.jsxs("button",{onClick:e,className:"flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 min-w-0 flex-1 text-rural-text/60 hover:text-rural-primary",children:[a.jsx(q3,{className:"h-5 w-5"}),a.jsx("span",{className:"text-xs font-medium mt-1",children:"Más"})]})]})})},oP=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),[s,l]=_.useState(!0),{userProfile:c}=ln(),d=async()=>{try{const{error:g}=await se.from("notifications").select("count").limit(1);return g&&g.code==="42P01"?(l(!1),!1):(l(!0),!0)}catch(g){return console.error("Error verificando tabla notifications:",g),l(!1),!1}},f=async()=>{if(c?.id)try{if(n(!0),!await d()){const j=localStorage.getItem(`notifications_${c.id}`);if(j)t(JSON.parse(j));else{const w=[{id:"local_1",title:"Sistema iniciado",message:"El sistema de notificaciones está funcionando correctamente.",type:"success",created_at:new Date().toISOString(),read:!1},{id:"local_2",title:"Funcionalidad disponible",message:"Las notificaciones se están ejecutando en modo local hasta que se configure la base de datos.",type:"info",created_at:new Date(Date.now()-3e5).toISOString(),read:!1}];t(w),localStorage.setItem(`notifications_${c.id}`,JSON.stringify(w))}n(!1);return}const{data:y,error:b}=await se.from("notifications").select("*").eq("user_id",c.id).eq("read",!1).order("created_at",{ascending:!1}).limit(10);if(b){console.error("Error loading notifications:",b);return}t(y||[])}catch(g){console.error("Error loading notifications:",g);const y=localStorage.getItem(`notifications_${c.id}`);t(y?JSON.parse(y):[])}finally{n(!1)}},m=async g=>{try{if(!s)return t(b=>{const j=b.filter(w=>w.id!==g);return localStorage.setItem(`notifications_${c.id}`,JSON.stringify(j)),j}),!0;const{error:y}=await se.from("notifications").update({read:!0}).eq("id",g);return y?(console.error("Error marking notification as read:",y),!1):(t(b=>b.filter(j=>j.id!==g)),!0)}catch(y){return console.error("Error marking notification as read:",y),!1}},x=async()=>{if(e.length===0)return!0;try{if(!s)return t([]),localStorage.setItem(`notifications_${c.id}`,JSON.stringify([])),!0;const g=e.map(b=>b.id),{error:y}=await se.from("notifications").update({read:!0}).in("id",g);return y?(console.error("Error marking all notifications as read:",y),!1):(t([]),!0)}catch(g){return console.error("Error marking all notifications as read:",g),!1}},h=async(g,y,b="info",j=null)=>{try{const w=j||c?.id;if(!w)return!1;if(!s){if(w===c?.id){const S={id:`local_${Date.now()}`,title:g,message:y,type:b,created_at:new Date().toISOString(),read:!1};t(D=>{const T=[S,...D];return localStorage.setItem(`notifications_${c.id}`,JSON.stringify(T)),T})}return!0}const{error:A}=await se.from("notifications").insert({user_id:w,title:g,message:y,type:b,read:!1,created_at:new Date().toISOString()});return A?(console.error("Error creating notification:",A),!1):(w===c?.id&&await f(),!0)}catch(w){return console.error("Error creating notification:",w),!1}},v=async(g,y)=>{const j={animal_sold:{title:"Venta registrada",message:`Se vendieron ${y.cantidad} animales a "${y.comprador}"`},animal_bought:{title:"Compra registrada",message:`Se compraron ${y.cantidad} animales de "${y.proveedor}"`},health_event:{title:"Evento sanitario",message:`${y.tipo_evento} programado para ${y.animal_count} animales`},weight_recorded:{title:"Pesada registrada",message:`Nuevo peso registrado: ${y.peso}kg para animal ${y.animal_id}`},alert_vaccination:{title:"Alerta sanitaria",message:`Vacunación pendiente para ${y.animal_count} animales`},alert_weight:{title:"Alerta de peso",message:`Animal ${y.animal_id} requiere atención - peso bajo detectado`}}[g];return j?await h(j.title,j.message,"alert"):!1};return _.useEffect(()=>{if(!c?.id||(f(),!s))return;const g=se.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${c.id}`},y=>{console.log("Nueva notificación recibida:",y.new),t(b=>[y.new,...b])}).subscribe();return()=>{g.unsubscribe()}},[c?.id,s]),{notifications:e,loading:r,markAsRead:m,markAllAsRead:x,createNotification:h,createSystemNotification:v,refetch:f}},cP=({onMenuToggle:e,isMobile:t})=>{const[r,n]=_.useState(!1),[s,l]=_.useState(!1),{userProfile:c,signOut:d}=ln(),{notifications:f,loading:m,markAsRead:x,markAllAsRead:h}=oP(),v=async()=>{await d(),n(!1)},g=async w=>{await x(w)},y=async()=>{await h()&&l(!1)},b=w=>{const A=new Date,S=new Date(w),D=Math.floor((A-S)/(1e3*60));return D<1?"Ahora":D<60?`${D}m`:D<1440?`${Math.floor(D/60)}h`:`${Math.floor(D/1440)}d`},j=w=>{switch(w){case"success":return"✅";case"warning":return"⚠️";case"alert":return"🚨";case"error":return"❌";default:return"ℹ️"}};return a.jsxs(de.header,{className:"bg-rural-card shadow-sm border-b border-rural-alternate h-16 flex items-center justify-between px-4 lg:px-6 fixed top-0 left-0 right-0 z-40",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[a.jsx("div",{className:"flex items-center space-x-3",children:t&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-rural-alternate rounded-lg transition-colors",children:a.jsx(q3,{className:"h-6 w-6 text-rural-text"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:"/logo.png",alt:"Gutiérrez Hnos Logo",className:"h-10 w-10 object-contain"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-rural-text",children:"Gutiérrez Hnos"}),a.jsx("p",{className:"text-sm text-rural-text/70",children:"Gestión Ganadera"})]})]})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>l(!s),className:"p-2 hover:bg-rural-alternate rounded-lg transition-colors relative",children:[a.jsx(H3,{className:"h-5 w-5 text-rural-text"}),f.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-rural-alert text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:f.length})]}),s&&a.jsxs(de.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-2 w-96 bg-rural-card rounded-xl shadow-lg border border-rural-alternate/50 py-2 z-50",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-rural-alternate/30 flex items-center justify-between",children:[a.jsx("h4",{className:"font-semibold text-rural-text",children:"Notificaciones"}),f.length>0&&a.jsx("span",{className:"text-xs bg-rural-primary text-white px-2 py-1 rounded-full",children:f.length})]}),a.jsx("div",{className:"py-1 max-h-80 overflow-y-auto",children:m?a.jsxs("div",{className:"px-4 py-6 text-center",children:[a.jsx(V3,{className:"h-5 w-5 text-rural-primary animate-spin mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-rural-text/60",children:"Cargando notificaciones..."})]}):f.length>0?f.map(w=>a.jsx("div",{className:"px-4 py-3 hover:bg-rural-alternate transition-colors border-b border-rural-alternate/20 last:border-b-0",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("span",{className:"text-sm",children:j(w.type)}),a.jsx("p",{className:"text-sm text-rural-text font-medium truncate",children:w.title}),a.jsx("span",{className:"text-xs text-rural-text/40 flex-shrink-0",children:b(w.created_at)})]}),a.jsx("p",{className:"text-xs text-rural-text/60 leading-relaxed",children:w.message})]}),a.jsx("button",{onClick:()=>g(w.id),className:"ml-2 text-xs text-rural-primary hover:underline flex-shrink-0",children:"Marcar leída"})]})},w.id)):a.jsxs("div",{className:"px-4 py-6 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"🔔"}),a.jsx("p",{className:"text-sm text-rural-text/60",children:"No tienes notificaciones nuevas."})]})}),f.length>0&&a.jsx("div",{className:"px-4 py-2 border-t border-rural-alternate/30 text-center",children:a.jsx("button",{onClick:y,className:"text-sm text-rural-primary hover:underline font-medium",children:"Marcar todas como leídas"})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>n(!r),className:"flex items-center space-x-2 p-2 hover:bg-rural-alternate rounded-lg transition-colors",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-rural-primary rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:c?.nombre?.charAt(0)?.toUpperCase()||"U"})}),!t&&a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"text-sm font-medium text-rural-text",children:c?.nombre||"Usuario"}),a.jsxs("div",{className:"flex items-center space-x-1",children:[c?.rol==="administrador"&&a.jsx(qd,{className:"h-3 w-3 text-rural-primary"}),a.jsx("p",{className:"text-xs text-rural-text/60 capitalize",children:c?.rol||"operador"})]})]})]})}),r&&a.jsxs(de.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-2 w-64 bg-rural-card rounded-xl shadow-lg border border-rural-alternate/50 py-2 z-50",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-rural-alternate/30",children:[a.jsx("p",{className:"font-medium text-rural-text",children:c?.nombre}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[c?.rol==="administrador"&&a.jsx(qd,{className:"h-3 w-3 text-rural-primary"}),a.jsx("p",{className:"text-sm text-rural-text/60 capitalize",children:c?.rol})]})]}),a.jsx("div",{className:"py-1",children:a.jsxs("button",{onClick:v,className:"flex items-center space-x-3 w-full px-4 py-2 text-left hover:bg-red-50 text-red-600 transition-colors",children:[a.jsx(D8,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Cerrar Sesión"})]})})]})]})]}),(r||s)&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{n(!1),l(!1)}})]})};function dP({children:e}){const[t,r]=_.useState(!1),[n,s]=_.useState(!1),l=qb(),c=ln(v=>v.user),f=["/login"].includes(l.pathname),m=c&&!f;_.useEffect(()=>{const v=()=>{r(window.innerWidth<1024),window.innerWidth>=1024?s(!0):s(!1)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const x=()=>{s(!n)},h=()=>{s(!1)};return f?a.jsx("div",{className:"min-h-screen bg-rural-background",children:a.jsx(de.main,{className:"w-full min-h-screen",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e})}):a.jsxs("div",{className:"min-h-screen bg-rural-background flex",children:[m&&a.jsx("div",{className:`${t?"":"w-72"} ${t?"":"flex-shrink-0"}`,children:a.jsx(sP,{isOpen:n,onClose:h,isMobile:t})}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[m&&a.jsx(cP,{onMenuToggle:x,isMobile:t}),a.jsx(de.main,{className:`
            flex-1 overflow-auto
            ${m?t?"pt-16 pb-20":"pt-16":""} 
            ${m?"px-4 lg:px-6 py-6":""}
          `,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:a.jsx("div",{className:m?"max-w-7xl mx-auto":"w-full",children:e})}),m&&a.jsx(lP,{onMenuToggle:x})]})]})}const Hr=({children:e})=>{const{user:t,loading:r,isAuthenticated:n}=ln();return r?a.jsx("div",{className:"min-h-screen bg-rural-background flex items-center justify-center",children:a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rural-primary mx-auto mb-4"}),a.jsx("p",{className:"text-rural-text/70",children:"Verificando sesión..."})]})}):n()?e:a.jsx(Hb,{to:"/login",replace:!0})},uP=({children:e})=>{const{user:t,loading:r,isAuthenticated:n,isAdmin:s}=ln();return r?a.jsx("div",{className:"min-h-screen bg-rural-background flex items-center justify-center",children:a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rural-primary mx-auto mb-4"}),a.jsx("p",{className:"text-rural-text/70",children:"Verificando permisos..."})]})}):n()?s()?e:a.jsx("div",{className:"min-h-screen bg-rural-background flex items-center justify-center",children:a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center max-w-md mx-auto p-8",children:a.jsxs("div",{className:"bg-rural-card rounded-xl p-8 shadow-lg",children:[a.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"🚫"}),a.jsx("h2",{className:"text-2xl font-bold text-rural-text mb-4",children:"Acceso Denegado"}),a.jsx("p",{className:"text-rural-text/70 mb-6",children:"No tienes permisos para acceder a esta página. Solo los administradores pueden ver este contenido."}),a.jsx("button",{onClick:()=>window.history.back(),className:"bg-rural-primary text-white px-6 py-3 rounded-lg hover:bg-rural-primary/90 transition-colors",children:"Volver atrás"})]})})}):a.jsx(Hb,{to:"/login",replace:!0})},fP=()=>{const e=Vb(),{signIn:t,loading:r,error:n}=ln(),[s,l]=_.useState({email:"",password:""}),[c,d]=_.useState(!1),f=x=>{const{name:h,value:v}=x.target;l(g=>({...g,[h]:v}))},m=async x=>{x.preventDefault(),(await t(s.email,s.password)).success&&e("/")};return a.jsx("div",{className:"min-h-screen bg-rural-background flex items-center justify-center p-4",children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("div",{className:"flex justify-center mb-2",children:a.jsx("img",{src:"/logo.png",alt:"Logo systemu",className:"h-48 w-48 object-contain"})})}),a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},className:"bg-rural-card rounded-2xl p-8 shadow-lg border border-rural-alternate/50",children:[a.jsx("h2",{className:"text-2xl font-bold text-rural-text mb-6 text-center",children:"Logowanie"}),n&&a.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl flex items-center space-x-2 text-red-600",children:[a.jsx(ia,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:n})]}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Adres email"}),a.jsxs("div",{className:"relative",children:[a.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:"email",name:"email",value:s.email,onChange:f,className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",placeholder:"twoj@email.pl",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Hasło"}),a.jsxs("div",{className:"relative",children:[a.jsx(Lv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:c?"text":"password",name:"password",value:s.password,onChange:f,className:"w-full pl-10 pr-12 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",placeholder:"••••••••",required:!0}),a.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-rural-text/40 hover:text-rural-primary transition-colors",children:c?a.jsx(z0,{className:"h-5 w-5"}):a.jsx(Kt,{className:"h-5 w-5"})})]})]}),a.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 px-4 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Logowanie..."})]}):a.jsx("span",{children:"Zaloguj się"})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-rural-text/60 text-sm",children:"Aby uzyskać dostęp, skontaktuj się z administratorem systemu"})})]}),a.jsx("div",{className:"text-center mt-8",children:a.jsx("p",{className:"text-sm text-rural-text/50",children:"© 2025 jestemprogramista.pl"})})]})})},mP=()=>{const[e,t]=_.useState({stats:{totalAnimalesEnCampo:0,totalAnimalesVendidos:0,animalesCriticos:0,tiempoPromedioEnCampo:0,diferenciaPrecios:0},categorias:[],ultimasCompras:[],ultimasVentas:[],ultimosEventos:[]}),[r,n]=_.useState(!0),[s,l]=_.useState(null),c=async()=>{try{n(!0),l(null);const{data:d,error:f}=await se.from("animales").select("id, estado, categoria, estado_fisico, fecha_ingreso, peso_ingreso, precio_compra");if(f)throw console.error("Error fetching animales:",f),new Error("Error al obtener datos de animales");const{data:m,error:x}=await se.from("detalle_venta").select("peso_salida, precio_final, venta_id, animal_id");x&&console.error("Error fetching ventas detalle:",x);const{data:h,error:v}=await se.from("ventas").select("id, precio_kilo");v&&console.error("Error fetching ventas info:",v);const{data:g,error:y}=await se.from("compras").select("id, fecha, precio_total, proveedor_id, transportador_id").order("fecha",{ascending:!1}).limit(5);y&&console.error("Error fetching compras:",y);const{data:b,error:j}=await se.from("proveedores").select("id, nombre");j&&console.error("Error fetching proveedores:",j);const{data:w,error:A}=await se.from("ventas").select("id, fecha, tipo, precio_kilo, comprador_id").order("fecha",{ascending:!1}).limit(5);A&&console.error("Error fetching ultimas ventas:",A);const{data:S,error:D}=await se.from("compradores").select("id, nombre");D&&console.error("Error fetching compradores:",D);const{data:T,error:k}=await se.from("eventos_sanitarios").select("id, fecha, tipo, descripcion, animal_id").order("fecha",{ascending:!1}).limit(5);k&&console.error("Error fetching eventos:",k);const C=(d||[]).filter(ce=>ce.estado==="en_campo"),M=(d||[]).filter(ce=>ce.estado==="vendido"),I=C.filter(ce=>ce.estado_fisico==="critico"||ce.estado_fisico==="malo"),R=new Date,L=C.filter(ce=>ce.fecha_ingreso).map(ce=>{const le=new Date(ce.fecha_ingreso);return Math.floor((R-le)/(1e3*60*60*24))}),P=L.length>0?Math.round(L.reduce((ce,le)=>ce+le,0)/L.length):0;let O=0;if(m&&m.length>0&&h&&h.length>0)try{const ce=m.map(le=>{const ne=h.find(F=>F.id===le.venta_id),Z=d.find(F=>F.id===le.animal_id);return ne&&Z&&ne.precio_kilo&&Z.precio_compra?ne.precio_kilo-Z.precio_compra:null}).filter(le=>le!==null&&!isNaN(le));ce.length>0&&(O=ce.reduce((le,ne)=>le+ne,0)/ce.length)}catch(ce){console.error("Error calculating price difference:",ce)}const z=C.reduce((ce,le)=>{const ne=le.categoria||"Sin categoría";return ce[ne]=(ce[ne]||0)+1,ce},{}),V=(g||[]).map(ce=>{const le=(b||[]).find(ne=>ne.id===ce.proveedor_id);return{...ce,proveedor:le?{nombre:le.nombre}:{nombre:"Proveedor desconocido"}}}),G=(w||[]).map(ce=>{const le=(S||[]).find(ne=>ne.id===ce.comprador_id);return{...ce,comprador:le?{nombre:le.nombre}:{nombre:"Comprador desconocido"}}}),K=(T||[]).map(ce=>{const le=(d||[]).find(ne=>ne.id===ce.animal_id);return{...ce,animal:le?{numero_caravana:le.numero_caravana||"S/N",color_caravana:le.color_caravana||"S/C"}:{numero_caravana:"S/N",color_caravana:"S/C"}}});t({stats:{totalAnimalesEnCampo:C.length,totalAnimalesVendidos:M.length,animalesCriticos:I.length,tiempoPromedioEnCampo:P,diferenciaPrecios:Math.round(O*100)/100},categorias:Object.entries(z).map(([ce,le])=>({nombre:ce,cantidad:le})),ultimasCompras:V,ultimasVentas:G,ultimosEventos:K})}catch(d){console.error("Error fetching dashboard data:",d),l(d.message||"Error al cargar los datos del dashboard")}finally{n(!1)}};return _.useEffect(()=>{c()},[]),{data:e,loading:r,error:s,refetch:c}},Q3=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!1),[s,l]=_.useState(null),c=async(b,j)=>{n(!0),l(null);try{let w=se.from("produccion_leche").select(`
          *,
          animales (
            numero_caravana,
            estado_reproductivo
          )
        `).order("fecha",{ascending:!1});b&&(w=w.gte("fecha",b)),j&&(w=w.lte("fecha",j));const{data:A,error:S}=await w;if(S)throw S;t(A||[])}catch(w){console.error("Error fetching producción leche:",w),l(w instanceof Error?w.message:"Error desconocido")}finally{n(!1)}},d=async(b,j,w)=>{n(!0),l(null);try{let A=se.from("produccion_leche").select("*").eq("animal_id",b).order("fecha",{ascending:!1});j&&(A=A.gte("fecha",j)),w&&(A=A.lte("fecha",w));const{data:S,error:D}=await A;if(D)throw D;return S||[]}catch(A){return console.error("Error fetching producción por animal:",A),l(A instanceof Error?A.message:"Error desconocido"),[]}finally{n(!1)}},f=async b=>{n(!0),l(null);try{const j=b.litros_am+b.litros_pm,{data:w,error:A}=await se.from("produccion_leche").insert([{...b,total_litros:j}]).select().single();if(A)throw A;return t(S=>[w,...S]),w}catch(j){throw console.error("Error creating producción leche:",j),l(j instanceof Error?j.message:"Error desconocido"),j}finally{n(!1)}},m=async(b,j)=>{n(!0),l(null);try{const w={...j};if(j.litros_am!==void 0||j.litros_pm!==void 0){const D=e.find(T=>T.id===b);if(D){const T=j.litros_am??D.litros_am,k=j.litros_pm??D.litros_pm;w.total_litros=T+k}}const{data:A,error:S}=await se.from("produccion_leche").update(w).eq("id",b).select().single();if(S)throw S;return t(D=>D.map(T=>T.id===b?A:T)),A}catch(w){throw console.error("Error updating producción leche:",w),l(w instanceof Error?w.message:"Error desconocido"),w}finally{n(!1)}},x=async b=>{n(!0),l(null);try{const{error:j}=await se.from("produccion_leche").delete().eq("id",b);if(j)throw j;t(w=>w.filter(A=>A.id!==b))}catch(j){throw console.error("Error deleting producción leche:",j),l(j instanceof Error?j.message:"Error desconocido"),j}finally{n(!1)}},h=async b=>{try{const{data:j,error:w}=await se.from("produccion_leche").select("*").eq("fecha",b);if(w)throw w;if(!j||j.length===0)return{fecha:b,animales_ordeñados:0,produccion_total:0,promedio_por_animal:0,total_am:0,total_pm:0};const A=j.reduce((T,k)=>T+k.litros_am,0),S=j.reduce((T,k)=>T+k.litros_pm,0),D=A+S;return{fecha:b,animales_ordeñados:j.length,produccion_total:D,promedio_por_animal:j.length>0?D/j.length:0,total_am:A,total_pm:S}}catch(j){return console.error("Error obteniendo resumen diario:",j),null}};return{produccionLeche:e,loading:r,error:s,fetchProduccionLeche:c,fetchProduccionPorAnimal:d,crearProduccionLeche:f,actualizarProduccionLeche:m,eliminarProduccionLeche:x,obtenerResumenDiario:h,obtenerMetricasLecheras:async()=>{try{const b=new Date().toISOString().split("T")[0],j=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],w=await h(b),{data:A,error:S}=await se.from("produccion_leche").select("total_litros, fecha").gte("fecha",j);if(S)throw S;const D=A?.reduce((O,z)=>O+z.total_litros,0)||0,T=A?.length||0,k=T>0?D/T:0,{data:C,error:M}=await se.from("animales").select("estado_reproductivo, control_antibioticos");if(M)throw M;const I=C?.reduce((O,z)=>{const V=z.estado_reproductivo||"vacia";return O[V]=(O[V]||0)+1,O},{})||{},R=C?.filter(O=>O.control_antibioticos&&Array.isArray(O.control_antibioticos)&&O.control_antibioticos.length>0).length||0,L=Array.from({length:7},(O,z)=>{const V=new Date;return V.setDate(V.getDate()-z),V.toISOString().split("T")[0]}).reverse(),P=await Promise.all(L.map(async O=>(await h(O))?.produccion_total||0));return{produccion_total_hoy:w?.produccion_total||0,promedio_por_animal_hoy:w?.promedio_por_animal||0,animales_ordeñados_hoy:w?.animales_ordeñados||0,produccion_total_mes:D,promedio_mes:k,tendencia_semanal:P,animales_lactancia:I.lactancia||0,animales_secos:I.seca||0,animales_prenados:I.prenada||0,animales_vacios:I.vacia||0,alertas_antibioticos:R,tareas_pendientes:0}}catch(b){return console.error("Error obteniendo métricas lecheras:",b),null}},verificarRegistroExistente:async(b,j)=>{try{const{data:w,error:A}=await se.from("produccion_leche").select("id").eq("animal_id",b).eq("fecha",j).limit(1);if(A)throw A;return w&&w.length>0||!1}catch(w){return console.error("Error verificando registro existente:",w),!1}},clearError:()=>l(null)}},J3=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!1),[s,l]=_.useState(null),c=async T=>{n(!0),l(null);try{let k=se.from("tareas").select(`
          *,
          animales (
            numero_caravana,
            categoria
          )
        `).order("fecha_vencimiento",{ascending:!0});T?.estado&&(k=k.eq("estado",T.estado)),T?.prioridad&&(k=k.eq("prioridad",T.prioridad)),T?.animal_id&&(k=k.eq("animal_id",T.animal_id)),T?.fecha_inicio&&(k=k.gte("fecha_vencimiento",T.fecha_inicio)),T?.fecha_fin&&(k=k.lte("fecha_vencimiento",T.fecha_fin)),T?.tipo&&(k=k.eq("tipo",T.tipo));const{data:C,error:M}=await k;if(M)throw M;t(C||[])}catch(k){console.error("Error fetching tareas:",k),l(k instanceof Error?k.message:"Error desconocido")}finally{n(!1)}},d=async()=>{try{const{data:T,error:k}=await se.from("tareas").select("*").eq("estado","pendiente").order("fecha_vencimiento",{ascending:!0});if(k)throw k;return T||[]}catch(T){return console.error("Error fetching tareas pendientes:",T),[]}},f=async()=>{const T=new Date().toISOString().split("T")[0];try{const{data:k,error:C}=await se.from("tareas").select(`
          *,
          animales (
            numero_caravana,
            categoria
          )
        `).eq("estado","pendiente").lt("fecha_vencimiento",T).order("fecha_vencimiento",{ascending:!0});if(C)throw C;return k||[]}catch(k){return console.error("Error fetching tareas vencidas:",k),[]}},m=async()=>{const T=new Date().toISOString().split("T")[0];try{const{data:k,error:C}=await se.from("tareas").select(`
          *,
          animales (
            numero_caravana,
            categoria
          )
        `).eq("fecha_vencimiento",T).order("prioridad",{ascending:!1});if(C)throw C;return k||[]}catch(k){return console.error("Error fetching tareas de hoy:",k),[]}},x=async T=>{n(!0),l(null);try{const{data:k,error:C}=await se.from("tareas").insert([T]).select().single();if(C)throw C;return t(M=>[k,...M]),k}catch(k){throw console.error("Error creating tarea:",k),l(k instanceof Error?k.message:"Error desconocido"),k}finally{n(!1)}},h=async(T,k)=>{n(!0),l(null);try{const{data:C,error:M}=await se.from("tareas").update(k).eq("id",T).select().single();if(M)throw M;return t(I=>I.map(R=>R.id===T?C:R)),C}catch(C){throw console.error("Error updating tarea:",C),l(C instanceof Error?C.message:"Error desconocido"),C}finally{n(!1)}};return{tareas:e,loading:r,error:s,fetchTareas:c,fetchTareasPendientes:d,fetchTareasVencidas:f,fetchTareasHoy:m,crearTarea:x,actualizarTarea:h,completarTarea:async(T,k)=>{const C=new Date().toISOString();return h(T,{estado:"completada",fecha_completada:C,notas:k||void 0})},iniciarTarea:async T=>h(T,{estado:"en_progreso"}),cancelarTarea:async(T,k)=>h(T,{estado:"cancelada",notas:k||void 0}),eliminarTarea:async T=>{n(!0),l(null);try{const{error:k}=await se.from("tareas").delete().eq("id",T);if(k)throw k;t(C=>C.filter(M=>M.id!==T))}catch(k){throw console.error("Error deleting tarea:",k),l(k instanceof Error?k.message:"Error desconocido"),k}finally{n(!1)}},obtenerEstadisticasTareas:async()=>{try{const{data:T}=await se.from("tareas").select("id").limit(1);if(!T)return{total:0,pendientes:0,en_progreso:0,completadas:0,canceladas:0,vencidas:0,hoy:0,alta_prioridad:0};const{data:k,error:C}=await se.from("tareas").select("estado, prioridad, fecha_vencimiento");if(C)return console.warn("Error accessing tareas table:",C),{total:0,pendientes:0,en_progreso:0,completadas:0,canceladas:0,vencidas:0,hoy:0,alta_prioridad:0};const M=new Date().toISOString().split("T")[0];return{total:k?.length||0,pendientes:k?.filter(R=>R.estado==="pendiente").length||0,en_progreso:k?.filter(R=>R.estado==="en_progreso").length||0,completadas:k?.filter(R=>R.estado==="completada").length||0,canceladas:k?.filter(R=>R.estado==="cancelada").length||0,vencidas:k?.filter(R=>R.estado==="pendiente"&&R.fecha_vencimiento<M).length||0,hoy:k?.filter(R=>R.fecha_vencimiento===M&&R.estado!=="completada").length||0,alta_prioridad:k?.filter(R=>R.prioridad==="alta"&&R.estado==="pendiente").length||0}}catch(T){return console.error("Error obteniendo estadísticas de tareas:",T),{total:0,pendientes:0,en_progreso:0,completadas:0,canceladas:0,vencidas:0,hoy:0,alta_prioridad:0}}},crearTareaAutomatica:async(T,k,C,M)=>{const I={titulo:`${T} - Animal ${k}`,descripcion:M,tipo:T,animal_id:k,fecha_vencimiento:C,prioridad:"media",estado:"pendiente"};return x(I)},programarTareasRecurrentes:async T=>{const k=new Date,C=[],M=new Date(k);M.setMonth(M.getMonth()+1),C.push({titulo:"Revisión veterinaria mensual",descripcion:"Revisión general del estado de salud del animal",tipo:"veterinaria",animal_id:T,fecha_vencimiento:M.toISOString().split("T")[0],prioridad:"media",estado:"pendiente"});const I=new Date(k);I.setMonth(I.getMonth()+3),C.push({titulo:"Control reproductivo",descripcion:"Evaluación del estado reproductivo y planificación de servicios",tipo:"reproductiva",animal_id:T,fecha_vencimiento:I.toISOString().split("T")[0],prioridad:"alta",estado:"pendiente"});try{const{data:R,error:L}=await se.from("tareas").insert(C).select();if(L)throw L;return R}catch(R){throw console.error("Error programando tareas recurrentes:",R),R}},obtenerProximasTareas:async(T=7)=>{const k=new Date,C=new Date(k);C.setDate(C.getDate()+T);try{const{data:M,error:I}=await se.from("tareas").select(`
          *,
          animales (
            numero_caravana,
            categoria
          )
        `).eq("estado","pendiente").gte("fecha_vencimiento",k.toISOString().split("T")[0]).lte("fecha_vencimiento",C.toISOString().split("T")[0]).order("fecha_vencimiento",{ascending:!0});if(I)throw I;return M||[]}catch(M){return console.error("Error obteniendo próximas tareas:",M),[]}},clearError:()=>l(null)}},xP=({title:e,value:t,subtitle:r,icon:n,color:s,bgColor:l,trend:c,delay:d=0})=>{const f={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{delay:d,duration:.5,ease:"easeOut"}}},m={hidden:{scale:0,rotate:-180},visible:{scale:1,rotate:0,transition:{delay:d+.2,duration:.6,ease:"easeOut"}}};return a.jsxs(de.div,{variants:f,initial:"hidden",animate:"visible",whileHover:{y:-4,scale:1.02,transition:{duration:.2}},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50 hover:shadow-lg transition-all cursor-pointer relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-rural-primary/5 to-transparent rounded-full -translate-y-16 translate-x-16"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium mb-1",children:e}),a.jsxs("div",{className:"flex items-baseline space-x-2",children:[a.jsx(de.span,{className:"text-3xl font-bold text-rural-text",initial:{scale:0},animate:{scale:1},transition:{delay:d+.3,duration:.4},children:t}),c&&a.jsxs("span",{className:`text-sm font-medium ${c>0?"text-green-600":"text-red-600"}`,children:[c>0?"+":"",c,"%"]})]}),r&&a.jsx("p",{className:"text-rural-text/50 text-xs mt-1",children:r})]}),a.jsx(de.div,{variants:m,className:`p-3 rounded-xl ${l} flex-shrink-0`,children:a.jsx(n,{className:`h-6 w-6 ${s}`})})]}),e.includes("Crítico")&&t>0&&a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-rural-text/60 mb-1",children:[a.jsx("span",{children:"Estado de alerta"}),a.jsx("span",{children:t>10?"Alto":t>5?"Medio":"Bajo"})]}),a.jsx("div",{className:"w-full bg-rural-alternate/30 rounded-full h-2",children:a.jsx(de.div,{className:`h-2 rounded-full ${t>10?"bg-red-500":t>5?"bg-rural-alert":"bg-green-500"}`,initial:{width:0},animate:{width:`${Math.min(t*10,100)}%`},transition:{delay:d+.5,duration:.8}})})]})]})]})},hP=({data:e,title:t,type:r="bar"})=>{if(!e||e.length===0)return a.jsxs("div",{className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-4",children:t}),a.jsx("div",{className:"flex items-center justify-center h-32 text-rural-text/60",children:a.jsx("p",{children:"No hay datos disponibles"})})]});const n=Math.max(...e.map(s=>s.cantidad));return a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-rural-card rounded-2xl p-5 shadow-sm border border-rural-alternate/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-4",children:t}),a.jsx("div",{className:"space-y-3",children:e.map((s,l)=>a.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*l,duration:.4},className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-16 text-xs font-medium text-rural-text/80 truncate",children:s.nombre}),a.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[a.jsx("div",{className:"flex-1 bg-rural-alternate/30 rounded-full h-2 overflow-hidden",children:a.jsx(de.div,{className:"h-full bg-gradient-to-r from-rural-primary to-rural-primary/80 rounded-full",initial:{width:0},animate:{width:`${s.cantidad/n*100}%`},transition:{delay:.2*l,duration:.8,ease:"easeOut"}})}),a.jsx("div",{className:"w-6 text-right",children:a.jsx(de.span,{className:"text-xs font-semibold text-rural-text",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3*l},children:s.cantidad})})]})]},s.nombre))}),a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-4 pt-3 border-t border-rural-alternate/30",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-rural-text/60",children:"Total categorías:"}),a.jsx("span",{className:"font-semibold text-rural-text",children:e.length})]}),a.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[a.jsx("span",{className:"text-rural-text/60",children:"Total animales:"}),a.jsx("span",{className:"font-semibold text-rural-text",children:e.reduce((s,l)=>s+l.cantidad,0)})]})]})]})},pP=({compras:e,ventas:t,eventos:r})=>{const n=Vb(),s=f=>{const m=new Date(f),h=Math.abs(new Date-m),v=Math.ceil(h/(1e3*60*60*24));return v===1?"Hoy":v===2?"Ayer":v<=7?`Hace ${v-1} días`:m.toLocaleDateString("es-AR")},l=f=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0,maximumFractionDigits:0}).format(f),c=[...e.map(f=>({type:"compra",id:f.id,title:"Nueva compra registrada",description:`${f.proveedor?.nombre||"Proveedor"} - ${l(f.precio_total)}`,date:f.fecha,icon:st,color:"text-rural-primary",bgColor:"bg-rural-primary/10"})),...t.map(f=>({type:"venta",id:f.id,title:"Venta completada",description:`${f.comprador?.nombre||"Comprador"} - ${f.tipo} - ${l(f.precio_kilo)}/kg`,date:f.fecha,icon:rr,color:"text-green-600",bgColor:"bg-green-100"})),...r.map(f=>({type:"evento",id:f.id,title:"Evento sanitario",description:`${f.tipo} - ${f.animal?.numero_caravana?`Caravana ${f.animal.numero_caravana}`:"Animal"}`,date:f.fecha,icon:Mt,color:"text-blue-600",bgColor:"bg-blue-100"}))].sort((f,m)=>new Date(m.date)-new Date(f.date)).slice(0,8),d=f=>{switch(f.type){case"compra":n("/compras");break;case"venta":n("/ventas");break;case"evento":n("/sanidad");break}};return a.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-rural-text",children:"Actividad Reciente"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 text-rural-primary"}),a.jsx("span",{className:"text-sm text-rural-text/60",children:"Últimas actualizaciones"})]})]}),c.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(tn,{className:"h-12 w-12 text-rural-primary/40 mx-auto mb-3"}),a.jsx("p",{className:"text-rural-text/60",children:"No hay actividad reciente"}),a.jsx("p",{className:"text-rural-text/40 text-sm",children:"Las nuevas operaciones aparecerán aquí"})]}):a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:c.map((f,m)=>{const x=f.icon;return a.jsxs(de.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*m,duration:.3},whileHover:{scale:1.02,transition:{duration:.2}},onClick:()=>d(f),className:"flex items-center space-x-4 p-4 bg-rural-background rounded-xl hover:bg-rural-alternate/30 transition-all cursor-pointer group",children:[a.jsx("div",{className:`p-2 rounded-lg ${f.bgColor} group-hover:scale-110 transition-transform`,children:a.jsx(x,{className:`h-4 w-4 ${f.color}`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-rural-text group-hover:text-rural-primary transition-colors",children:f.title}),a.jsx("p",{className:"text-sm text-rural-text/60 truncate",children:f.description})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-rural-text/50",children:[a.jsx("span",{children:s(f.date)}),a.jsx(Kt,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})]},`${f.type}-${f.id}-${m}`)})}),c.length>0&&a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-4 pt-4 border-t border-rural-alternate/30 text-center",children:a.jsx("button",{onClick:()=>n("/dashboard"),className:"text-sm text-rural-primary hover:text-rural-primary/80 font-medium transition-colors",children:"Ver toda la actividad"})})]})},gP=()=>{const e=Vb(),t=[{label:"Nueva Compra",description:"Registrar compra de animales",icon:Tl,color:"bg-rural-primary hover:bg-rural-primary/90",textColor:"text-white",path:"/compras",action:"new"},{label:"Registrar Venta",description:"Procesar venta de animales",icon:rr,color:"bg-green-600 hover:bg-green-700",textColor:"text-white",path:"/ventas",action:"new"},{label:"Evento Sanitario",description:"Registrar actividad sanitaria",icon:wr,color:"bg-blue-600 hover:bg-blue-700",textColor:"text-white",path:"/sanidad",action:"new"},{label:"Ver Animales",description:"Consultar stock actual",icon:Kt,color:"bg-rural-secondary hover:bg-rural-secondary/90",textColor:"text-white",path:"/animales",action:"view"}],r=n=>{e(n.path,{state:{action:n.action}})};return a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(gt,{className:"h-5 w-5 text-rural-primary"}),a.jsx("h2",{className:"text-xl font-semibold text-rural-text",children:"Accesos Rápidos"})]}),a.jsx("div",{className:"space-y-2",children:t.map((n,s)=>{const l=n.icon;return a.jsxs(de.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1*s,duration:.4},whileHover:{scale:1.02,x:4,transition:{duration:.2}},whileTap:{scale:.98},onClick:()=>r(n),className:`w-full p-3 rounded-xl transition-all duration-300 ${n.color} ${n.textColor} group relative overflow-hidden`,children:[a.jsx(de.div,{className:"absolute inset-0 bg-white/10 rounded-xl",initial:{x:"-100%"},whileHover:{x:"100%"},transition:{duration:.6}}),a.jsxs("div",{className:"relative flex items-center space-x-2",children:[a.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:a.jsx(l,{className:"h-4 w-4"})}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("p",{className:"font-semibold text-sm",children:n.label}),a.jsx("p",{className:"text-xs opacity-80 hidden md:block",children:n.description})]}),a.jsx(de.div,{initial:{x:-10,opacity:0},whileHover:{x:0,opacity:1},transition:{duration:.2},className:"text-white/80",children:a.jsx(gt,{className:"h-3 w-3"})})]})]},n.label)})})]})},vP=()=>{const[e,t]=_.useState({temp:0,condition:"sunny",humidity:0,description:"",loading:!0,error:null}),r={nombre:"Establecimiento Gutiérrez Hnos",ubicacion:"San Martín, Chaco",hectareas:"30 has",lat:-26.5436,lon:-59.3458};_.useEffect(()=>{const d=async()=>{try{const m=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${r.lat}&longitude=${r.lon}&current=temperature_2m,relative_humidity_2m,weather_code&timezone=America/Argentina/Buenos_Aires`);if(!m.ok)throw new Error("Error al obtener datos del clima");const h=(await m.json()).current,v=h.weather_code;let g="sunny",y="";v===0?(g="sunny",y="Despejado"):[1,2].includes(v)?(g="cloudy",y="Parcialmente nublado"):v===3?(g="cloudy",y="Nublado"):[45,48].includes(v)?(g="foggy",y="Niebla"):[51,53,55,56,57].includes(v)?(g="drizzle",y="Llovizna"):[61,63,65,66,67,80,81,82].includes(v)?(g="rainy",y="Lluvia"):[71,73,75,77,85,86].includes(v)?(g="snowy",y="Nieve"):[95,96,99].includes(v)&&(g="rainy",y="Tormenta"),t({temp:Math.round(h.temperature_2m),condition:g,humidity:h.relative_humidity_2m,description:y,loading:!1,error:null})}catch(m){console.error("Error fetching weather:",m),t({temp:25,condition:"sunny",humidity:60,description:"Datos no disponibles",loading:!1,error:null})}};d();const f=setInterval(d,1800*1e3);return()=>clearInterval(f)},[]);const n=new Date,s=d=>{switch(d){case"sunny":return H2;case"cloudy":return F8;case"rainy":return M8;case"drizzle":return P8;case"snowy":return k8;case"foggy":return O8;default:return H2}},l=d=>{switch(d){case"sunny":return"text-yellow-500";case"cloudy":return"text-gray-500";case"rainy":return"text-blue-500";case"drizzle":return"text-blue-400";case"snowy":return"text-blue-200";case"foggy":return"text-gray-400";default:return"text-yellow-500"}},c=s(e.condition);return a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1},className:"bg-gradient-to-br from-rural-primary/5 to-rural-secondary/5 rounded-2xl p-5 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-1.5 bg-rural-primary/20 rounded-lg",children:a.jsx(ua,{className:"h-4 w-4 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-rural-text",children:r.nombre}),a.jsx("p",{className:"text-rural-text/60 text-xs",children:r.ubicacion})]})]}),a.jsx("div",{className:"text-right",children:e.loading?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-rural-primary border-t-transparent rounded-full"}),a.jsx("span",{className:"text-xs text-rural-text/60",children:"Cargando..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(c,{className:`h-5 w-5 ${l(e.condition)}`}),a.jsxs("span",{className:"text-xl font-bold text-rural-text",children:[e.temp,"°C"]})]}),a.jsxs("p",{className:"text-rural-text/60 text-xs",children:[e.humidity,"% humedad"]}),e.error&&a.jsx("p",{className:"text-rural-alert text-xs mt-1",children:e.error})]})})]}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:a.jsxs("div",{className:"bg-white/50 rounded-xl p-2.5",children:[a.jsxs("div",{className:"flex items-center space-x-1.5 mb-1",children:[a.jsx(We,{className:"h-3 w-3 text-rural-primary"}),a.jsx("span",{className:"text-xs font-medium text-rural-text",children:"Hoy"})]}),a.jsx("p",{className:"text-rural-text/70 text-xs",children:n.toLocaleDateString("es-AR",{weekday:"long",day:"numeric",month:"short"})})]})}),a.jsx("div",{className:"mt-3 pt-3 border-t border-rural-alternate/30",children:a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsx("span",{className:"text-rural-text/60",children:"Superficie total:"}),a.jsx("span",{className:"font-semibold text-rural-text",children:r.hectareas})]})})]})},bP=()=>{const{data:e,loading:t,error:r,refetch:n}=mP(),{obtenerMetricasLecheras:s}=Q3(),{obtenerEstadisticasTareas:l}=J3(),[c,d]=_.useState(null),[f,m]=_.useState(null),[x,h]=_.useState(!1);_.useEffect(()=>{v(),g()},[]);const v=async()=>{h(!0);try{const k=await s();d(k)}catch(k){console.error("Error cargando métricas lecheras:",k)}finally{h(!1)}},g=async()=>{try{const k=await l();m(k)}catch(k){console.error("Error cargando estadísticas de tareas:",k)}};if(t||x)return a.jsx("div",{className:"flex items-center justify-center min-h-96",children:a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[a.jsx(V3,{className:"h-8 w-8 text-rural-primary animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-rural-text/60",children:"Cargando datos del dashboard..."})]})});if(r)return a.jsx("div",{className:"flex items-center justify-center min-h-96",children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[a.jsx(hr,{className:"h-12 w-12 text-rural-alert mx-auto mb-4"}),a.jsx("p",{className:"text-rural-text/60 mb-4",children:r}),a.jsx("button",{onClick:n,className:"px-4 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors",children:"Reintentar"})]})});const{stats:y,categorias:b,ultimasCompras:j,ultimasVentas:w,ultimosEventos:A}=e,S=[{title:"Animales en Campo",value:y.totalAnimalesEnCampo,subtitle:"Stock actual",icon:et,color:"text-rural-primary",bgColor:"bg-rural-primary/10",delay:0},{title:"Animales Vendidos",value:y.totalAnimalesVendidos,subtitle:"Total histórico",icon:Mt,color:"text-green-600",bgColor:"bg-green-100",delay:.1},{title:"Estado Crítico/Malo",value:y.animalesCriticos,subtitle:"Requieren atención",icon:hr,color:"text-rural-alert",bgColor:"bg-rural-alert/10",delay:.2},{title:"Tiempo Promedio",value:`${y.tiempoPromedioEnCampo}`,subtitle:"días en campo",icon:tn,color:"text-blue-600",bgColor:"bg-blue-100",delay:.3}],D=c?[{title:"Producción Hoy",value:`${c.produccion_total_hoy.toFixed(1)}L`,subtitle:`${c.animales_ordeñados_hoy} animales`,icon:ja,color:"text-blue-600",bgColor:"bg-blue-100",delay:.4},{title:"Promedio por Animal",value:`${c.promedio_por_animal_hoy.toFixed(1)}L`,subtitle:"producción diaria",icon:wr,color:"text-purple-600",bgColor:"bg-purple-100",delay:.5},{title:"En Lactancia",value:c.animales_lactancia,subtitle:"animales productivos",icon:ja,color:"text-green-600",bgColor:"bg-green-100",delay:.6},{title:"Tareas Pendientes",value:f?.pendientes||0,subtitle:`${f?.vencidas||0} vencidas`,icon:en,color:"text-orange-600",bgColor:"bg-orange-100",delay:.7}]:[],T=[...S,...D];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-rural-text mb-2",children:"Dashboard Lechero"}),a.jsxs("p",{className:"text-rural-text/70",children:["Gestión ganadera y producción lechera • ",new Date().toLocaleDateString("es-AR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),a.jsxs(de.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{n(),v(),g()},className:"flex items-center space-x-2 px-4 py-2 bg-rural-primary/10 text-rural-primary rounded-xl hover:bg-rural-primary/20 transition-colors",children:[a.jsx(Rv,{className:"h-4 w-4"}),a.jsx("span",{children:"Actualizar"})]})]}),a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-rural-primary/5 to-transparent rounded-full -translate-y-8 translate-x-8 -z-10"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:T.map((k,C)=>a.jsx(xP,{...k},k.title))}),c&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(ja,{className:"h-5 w-5 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Producción del Mes"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Total del mes:"}),a.jsxs("span",{className:"font-semibold text-rural-text",children:[c.produccion_total_mes.toFixed(1),"L"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Promedio diario:"}),a.jsxs("span",{className:"font-semibold text-rural-text",children:[c.promedio_mes.toFixed(1),"L"]})]}),a.jsx("div",{className:"pt-2 border-t border-rural-alternate/30",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Eficiencia:"}),a.jsx("span",{className:`font-semibold ${c.promedio_por_animal_hoy>15?"text-green-600":"text-yellow-600"}`,children:c.promedio_por_animal_hoy>15?"Excelente":"Buena"})]})})]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.9},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(wr,{className:"h-5 w-5 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Estado Reproductivo"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"En lactancia:"}),a.jsx("span",{className:"font-semibold text-green-600",children:c.animales_lactancia})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Secas:"}),a.jsx("span",{className:"font-semibold text-gray-600",children:c.animales_secos})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Preñadas:"}),a.jsx("span",{className:"font-semibold text-blue-600",children:c.animales_prenados})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Vacías:"}),a.jsx("span",{className:"font-semibold text-yellow-600",children:c.animales_vacios})]})]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:a.jsx(hr,{className:"h-5 w-5 text-orange-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Alertas y Tareas"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Antibióticos:"}),a.jsx("span",{className:`font-semibold ${c.alertas_antibioticos>0?"text-red-600":"text-green-600"}`,children:c.alertas_antibioticos||"Ninguna"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Tareas pendientes:"}),a.jsx("span",{className:"font-semibold text-orange-600",children:f?.pendientes||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Tareas vencidas:"}),a.jsx("span",{className:`font-semibold ${(f?.vencidas||0)>0?"text-red-600":"text-green-600"}`,children:f?.vencidas||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Tareas hoy:"}),a.jsx("span",{className:"font-semibold text-blue-600",children:f?.hoy||0})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(gP,{})}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(pP,{compras:j,ventas:w,eventos:A})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx(hP,{data:b,title:"Animales por Categoría"}),a.jsx(vP,{})]})]}),c&&c.tendencia_semanal&&a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1.1},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(Mt,{className:"h-5 w-5 text-purple-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Tendencia Semanal de Producción"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:c.tendencia_semanal.map((k,C)=>{const M=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],I=Math.max(...c.tendencia_semanal),R=I>0?k/I*100:0;return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-20 flex items-end justify-center mb-2",children:a.jsx("div",{className:"w-8 bg-blue-500 rounded-t transition-all duration-500",style:{height:`${R}%`}})}),a.jsx("div",{className:"text-xs text-rural-text/60",children:M[C]}),a.jsxs("div",{className:"text-xs font-medium text-rural-text",children:[k.toFixed(0),"L"]})]},C)})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-rural-primary/10 rounded-lg",children:a.jsx(Rv,{className:"h-5 w-5 text-rural-primary"})}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Objetivos del Mes"})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-rural-text/60 text-sm",children:"Listos para vender:"}),a.jsxs("span",{className:"font-semibold text-rural-text",children:[y.totalAnimalesEnCampo-y.animalesCriticos," / 60"]})]}),a.jsx("div",{className:"w-full bg-rural-alternate/30 rounded-full h-3",children:a.jsx("div",{className:"h-full bg-rural-primary rounded-full transition-all duration-1000",style:{width:`${Math.min((y.totalAnimalesEnCampo-y.animalesCriticos)/60*100,100)}%`}})}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-rural-text/60 mt-1",children:[a.jsx("span",{children:"Estado óptimo"}),a.jsxs("span",{children:[Math.round((y.totalAnimalesEnCampo-y.animalesCriticos)/60*100),"% completado"]})]})]})})]})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.9},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(We,{className:"h-5 w-5 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Este Mes"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Compras:"}),a.jsx("span",{className:"font-semibold text-rural-text",children:j.length})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Ventas:"}),a.jsx("span",{className:"font-semibold text-rural-text",children:w.length})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Eventos:"}),a.jsx("span",{className:"font-semibold text-rural-text",children:A.length})]}),a.jsx("div",{className:"pt-2 border-t border-rural-alternate/30",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Rotación:"}),a.jsx("span",{className:"font-semibold text-rural-text",children:y.totalAnimalesVendidos>0&&y.totalAnimalesEnCampo>0?`${Math.round(y.totalAnimalesVendidos/(y.totalAnimalesVendidos+y.totalAnimalesEnCampo)*100)}%`:"0%"})]})})]})]})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(Mt,{className:"h-5 w-5 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Rendimiento"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Stock total:"}),a.jsx("span",{className:"font-semibold text-rural-text",children:y.totalAnimalesEnCampo})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Categorías:"}),a.jsx("span",{className:"font-semibold text-rural-text",children:b.length})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Estado:"}),a.jsx("span",{className:`font-semibold ${y.animalesCriticos===0?"text-green-600":"text-rural-alert"}`,children:y.animalesCriticos===0?"Óptimo":"Revisar"})]}),a.jsx("div",{className:"pt-2 border-t border-rural-alternate/30",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-rural-text/60",children:"Eficiencia:"}),a.jsx("span",{className:`font-semibold ${y.animalesCriticos===0?"text-green-600":"text-rural-alert"}`,children:y.animalesCriticos===0?"100%":"Mejorable"})]})})]})]})})]})]})},Ra=Z3((e,t)=>({animales:[],lotes:[],pesadas:[],compras:[],proveedores:[],transportadores:[],eventosSanitarios:[],loading:!1,error:null,selectedAnimales:[],filters:{},visibleColumns:{caravana:!0,colorCaravana:!0,categoria:!0,peso:!0,estadoFisico:!0,fechaIngreso:!0,proveedor:!0,precio:!1,lote:!0,compra:!0},fetchAnimales:async()=>{try{e({loading:!0,error:null});const{data:r,error:n}=await se.from("animales").select("*").eq("estado","en_campo").order("fecha_ingreso",{ascending:!1});if(n)throw n;const{data:s}=await se.from("proveedores").select("id, nombre, contacto"),{data:l}=await se.from("transportadores").select("id, nombre, contacto"),{data:c}=await se.from("animal_lote").select("animal_id, lote_id, fecha_asignacion, fecha_salida").is("fecha_salida",null),{data:d}=await se.from("lotes").select("id, nombre, numero, color"),f=r?.map(m=>{const x=s?.find(y=>y.id===m.proveedor_id)||null,h=l?.find(y=>y.id===m.transportador_id)||null,v=c?.find(y=>y.animal_id===m.id),g=v?d?.find(y=>y.id===v.lote_id):null;return{...m,lote_actual:g,lote_nombre:g?.nombre||null,proveedores:x,transportadores:h}})||[];e({animales:f,loading:!1})}catch(r){console.error("Error en fetchAnimales:",r),e({error:r.message,loading:!1})}},fetchAnimalesSinLote:async()=>{try{e({loading:!0,error:null});const{data:r,error:n}=await se.from("animales").select("*").eq("estado","en_campo");if(n)throw n;const{data:s}=await se.from("animal_lote").select("animal_id").is("fecha_salida",null),l=s?.map(x=>x.animal_id)||[],c=r?.filter(x=>!l.includes(x.id))||[],{data:d}=await se.from("proveedores").select("id, nombre, contacto"),{data:f}=await se.from("transportadores").select("id, nombre, contacto"),m=c.map(x=>({...x,proveedores:d?.find(h=>h.id===x.proveedor_id)||null,transportadores:f?.find(h=>h.id===x.transportador_id)||null}));e({animales:m,loading:!1})}catch(r){e({error:r.message,loading:!1})}},updateAnimal:async(r,n)=>{try{e({loading:!0,error:null});const{data:s,error:l}=await se.from("animales").update(n).eq("id",r).select().single();if(l)throw l;const c=t().animales.map(d=>d.id===r?{...d,...s}:d);return e({animales:c,loading:!1}),{success:!0,data:s}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s.message}}},fetchLotes:async()=>{try{e({loading:!0,error:null});const{data:r,error:n}=await se.from("lotes").select("*").order("fecha_creacion",{ascending:!1});if(n)throw n;const{data:s,error:l}=await se.from("animal_lote").select("lote_id, animal_id, fecha_salida").is("fecha_salida",null);l&&console.warn("No se pudo cargar animal_lote, usando lotes sin conteo:",l.message);const c=r?.map(d=>{const f=s?.filter(m=>m.lote_id===d.id)||[];return{...d,animales_actuales:f,total_animales:f.length,cantidad_animales:f.length}})||[];e({lotes:c,loading:!1})}catch(r){console.error("Error en fetchLotes:",r),e({error:r.message,loading:!1})}},createLote:async r=>{try{e({loading:!0,error:null});const{data:n,error:s}=await se.from("lotes").insert([r]).select().single();if(s)throw s;return await t().fetchLotes(),e({loading:!1}),{success:!0,data:n}}catch(n){return e({error:n.message,loading:!1}),{success:!1,error:n.message}}},updateLote:async(r,n)=>{try{e({loading:!0,error:null});const{data:s,error:l}=await se.from("lotes").update(n).eq("id",r).select().single();if(l)throw l;return await t().fetchLotes(),e({loading:!1}),{success:!0,data:s}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s.message}}},deleteLote:async r=>{try{e({loading:!0,error:null});const{data:n,error:s}=await se.from("animal_lote").select("animal_id").eq("lote_id",r).is("fecha_salida",null);if(s)throw s;if(n&&n.length>0){console.log(`Quitando ${n.length} animales del lote antes de eliminarlo...`);const{error:d}=await se.from("animal_lote").update({fecha_salida:new Date().toISOString()}).eq("lote_id",r).is("fecha_salida",null);if(d)throw d}const{error:l}=await se.from("animal_lote").delete().eq("lote_id",r);l&&console.warn("Error al eliminar relaciones del lote:",l);const{error:c}=await se.from("lotes").delete().eq("id",r);if(c)throw c;return await t().fetchLotes(),await t().fetchAnimales(),e({loading:!1}),{success:!0,message:`Lote eliminado exitosamente${n?.length>0?`. Se liberaron ${n.length} animales.`:"."}`}}catch(n){return e({error:n.message,loading:!1}),{success:!1,error:n.message}}},asignarAnimalesALote:async(r,n)=>{try{e({loading:!0,error:null});const{error:s}=await se.from("animal_lote").update({fecha_salida:new Date().toISOString()}).in("animal_id",r).is("fecha_salida",null);if(s)throw s;const l=r.map(d=>({animal_id:d,lote_id:n,fecha_asignacion:new Date().toISOString()})),{error:c}=await se.from("animal_lote").insert(l);if(c)throw c;return await t().fetchAnimales(),await t().fetchLotes(),e({loading:!1,selectedAnimales:[]}),{success:!0}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s.message}}},quitarAnimalesDeLote:async r=>{try{e({loading:!0,error:null});const{error:n}=await se.from("animal_lote").update({fecha_salida:new Date().toISOString()}).in("animal_id",r).is("fecha_salida",null);if(n)throw n;return await t().fetchAnimales(),await t().fetchLotes(),e({loading:!1,selectedAnimales:[]}),{success:!0}}catch(n){return e({error:n.message,loading:!1}),{success:!1,error:n.message}}},fetchProveedores:async()=>{try{const{data:r,error:n}=await se.from("proveedores").select("*").order("nombre");if(n)throw n;e({proveedores:r||[]})}catch(r){console.error("Error fetching proveedores:",r),e({error:r.message})}},fetchTransportadores:async()=>{try{const{data:r,error:n}=await se.from("transportadores").select("*").order("nombre");if(n)throw n;e({transportadores:r||[]})}catch(r){console.error("Error fetching transportadores:",r),e({error:r.message})}},fetchEventosSanitarios:async(r=null)=>{try{e({loading:!0,error:null});let n=se.from("eventos_sanitarios").select("*").order("fecha",{ascending:!1});r&&(n=n.eq("animal_id",r));const{data:s,error:l}=await n;if(l)throw l;if(!r&&s?.length>0){const{data:c}=await se.from("animales").select("id, numero_caravana, color_caravana, categoria"),{data:d}=await se.from("animal_lote").select("animal_id, lote_id, fecha_salida").is("fecha_salida",null),{data:f}=await se.from("lotes").select("id, nombre, numero"),m=s.map(x=>{const h=c?.find(y=>y.id===x.animal_id),v=h?d?.find(y=>y.animal_id===h.id):null,g=v?f?.find(y=>y.id===v.lote_id):null;return{...x,animales:h?{...h,animal_lote:g?[{lotes:g}]:[]}:null}});return e({eventosSanitarios:m,loading:!1}),m}else return e({eventosSanitarios:s||[],loading:!1}),s||[]}catch(n){return console.error("Error fetching eventos sanitarios:",n),e({error:n.message,loading:!1}),[]}},createEventoSanitario:async r=>{try{e({loading:!0,error:null});const{data:n,error:s}=await se.from("eventos_sanitarios").insert([r]).select().single();if(s)throw s;return await t().fetchEventosSanitarios(),e({loading:!1}),n}catch(n){throw console.error("Error al crear evento sanitario:",n),e({error:n.message,loading:!1}),n}},updateEventoSanitario:async(r,n)=>{try{e({loading:!0,error:null});const{data:s,error:l}=await se.from("eventos_sanitarios").update(n).eq("id",r).select().single();if(l)throw l;const{eventosSanitarios:c}=t();return e({eventosSanitarios:c.map(d=>d.id===r?{...d,...s}:d),loading:!1}),s}catch(s){throw console.error("Error al actualizar evento sanitario:",s),e({error:s.message,loading:!1}),s}},deleteEventoSanitario:async r=>{try{e({loading:!0,error:null});const{error:n}=await se.from("eventos_sanitarios").delete().eq("id",r);if(n)throw n;const{eventosSanitarios:s}=t();e({eventosSanitarios:s.filter(l=>l.id!==r),loading:!1})}catch(n){throw console.error("Error al eliminar evento sanitario:",n),e({error:n.message,loading:!1}),n}},updateFilters:r=>e(n=>({filters:{...n.filters,...r}})),clearFilters:()=>e({filters:{}}),setFilters:r=>e({filters:r}),setVisibleColumns:r=>e({visibleColumns:r}),toggleColumnVisibility:r=>e(n=>({visibleColumns:{...n.visibleColumns,[r]:!n.visibleColumns[r]}})),setSelectedAnimales:r=>e({selectedAnimales:r}),toggleAnimalSelection:r=>{const n=t().selectedAnimales,s=n.includes(r)?n.filter(l=>l!==r):[...n,r];e({selectedAnimales:s})},clearSelection:()=>e({selectedAnimales:[]}),clearError:()=>e({error:null}),getFilteredAnimales:()=>{const{animales:r,filters:n}=t();let s=[...r];return Object.entries(n).forEach(([l,c])=>{c!==""&&c!==void 0&&c!==null&&(s=s.filter(d=>{switch(l){case"search":const f=c.toLowerCase();return d.numero_caravana?.toLowerCase().includes(f)||d.categoria?.toLowerCase().includes(f)||d.color_caravana?.toLowerCase().includes(f)||d.proveedores?.nombre?.toLowerCase().includes(f)||d.lote_nombre?.toLowerCase().includes(f);case"lote_id":return c==="sin_lote"?!d.lote_actual:d.lote_actual?.id===c;case"proveedor_id":return d.proveedor_id===c;case"fecha_desde":return new Date(d.fecha_ingreso)>=new Date(c);case"fecha_hasta":return new Date(d.fecha_ingreso)<=new Date(c);case"peso_min":return parseFloat(d.peso_ingreso)>=parseFloat(c);case"peso_max":return parseFloat(d.peso_ingreso)<=parseFloat(c);default:return typeof d[l]=="string"?d[l].toLowerCase().includes(c.toLowerCase()):d[l]===c}}))}),s},getSelectedAnimalesData:()=>{const{animales:r,selectedAnimales:n}=t();return r.filter(s=>n.includes(s.id))},fetchPesadas:async()=>{try{e({loading:!0,error:null});const{data:r,error:n}=await se.from("pesadas").select("*").order("fecha_pesada",{ascending:!1});if(n)throw n;const{data:s}=await se.from("animales").select("id, numero_caravana, color_caravana, categoria, proveedor_id, estado"),{data:l}=await se.from("proveedores").select("id, nombre"),{data:c}=await se.from("animal_lote").select("animal_id, lote_id, fecha_salida").is("fecha_salida",null),{data:d}=await se.from("lotes").select("id, nombre, numero"),f=r?.map(m=>{const x=s?.find(y=>y.id===m.animal_id),h=x?l?.find(y=>y.id===x.proveedor_id):null,v=x?c?.find(y=>y.animal_id===x.id):null,g=v?d?.find(y=>y.id===v.lote_id):null;return{...m,animales:x?{...x,proveedores:h,animal_lote:g?[{lotes:g}]:[]}:null}})||[];return e({pesadas:f,loading:!1}),f}catch(r){return console.error("Error al cargar pesadas:",r),e({error:r.message,loading:!1}),[]}},fetchPesadasByAnimal:async r=>{try{const{data:n,error:s}=await se.from("pesadas").select("*").eq("animal_id",r).order("fecha_pesada",{ascending:!1});if(s)throw s;return n||[]}catch(n){return console.error("Error al cargar pesadas del animal:",n),[]}},createPesada:async r=>{try{e({loading:!0,error:null});const{data:n,error:s}=await se.from("pesadas").insert([r]).select().single();if(s)throw s;return await t().fetchPesadas(),n}catch(n){throw console.error("Error al crear pesada:",n),e({error:n.message,loading:!1}),n}},updatePesada:async(r,n)=>{try{e({loading:!0,error:null});const{data:s,error:l}=await se.from("pesadas").update(n).eq("id",r).select().single();if(l)throw l;return await t().fetchPesadas(),s}catch(s){throw console.error("Error al actualizar pesada:",s),e({error:s.message,loading:!1}),s}},deletePesada:async r=>{try{e({loading:!0,error:null});const{error:n}=await se.from("pesadas").delete().eq("id",r);if(n)throw n;const{pesadas:s}=t();e({pesadas:s.filter(l=>l.id!==r),loading:!1})}catch(n){throw console.error("Error al eliminar pesada:",n),e({error:n.message,loading:!1}),n}},fetchCompras:async()=>{try{e({loading:!0,error:null});const{data:r,error:n}=await se.from("compras").select("*").order("fecha",{ascending:!1});if(n)throw n;const{data:s}=await se.from("proveedores").select("id, nombre, contacto"),{data:l}=await se.from("transportadores").select("id, nombre, contacto"),c=r?.map(d=>({...d,proveedores:s?.find(f=>f.id===d.proveedor_id)||null,transportadores:l?.find(f=>f.id===d.transportador_id)||null}))||[];return e({compras:c,loading:!1}),c}catch(r){return console.error("Error al cargar compras:",r),e({error:r.message,loading:!1}),[]}},getCurrentWeight:r=>{const{pesadas:n}=t(),s=n.filter(l=>l.animal_id===r).sort((l,c)=>new Date(c.fecha_pesada)-new Date(l.fecha_pesada));return s.length>0?s[0].peso:null},getCurrentLote:r=>{const{animales:n}=t(),s=n.find(c=>c.id===r);return s?.animal_lote&&s.animal_lote.find(c=>!c.fecha_salida)?.lotes||null},moveAnimalToLote:async(r,n)=>{try{e({loading:!0,error:null});const{data:s}=await se.from("animal_lote").select("*").eq("animal_id",r).is("fecha_salida",null).single();s&&await se.from("animal_lote").update({fecha_salida:new Date().toISOString()}).eq("id",s.id);const{error:l}=await se.from("animal_lote").insert([{animal_id:r,lote_id:n,fecha_asignacion:new Date().toISOString(),observaciones:"Movido automáticamente"}]);if(l)throw l;await t().fetchAnimales(),e({loading:!1})}catch(s){throw console.error("Error al mover animal:",s),e({error:s.message,loading:!1}),s}},removeAnimalFromLote:async r=>{try{e({loading:!0,error:null});const{error:n}=await se.from("animal_lote").update({fecha_salida:new Date().toISOString()}).eq("animal_id",r).is("fecha_salida",null);if(n)throw n;await t().fetchAnimales(),e({loading:!1})}catch(n){throw console.error("Error al quitar animal del lote:",n),e({error:n.message,loading:!1}),n}}})),yP=({animales:e,visibleColumns:t,onAnimalClick:r,onEditAnimal:n,onAssignLote:s,onDeleteAnimal:l})=>{const{selectedAnimales:c,toggleAnimalSelection:d,selectAllAnimales:f,clearSelection:m}=Ra(),[x,h]=_.useState("numero_caravana"),[v,g]=_.useState("asc"),[y,b]=_.useState(null),j=e.length>0&&c.length===e.length,w=c.length>0&&c.length<e.length,A=O=>{x===O?g(v==="asc"?"desc":"asc"):(h(O),g("asc"))},S=[...e].sort((O,z)=>{const V=O[x],G=z[x];return typeof V=="string"?v==="asc"?V.localeCompare(G):G.localeCompare(V):v==="asc"?V-G:G-V}),D=()=>{j?m():f(e.map(O=>O.id))},T=O=>({excelente:"bg-green-100 text-green-800",bueno:"bg-blue-100 text-blue-800",malo:"bg-yellow-100 text-yellow-800",critico:"bg-red-100 text-red-800"})[O]||"bg-gray-100 text-gray-800",k=O=>({lactancia:"bg-blue-100 text-blue-800",seca:"bg-gray-100 text-gray-800",prenada:"bg-green-100 text-green-800",vacia:"bg-yellow-100 text-yellow-800"})[O]||"bg-gray-100 text-gray-800",C=O=>{const z={rojo:"#EF4444",azul:"#3B82F6",verde:"#10B981",amarillo:"#F59E0B",naranja:"#F97316",morado:"#8B5CF6",rosa:"#EC4899",negro:"#1F2937",blanco:"#F9FAFB",gris:"#6B7280",cafe:"#92400E",marrón:"#92400E",celeste:"#06B6D4",violeta:"#7C3AED"};if(!O)return"#6B7280";const V=O.toLowerCase().trim();return z[V]?z[V]:O.startsWith("#")?O:"#6B7280"},M=O=>new Date(O).toLocaleDateString("es-AR"),I=O=>`${O} kg`,R=O=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(O),L=O=>`${O.toFixed(1)} L`,P=O=>O<60?"text-green-600":O<200?"text-blue-600":O<305?"text-yellow-600":"text-red-600";return e.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(st,{className:"h-16 w-16 text-rural-primary/40 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-2",children:"No hay animales registrados"}),a.jsx("p",{className:"text-rural-text/60",children:"Registra tu primera compra para ver los animales aquí."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block overflow-x-auto table-scroll",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-rural-background/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-left",children:a.jsx("button",{onClick:D,className:"flex items-center space-x-2 text-rural-text hover:text-rural-primary",children:j?a.jsx(ks,{className:"h-4 w-4"}):w?a.jsx("div",{className:"h-4 w-4 border-2 border-rural-primary bg-rural-primary/50"}):a.jsx(Od,{className:"h-4 w-4"})})}),t.caravana&&a.jsx("th",{className:"p-4 text-left cursor-pointer hover:bg-rural-alternate/30",onClick:()=>A("numero_caravana"),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Tn,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Caravana"})]})}),t.colorCaravana&&a.jsx("th",{className:"p-4 text-left",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-300"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Color"})]})}),t.categoria&&a.jsx("th",{className:"p-4 text-left cursor-pointer hover:bg-rural-alternate/30",onClick:()=>A("categoria"),children:a.jsx("div",{className:"flex items-center space-x-1",children:a.jsx("span",{className:"font-medium text-rural-text",children:"Categoría"})})}),t.estadoReproductivo&&a.jsx("th",{className:"p-4 text-left cursor-pointer hover:bg-rural-alternate/30",onClick:()=>A("estado_reproductivo"),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(fr,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Estado Reprod."})]})}),t.diasLactancia&&a.jsx("th",{className:"p-4 text-left cursor-pointer hover:bg-rural-alternate/30",onClick:()=>A("dias_lactancia"),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(tn,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Días Lact."})]})}),t.produccionPromedio&&a.jsx("th",{className:"p-4 text-left cursor-pointer hover:bg-rural-alternate/30",onClick:()=>A("produccion_promedio_30d"),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(ja,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Prod. 30d"})]})}),t.controlAntibioticos&&a.jsx("th",{className:"p-4 text-left",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(hr,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Antibióticos"})]})}),t.peso&&a.jsx("th",{className:"p-4 text-left cursor-pointer hover:bg-rural-alternate/30",onClick:()=>A("peso_ingreso"),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Wn,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Peso"})]})}),t.estadoFisico&&a.jsx("th",{className:"p-4 text-left cursor-pointer hover:bg-rural-alternate/30",onClick:()=>A("estado_fisico"),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Estado"})]})}),t.fechaIngreso&&a.jsx("th",{className:"p-4 text-left cursor-pointer hover:bg-rural-alternate/30",onClick:()=>A("fecha_ingreso"),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(We,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Ingreso"})]})}),t.proveedor&&a.jsx("th",{className:"p-4 text-left",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Vt,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Proveedor"})]})}),t.precio&&a.jsx("th",{className:"p-4 text-left cursor-pointer hover:bg-rural-alternate/30",onClick:()=>A("precio_compra"),children:a.jsx("div",{className:"flex items-center space-x-1",children:a.jsx("span",{className:"font-medium text-rural-text",children:"Precio/kg"})})}),t.lote&&a.jsx("th",{className:"p-4 text-left",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Lote"})]})}),t.compra&&a.jsx("th",{className:"p-4 text-left",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Cn,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-rural-text",children:"Compra"})]})}),a.jsx("th",{className:"p-4 text-left",children:a.jsx("span",{className:"font-medium text-rural-text",children:"Acciones"})})]})}),a.jsx("tbody",{children:S.map((O,z)=>a.jsxs(de.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:z*.05},className:"border-b border-rural-alternate/30 hover:bg-rural-background/30 transition-colors",children:[a.jsx("td",{className:"p-4",children:a.jsx("button",{onClick:()=>d(O.id),className:"text-rural-text hover:text-rural-primary",children:c.includes(O.id)?a.jsx(ks,{className:"h-4 w-4"}):a.jsx(Od,{className:"h-4 w-4"})})}),t.caravana&&a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"font-medium text-rural-text",children:O.numero_caravana||"S/N"})}),t.colorCaravana&&a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white shadow-lg ring-1 ring-gray-200 color-caravana-circle",style:{backgroundColor:C(O.color_caravana)},title:`Color: ${O.color_caravana||"Sin color"}`}),a.jsx("span",{className:"text-sm text-rural-text capitalize font-medium",children:O.color_caravana||"Sin color"})]})}),t.categoria&&a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"text-rural-text",children:O.categoria})}),t.estadoReproductivo&&a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k(O.estado_reproductivo)}`,children:O.estado_reproductivo||"N/A"})}),t.diasLactancia&&a.jsx("td",{className:"p-4",children:a.jsxs("span",{className:`font-medium ${P(O.dias_lactancia||0)}`,children:[O.dias_lactancia||0," días"]})}),t.produccionPromedio&&a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(ja,{className:"h-4 w-4 text-blue-500"}),a.jsx("span",{className:"text-rural-text font-medium",children:L(O.produccion_promedio_30d||0)})]})}),t.controlAntibioticos&&a.jsx("td",{className:"p-4",children:O.control_antibioticos&&O.control_antibioticos.length>0?a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(hr,{className:"h-4 w-4 text-red-500"}),a.jsxs("span",{className:"text-red-600 text-sm font-medium",children:[O.control_antibioticos.length," activo(s)"]})]}):a.jsx("span",{className:"text-green-600 text-sm",children:"Sin antibióticos"})}),t.peso&&a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"text-rural-text font-medium",children:I(O.peso_ingreso)})}),t.estadoFisico&&a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T(O.estado_fisico)}`,children:O.estado_fisico})}),t.fechaIngreso&&a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"text-rural-text",children:M(O.fecha_ingreso)})}),t.proveedor&&a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"text-rural-text",children:O.proveedores?.nombre||"N/A"})}),t.precio&&a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"text-rural-text font-medium",children:R(O.precio_compra)})}),t.lote&&a.jsx("td",{className:"p-4",children:O.lote_nombre?a.jsx("span",{className:"px-2 py-1 bg-rural-primary/10 text-rural-primary text-xs font-medium rounded-full",children:O.lote_nombre}):a.jsx("span",{className:"text-rural-text/40 text-sm",children:"Sin lote"})}),t.compra&&a.jsx("td",{className:"p-4",children:O.compras?a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-rural-text text-sm font-medium",children:M(O.compras.fecha)}),a.jsx("span",{className:"text-rural-text/60 text-xs",children:O.compras.lugar_origen})]}):a.jsx("span",{className:"text-rural-text/40 text-sm",children:"Sin compra"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>r(O),className:"p-2 text-rural-text hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-colors",title:"Ver detalles",children:a.jsx(Kt,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>n(O),className:"p-2 text-rural-text hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar animal",children:a.jsx(Dn,{className:"h-4 w-4"})}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>b(y===O.id?null:O.id),className:"p-2 text-rural-text hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-colors",title:"Más acciones",children:a.jsx(Lm,{className:"h-4 w-4"})}),y===O.id&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-rural-alternate/20 z-10",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{s(O),b(null)},className:"flex items-center space-x-2 w-full px-4 py-2 text-sm text-rural-text hover:bg-rural-background/50",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsx("span",{children:"Asignar a lote"})]}),a.jsxs("button",{onClick:()=>{b(null)},className:"flex items-center space-x-2 w-full px-4 py-2 text-sm text-rural-text hover:bg-rural-background/50",children:[a.jsx(ja,{className:"h-4 w-4"}),a.jsx("span",{children:"Registrar producción"})]}),a.jsxs("button",{onClick:()=>{l(O),b(null)},className:"flex items-center space-x-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[a.jsx(lr,{className:"h-4 w-4"}),a.jsx("span",{children:"Eliminar"})]})]})})]})]})})]},O.id))})]})}),a.jsxs("div",{className:"md:hidden",children:[a.jsx("div",{className:"p-4 border-b border-rural-alternate/30 bg-rural-background/50",children:a.jsxs("button",{onClick:D,className:"flex items-center space-x-2 text-rural-text hover:text-rural-primary",children:[j?a.jsx(ks,{className:"h-4 w-4"}):w?a.jsx("div",{className:"h-4 w-4 border-2 border-rural-primary bg-rural-primary/50"}):a.jsx(Od,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:j?"Deseleccionar todos":"Seleccionar todos"})]})}),a.jsx("div",{className:"divide-y divide-rural-alternate/30",children:S.map((O,z)=>a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:z*.05},className:"p-4 hover:bg-rural-background/30 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("button",{onClick:()=>d(O.id),className:"text-rural-text hover:text-rural-primary",children:c.includes(O.id)?a.jsx(ks,{className:"h-4 w-4"}):a.jsx(Od,{className:"h-4 w-4"})}),t.caravana&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Tn,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"font-bold text-rural-text",children:O.numero_caravana})]}),t.colorCaravana&&O.color_caravana&&a.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:C(O.color_caravana)},title:O.color_caravana})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.categoria&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:"text-rural-text/60",children:"Categoría:"}),a.jsx("span",{className:"text-rural-text",children:O.categoria})]}),t.peso&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Wn,{className:"h-3 w-3 text-rural-primary"}),a.jsx("span",{className:"text-rural-text",children:I(O.peso_ingreso)})]}),t.estadoFisico&&a.jsx("div",{className:"col-span-2",children:a.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${T(O.estado_fisico)}`,children:O.estado_fisico})}),t.observaciones&&O.observaciones&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-rural-text/60 text-xs",children:"Observaciones:"}),a.jsx("p",{className:"text-rural-text text-xs mt-1",children:O.observaciones})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[a.jsx("button",{onClick:()=>r?.(O),className:"p-2 text-rural-text/60 hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-colors",title:"Ver detalles",children:a.jsx(Kt,{className:"h-4 w-4"})}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>b(y===O.id?null:O.id),className:"p-2 text-rural-text/60 hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-colors",children:a.jsx(Lm,{className:"h-4 w-4"})}),y===O.id&&a.jsx("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-rural-alternate/30 z-10",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{n?.(O),b(null)},className:"w-full px-4 py-2 text-left text-sm text-rural-text hover:bg-rural-background flex items-center gap-2",children:[a.jsx(Dn,{className:"h-4 w-4"}),"Editar"]}),a.jsxs("button",{onClick:()=>{s?.(O),b(null)},className:"w-full px-4 py-2 text-left text-sm text-rural-text hover:bg-rural-background flex items-center gap-2",children:[a.jsx(L8,{className:"h-4 w-4"}),"Cambiar lote"]}),a.jsxs("button",{onClick:()=>{l?.(O),b(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[a.jsx(lr,{className:"h-4 w-4"}),"Eliminar"]})]})})]})]})]})},O.id))})]})]})},jP=()=>{const{filters:e,updateFilters:t,clearFilters:r,proveedores:n,lotes:s}=Ra(),l=[{value:"excelente",label:"Excelente"},{value:"bueno",label:"Bueno"},{value:"malo",label:"Malo"},{value:"critico",label:"Crítico"}],c=[{value:"amarillo",label:"Amarillo"},{value:"azul",label:"Azul"},{value:"rojo",label:"Rojo"},{value:"verde",label:"Verde"},{value:"blanco",label:"Blanco"},{value:"negro",label:"Negro"}],d=[{value:"ternero",label:"Ternero"},{value:"ternera",label:"Ternera"},{value:"novillo",label:"Novillo"},{value:"vaca",label:"Vaca"},{value:"toro",label:"Toro"}],f=(x,h)=>{t({[x]:h})},m=Object.values(e).some(x=>x&&(typeof x=="string"?x.trim():!0));return a.jsxs(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ft,{className:"h-5 w-5 text-rural-primary"}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Filtros de Búsqueda"})]}),m&&a.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-3 py-1 text-sm text-rural-text/60 hover:text-rural-text hover:bg-rural-background rounded-lg transition-colors",children:[a.jsx(Hd,{className:"h-4 w-4"}),a.jsx("span",{children:"Limpiar filtros"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(ft,{className:"h-4 w-4"}),a.jsx("span",{children:"Búsqueda general"})]}),a.jsx("input",{type:"text",value:e.search||"",onChange:x=>f("search",x.target.value),placeholder:"Número de caravana, categoría...",className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(Tn,{className:"h-4 w-4"}),a.jsx("span",{children:"Número de caravana"})]}),a.jsx("input",{type:"text",value:e.numero_caravana||"",onChange:x=>f("numero_caravana",x.target.value),placeholder:"Ejemplo: 1234",className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-r from-blue-500 to-green-500"}),a.jsx("span",{children:"Color de caravana"})]}),a.jsxs("select",{value:e.color_caravana||"",onChange:x=>f("color_caravana",x.target.value),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all",children:[a.jsx("option",{value:"",children:"Todos los colores"}),c.map(x=>a.jsx("option",{value:x.value,children:x.label},x.value))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsx("span",{children:"Categoría"})]}),a.jsxs("select",{value:e.categoria||"",onChange:x=>f("categoria",x.target.value),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all",children:[a.jsx("option",{value:"",children:"Todas las categorías"}),d.map(x=>a.jsx("option",{value:x.value,children:x.label},x.value))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{children:"Estado físico"})]}),a.jsxs("select",{value:e.estado_fisico||"",onChange:x=>f("estado_fisico",x.target.value),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all",children:[a.jsx("option",{value:"",children:"Todos los estados"}),l.map(x=>a.jsx("option",{value:x.value,children:x.label},x.value))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(Vt,{className:"h-4 w-4"}),a.jsx("span",{children:"Proveedor"})]}),a.jsxs("select",{value:e.proveedor_id||"",onChange:x=>f("proveedor_id",x.target.value),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all",children:[a.jsx("option",{value:"",children:"Todos los proveedores"}),n.map(x=>a.jsx("option",{value:x.id,children:x.nombre},x.id))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsx("span",{children:"Lote"})]}),a.jsxs("select",{value:e.lote_id||"",onChange:x=>f("lote_id",x.target.value),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all",children:[a.jsx("option",{value:"",children:"Todos los lotes"}),a.jsx("option",{value:"sin_lote",children:"Sin lote asignado"}),s.map(x=>a.jsx("option",{value:x.id,children:x.nombre},x.id))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(We,{className:"h-4 w-4"}),a.jsx("span",{children:"Fecha desde"})]}),a.jsx("input",{type:"date",value:e.fecha_desde||"",onChange:x=>f("fecha_desde",x.target.value),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(We,{className:"h-4 w-4"}),a.jsx("span",{children:"Fecha hasta"})]}),a.jsx("input",{type:"date",value:e.fecha_hasta||"",onChange:x=>f("fecha_hasta",x.target.value),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(Wn,{className:"h-4 w-4"}),a.jsx("span",{children:"Peso mínimo (kg)"})]}),a.jsx("input",{type:"number",value:e.peso_min||"",onChange:x=>f("peso_min",x.target.value),placeholder:"0",min:"0",className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-rural-text",children:[a.jsx(Wn,{className:"h-4 w-4"}),a.jsx("span",{children:"Peso máximo (kg)"})]}),a.jsx("input",{type:"number",value:e.peso_max||"",onChange:x=>f("peso_max",x.target.value),placeholder:"999",min:"0",className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]})]}),m&&a.jsxs("div",{className:"mt-6 pt-4 border-t border-rural-alternate/30",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Tn,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-sm font-medium text-rural-text",children:"Filtros activos:"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(e).map(([x,h])=>{if(!h||typeof h=="string"&&!h.trim())return null;let v=x,g=h;switch(x){case"search":v="Búsqueda";break;case"numero_caravana":v="Caravana";break;case"color_caravana":v="Color";break;case"estado_fisico":v="Estado";break;case"proveedor_id":v="Proveedor",g=n.find(y=>y.id===h)?.nombre||h;break;case"lote_id":v="Lote",h==="sin_lote"?g="Sin lote":g=s.find(y=>y.id===h)?.nombre||h;break;case"fecha_desde":v="Desde",g=new Date(h).toLocaleDateString("es-AR");break;case"fecha_hasta":v="Hasta",g=new Date(h).toLocaleDateString("es-AR");break;case"peso_min":v="Peso mín.",g=`${h} kg`;break;case"peso_max":v="Peso máx.",g=`${h} kg`;break}return a.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-rural-primary/10 text-rural-primary text-sm rounded-full",children:[a.jsxs("span",{className:"font-medium",children:[v,":"]}),a.jsx("span",{children:g}),a.jsx("button",{onClick:()=>f(x,""),className:"ml-1 hover:text-rural-primary/80",children:a.jsx(Qe,{className:"h-3 w-3"})})]},x)})})]})]})},NP=({isOpen:e,onClose:t,onConfirm:r,title:n,message:s,confirmText:l="Confirmar",cancelText:c="Cancelar",type:d="warning",isDestructive:f=!1,icon:m})=>{_.useEffect(()=>{const b=j=>{e&&(j.key==="Escape"?t():j.key==="Enter"&&!f&&r())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[e,t,r,f]),_.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]);const x=()=>{switch(d){case"danger":return{bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",confirmBg:"bg-red-600 hover:bg-red-700",confirmText:"text-white"};case"warning":return{bgColor:"bg-amber-50",borderColor:"border-amber-200",iconColor:"text-amber-600",confirmBg:"bg-amber-600 hover:bg-amber-700",confirmText:"text-white"};case"info":return{bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",confirmBg:"bg-rural-primary hover:bg-rural-primary/90",confirmText:"text-white"};case"success":return{bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-600",confirmBg:"bg-rural-primary hover:bg-rural-primary/90",confirmText:"text-white"};default:return{bgColor:"bg-amber-50",borderColor:"border-amber-200",iconColor:"text-amber-600",confirmBg:"bg-amber-600 hover:bg-amber-700",confirmText:"text-white"}}},h=()=>{switch(d){case"danger":return R8;case"warning":return hr;case"info":return G3;case"success":return en;default:return hr}},v=x(),g=m||h(),y=b=>{b.target===b.currentTarget&&t()};return a.jsx(Sa,{children:e&&a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:y,children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),a.jsxs(de.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",duration:.3},className:`relative w-full max-w-md mx-auto ${v.bgColor} ${v.borderColor} border rounded-2xl shadow-2xl overflow-hidden`,children:[a.jsxs("div",{className:"relative p-6 pb-4",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-1 text-rural-text/60 hover:text-rural-text transition-colors rounded-lg hover:bg-white/50",children:a.jsx(Qe,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:`p-3 rounded-full bg-white/70 ${v.iconColor}`,children:a.jsx(g,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-2",children:n}),a.jsx("p",{className:"text-rural-text/80 leading-relaxed",children:s})]})]})]}),a.jsxs("div",{className:"bg-white/50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end space-y-3 space-y-reverse sm:space-y-0 sm:space-x-3",children:[a.jsx("button",{onClick:t,className:"w-full sm:w-auto px-6 py-3 text-rural-text bg-white border border-rural-alternate rounded-xl hover:bg-rural-alternate/20 transition-colors font-medium",children:c}),a.jsx("button",{onClick:r,className:`w-full sm:w-auto px-6 py-3 rounded-xl transition-colors font-medium ${v.confirmBg} ${v.confirmText}`,children:l})]})]})]})})},$l=()=>{const[e,t]=_.useState({isOpen:!1,title:"",message:"",confirmText:"Confirmar",cancelText:"Cancelar",type:"warning",isDestructive:!1,icon:null,onConfirm:()=>{},onCancel:()=>{}}),r=_.useCallback(l=>new Promise(c=>{t({isOpen:!0,title:l.title||"¿Estás seguro?",message:l.message||"¿Deseas continuar con esta acción?",confirmText:l.confirmText||"Confirmar",cancelText:l.cancelText||"Cancelar",type:l.type||"warning",isDestructive:l.isDestructive||!1,icon:l.icon||null,onConfirm:()=>{t(d=>({...d,isOpen:!1})),c(!0)},onCancel:()=>{t(d=>({...d,isOpen:!1})),c(!1)}})}),[]),n=_.useCallback(()=>{t(l=>({...l,isOpen:!1}))},[]),s=_.useCallback(()=>a.jsx(NP,{isOpen:e.isOpen,onClose:e.onCancel,onConfirm:e.onConfirm,title:e.title,message:e.message,confirmText:e.confirmText,cancelText:e.cancelText,type:e.type,isDestructive:e.isDestructive,icon:e.icon}),[e]);return{showConfirm:r,hideConfirm:n,ConfirmComponent:s}},ic=(e,t)=>({title:`Eliminar ${e}`,message:t||`¿Estás seguro que deseas eliminar este ${e}? Esta acción no se puede deshacer.`,confirmText:"Sí, eliminar",cancelText:"Cancelar",type:"danger",isDestructive:!0}),wP=(e,t)=>({title:e,message:t,confirmText:"Continuar",cancelText:"Cancelar",type:"warning",isDestructive:!1}),_P=()=>{const{showConfirm:e,ConfirmComponent:t}=$l(),{selectedAnimales:r,clearSelection:n,lotes:s,fetchLotes:l,asignarAnimalesALote:c,quitarAnimalesDeLote:d}=Ra(),[f,m]=_.useState(!1),[x,h]=_.useState(!1),v=async()=>{if(r.length===0){await e({type:"info",title:"Ningún animal seleccionado",message:"Por favor selecciona al menos un animal para asignar a un lote.",confirmText:"Entendido"});return}h(!0),s.length===0&&l()},g=async k=>{const C=await c(r,k);C.success?(h(!1),n(),await e({type:"success",title:"Asignación exitosa",message:`${r.length} animales asignados al lote correctamente.`,confirmText:"Continuar"})):await e({type:"danger",title:"Error en la asignación",message:`Error al asignar animales al lote: ${C.error}`,confirmText:"Entendido"})},y=async()=>{if(r.length===0){await e({type:"info",title:"Ningún animal seleccionado",message:"Por favor selecciona al menos un animal para quitar de su lote.",confirmText:"Entendido"});return}if(await e({type:"warning",title:"Confirmar remoción",message:`¿Quitar ${r.length} animales de sus lotes actuales?`,confirmText:"Quitar",cancelText:"Cancelar"})){const C=await d(r);C.success?(n(),await e({type:"success",title:"Remoción exitosa",message:"Animales removidos de lotes correctamente.",confirmText:"Continuar"})):await e({type:"danger",title:"Error en la remoción",message:`Error al remover animales: ${C.error}`,confirmText:"Entendido"})}},b=()=>{console.log("Marcar como vendidos:",r)},j=()=>{console.log("Registrar evento sanitario:",r)},T=[{icon:st,label:"Asignar a lote",action:v,color:"text-rural-primary hover:bg-rural-primary/10"},{icon:K3,label:"Quitar de lote",action:y,color:"text-orange-600 hover:bg-orange-50"},{icon:Tl,label:"Marcar como vendidos",action:b,color:"text-green-600 hover:bg-green-50"},{icon:wr,label:"Evento sanitario",action:j,color:"text-blue-600 hover:bg-blue-50"},{icon:Tn,label:"Cambiar categoría",action:()=>{console.log("Cambiar categoría:",r)},color:"text-yellow-600 hover:bg-yellow-50"},{icon:Dn,label:"Editar masivo",action:()=>{console.log("Editar masivo:",r)},color:"text-purple-600 hover:bg-purple-50"},{icon:et,label:"Exportar selección",action:()=>{console.log("Exportar seleccionados:",r)},color:"text-indigo-600 hover:bg-indigo-50"},{icon:lr,label:"Eliminar",action:async()=>{await ic(`${r.length} animales`,"Esta acción eliminará permanentemente los animales seleccionados y todo su historial. Esta operación no se puede deshacer.")&&console.log("Eliminar animales:",r)},color:"text-red-600 hover:bg-red-50"}];return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs("button",{onClick:v,className:"flex items-center space-x-1 px-3 py-2 text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-colors",title:"Asignar a lote",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline text-sm",children:"Lote"})]}),a.jsxs("button",{onClick:b,className:"flex items-center space-x-1 px-3 py-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Marcar como vendidos",children:[a.jsx(Tl,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline text-sm",children:"Vender"})]}),a.jsxs("button",{onClick:j,className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Registrar evento sanitario",children:[a.jsx(wr,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline text-sm",children:"Sanidad"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>m(!f),className:"flex items-center space-x-1 px-3 py-2 text-rural-text hover:bg-rural-background rounded-lg transition-colors",title:"Más acciones",children:a.jsx(Lm,{className:"h-4 w-4"})}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>m(!1)}),a.jsx(de.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-rural-alternate/50 py-2 z-20",children:T.slice(3).map((k,C)=>{const M=k.icon;return a.jsxs("button",{onClick:()=>{k.action(),m(!1)},className:`w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors ${k.color}`,children:[a.jsx(M,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:k.label})]},k.label)})})]})]})]}),x&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-rural-alternate/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Seleccionar Lote"}),a.jsx("button",{onClick:()=>h(!1),className:"text-rural-text/60 hover:text-rural-text transition-colors",children:a.jsx(Qe,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("p",{className:"text-sm text-rural-text/70 mb-4",children:["Selecciona el lote para asignar ",r.length," animales"]}),a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:s.map(k=>a.jsx("button",{onClick:()=>g(k.id),className:"w-full p-3 text-left border border-rural-alternate/20 rounded-lg hover:bg-rural-background transition-colors flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-rural-text",children:k.nombre}),k.numero&&a.jsxs("span",{className:"text-sm text-rural-text/60 ml-2",children:["#",k.numero]}),k.color&&a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:k.color}}),a.jsx("span",{className:"text-xs text-rural-text/60",children:k.color})]})]})},k.id))}),s.length===0&&a.jsxs("div",{className:"text-center py-8 text-rural-text/60",children:[a.jsx(st,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No hay lotes disponibles"}),a.jsx("p",{className:"text-sm",children:"Crea un lote primero"})]})]}),a.jsx("div",{className:"flex space-x-3 p-6 border-t border-rural-alternate/20",children:a.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 text-rural-text/70 border border-rural-alternate/30 rounded-lg hover:bg-rural-background transition-colors",children:"Cancelar"})})]})}),a.jsx(t,{})]})},EP=({onClose:e})=>{const{showConfirm:t,ConfirmComponent:r}=$l(),{lotes:n,fetchLotes:s,createLote:l,updateLote:c,deleteLote:d,loading:f}=Ra(),[m,x]=_.useState(!1),[h,v]=_.useState(null),[g,y]=_.useState({nombre:"",numero:"",color:"#67806D",observaciones:""});_.useEffect(()=>{s()},[s]);const b=async D=>{if(D.preventDefault(),!g.nombre.trim()){await t({type:"warning",title:"Campo requerido",message:"El nombre del lote es requerido para poder guardarlo.",confirmText:"Entendido"});return}try{let T;h?T=await c(h.id,g):T=await l(g),T.success?(A(),await t({type:"success",title:`Lote ${h?"actualizado":"creado"}`,message:`El lote se ha ${h?"actualizado":"creado"} exitosamente.`,confirmText:"Continuar"})):await t({type:"danger",title:`Error al ${h?"actualizar":"crear"} lote`,message:`Error al ${h?"actualizar":"crear"} el lote: ${T.error}`,confirmText:"Entendido"})}catch(T){await t({type:"danger",title:`Error al ${h?"actualizar":"crear"} lote`,message:`Error al ${h?"actualizar":"crear"} el lote: ${T.message}`,confirmText:"Entendido"})}},j=async D=>{if(await ic(`lote "${D.nombre}"`,"Los animales asignados serán liberados automáticamente y se eliminará el historial de asignaciones."))try{const k=await d(D.id);k.success?await t({type:"success",title:"Lote eliminado",message:k.message,confirmText:"Continuar"}):await t({type:"danger",title:"Error al eliminar",message:`Error al eliminar el lote: ${k.error}`,confirmText:"Entendido"})}catch(k){await t({type:"danger",title:"Error al eliminar",message:`Error al eliminar el lote: ${k.message}`,confirmText:"Entendido"})}},w=D=>{v(D),y({nombre:D.nombre,numero:D.numero||"",color:D.color||"#67806D",observaciones:D.observaciones||""}),x(!0)},A=()=>{y({nombre:"",numero:"",color:"#67806D",observaciones:""}),v(null),x(!1)},S=D=>new Date(D).toLocaleDateString("es-AR");return a.jsxs(Sa,{children:[a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50"}),a.jsxs(de.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},className:"relative bg-rural-card rounded-2xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-rural-alternate/30",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-rural-primary/10 rounded-xl",children:a.jsx(st,{className:"h-6 w-6 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-rural-text",children:"Gestión de Lotes"}),a.jsx("p",{className:"text-rural-text/60",children:"Crear, editar y administrar lotes de animales"})]})]}),a.jsx("button",{onClick:e,className:"p-2 text-rural-text/60 hover:text-rural-text hover:bg-rural-background rounded-xl transition-colors",children:a.jsx(Qe,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[!m&&a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 px-4 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),a.jsx("span",{children:"Crear nuevo lote"})]})}),m&&a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-rural-background rounded-xl p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:h?"Editar lote":"Crear nuevo lote"}),a.jsx("button",{onClick:A,className:"text-rural-text/60 hover:text-rural-text",children:a.jsx(Qe,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Nombre del lote *"}),a.jsx("input",{type:"text",value:g.nombre,onChange:D=>y({...g,nombre:D.target.value}),placeholder:"Ejemplo: Lote Primavera 2024",required:!0,className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-card focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Número"}),a.jsx("input",{type:"text",value:g.numero,onChange:D=>y({...g,numero:D.target.value}),placeholder:"Número del lote",className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-card focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"color",value:g.color,onChange:D=>y({...g,color:D.target.value}),className:"w-12 h-10 border border-rural-alternate/50 rounded-xl cursor-pointer"}),a.jsx("input",{type:"text",value:g.color,onChange:D=>y({...g,color:D.target.value}),placeholder:"#67806D",className:"flex-1 px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-card focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Observaciones"}),a.jsx("textarea",{value:g.observaciones,onChange:D=>y({...g,observaciones:D.target.value}),placeholder:"Observaciones adicionales del lote...",rows:3,className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-card focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all resize-none"})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 text-rural-text hover:bg-rural-alternate rounded-xl transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors disabled:opacity-50",children:[a.jsx(Na,{className:"h-4 w-4"}),a.jsxs("span",{children:[h?"Actualizar":"Crear"," lote"]})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text",children:["Lotes existentes (",n.length,")"]}),n.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(st,{className:"h-12 w-12 text-rural-primary/40 mx-auto mb-3"}),a.jsx("p",{className:"text-rural-text/60",children:"No hay lotes creados aún"}),a.jsx("p",{className:"text-rural-text/40 text-sm",children:"Crea tu primer lote para organizar los animales"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(D=>a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-rural-card border border-rural-alternate/50 rounded-xl p-4 hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{backgroundColor:`${D.color}20`},children:a.jsx(st,{className:"h-5 w-5",style:{color:D.color}})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h4",{className:"font-semibold text-rural-text",children:D.nombre}),D.numero&&a.jsxs("span",{className:"px-2 py-1 bg-rural-alternate/50 text-rural-text text-xs rounded-lg",children:["#",D.numero]})]}),a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-rural-text/60",children:[a.jsx(We,{className:"h-3 w-3"}),a.jsx("span",{children:S(D.fecha_creacion)})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>w(D),className:"p-2 text-rural-text/60 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar lote",children:a.jsx(Dn,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>j(D.id),className:"p-2 text-rural-text/60 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar lote",children:a.jsx(lr,{className:"h-4 w-4"})})]})]}),D.observaciones&&a.jsx("p",{className:"text-rural-text/60 text-sm mb-3",children:D.observaciones}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Tn,{className:"h-3 w-3 text-rural-primary"}),a.jsxs("span",{className:"text-rural-text/60",children:[D.cantidad_animales||0," animales"]})]}),D.created_by&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Vt,{className:"h-3 w-3 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:D.usuario_nombre||"Usuario"})]})]}),a.jsx("button",{className:"text-rural-primary hover:text-rural-primary/80 font-medium",children:"Ver animales"})]})]},D.id))})]})]}),a.jsx("div",{className:"flex justify-end p-6 border-t border-rural-alternate/30",children:a.jsx("button",{onClick:e,className:"px-6 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors",children:"Cerrar"})})]})]}),a.jsx(r,{})]})},SP=({animalId:e,animalData:t})=>{const{fetchPesadasByAnimal:r,createPesada:n,updatePesada:s,deletePesada:l}=Ra(),{user:c}=ln(),[d,f]=_.useState([]),[m,x]=_.useState(!1),[h,v]=_.useState(null),[g,y]=_.useState({fecha_pesada:new Date().toISOString().split("T")[0],peso:"",observaciones:""});_.useEffect(()=>{e&&b()},[e]);const b=async()=>{const k=await r(e);f(k)},j=async k=>{k.preventDefault();try{h?await s(h.id,{...g,peso:parseFloat(g.peso)}):await n({animal_id:e,...g,peso:parseFloat(g.peso),created_by:c?.id||null}),await b(),S()}catch(C){console.error("Error al guardar pesada:",C)}},w=k=>{v(k),y({fecha_pesada:k.fecha_pesada,peso:k.peso.toString(),observaciones:k.observaciones||""}),x(!0)},A=async k=>{if(window.confirm("¿Está seguro de eliminar esta pesada?"))try{await l(k),await b()}catch(C){console.error("Error al eliminar pesada:",C)}},S=()=>{y({fecha_pesada:new Date().toISOString().split("T")[0],peso:"",observaciones:""}),v(null),x(!1)},D=(k,C)=>C?k.peso-C.peso:null,T=k=>new Date(k).toLocaleDateString("es-AR");return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Zr,{className:"h-5 w-5 text-[#67806D]"}),a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Historial de Pesadas"})]}),a.jsxs("button",{onClick:()=>x(!m),className:"flex items-center gap-2 bg-[#67806D] text-white px-4 py-2 rounded-lg hover:bg-[#67806D]/90 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),"Nueva Pesada"]})]}),m&&a.jsx(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-[#F9E9D0] rounded-lg p-4",children:a.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Fecha"}),a.jsx("input",{type:"date",value:g.fecha_pesada,onChange:k=>y({...g,fecha_pesada:k.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Peso (kg)"}),a.jsx("input",{type:"number",step:"0.1",value:g.peso,onChange:k=>y({...g,peso:k.target.value}),required:!0,placeholder:"Peso en kg",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Observaciones"}),a.jsx("input",{type:"text",value:g.observaciones,onChange:k=>y({...g,observaciones:k.target.value}),placeholder:"Observaciones...",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{className:"md:col-span-3 flex gap-2",children:[a.jsx("button",{type:"submit",className:"bg-[#67806D] text-white px-4 py-2 rounded-lg hover:bg-[#67806D]/90 transition-colors",children:h?"Actualizar":"Guardar"}),a.jsx("button",{type:"button",onClick:S,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"})]})]})}),a.jsx("div",{className:"space-y-3",children:d.length>0?d.map((k,C)=>{const M=d[C+1],I=D(k,M);return a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:C*.1},className:"bg-white border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-[#3C454A]",children:[k.peso," kg"]}),I!==null&&a.jsxs("div",{className:`text-sm font-medium ${I>0?"text-[#67806D]":"text-[#F8B36A]"}`,children:[I>0?"+":"",I.toFixed(1)," kg",I>0?a.jsx(Mt,{className:"inline h-3 w-3 ml-1"}):a.jsx(zb,{className:"inline h-3 w-3 ml-1"})]})]}),a.jsxs("div",{className:"border-l border-gray-200 pl-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[#3C454A]",children:[a.jsx(We,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:T(k.fecha_pesada)})]}),k.observaciones&&a.jsx("div",{className:"text-sm text-[#3C454A] opacity-70 mt-1",children:k.observaciones})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>w(k),className:"p-2 text-[#67806D] hover:bg-[#67806D] hover:bg-opacity-10 rounded-lg transition-colors",title:"Editar",children:a.jsx(Dn,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>A(k.id),className:"p-2 text-[#F8B36A] hover:bg-[#F8B36A] hover:bg-opacity-10 rounded-lg transition-colors",title:"Eliminar",children:a.jsx(lr,{className:"h-4 w-4"})})]})]})},k.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Zr,{className:"h-12 w-12 text-[#3C454A] opacity-30 mx-auto mb-4"}),a.jsx("p",{className:"text-[#3C454A] opacity-70",children:"No hay pesadas registradas"}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-50",children:"Registra la primera pesada para hacer seguimiento del peso"})]})}),d.length>1&&a.jsxs("div",{className:"bg-[#F5F2E7] rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-3",children:"Resumen"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Peso Inicial:"}),a.jsxs("div",{className:"font-semibold text-[#3C454A]",children:[d[d.length-1]?.peso," kg"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Peso Actual:"}),a.jsxs("div",{className:"font-semibold text-[#3C454A]",children:[d[0]?.peso," kg"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Ganancia Total:"}),a.jsxs("div",{className:`font-semibold ${d[0]?.peso-d[d.length-1]?.peso>0?"text-[#67806D]":"text-[#F8B36A]"}`,children:[(d[0]?.peso-d[d.length-1]?.peso||0).toFixed(1)," kg"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Total Pesadas:"}),a.jsx("div",{className:"font-semibold text-[#3C454A]",children:d.length})]})]})]})]})},AP=({animalId:e,animalData:t})=>{const{fetchEventosSanitarios:r,createEventoSanitario:n,updateEventoSanitario:s,deleteEventoSanitario:l,eventosSanitarios:c}=Ra(),{user:d}=ln(),[f,m]=_.useState(!1),[x,h]=_.useState(null),[v,g]=_.useState({tipo:"vacuna",descripcion:"",fecha:new Date().toISOString().split("T")[0],observaciones:""});_.useEffect(()=>{e&&y()},[e]);const y=async()=>{await r(e)},b=[{value:"vacuna",label:"Vacuna",icon:a.jsx(uu,{className:"h-4 w-4"}),color:"bg-blue-100 text-blue-800"},{value:"desparasitario",label:"Desparasitario",icon:a.jsx(Wo,{className:"h-4 w-4"}),color:"bg-green-100 text-green-800"},{value:"tratamiento",label:"Tratamiento",icon:a.jsx(wr,{className:"h-4 w-4"}),color:"bg-orange-100 text-orange-800"},{value:"revision",label:"Revisión",icon:a.jsx(fr,{className:"h-4 w-4"}),color:"bg-red-100 text-red-800"},{value:"medicamento",label:"Medicamento",icon:a.jsx(Wo,{className:"h-4 w-4"}),color:"bg-purple-100 text-purple-800"}],j=async C=>{C.preventDefault();try{x?await s(x.id,v):await n({animal_id:e,...v,created_by:d?.id||null}),await y(),S()}catch(M){console.error("Error al guardar evento sanitario:",M)}},w=C=>{h(C),g({tipo:C.tipo,descripcion:C.descripcion||"",fecha:C.fecha,observaciones:C.observaciones||""}),m(!0)},A=async C=>{if(window.confirm("¿Está seguro de eliminar este evento sanitario?"))try{await l(C),await y()}catch(M){console.error("Error al eliminar evento sanitario:",M)}},S=()=>{g({tipo:"vacuna",descripcion:"",fecha:new Date().toISOString().split("T")[0],observaciones:""}),h(null),m(!1)},D=C=>b.find(I=>I.value===C)?.icon||a.jsx(fr,{className:"h-4 w-4"}),T=C=>b.find(I=>I.value===C)?.color||"bg-gray-100 text-gray-800",k=C=>new Date(C).toLocaleDateString("es-AR");return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(fr,{className:"h-5 w-5 text-[#67806D]"}),a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Historial Sanitario"})]}),a.jsxs("button",{onClick:()=>m(!f),className:"flex items-center gap-2 bg-[#67806D] text-white px-4 py-2 rounded-lg hover:bg-[#67806D]/90 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),"Nuevo Evento"]})]}),f&&a.jsx(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-[#F9E9D0] rounded-lg p-4",children:a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Tipo de Evento"}),a.jsx("select",{value:v.tipo,onChange:C=>g({...v,tipo:C.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#67806D] focus:border-transparent",children:b.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Fecha"}),a.jsx("input",{type:"date",value:v.fecha,onChange:C=>g({...v,fecha:C.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Descripción"}),a.jsx("input",{type:"text",value:v.descripcion,onChange:C=>g({...v,descripcion:C.target.value}),required:!0,placeholder:"Ej: Vacuna Triple, Ivermectina, etc.",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Observaciones"}),a.jsx("textarea",{value:v.observaciones,onChange:C=>g({...v,observaciones:C.target.value}),placeholder:"Observaciones adicionales...",rows:2,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"bg-[#67806D] text-white px-4 py-2 rounded-lg hover:bg-[#67806D]/90 transition-colors",children:x?"Actualizar":"Guardar"}),a.jsx("button",{type:"button",onClick:S,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"})]})]})}),a.jsx("div",{className:"space-y-3",children:c.length>0?c.map((C,M)=>a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:M*.1},className:"bg-white border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${T(C.tipo)}`,children:[D(C.tipo),C.tipo]})}),a.jsxs("div",{className:"border-l border-gray-200 pl-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[#3C454A]",children:[a.jsx(We,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:k(C.fecha)})]}),a.jsx("div",{className:"text-[#3C454A] font-medium mt-1",children:C.descripcion}),C.observaciones&&a.jsx("div",{className:"text-sm text-[#3C454A] opacity-70 mt-1",children:C.observaciones})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>w(C),className:"p-2 text-[#67806D] hover:bg-[#67806D] hover:bg-opacity-10 rounded-lg transition-colors",title:"Editar",children:a.jsx(Ub,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>A(C.id),className:"p-2 text-[#F8B36A] hover:bg-[#F8B36A] hover:bg-opacity-10 rounded-lg transition-colors",title:"Eliminar",children:a.jsx(lr,{className:"h-4 w-4"})})]})]})},C.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(fr,{className:"h-12 w-12 text-[#3C454A] opacity-30 mx-auto mb-4"}),a.jsx("p",{className:"text-[#3C454A] opacity-70",children:"No hay eventos sanitarios registrados"}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-50",children:"Registra el primer evento para hacer seguimiento sanitario"})]})}),c.length>0&&a.jsxs("div",{className:"bg-[#F5F2E7] rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-3",children:"Resumen Sanitario"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Total Eventos:"}),a.jsx("div",{className:"font-semibold text-[#3C454A]",children:c.length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Último Evento:"}),a.jsx("div",{className:"font-semibold text-[#3C454A]",children:c.length>0?k(c[0].fecha):"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Vacunas:"}),a.jsx("div",{className:"font-semibold text-blue-600",children:c.filter(C=>C.tipo==="vacuna").length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Tratamientos:"}),a.jsx("div",{className:"font-semibold text-orange-600",children:c.filter(C=>C.tipo==="tratamiento").length})]})]})]})]})},Gb=({animal:e,onClose:t})=>{const{updateAnimal:r,loading:n}=Ra(),[s,l]=_.useState(!1),[c,d]=_.useState("general"),[f,m]=_.useState({numero_caravana:"",color_caravana:"",categoria:"",peso_ingreso:"",estado_fisico:"",observaciones:"",estado_reproductivo:"vacia",fecha_ultimo_parto:"",numero_lactancia:0,fecha_ultimo_servicio:"",fecha_secado_programado:""});_.useEffect(()=>{e&&m({numero_caravana:e.numero_caravana||"",color_caravana:e.color_caravana||"",categoria:e.categoria||"",peso_ingreso:e.peso_ingreso||"",estado_fisico:e.estado_fisico||"",observaciones:e.observaciones||"",estado_reproductivo:e.estado_reproductivo||"vacia",fecha_ultimo_parto:e.fecha_ultimo_parto||"",numero_lactancia:e.numero_lactancia||0,fecha_ultimo_servicio:e.fecha_ultimo_servicio||"",fecha_secado_programado:e.fecha_secado_programado||""})},[e]);const x=async w=>{w.preventDefault();try{await r(e.id,f),l(!1)}catch(A){console.error("Error al actualizar animal:",A)}},h=w=>({excelente:"bg-green-100 text-green-800 border-green-200",bueno:"bg-blue-100 text-blue-800 border-blue-200",malo:"bg-yellow-100 text-yellow-800 border-yellow-200",critico:"bg-red-100 text-red-800 border-red-200"})[w]||"bg-gray-100 text-gray-800 border-gray-200",v=w=>new Date(w).toLocaleDateString("es-AR"),g=w=>`${w} kg`,y=w=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(w),b=w=>{const A=new Date(w);return Math.floor((new Date-A)/(1e3*60*60*24))},j=[{id:"general",label:"Información General",icon:et},{id:"lecheria",label:"Producción Lechera",icon:ja},{id:"pesadas",label:"Pesadas",icon:Zr},{id:"sanidad",label:"Historial Sanitario",icon:wr},{id:"documentos",label:"Documentos",icon:qp}];return e?a.jsx(Sa,{children:a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/50"}),a.jsxs(de.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},className:"relative bg-rural-card rounded-2xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-rural-alternate/30",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:e.color_caravana},title:`Color: ${e.color_caravana}`}),a.jsx("div",{className:"p-2 bg-rural-primary/10 rounded-xl",children:a.jsx(Tn,{className:"h-6 w-6 text-rural-primary"})})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-rural-text",children:["Caravana #",e.numero_caravana]}),a.jsxs("p",{className:"text-rural-text/60",children:[e.categoria," • ",b(e.fecha_ingreso)," días en campo"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[!s&&a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors",children:[a.jsx(Dn,{className:"h-4 w-4"}),a.jsx("span",{children:"Editar"})]}),a.jsx("button",{onClick:t,className:"p-2 text-rural-text/60 hover:text-rural-text hover:bg-rural-background rounded-xl transition-colors",children:a.jsx(Qe,{className:"h-5 w-5"})})]})]}),a.jsx("div",{className:"flex border-b border-rural-alternate/30",children:j.map(w=>{const A=w.icon;return a.jsxs("button",{onClick:()=>d(w.id),className:`flex items-center space-x-2 px-6 py-3 border-b-2 transition-colors ${c===w.id?"border-rural-primary text-rural-primary bg-rural-primary/5":"border-transparent text-rural-text/60 hover:text-rural-text hover:bg-rural-background/50"}`,children:[a.jsx(A,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:w.label})]},w.id)})}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[c==="general"&&a.jsx("div",{className:"space-y-6",children:s?a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Número de caravana"}),a.jsx("input",{type:"text",value:f.numero_caravana,onChange:w=>m({...f,numero_caravana:w.target.value}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Color de caravana"}),a.jsxs("select",{value:f.color_caravana,onChange:w=>m({...f,color_caravana:w.target.value}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all",children:[a.jsx("option",{value:"amarillo",children:"Amarillo"}),a.jsx("option",{value:"azul",children:"Azul"}),a.jsx("option",{value:"rojo",children:"Rojo"}),a.jsx("option",{value:"verde",children:"Verde"}),a.jsx("option",{value:"blanco",children:"Blanco"}),a.jsx("option",{value:"negro",children:"Negro"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Categoría"}),a.jsxs("select",{value:f.categoria,onChange:w=>m({...f,categoria:w.target.value}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all",children:[a.jsx("option",{value:"Ternero",children:"Ternero"}),a.jsx("option",{value:"Novillo",children:"Novillo"}),a.jsx("option",{value:"Vaca",children:"Vaca"}),a.jsx("option",{value:"Toro",children:"Toro"}),a.jsx("option",{value:"Vaquilla",children:"Vaquilla"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Peso de ingreso (kg)"}),a.jsx("input",{type:"number",value:f.peso_ingreso,onChange:w=>m({...f,peso_ingreso:w.target.value}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Estado físico"}),a.jsxs("select",{value:f.estado_fisico,onChange:w=>m({...f,estado_fisico:w.target.value}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all",children:[a.jsx("option",{value:"excelente",children:"Excelente"}),a.jsx("option",{value:"bueno",children:"Bueno"}),a.jsx("option",{value:"malo",children:"Malo"}),a.jsx("option",{value:"critico",children:"Crítico"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Observaciones"}),a.jsx("textarea",{value:f.observaciones,onChange:w=>m({...f,observaciones:w.target.value}),rows:3,className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all resize-none"})]})]}),a.jsxs("div",{className:"border-t border-rural-alternate/30 pt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(ja,{className:"h-5 w-5 text-rural-primary"}),"Información Lechera"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Estado reproductivo"}),a.jsxs("select",{value:f.estado_reproductivo,onChange:w=>m({...f,estado_reproductivo:w.target.value}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all",children:[a.jsx("option",{value:"vacia",children:"Vacía"}),a.jsx("option",{value:"prenada",children:"Preñada"}),a.jsx("option",{value:"lactancia",children:"En lactancia"}),a.jsx("option",{value:"seca",children:"Seca"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Número de lactancia"}),a.jsx("input",{type:"number",min:"0",value:f.numero_lactancia,onChange:w=>m({...f,numero_lactancia:parseInt(w.target.value)||0}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Fecha último parto"}),a.jsx("input",{type:"date",value:f.fecha_ultimo_parto,onChange:w=>m({...f,fecha_ultimo_parto:w.target.value}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Fecha último servicio"}),a.jsx("input",{type:"date",value:f.fecha_ultimo_servicio,onChange:w=>m({...f,fecha_ultimo_servicio:w.target.value}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Fecha secado programado"}),a.jsx("input",{type:"date",value:f.fecha_secado_programado,onChange:w=>m({...f,fecha_secado_programado:w.target.value}),className:"w-full px-3 py-2 border border-rural-alternate/50 rounded-xl bg-rural-background focus:border-rural-primary focus:ring-2 focus:ring-rural-primary/20 transition-all"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-rural-text hover:bg-rural-alternate rounded-xl transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors disabled:opacity-50",children:[a.jsx(Na,{className:"h-4 w-4"}),a.jsx("span",{children:"Guardar cambios"})]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Información Básica"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Tn,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:"Caravana"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color_caravana}}),a.jsxs("span",{className:"font-semibold text-rural-text",children:["#",e.numero_caravana]})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsx("span",{className:"text-rural-text/60",children:"Categoría"}),a.jsx("span",{className:"font-semibold text-rural-text",children:e.categoria})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Wn,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:"Peso ingreso"})]}),a.jsx("span",{className:"font-semibold text-rural-text",children:g(e.peso_ingreso)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:"Estado físico"})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${h(e.estado_fisico)}`,children:e.estado_fisico})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(We,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:"Fecha ingreso"})]}),a.jsx("span",{className:"font-semibold text-rural-text",children:v(e.fecha_ingreso)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(rr,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:"Precio/kg"})]}),a.jsx("span",{className:"font-semibold text-rural-text",children:y(e.precio_compra)})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Origen y Compra"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:"Proveedor"})]}),a.jsx("span",{className:"font-semibold text-rural-text",children:e.proveedores?.nombre||"N/A"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Cn,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:"Transportador"})]}),a.jsx("span",{className:"font-semibold text-rural-text",children:e.transportadores?.nombre||"N/A"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(st,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:"Lote"})]}),a.jsx("span",{className:"font-semibold text-rural-text",children:e.lote_nombre||"Sin asignar"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsx("span",{className:"text-rural-text/60",children:"Días en campo"}),a.jsxs("span",{className:"font-semibold text-rural-text",children:[b(e.fecha_ingreso)," días"]})]})]}),e.observaciones&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-rural-text",children:"Observaciones"}),a.jsx("div",{className:"p-3 bg-rural-background rounded-xl",children:a.jsx("p",{className:"text-rural-text/80",children:e.observaciones})})]})]})]})}),c==="lecheria"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text flex items-center gap-2",children:[a.jsx(fr,{className:"h-5 w-5 text-rural-primary"}),"Estado Reproductivo"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsx("span",{className:"text-rural-text/60",children:"Estado actual"}),a.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${e.estado_reproductivo==="lactancia"?"bg-blue-100 text-blue-800":e.estado_reproductivo==="prenada"?"bg-green-100 text-green-800":e.estado_reproductivo==="seca"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:e.estado_reproductivo==="lactancia"?"En lactancia":e.estado_reproductivo==="prenada"?"Preñada":e.estado_reproductivo==="seca"?"Seca":"Vacía"})]}),e.fecha_ultimo_parto&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsx("span",{className:"text-rural-text/60",children:"Último parto"}),a.jsx("span",{className:"font-semibold text-rural-text",children:v(e.fecha_ultimo_parto)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsx("span",{className:"text-rural-text/60",children:"Días lactancia"}),a.jsxs("span",{className:"font-semibold text-rural-text",children:[e.dias_lactancia||0," días"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsx("span",{className:"text-rural-text/60",children:"Número lactancia"}),a.jsx("span",{className:"font-semibold text-rural-text",children:e.numero_lactancia||0})]}),e.fecha_ultimo_servicio&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsx("span",{className:"text-rural-text/60",children:"Último servicio"}),a.jsx("span",{className:"font-semibold text-rural-text",children:v(e.fecha_ultimo_servicio)})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text flex items-center gap-2",children:[a.jsx(ja,{className:"h-5 w-5 text-rural-primary"}),"Producción y Control"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsx("span",{className:"text-rural-text/60",children:"Promedio 30 días"}),a.jsxs("span",{className:"font-semibold text-rural-text",children:[e.produccion_promedio_30d||0," L/día"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(uu,{className:"h-4 w-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text/60",children:"Control antibióticos"})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${e.control_antibioticos&&e.control_antibioticos.length>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:e.control_antibioticos&&e.control_antibioticos.length>0?`${e.control_antibioticos.length} activos`:"Sin restricciones"})]}),e.fecha_secado_programado&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-rural-background rounded-xl",children:[a.jsx("span",{className:"text-rural-text/60",children:"Secado programado"}),a.jsx("span",{className:"font-semibold text-rural-text",children:v(e.fecha_secado_programado)})]})]}),e.control_antibioticos&&e.control_antibioticos.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-rural-text",children:"Antibióticos activos"}),a.jsx("div",{className:"space-y-2",children:e.control_antibioticos.map((w,A)=>a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-red-800",children:w.medicamento}),a.jsxs("p",{className:"text-red-600 text-sm",children:["Retiro: ",w.periodo_retiro_dias," días"]})]}),a.jsxs("span",{className:"text-red-600 text-sm",children:[v(w.fecha_inicio)," - ",v(w.fecha_fin)]})]})},A))})]})]})]})}),c==="pesadas"&&a.jsx(SP,{animalId:e.id,animalData:e}),c==="sanidad"&&a.jsx(AP,{animalId:e.id,animalData:e}),c==="documentos"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Documentos y Fotos"}),a.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors",children:[a.jsx(qp,{className:"h-4 w-4"}),a.jsx("span",{children:"Subir archivo"})]})]}),a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qp,{className:"h-12 w-12 text-rural-primary/40 mx-auto mb-3"}),a.jsx("p",{className:"text-rural-text/60",children:"No hay documentos subidos"}),a.jsx("p",{className:"text-rural-text/40 text-sm",children:"Sube fotos del animal o documentos relacionados"})]})]})]})]})]})}):null},CP=({isOpen:e,onClose:t})=>{const{visibleColumns:r,toggleColumnVisibility:n}=Ra(),s=[{key:"caravana",label:"Caravana",description:"Número de caravana"},{key:"colorCaravana",label:"Color Caravana",description:"Color de la caravana"},{key:"categoria",label:"Categoría",description:"Tipo de animal"},{key:"peso",label:"Peso",description:"Peso de ingreso"},{key:"estadoFisico",label:"Estado Físico",description:"Condición del animal"},{key:"fechaIngreso",label:"Fecha Ingreso",description:"Fecha de ingreso al campo"},{key:"proveedor",label:"Proveedor",description:"Proveedor de origen"},{key:"precio",label:"Precio/kg",description:"Precio de compra por kilogramo"},{key:"lote",label:"Lote",description:"Lote asignado"},{key:"compra",label:"Compra",description:"Información de compra"}];return e?a.jsx(Sa,{children:a.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-end pt-20 pr-6",children:[a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0"}),a.jsxs(de.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:{duration:.2},className:"relative bg-rural-card rounded-2xl shadow-xl w-80 border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center space-x-3 p-4 border-b border-rural-alternate/30",children:[a.jsx("div",{className:"p-2 bg-rural-primary/10 rounded-lg",children:a.jsx(zs,{className:"h-5 w-5 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-rural-text",children:"Configurar Columnas"}),a.jsx("p",{className:"text-sm text-rural-text/60",children:"Mostrar u ocultar columnas"})]})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto table-scroll",children:a.jsx("div",{className:"p-4 space-y-3",children:s.map(l=>a.jsxs(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:s.indexOf(l)*.05},className:"flex items-center justify-between p-3 rounded-xl hover:bg-rural-background/50 transition-colors",children:[a.jsxs("div",{className:"flex-1 pr-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-medium text-rural-text",children:l.label}),r[l.key]&&a.jsx(cs,{className:"h-4 w-4 text-green-600 flex-shrink-0"})]}),a.jsx("p",{className:"text-sm text-rural-text/60",children:l.description})]}),a.jsx("button",{onClick:()=>n(l.key),className:`p-2 rounded-lg transition-colors flex-shrink-0 ${r[l.key]?"text-rural-primary hover:bg-rural-primary/10":"text-rural-text/40 hover:bg-rural-background"}`,title:r[l.key]?"Ocultar columna":"Mostrar columna",children:r[l.key]?a.jsx(Kt,{className:"h-4 w-4"}):a.jsx(z0,{className:"h-4 w-4"})})]},l.key))})}),a.jsx("div",{className:"p-4 border-t border-rural-alternate/30",children:a.jsxs("p",{className:"text-xs text-rural-text/60 text-center",children:[Object.values(r).filter(Boolean).length," de ",s.length," columnas visibles"]})})]})]})}):null},TP=()=>{const{ConfirmComponent:e}=$l(),{animales:t,lotes:r,proveedores:n,loading:s,error:l,selectedAnimales:c,visibleColumns:d,fetchAnimales:f,fetchLotes:m,fetchProveedores:x,clearError:h,clearSelection:v,getFilteredAnimales:g}=Ra(),[y,b]=_.useState(!1),[j,w]=_.useState(!1),[A,S]=_.useState(!1),[D,T]=_.useState(!1),[k,C]=_.useState(null);_.useEffect(()=>{f(),m(),x()},[f,m,x]);const M=g(),I=P=>{C(P),T(!0)},R=()=>{C(null),T(!1)},L=()=>{console.log("Exportar a Excel:",M)};return a.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-rural-primary/10 rounded-xl",children:a.jsx(et,{className:"h-6 w-6 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-rural-text",children:"Stock de Animales"}),a.jsxs("p",{className:"text-sm sm:text-base text-rural-text/60",children:[M.length," de ",t.length," animales en campo"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2 sm:pb-0",children:[a.jsxs("button",{onClick:()=>b(!y),className:`
              flex items-center space-x-2 px-3 py-2 rounded-xl transition-colors whitespace-nowrap
              ${y?"bg-rural-primary text-white":"bg-rural-background text-rural-text hover:bg-rural-alternate"}
            `,children:[a.jsx(Jr,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Filtros"})]}),a.jsxs("button",{onClick:()=>w(!j),className:"flex items-center space-x-2 px-3 py-2 bg-rural-background text-rural-text hover:bg-rural-alternate rounded-xl transition-colors whitespace-nowrap",children:[a.jsx(zs,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Columnas"})]}),a.jsxs("button",{onClick:L,className:"flex items-center space-x-2 px-3 py-2 bg-rural-background text-rural-text hover:bg-rural-alternate rounded-xl transition-colors whitespace-nowrap",children:[a.jsx(ma,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Excel"})]}),a.jsxs("button",{onClick:()=>S(!0),className:"flex items-center space-x-2 px-4 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors whitespace-nowrap",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Gestionar Lotes"}),a.jsx("span",{className:"sm:hidden",children:"Lotes"})]})]})]}),l&&a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center justify-between",children:[a.jsx("span",{className:"text-red-600",children:l}),a.jsx("button",{onClick:h,className:"text-red-400 hover:text-red-600",children:a.jsx(Qe,{className:"h-4 w-4"})})]}),c.length>0&&a.jsxs(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex flex-col space-y-3 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ks,{className:"h-5 w-5 text-blue-600"}),a.jsxs("span",{className:"text-blue-600 font-medium text-sm sm:text-base",children:[c.length," animales seleccionados"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(_P,{}),a.jsx("button",{onClick:v,className:"text-blue-400 hover:text-blue-600 p-1",children:a.jsx(Qe,{className:"h-4 w-4"})})]})]}),y&&a.jsx(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:a.jsx(jP,{})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-rural-card rounded-2xl shadow-sm border border-rural-alternate/50 overflow-hidden",children:s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-rural-primary"})}):a.jsx(yP,{animales:M,visibleColumns:d,onAnimalClick:I})}),A&&a.jsx(EP,{onClose:()=>S(!1)}),D&&k&&a.jsx(Gb,{animal:k,onClose:R}),a.jsx(CP,{isOpen:j,onClose:()=>w(!1)}),a.jsx(e,{})]})},DP=({title:e,description:t,icon:r,actions:n})=>a.jsxs(de.div,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4 sm:mb-0",children:[r&&a.jsx("div",{className:"p-3 bg-rural-primary/10 rounded-xl",children:a.jsx(r,{className:"h-6 w-6 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-rural-text",children:e}),t&&a.jsx("p",{className:"text-rural-text/70 mt-1",children:t})]})]}),n&&a.jsx("div",{className:"flex items-center space-x-3",children:n})]}),OP=()=>{const{showConfirm:e,ConfirmComponent:t}=$l(),{lotes:r,animales:n,fetchLotes:s,fetchAnimales:l,createLote:c,updateLote:d,deleteLote:f,asignarAnimalesALote:m,quitarAnimalesDeLote:x,loading:h,error:v}=Ra(),[g,y]=_.useState(""),[b,j]=_.useState(!1),[w,A]=_.useState(!1),[S,D]=_.useState(!1),[T,k]=_.useState(null),[C,M]=_.useState([]),[I,R]=_.useState(null),[L,P]=_.useState({nombre:"",numero:"",color:"#67806D",observaciones:""});_.useEffect(()=>{s(),l()},[]);const O=r.filter(F=>F.nombre.toLowerCase().includes(g.toLowerCase())||F.numero&&F.numero.toString().includes(g)),z=F=>n.filter(U=>U.lote_actual&&U.lote_actual.id===F&&U.estado==="en_campo"),V=()=>n.filter(F=>F.estado==="en_campo"&&!F.lote_actual),G=async()=>{if(!L.nombre.trim()){await e({type:"warning",title:"Campo requerido",message:"El nombre del lote es requerido para poder crearlo.",confirmText:"Entendido"});return}try{const F=await c(L);F.success?(P({nombre:"",numero:"",color:"#67806D",observaciones:""}),j(!1),await e({type:"success",title:"Lote creado",message:"El lote se ha creado exitosamente.",confirmText:"Continuar"})):await e({type:"danger",title:"Error al crear lote",message:`Error al crear el lote: ${F.error}`,confirmText:"Entendido"})}catch(F){await e({type:"danger",title:"Error al crear lote",message:`Error al crear el lote: ${F.message}`,confirmText:"Entendido"})}},K=async()=>{if(!T.nombre.trim()){await e({type:"warning",title:"Campo requerido",message:"El nombre del lote es requerido para poder actualizarlo.",confirmText:"Entendido"});return}try{const F=await d(T.id,T);F.success?(A(!1),k(null),await e({type:"success",title:"Lote actualizado",message:"El lote se ha actualizado exitosamente.",confirmText:"Continuar"})):await e({type:"danger",title:"Error al actualizar",message:`Error al actualizar el lote: ${F.error}`,confirmText:"Entendido"})}catch(F){await e({type:"danger",title:"Error al actualizar",message:`Error al actualizar el lote: ${F.message}`,confirmText:"Entendido"})}},ce=async F=>{const U=z(F.id);let Y="";if(U.length>0?Y=`Este lote tiene ${U.length} animales asignados. Los animales serán liberados automáticamente del lote y se eliminará el historial de asignaciones.`:Y="Se eliminará el historial de asignaciones de este lote.",await ic(`lote "${F.nombre}"`,Y))try{const ee=await f(F.id);ee.success?await e({type:"success",title:"Lote eliminado",message:ee.message,confirmText:"Continuar"}):await e({type:"danger",title:"Error al eliminar",message:`Error al eliminar el lote: ${ee.error}`,confirmText:"Entendido"})}catch(ee){await e({type:"danger",title:"Error al eliminar",message:`Error al eliminar el lote: ${ee.message}`,confirmText:"Entendido"})}},le=F=>{k(F),M([]),D(!0)},ne=async()=>{if(C.length===0){await e({type:"info",title:"Ningún animal seleccionado",message:"Por favor selecciona al menos un animal para asignar al lote.",confirmText:"Entendido"});return}try{const F=await m(C,T.id);F.success?(M([]),await e({type:"success",title:"Animales asignados",message:`${C.length} animales asignados al lote exitosamente.`,confirmText:"Continuar"})):await e({type:"danger",title:"Error en la asignación",message:`Error al asignar animales: ${F.error}`,confirmText:"Entendido"})}catch(F){await e({type:"danger",title:"Error en la asignación",message:`Error al asignar animales: ${F.message}`,confirmText:"Entendido"})}},Z=async()=>{if(C.length===0){await e({type:"info",title:"Ningún animal seleccionado",message:"Por favor selecciona al menos un animal para remover del lote.",confirmText:"Entendido"});return}try{const F=await x(C);F.success?(M([]),await e({type:"success",title:"Animales removidos",message:`${C.length} animales removidos del lote exitosamente.`,confirmText:"Continuar"})):await e({type:"danger",title:"Error en la remoción",message:`Error al remover animales: ${F.error}`,confirmText:"Entendido"})}catch(F){await e({type:"danger",title:"Error en la remoción",message:`Error al remover animales: ${F.message}`,confirmText:"Entendido"})}};return h?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-rural-primary"})}):v?a.jsx("div",{className:"text-center py-8",children:a.jsxs("p",{className:"text-red-600",children:["Error: ",v]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx(DP,{title:"Gestión de Lotes",subtitle:"Organiza y gestiona los lotes de animales"}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-rural-alternate/20 p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-rural-text/50"}),a.jsx("input",{type:"text",placeholder:"Buscar lotes...",value:g,onChange:F=>y(F.target.value),className:"w-full pl-10 pr-4 py-2 border border-rural-alternate/30 rounded-lg focus:ring-2 focus:ring-rural-primary/20 focus:border-rural-primary"})]}),a.jsxs("button",{onClick:()=>j(!0),className:"flex items-center space-x-2 bg-rural-primary text-white px-4 py-2 rounded-lg hover:bg-rural-primary/90 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),a.jsx("span",{children:"Nuevo Lote"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(F=>{const U=z(F.id);return a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-rural-alternate/20 p-6 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:F.color}}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:F.nombre}),F.numero&&a.jsxs("span",{className:"text-sm text-rural-text/60",children:["#",F.numero]})]}),a.jsxs("p",{className:"text-sm text-rural-text/70",children:[U.length," animales"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>R(I===F.id?null:F.id),className:"p-2 text-rural-text/60 hover:text-rural-text hover:bg-rural-background rounded-lg transition-colors",children:a.jsx(Lm,{className:"h-4 w-4"})}),I===F.id&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>R(null)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-rural-alternate/20 py-2 z-20",children:[a.jsxs("button",{onClick:()=>{k(F),A(!0),R(null)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-rural-text hover:bg-rural-background transition-colors",children:[a.jsx(Dn,{className:"h-4 w-4"}),a.jsx("span",{children:"Editar"})]}),a.jsxs("button",{onClick:()=>{le(F),R(null)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-rural-text hover:bg-rural-background transition-colors",children:[a.jsx(xr,{className:"h-4 w-4"}),a.jsx("span",{children:"Gestionar animales"})]}),a.jsxs("button",{onClick:()=>{ce(F),R(null)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-red-600 hover:bg-red-50 transition-colors",children:[a.jsx(lr,{className:"h-4 w-4"}),a.jsx("span",{children:"Eliminar"})]})]})]})]})]}),F.observaciones&&a.jsx("p",{className:"text-sm text-rural-text/60 mb-4",children:F.observaciones}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-rural-text/60",children:[a.jsx(Fv,{className:"h-4 w-4"}),a.jsxs("span",{children:[U.length," animales"]})]}),a.jsx("button",{onClick:()=>le(F),className:"text-sm text-rural-primary hover:text-rural-primary/80 font-medium",children:"Gestionar"})]})]},F.id)})}),O.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Fv,{className:"h-12 w-12 mx-auto text-rural-text/30 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-rural-text mb-2",children:"No hay lotes"}),a.jsx("p",{className:"text-rural-text/60 mb-4",children:g?"No se encontraron lotes con ese criterio de búsqueda":"Comienza creando tu primer lote"}),a.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center space-x-2 bg-rural-primary text-white px-4 py-2 rounded-lg hover:bg-rural-primary/90 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),a.jsx("span",{children:"Crear Lote"})]})]}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-rural-alternate/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Crear Nuevo Lote"}),a.jsx("button",{onClick:()=>j(!1),className:"text-rural-text/60 hover:text-rural-text transition-colors",children:a.jsx(Qe,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",value:L.nombre,onChange:F=>P({...L,nombre:F.target.value}),className:"w-full border border-rural-alternate/30 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rural-primary/20 focus:border-rural-primary",placeholder:"Ej: Lote Norte"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-1",children:"Número"}),a.jsx("input",{type:"text",value:L.numero,onChange:F=>P({...L,numero:F.target.value}),className:"w-full border border-rural-alternate/30 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rural-primary/20 focus:border-rural-primary",placeholder:"Ej: 001"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-1",children:"Color"}),a.jsx("input",{type:"color",value:L.color,onChange:F=>P({...L,color:F.target.value}),className:"w-full border border-rural-alternate/30 rounded-lg px-3 py-2 h-10"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-1",children:"Observaciones"}),a.jsx("textarea",{value:L.observaciones,onChange:F=>P({...L,observaciones:F.target.value}),className:"w-full border border-rural-alternate/30 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rural-primary/20 focus:border-rural-primary",rows:"3",placeholder:"Observaciones adicionales..."})]})]}),a.jsxs("div",{className:"flex space-x-3 p-6 border-t border-rural-alternate/20",children:[a.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 text-rural-text/70 border border-rural-alternate/30 rounded-lg hover:bg-rural-background transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:G,className:"flex-1 px-4 py-2 bg-rural-primary text-white rounded-lg hover:bg-rural-primary/90 transition-colors",children:"Crear Lote"})]})]})}),w&&T&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-rural-alternate/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Editar Lote"}),a.jsx("button",{onClick:()=>A(!1),className:"text-rural-text/60 hover:text-rural-text transition-colors",children:a.jsx(Qe,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",value:T.nombre,onChange:F=>k({...T,nombre:F.target.value}),className:"w-full border border-rural-alternate/30 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rural-primary/20 focus:border-rural-primary"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-1",children:"Número"}),a.jsx("input",{type:"text",value:T.numero||"",onChange:F=>k({...T,numero:F.target.value}),className:"w-full border border-rural-alternate/30 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rural-primary/20 focus:border-rural-primary"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-1",children:"Color"}),a.jsx("input",{type:"color",value:T.color,onChange:F=>k({...T,color:F.target.value}),className:"w-full border border-rural-alternate/30 rounded-lg px-3 py-2 h-10"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-1",children:"Observaciones"}),a.jsx("textarea",{value:T.observaciones||"",onChange:F=>k({...T,observaciones:F.target.value}),className:"w-full border border-rural-alternate/30 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rural-primary/20 focus:border-rural-primary",rows:"3"})]})]}),a.jsxs("div",{className:"flex space-x-3 p-6 border-t border-rural-alternate/20",children:[a.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-2 text-rural-text/70 border border-rural-alternate/30 rounded-lg hover:bg-rural-background transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:K,className:"flex-1 px-4 py-2 bg-rural-primary text-white rounded-lg hover:bg-rural-primary/90 transition-colors",children:"Guardar Cambios"})]})]})}),S&&T&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-rural-alternate/20",children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text",children:["Gestionar Animales - ",T.nombre]}),a.jsx("button",{onClick:()=>D(!1),className:"text-rural-text/60 hover:text-rural-text transition-colors",children:a.jsx(Qe,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-rural-text mb-3 flex items-center",children:[a.jsx($d,{className:"h-4 w-4 mr-2"}),"Animales Disponibles"]}),a.jsxs("div",{className:"border border-rural-alternate/20 rounded-lg max-h-60 overflow-y-auto",children:[V().map(F=>a.jsxs("label",{className:"flex items-center p-3 hover:bg-rural-background cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:C.includes(F.id),onChange:U=>{U.target.checked?M([...C,F.id]):M(C.filter(Y=>Y!==F.id))},className:"rounded border-rural-alternate/30 text-rural-primary focus:ring-rural-primary"}),a.jsxs("span",{className:"ml-3 text-sm",children:[F.numero_caravana||"Sin caravana"," - ",F.categoria]})]},F.id)),V().length===0&&a.jsx("p",{className:"p-4 text-rural-text/60 text-center",children:"No hay animales disponibles"})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-rural-text mb-3 flex items-center",children:[a.jsx(xr,{className:"h-4 w-4 mr-2"}),"Animales en el Lote"]}),a.jsxs("div",{className:"border border-rural-alternate/20 rounded-lg max-h-60 overflow-y-auto",children:[z(T.id).map(F=>a.jsxs("label",{className:"flex items-center p-3 hover:bg-rural-background cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:C.includes(F.id),onChange:U=>{U.target.checked?M([...C,F.id]):M(C.filter(Y=>Y!==F.id))},className:"rounded border-rural-alternate/30 text-rural-primary focus:ring-rural-primary"}),a.jsxs("span",{className:"ml-3 text-sm",children:[F.numero_caravana||"Sin caravana"," - ",F.categoria]})]},F.id)),z(T.id).length===0&&a.jsx("p",{className:"p-4 text-rural-text/60 text-center",children:"No hay animales en este lote"})]})]})]}),a.jsxs("div",{className:"flex justify-center space-x-4 mt-6",children:[a.jsxs("button",{onClick:ne,disabled:C.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-rural-primary text-white rounded-lg hover:bg-rural-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx($d,{className:"h-4 w-4"}),a.jsx("span",{children:"Asignar al Lote"})]}),a.jsxs("button",{onClick:Z,disabled:C.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(K3,{className:"h-4 w-4"}),a.jsx("span",{children:"Quitar del Lote"})]})]})]})]})}),a.jsx(t,{})]})},kP=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),[s,l]=_.useState(null),c=async()=>{try{n(!0);const{data:x,error:h}=await se.from("compras").select(`
          *,
          proveedores (id, nombre, cuit),
          transportadores (id, nombre),
          usuarios (id, nombre)
        `).order("fecha",{ascending:!1});if(h)throw h;t(x||[])}catch(x){console.error("Error fetching compras:",x),l(x.message)}finally{n(!1)}},d=async x=>{try{const{data:{user:h}}=await se.auth.getUser(),{data:v,error:g}=await se.from("compras").insert([{...x,created_by:h?.id}]).select().single();if(g)throw g;return await c(),{data:v,error:null}}catch(h){return console.error("Error creating compra:",h),{data:null,error:h.message}}},f=async x=>{try{const{data:h,error:v}=await se.from("animales").select("*").eq("compra_id",x).order("numero_caravana");if(v)throw v;return{data:h||[],error:null}}catch(h){return console.error("Error fetching animales by compra:",h),{data:[],error:h.message}}},m=async x=>{try{const{error:h}=await se.from("compras").delete().eq("id",x);if(h)throw h;return await c(),{error:null}}catch(h){return console.error("Error deleting compra:",h),{error:h.message}}};return _.useEffect(()=>{c()},[]),{compras:e,loading:r,error:s,fetchCompras:c,createCompra:d,getAnimalesByCompra:f,deleteCompra:m}},Kb=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!1),s=async()=>{try{n(!0);const{data:c,error:d}=await se.from("proveedores").select("*").order("nombre");if(d)throw d;t(c||[])}catch(c){console.error("Error fetching proveedores:",c)}finally{n(!1)}},l=async c=>{try{const{data:{user:d}}=await se.auth.getUser(),{data:f,error:m}=await se.from("proveedores").insert([{...c,created_by:d?.id}]).select().single();if(m)throw m;return await s(),{data:f,error:null}}catch(d){return console.error("Error creating proveedor:",d),{data:null,error:d.message}}};return _.useEffect(()=>{s()},[]),{proveedores:e,loading:r,fetchProveedores:s,createProveedor:l}},PP=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!1),s=async()=>{try{n(!0);const{data:c,error:d}=await se.from("transportadores").select("*").order("nombre");if(d)throw d;t(c||[])}catch(c){console.error("Error fetching transportadores:",c)}finally{n(!1)}},l=async c=>{try{const{data:{user:d}}=await se.auth.getUser(),{data:f,error:m}=await se.from("transportadores").insert([{...c,created_by:d?.id}]).select().single();if(m)throw m;return await s(),{data:f,error:null}}catch(d){return console.error("Error creating transportador:",d),{data:null,error:d.message}}};return _.useEffect(()=>{s()},[]),{transportadores:e,loading:r,fetchTransportadores:s,createTransportador:l}},mu=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!1),[s,l]=_.useState(null);return{animales:e,loading:r,error:s,fetchAnimales:async(g={})=>{try{n(!0),l(null);let y=se.from("animales").select("*").order("caravana",{ascending:!0});g.estado&&(y=y.eq("estado",g.estado)),g.categoria&&(y=y.eq("categoria",g.categoria)),g.lote_id&&(y=y.eq("lote_id",g.lote_id));const{data:b,error:j}=await y;if(j)throw j;return t(b||[]),{data:b||[],error:null}}catch(y){return console.error("Error fetching animales:",y),l(y.message),{data:[],error:y.message}}finally{n(!1)}},createAnimales:async g=>{try{n(!0);const{data:{user:y}}=await se.auth.getUser(),b=g.map(A=>{const{id:S,...D}=A;return{...D,created_by:y?.id,estado:"en_campo",fecha_ingreso:new Date().toISOString().split("T")[0],estado_reproductivo:A.estado_reproductivo||"vacia",dias_lactancia:A.dias_lactancia||0,numero_lactancia:A.numero_lactancia||0,control_antibioticos:A.control_antibioticos||[],produccion_promedio_30d:0}}),{data:j,error:w}=await se.from("animales").insert(b).select();if(w)throw w;if(j&&j.length>0){const A=j.map(D=>({animal_id:D.id,fecha_pesada:D.fecha_ingreso,peso:D.peso_ingreso,observaciones:"Peso inicial de ingreso",created_by:y?.id})),{error:S}=await se.from("pesadas").insert(A);S&&console.error("Error creando pesadas iniciales:",S)}return{data:j,error:null}}catch(y){return console.error("Error creating animales:",y),{data:null,error:y.message}}finally{n(!1)}},validateCaravanas:async g=>{try{const y=[];for(const b of g)if(b.numero_caravana&&b.color_caravana){const{data:j,error:w}=await se.from("animales").select("id, numero_caravana, color_caravana").eq("numero_caravana",b.numero_caravana).eq("color_caravana",b.color_caravana).eq("estado","en_campo");if(w)throw w;j&&j.length>0&&y.push({numero_caravana:b.numero_caravana,color_caravana:b.color_caravana})}return{duplicadas:y,error:null}}catch(y){return console.error("Error validating caravanas:",y),{duplicadas:[],error:y.message}}},getAnimalesByCompra:async g=>{try{const{data:y,error:b}=await se.from("animales").select(`
          *,
          proveedores (nombre),
          transportadores (nombre)
        `).eq("compra_id",g).order("numero_caravana");if(b)throw b;return{data:y||[],error:null}}catch(y){return console.error("Error fetching animales by compra:",y),{data:[],error:y.message}}},getAnimalesLecheros:async g=>{try{n(!0);let y=se.from("animales").select(`
          *,
          proveedores (nombre),
          transportadores (nombre)
        `).eq("estado","en_campo");g?.estado_reproductivo&&(y=y.eq("estado_reproductivo",g.estado_reproductivo)),g?.tiene_antibioticos!==void 0&&(g.tiene_antibioticos?y=y.not("control_antibioticos","eq","[]"):y=y.eq("control_antibioticos","[]")),g?.dias_lactancia_min!==void 0&&(y=y.gte("dias_lactancia",g.dias_lactancia_min)),g?.dias_lactancia_max!==void 0&&(y=y.lte("dias_lactancia",g.dias_lactancia_max)),g?.produccion_min!==void 0&&(y=y.gte("produccion_promedio_30d",g.produccion_min)),g?.produccion_max!==void 0&&(y=y.lte("produccion_promedio_30d",g.produccion_max));const{data:b,error:j}=await y.order("numero_caravana");if(j)throw j;return t(b||[]),{data:b||[],error:null}}catch(y){return console.error("Error fetching animales lecheros:",y),l(y.message),{data:[],error:y.message}}finally{n(!1)}},updateEstadoReproductivo:async(g,y,b,j)=>{try{n(!0);const w={estado_reproductivo:y,updated_at:new Date().toISOString()};b&&(w.fecha_ultimo_parto=b),j&&(w.fecha_ultimo_servicio=j);const{data:A,error:S}=await se.from("animales").update(w).eq("id",g).select().single();if(S)throw S;return{data:A,error:null}}catch(w){return console.error("Error updating estado reproductivo:",w),{data:null,error:w.message}}finally{n(!1)}},addControlAntibiotico:async(g,y)=>{try{n(!0);const{data:b,error:j}=await se.from("animales").select("control_antibioticos").eq("id",g).single();if(j)throw j;const A=[...b.control_antibioticos||[],y],{data:S,error:D}=await se.from("animales").update({control_antibioticos:A,updated_at:new Date().toISOString()}).eq("id",g).select().single();if(D)throw D;return{data:S,error:null}}catch(b){return console.error("Error adding control antibiotico:",b),{data:null,error:b.message}}finally{n(!1)}}}},ms=()=>{const[e,t]=_.useState([]),r=f=>{const m=Date.now()+Math.random(),x={id:m,...f,duration:f.duration||5e3};t(h=>[...h,x]),setTimeout(()=>{n(m)},x.duration)},n=f=>{t(m=>m.filter(x=>x.id!==f))};return{showSuccess:(f,m="Éxito")=>{r({type:"success",title:m,message:f,icon:en})},showError:(f,m="Error")=>{r({type:"error",title:m,message:f,icon:ia,duration:8e3})},showInfo:(f,m="Información")=>{r({type:"info",title:m,message:f,icon:G3})},NotificationContainer:()=>a.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-2",children:a.jsx(Sa,{children:e.map(f=>a.jsx(MP,{notification:f,onRemove:()=>n(f.id)},f.id))})})}},MP=({notification:e,onRemove:t})=>{const{type:r,title:n,message:s,icon:l}=e,d=(()=>{switch(r){case"success":return{bg:"bg-green-50 border-green-200",text:"text-green-800",iconColor:"text-green-600",titleColor:"text-green-900"};case"error":return{bg:"bg-red-50 border-red-200",text:"text-red-800",iconColor:"text-red-600",titleColor:"text-red-900"};case"info":return{bg:"bg-blue-50 border-blue-200",text:"text-blue-800",iconColor:"text-blue-600",titleColor:"text-blue-900"};default:return{bg:"bg-gray-50 border-gray-200",text:"text-gray-800",iconColor:"text-gray-600",titleColor:"text-gray-900"}}})();return a.jsx(de.div,{initial:{opacity:0,x:300,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.9},transition:{duration:.3,ease:"easeOut"},className:`
        ${d.bg} border rounded-lg shadow-lg p-4 min-w-[320px] max-w-[400px]
        backdrop-blur-sm
      `,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(l,{className:`w-5 h-5 ${d.iconColor} flex-shrink-0 mt-0.5`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:`font-semibold ${d.titleColor} text-sm`,children:n}),a.jsx("p",{className:`${d.text} text-sm mt-1 leading-relaxed`,children:s})]}),a.jsx("button",{onClick:t,className:`${d.text} hover:opacity-70 transition-opacity flex-shrink-0`,children:a.jsx(Qe,{className:"w-4 h-4"})})]})})};function FP({datos:e,onChange:t,errores:r}){const{proveedores:n,createProveedor:s}=Kb(),{transportadores:l,createTransportador:c}=PP(),[d,f]=_.useState(!1),[m,x]=_.useState(!1),[h,v]=_.useState(""),[g,y]=_.useState(""),[b,j]=_.useState(null),[w,A]=_.useState(null),[S,D]=_.useState({nombre:"",contacto:"",cuit:"",establecimiento:"",renspa:"",observaciones:""}),[T,k]=_.useState({nombre:"",contacto:"",precio_km:"",observaciones:""}),C=n.filter(P=>P.nombre.toLowerCase().includes(h.toLowerCase())||P.cuit?.includes(h)),M=l.filter(P=>P.nombre.toLowerCase().includes(g.toLowerCase()));_.useEffect(()=>{if(e.proveedor_id){const P=n.find(O=>O.id===e.proveedor_id);j(P)}else j(null)},[e.proveedor_id,n]),_.useEffect(()=>{if(e.transportador_id){const P=l.find(O=>O.id===e.transportador_id);A(P)}else A(null)},[e.transportador_id,l]);const I=(P,O)=>{t({[P]:O})},R=async()=>{if(!S.nombre)return;const{data:P,error:O}=await s(S);!O&&P&&(t({proveedor_id:P.id}),f(!1),D({nombre:"",contacto:"",cuit:"",establecimiento:"",renspa:"",observaciones:""}))},L=async()=>{if(!T.nombre)return;const{data:P,error:O}=await c(T);!O&&P&&(t({transportador_id:P.id}),x(!1),k({nombre:"",contacto:"",precio_km:"",observaciones:""}))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#F9E9D0] rounded-lg p-4 border border-[#805A36]/20",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-2 flex items-center gap-2",children:[a.jsx(et,{className:"w-5 h-5"}),"Información General de la Compra"]}),a.jsx("p",{className:"text-[#805A36] text-sm",children:"Complete los datos básicos de la compra. El proveedor es obligatorio y puede crear uno nuevo si no existe."})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:[a.jsx(We,{className:"w-4 h-4 inline mr-1"}),"Fecha de Compra *"]}),a.jsx("input",{type:"date",value:e.fecha,onChange:P=>I("fecha",P.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D] ${r.fecha?"border-red-500":"border-gray-300"}`}),r.fecha&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.fecha})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:[a.jsx(ua,{className:"w-4 h-4 inline mr-1"}),"Lugar de Origen *"]}),a.jsx("input",{type:"text",value:e.lugar_origen,onChange:P=>I("lugar_origen",P.target.value),placeholder:"Ej: Estancia Los Alamos, Resistencia",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D] ${r.lugar_origen?"border-red-500":"border-gray-300"}`}),r.lugar_origen&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.lugar_origen})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:[a.jsx(Vt,{className:"w-4 h-4 inline mr-1"}),"Proveedor *"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",value:h,onChange:P=>v(P.target.value),placeholder:b?b.nombre:"Buscar proveedor...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),h&&a.jsx("div",{className:"absolute z-10 left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:C.length>0?C.map(P=>a.jsxs("button",{onClick:()=>{t({proveedor_id:P.id}),v("")},className:"w-full px-4 py-2 text-left hover:bg-gray-50 border-b last:border-b-0",children:[a.jsx("div",{className:"font-medium text-sm sm:text-base",children:P.nombre}),P.cuit&&a.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:["CUIT: ",P.cuit]})]},P.id)):a.jsx("div",{className:"px-4 py-2 text-gray-500 text-sm",children:"No se encontraron proveedores"})})]}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60] transition-colors sm:flex-shrink-0",children:[a.jsx(gt,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Nuevo"}),a.jsx("span",{className:"sm:hidden",children:"Agregar"})]})]}),e.proveedor_id&&b&&a.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700",children:["✓ Proveedor seleccionado: ",a.jsx("strong",{children:b.nombre}),b.cuit&&a.jsxs("span",{className:"text-gray-600",children:[" (CUIT: ",b.cuit,")"]})]}),r.proveedor_id&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.proveedor_id})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:[a.jsx(Cn,{className:"w-4 h-4 inline mr-1"}),"Transportador (Opcional)"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",value:g,onChange:P=>y(P.target.value),placeholder:w?w.nombre:"Buscar transportador...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),g&&a.jsx("div",{className:"absolute z-10 left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:M.length>0?M.map(P=>a.jsxs("button",{onClick:()=>{t({transportador_id:P.id}),y("")},className:"w-full px-4 py-2 text-left hover:bg-gray-50 border-b last:border-b-0",children:[a.jsx("div",{className:"font-medium text-sm sm:text-base",children:P.nombre}),P.precio_km&&a.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:["$",P.precio_km,"/km"]})]},P.id)):a.jsx("div",{className:"px-4 py-2 text-gray-500 text-sm",children:"No se encontraron transportadores"})})]}),a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60] transition-colors sm:flex-shrink-0",children:[a.jsx(gt,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Nuevo"}),a.jsx("span",{className:"sm:hidden",children:"Agregar"})]})]}),e.transportador_id&&w&&a.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700",children:["✓ Transportador seleccionado: ",a.jsx("strong",{children:w.nombre}),w.precio_km&&a.jsxs("span",{className:"text-gray-600",children:[" ($",w.precio_km,"/km)"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:[a.jsx(fu,{className:"w-4 h-4 inline mr-1"}),"Documento de Compra"]}),a.jsx("input",{type:"file",onChange:P=>I("documento",P.target.files[0]),accept:".pdf,.jpg,.jpeg,.png",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Formatos soportados: PDF, JPG, PNG"})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:"Observaciones"}),a.jsx("textarea",{value:e.observaciones,onChange:P=>I("observaciones",P.target.value),placeholder:"Información adicional sobre la compra...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Nuevo Proveedor"}),a.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700",children:a.jsx(Qe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",value:S.nombre,onChange:P=>D(O=>({...O,nombre:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Contacto"}),a.jsx("input",{type:"text",value:S.contacto,onChange:P=>D(O=>({...O,contacto:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"CUIT"}),a.jsx("input",{type:"text",value:S.cuit,onChange:P=>D(O=>({...O,cuit:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Establecimiento"}),a.jsx("input",{type:"text",value:S.establecimiento,onChange:P=>D(O=>({...O,establecimiento:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"RENSPA"}),a.jsx("input",{type:"text",value:S.renspa||"",onChange:P=>D(O=>({...O,renspa:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),a.jsxs("div",{className:"flex gap-2 mt-6",children:[a.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:R,disabled:!S.nombre,className:"flex-1 px-4 py-2 bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60] disabled:opacity-50",children:"Crear"})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Nuevo Transportador"}),a.jsx("button",{onClick:()=>x(!1),className:"text-gray-500 hover:text-gray-700",children:a.jsx(Qe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",value:T.nombre,onChange:P=>k(O=>({...O,nombre:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Contacto"}),a.jsx("input",{type:"text",value:T.contacto,onChange:P=>k(O=>({...O,contacto:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Precio por KM"}),a.jsx("input",{type:"number",value:T.precio_km,onChange:P=>k(O=>({...O,precio_km:P.target.value})),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),a.jsxs("div",{className:"flex gap-2 mt-6",children:[a.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:L,disabled:!T.nombre,className:"flex-1 px-4 py-2 bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60] disabled:opacity-50",children:"Crear"})]})]})})]})}const e4=["Ternero","Novillo","Vaca","Toro","Vaquilla"],am=[{value:"critico",label:"Crítico",color:"text-red-600"},{value:"malo",label:"Malo",color:"text-orange-600"},{value:"bueno",label:"Bueno",color:"text-yellow-600"},{value:"excelente",label:"Excelente",color:"text-green-600"}],t4=["Amarillo","Verde","Azul","Rojo","Blanco","Negro","Naranja","Rosa"];function LP({datos:e,onChange:t,errores:r}){const{validateCaravanas:n}=mu(),[s,l]=_.useState(e.tipo_carga||"individual"),[c,d]=_.useState(e.animales||[]),[f,m]=_.useState(e.peso_promedio||""),[x,h]=_.useState(null),[v,g]=_.useState([]),y=R=>{if(!R)return"";const P=String(R).replace(/[^\d.]/g,"").split(".");return P[0]=P[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),P.join(",")},b=(R,L)=>{const P=R.target.value.replace(/[^\d,]/g,"").replace(",",".");x?h(O=>({...O,[L]:P})):S(O=>({...O,[L]:P}))},j=(R,L)=>{const P=R.target.value.replace(/[^\d,]/g,"").replace(",",".");S(O=>({...O,[L]:P}))},w=R=>{const L=R.target.value.replace(/[^\d,]/g,"").replace(",",".");m(L)},[A,S]=_.useState({numero_caravana:"",color_caravana:"",categoria:"",peso_ingreso:"",estado_fisico:"bueno",precio_compra:"",observaciones:""});_.useEffect(()=>{t({tipo_carga:s,flag_peso_promedio:s==="lote",peso_promedio:s==="lote"?f:"",animales:c})},[s,c,f]);const D=()=>{if(s==="individual"&&(!A.categoria||!A.estado_fisico))return;const R={...A,id:Date.now()+Math.random(),peso_ingreso:s==="lote"?parseFloat(f)||0:parseFloat(A.peso_ingreso)||0,precio_compra:parseFloat(A.precio_compra)||0,compra_id:null,proveedor_id:e.proveedor_id,transportador_id:e.transportador_id};d(L=>[...L,R]),S({numero_caravana:"",color_caravana:"",categoria:"",peso_ingreso:"",estado_fisico:"bueno",precio_compra:"",observaciones:""})},T=R=>{d(L=>L.filter(P=>P.id!==R))},k=R=>{h(R)},C=()=>{d(R=>R.map(L=>L.id===x.id?x:L)),h(null)},M=async()=>{const R=c.filter(P=>P.numero_caravana&&P.color_caravana);if(R.length===0)return;const{duplicadas:L}=await n(R);g(L)};_.useEffect(()=>{c.length>0&&M()},[c]);const I=()=>{f&&d(R=>R.map(L=>({...L,peso_ingreso:parseFloat(f)})))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#F9E9D0] rounded-lg p-4 border border-[#805A36]/20",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-2 flex items-center gap-2",children:[a.jsx(st,{className:"w-5 h-5"}),"Carga de Animales"]}),a.jsx("p",{className:"text-[#805A36] text-sm",children:"Agregue los animales de esta compra. Puede cargarlos individualmente o usar peso promedio para lotes."})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-3",children:"Método de Carga"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsx("button",{onClick:()=>l("individual"),className:`p-4 rounded-lg border-2 transition-all ${s==="individual"?"border-[#67806D] bg-[#67806D]/5":"border-gray-200 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Rm,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium text-[#3C454A]",children:"Individual"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Cargar cada animal con su peso específico"})]})]})}),a.jsx("button",{onClick:()=>l("lote"),className:`p-4 rounded-lg border-2 transition-all ${s==="lote"?"border-[#67806D] bg-[#67806D]/5":"border-gray-200 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Zr,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium text-[#3C454A]",children:"Lote con Peso Promedio"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Usar un peso promedio para todos los animales"})]})]})})]})]}),s==="lote"&&a.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Zr,{className:"w-5 h-5 text-yellow-600"}),a.jsx("h4",{className:"font-medium text-yellow-800",children:"Peso Promedio del Lote"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-yellow-800 mb-1",children:"Peso en KG"}),a.jsx("input",{type:"text",value:y(f),onChange:w,placeholder:"350",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 ${r.peso_promedio?"border-red-500":"border-yellow-300"}`}),r.peso_promedio&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.peso_promedio})]}),c.length>0&&a.jsx("button",{onClick:I,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Aplicar a Todos"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("h4",{className:"font-medium text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(gt,{className:"w-5 h-5"}),"Agregar Animal"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:[a.jsx(Vd,{className:"w-4 h-4 inline mr-1"}),"Caravana"]}),a.jsx("input",{type:"text",value:A.numero_caravana,onChange:R=>S(L=>({...L,numero_caravana:R.target.value})),placeholder:"123",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:[a.jsx(Gd,{className:"w-4 h-4 inline mr-1"}),"Color"]}),a.jsxs("select",{value:A.color_caravana,onChange:R=>S(L=>({...L,color_caravana:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:[a.jsx("option",{value:"",children:"Seleccionar"}),t4.map(R=>a.jsx("option",{value:R,children:R},R))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Categoría *"}),a.jsxs("select",{value:A.categoria,onChange:R=>S(L=>({...L,categoria:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:[a.jsx("option",{value:"",children:"Seleccionar"}),e4.map(R=>a.jsx("option",{value:R,children:R},R))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:[a.jsx(wr,{className:"w-4 h-4 inline mr-1"}),"Estado *"]}),a.jsx("select",{value:A.estado_fisico,onChange:R=>S(L=>({...L,estado_fisico:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:am.map(R=>a.jsx("option",{value:R.value,children:R.label},R.value))})]}),s==="individual"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:[a.jsx(Wn,{className:"w-4 h-4 inline mr-1"}),"Peso (KG)"]}),a.jsx("input",{type:"text",value:y(A.peso_ingreso),onChange:R=>j(R,"peso_ingreso"),placeholder:"350",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:[a.jsx(rr,{className:"w-4 h-4 inline mr-1"}),"Precio/KG"]}),a.jsx("input",{type:"text",value:y(A.precio_compra),onChange:R=>b(R,"precio_compra"),placeholder:"450",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Observaciones"}),a.jsx("textarea",{value:A.observaciones,onChange:R=>S(L=>({...L,observaciones:R.target.value})),placeholder:"Información adicional del animal...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("button",{onClick:D,disabled:!A.categoria||!A.estado_fisico,className:"mt-4 flex items-center gap-2 bg-[#67806D] text-white px-4 py-2 rounded-lg hover:bg-[#5a6b60] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(gt,{className:"w-4 h-4"}),"Agregar Animal"]})]}),c.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("h4",{className:"font-medium text-[#3C454A] flex items-center gap-2",children:[a.jsx(st,{className:"w-5 h-5"}),"Animales Agregados (",c.length,")"]})}),v.length>0&&a.jsxs("div",{className:"p-4 bg-red-50 border-b border-red-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-800 mb-2",children:[a.jsx(hr,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Caravanas Duplicadas Detectadas"})]}),a.jsxs("div",{className:"text-sm text-red-700",children:["Las siguientes caravanas ya existen en el stock:",a.jsx("ul",{className:"list-disc list-inside mt-1",children:v.map((R,L)=>a.jsxs("li",{children:["Caravana ",R.numero_caravana," ",R.color_caravana]},L))})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Caravana"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoría"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Peso (KG)"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Precio/KG"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map((R,L)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-[#3C454A]",children:R.numero_caravana||`Sin caravana #${L+1}`}),R.color_caravana&&a.jsx("div",{className:"text-sm text-gray-500",children:R.color_caravana})]})}),a.jsx("td",{className:"px-4 py-3 text-[#3C454A]",children:R.categoria}),a.jsxs("td",{className:"px-4 py-3 text-[#3C454A]",children:[R.peso_ingreso," kg"]}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`text-sm font-medium ${am.find(P=>P.value===R.estado_fisico)?.color||"text-gray-600"}`,children:am.find(P=>P.value===R.estado_fisico)?.label||R.estado_fisico})}),a.jsxs("td",{className:"px-4 py-3 text-[#3C454A]",children:["$",R.precio_compra]}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx("button",{onClick:()=>k(R),className:"p-1 text-[#67806D] hover:text-[#5a6b60] transition-colors",children:a.jsx(Rm,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>T(R.id),className:"p-1 text-red-600 hover:text-red-700 transition-colors",children:a.jsx(lr,{className:"w-4 h-4"})})]})})]},R.id))})]})})]}),r.animales&&a.jsx("p",{className:"text-red-500 text-sm",children:r.animales}),x&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4",children:"Editar Animal"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Caravana"}),a.jsx("input",{type:"text",value:x.numero_caravana,onChange:R=>h(L=>({...L,numero_caravana:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Color"}),a.jsxs("select",{value:x.color_caravana,onChange:R=>h(L=>({...L,color_caravana:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:[a.jsx("option",{value:"",children:"Seleccionar"}),t4.map(R=>a.jsx("option",{value:R,children:R},R))]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Categoría"}),a.jsxs("select",{value:x.categoria,onChange:R=>h(L=>({...L,categoria:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:[a.jsx("option",{value:"",children:"Seleccionar"}),e4.map(R=>a.jsx("option",{value:R,children:R},R))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Estado Físico"}),a.jsx("select",{value:x.estado_fisico,onChange:R=>h(L=>({...L,estado_fisico:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:am.map(R=>a.jsx("option",{value:R.value,children:R.label},R.value))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Peso (KG)"}),a.jsx("input",{type:"text",value:y(x.peso_ingreso),onChange:R=>{const L=R.target.value.replace(/[^\d,]/g,"").replace(",",".");h(P=>({...P,peso_ingreso:L}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Precio/KG"}),a.jsx("input",{type:"text",value:y(x.precio_compra),onChange:R=>{const L=R.target.value.replace(/[^\d,]/g,"").replace(",",".");h(P=>({...P,precio_compra:L}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Observaciones"}),a.jsx("textarea",{value:x.observaciones,onChange:R=>h(L=>({...L,observaciones:R.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),a.jsxs("div",{className:"flex gap-2 mt-6",children:[a.jsx("button",{onClick:()=>h(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60]",children:"Guardar"})]})]})})]})}const nm={critico:{label:"Crítico",color:"text-red-600 bg-red-50"},malo:{label:"Malo",color:"text-orange-600 bg-orange-50"},bueno:{label:"Bueno",color:"text-yellow-600 bg-yellow-50"},excelente:{label:"Excelente",color:"text-green-600 bg-green-50"}};function RP({datos:e,onConfirmar:t,loading:r}){const[n,s]=_.useState(null),[l,c]=_.useState(null);_.useEffect(()=>{(async()=>{if(e.proveedor_id){const{data:y}=await se.from("proveedores").select("*").eq("id",e.proveedor_id).single();s(y)}if(e.transportador_id){const{data:y}=await se.from("transportadores").select("*").eq("id",e.transportador_id).single();c(y)}})()},[e.proveedor_id,e.transportador_id]);const d=()=>{const g=e.animales.length,y=e.animales.reduce((j,w)=>j+(parseFloat(w.peso_ingreso)||0),0),b=e.animales.reduce((j,w)=>{const A=parseFloat(w.peso_ingreso)||0,S=parseFloat(w.precio_compra)||0;return j+A*S},0);return{totalAnimales:g,pesoTotal:y,valorTotal:b}},{totalAnimales:f,pesoTotal:m,valorTotal:x}=d(),h=g=>new Date(g).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric"}),v=g=>{const y=Number(g)||0;return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(y)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#F9E9D0] rounded-lg p-4 border border-[#805A36]/20",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-2 flex items-center gap-2",children:[a.jsx(cs,{className:"w-5 h-5"}),"Resumen de la Compra"]}),a.jsx("p",{className:"text-[#805A36] text-sm",children:"Revise todos los datos antes de confirmar. Una vez confirmada, la compra se guardará en el sistema."})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("h4",{className:"font-semibold text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(et,{className:"w-5 h-5"}),"Información General"]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(We,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Fecha de Compra"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:h(e.fecha)})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ua,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Lugar de Origen"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:e.lugar_origen})]})]}),e.transportador_id&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Cn,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Transportador"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:l?l.nombre:"Cargando..."})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Vt,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Proveedor"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:n?`${n.nombre} ${n.cuit?`(CUIT: ${n.cuit})`:""}`:"Cargando..."})]})]}),e.precio_total&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(rr,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Precio Total"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:v(parseFloat(e.precio_total))})]})]}),e.documento&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(et,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Documento"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:e.documento.name||"Archivo adjunto"})]})]})]})]}),e.observaciones&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Observaciones"}),a.jsx("div",{className:"text-[#3C454A] bg-gray-50 p-3 rounded-lg",children:e.observaciones})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("h4",{className:"font-semibold text-[#3C454A] flex items-center gap-2 mb-4",children:[a.jsx(st,{className:"w-5 h-5"}),"Animales (",f,")"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f}),a.jsx("div",{className:"text-sm text-blue-800",children:"Total Animales"})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[m.toFixed(1)," kg"]}),a.jsx("div",{className:"text-sm text-green-800",children:"Peso Total"})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:v(x)}),a.jsx("div",{className:"text-sm text-yellow-800",children:"Valor Estimado"})]})]}),a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zr,{className:"w-4 h-4 text-[#67806D]"}),a.jsxs("span",{className:"font-medium text-[#3C454A]",children:["Método de carga: ",e.flag_peso_promedio?"Lote con peso promedio":"Individual"]})]}),e.flag_peso_promedio&&a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Peso promedio aplicado: ",e.peso_promedio," kg"]})]}),a.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:[a.jsx("div",{className:"hidden md:block border border-gray-200 rounded-lg overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Caravana"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoría"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Peso"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Precio/kg"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subtotal"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:e.animales.map((g,y)=>{const b=parseFloat(g.peso_ingreso)||0,j=parseFloat(g.precio_compra)||0,w=b*j;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-[#3C454A] flex items-center gap-1",children:[a.jsx(Vd,{className:"w-3 h-3"}),g.numero_caravana||`Sin caravana #${y+1}`]}),g.color_caravana&&a.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[a.jsx(Gd,{className:"w-3 h-3"}),g.color_caravana]})]})}),a.jsx("td",{className:"px-4 py-3 text-[#3C454A]",children:g.categoria}),a.jsxs("td",{className:"px-4 py-3 text-[#3C454A]",children:[b," kg"]}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${nm[g.estado_fisico]?.color||"text-gray-600 bg-gray-50"}`,children:nm[g.estado_fisico]?.label||g.estado_fisico})}),a.jsx("td",{className:"px-4 py-3 text-[#3C454A]",children:v(j)}),a.jsx("td",{className:"px-4 py-3 font-medium text-[#3C454A]",children:v(w)})]},g.id)})})]})})}),a.jsx("div",{className:"md:hidden space-y-3",children:e.animales.map((g,y)=>{const b=parseFloat(g.peso_ingreso)||0,j=parseFloat(g.precio_compra)||0,w=b*j;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-[#3C454A] flex items-center gap-1",children:[a.jsx(Vd,{className:"w-4 h-4"}),g.numero_caravana||`Sin caravana #${y+1}`]}),g.color_caravana&&a.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1 mt-1",children:[a.jsx(Gd,{className:"w-3 h-3"}),g.color_caravana]})]}),a.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${nm[g.estado_fisico]?.color||"text-gray-600 bg-gray-50"}`,children:nm[g.estado_fisico]?.label||g.estado_fisico})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Categoría:"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:g.categoria})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Peso:"}),a.jsxs("div",{className:"font-medium text-[#3C454A] flex items-center gap-1",children:[a.jsx(Zr,{className:"w-3 h-3"}),b," kg"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Precio/kg:"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:v(j)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Subtotal:"}),a.jsxs("div",{className:"font-medium text-[#67806D] flex items-center gap-1",children:[a.jsx(rr,{className:"w-3 h-3"}),v(w)]})]})]})]},g.id)})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h4",{className:"font-semibold text-[#3C454A] mb-4",children:"Resumen por Categoría"}),a.jsx("div",{className:"space-y-3",children:Object.entries(e.animales.reduce((g,y)=>{const b=y.categoria;return g[b]||(g[b]={cantidad:0,peso:0}),g[b].cantidad+=1,g[b].peso+=parseFloat(y.peso_ingreso)||0,g},{})).map(([g,y])=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-[#3C454A]",children:g}),a.jsxs("div",{className:"text-sm text-gray-600",children:[y.cantidad," ",y.cantidad===1?"animal":"animales"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-medium text-[#3C454A]",children:[y.peso.toFixed(1)," kg"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Promedio: ",(y.peso/y.cantidad).toFixed(1)," kg"]})]})]},g))})]})]})}const hl=[{id:1,titulo:"Datos Generales",icono:et},{id:2,titulo:"Carga de Animales",icono:st},{id:3,titulo:"Resumen y Confirmación",icono:cs}];function IP({onClose:e,onComplete:t}){const[r,n]=_.useState(1),[s,l]=_.useState({fecha:new Date().toISOString().split("T")[0],proveedor_id:"",lugar_origen:"",transportador_id:"",precio_total:"",documento:"",observaciones:"",tipo_carga:"individual",flag_peso_promedio:!1,peso_promedio:"",animales:[]}),[c,d]=_.useState({}),[f,m]=_.useState(!1),x=j=>{l(w=>({...w,...j})),d({})},h=j=>{const w={};return j===1&&(s.fecha||(w.fecha="La fecha es obligatoria"),s.proveedor_id||(w.proveedor_id="El proveedor es obligatorio"),s.lugar_origen||(w.lugar_origen="El lugar de origen es obligatorio")),j===2&&(s.animales.length===0&&(w.animales="Debe cargar al menos un animal"),s.flag_peso_promedio&&!s.peso_promedio&&(w.peso_promedio="Debe ingresar el peso promedio")),d(w),Object.keys(w).length===0},v=()=>{h(r)&&n(j=>Math.min(j+1,hl.length))},g=()=>{n(j=>Math.max(j-1,1))},y=async()=>{if(h(r)){m(!0);try{await t(s)}catch(j){console.error("Error al completar compra:",j)}finally{m(!1)}}},b=()=>{switch(r){case 1:return a.jsx(FP,{datos:s,onChange:x,errores:c});case 2:return a.jsx(LP,{datos:s,onChange:x,errores:c});case 3:return a.jsx(RP,{datos:s,onConfirmar:y,loading:f});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto",children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl w-full max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-4xl max-h-[98vh] sm:max-h-[95vh] flex flex-col my-2 sm:my-8",children:[a.jsxs("div",{className:"bg-[#3C454A] text-white p-4 sm:p-6 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-semibold flex items-center gap-2",children:[a.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Nueva Compra"}),a.jsx("span",{className:"sm:hidden",children:"Compra"})]}),a.jsx("button",{onClick:e,className:"text-white hover:text-gray-300 transition-colors text-lg sm:text-base",children:"✕"})]}),a.jsxs("div",{className:"mt-4 sm:mt-6",children:[a.jsx("div",{className:"flex sm:hidden items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-xs text-gray-300 mb-1",children:["Paso ",r," de ",hl.length]}),a.jsx("div",{className:"text-sm font-medium text-white",children:hl.find(j=>j.id===r)?.titulo}),a.jsx("div",{className:"flex justify-center mt-2 space-x-1",children:hl.map(j=>a.jsx("div",{className:`w-2 h-2 rounded-full ${r>=j.id?"bg-[#67806D]":"bg-gray-400"}`},j.id))})]})}),a.jsx("div",{className:"hidden sm:flex items-center justify-center space-x-2 lg:space-x-4",children:hl.map((j,w)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`
                    flex items-center justify-center w-8 h-8 lg:w-10 lg:h-10 rounded-full border-2 transition-all
                    ${r>=j.id?"bg-[#67806D] border-[#67806D] text-white":"border-gray-400 text-gray-400"}
                  `,children:r>j.id?a.jsx(cs,{className:"w-3 h-3 lg:w-5 lg:h-5"}):a.jsx(j.icono,{className:"w-3 h-3 lg:w-5 lg:h-5"})}),a.jsxs("div",{className:"ml-2 hidden md:block",children:[a.jsxs("div",{className:`text-xs lg:text-sm font-medium ${r>=j.id?"text-white":"text-gray-400"}`,children:["Paso ",j.id]}),a.jsx("div",{className:`text-xs ${r>=j.id?"text-gray-200":"text-gray-500"}`,children:j.titulo})]}),w<hl.length-1&&a.jsx(Xo,{className:"w-3 h-3 lg:w-4 lg:h-4 mx-2 lg:mx-4 text-gray-400"})]},j.id))})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 min-h-0",children:a.jsx(Sa,{mode:"wait",children:a.jsx(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:b()},r)})}),a.jsxs("div",{className:"bg-gray-50 px-4 sm:px-6 py-3 sm:py-4 flex flex-col sm:flex-row justify-between gap-3 sm:gap-0 flex-shrink-0",children:[a.jsxs("button",{onClick:g,disabled:r===1,className:`
              flex items-center justify-center sm:justify-start gap-2 px-4 py-2 rounded-lg font-medium transition-all
              ${r===1?"text-gray-400 cursor-not-allowed":"text-[#3C454A] hover:bg-gray-200"}
            `,children:[a.jsx(Zo,{className:"w-4 h-4"}),"Anterior"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors text-center",children:"Cancelar"}),r<hl.length?a.jsxs("button",{onClick:v,className:"flex items-center justify-center gap-2 bg-[#67806D] text-white px-6 py-2 rounded-lg hover:bg-[#5a6b60] transition-all",children:["Siguiente",a.jsx(Xo,{className:"w-4 h-4"})]}):a.jsx("button",{onClick:y,disabled:f,className:"flex items-center justify-center gap-2 bg-[#67806D] text-white px-6 py-2 rounded-lg hover:bg-[#5a6b60] transition-all disabled:opacity-50",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"hidden sm:inline",children:"Guardando..."}),a.jsx("span",{className:"sm:hidden",children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(cs,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Completar Compra"}),a.jsx("span",{className:"sm:hidden",children:"Completar"})]})})]})]})]})})}function BP({compras:e,onVerDetalle:t,onEditar:r,onEliminar:n,loading:s}){const[l,c]=_.useState({busqueda:"",fechaDesde:"",fechaHasta:"",proveedor:""}),[d,f]=_.useState(!1),m=e.filter(g=>{const y=!l.busqueda||g.lugar_origen.toLowerCase().includes(l.busqueda.toLowerCase())||g.proveedores?.nombre.toLowerCase().includes(l.busqueda.toLowerCase()),b=!l.fechaDesde||new Date(g.fecha)>=new Date(l.fechaDesde),j=!l.fechaHasta||new Date(g.fecha)<=new Date(l.fechaHasta),w=!l.proveedor||g.proveedores?.nombre.toLowerCase().includes(l.proveedor.toLowerCase());return y&&b&&j&&w}),x=g=>new Date(g).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric"}),h=g=>g?new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(g):"-",v=()=>{c({busqueda:"",fechaDesde:"",fechaHasta:"",proveedor:""})};return s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#67806D] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Cargando compras..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-medium text-[#3C454A] flex items-center gap-2",children:[a.jsx(Jr,{className:"w-5 h-5"}),"Filtros"]}),a.jsxs("button",{onClick:()=>f(!d),className:"text-[#67806D] hover:text-[#5a6b60] text-sm font-medium",children:[d?"Ocultar":"Mostrar"," filtros"]})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",value:l.busqueda,onChange:g=>c(y=>({...y,busqueda:g.target.value})),placeholder:"Buscar por lugar de origen o proveedor...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})}),d&&a.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Fecha desde"}),a.jsx("input",{type:"date",value:l.fechaDesde,onChange:g=>c(y=>({...y,fechaDesde:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Fecha hasta"}),a.jsx("input",{type:"date",value:l.fechaHasta,onChange:g=>c(y=>({...y,fechaHasta:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Proveedor"}),a.jsx("input",{type:"text",value:l.proveedor,onChange:g=>c(y=>({...y,proveedor:g.target.value})),placeholder:"Filtrar por proveedor...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),(l.busqueda||l.fechaDesde||l.fechaHasta||l.proveedor)&&a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",m.length," de ",e.length," compras"]}),a.jsx("button",{onClick:v,className:"text-sm text-[#67806D] hover:text-[#5a6b60] font-medium",children:"Limpiar filtros"})]})]}),m.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[a.jsx(st,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay compras registradas"}),a.jsx("p",{className:"text-gray-600",children:e.length===0?"Aún no has registrado ninguna compra.":"No hay compras que coincidan con los filtros aplicados."})]}):a.jsx("div",{className:"grid gap-4",children:m.map((g,y)=>a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},className:"bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-1",children:["Compra del ",x(g.fecha)]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(We,{className:"w-4 h-4"}),x(g.fecha)]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Vt,{className:"w-4 h-4"}),g.proveedores?.nombre||"Proveedor no especificado"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>t(g),className:"p-2 text-[#67806D] hover:text-[#5a6b60] hover:bg-gray-50 rounded-lg transition-colors",title:"Ver detalle",children:a.jsx(Kt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>r(g),className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar",children:a.jsx(Rm,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>n(g),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:a.jsx(lr,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ua,{className:"w-4 h-4 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Lugar de Origen"}),a.jsx("div",{className:"text-sm font-medium text-[#3C454A]",children:g.lugar_origen})]})]}),g.transportadores&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"w-4 h-4 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Transportador"}),a.jsx("div",{className:"text-sm font-medium text-[#3C454A]",children:g.transportadores.nombre})]})]}),g.precio_total&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rr,{className:"w-4 h-4 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Precio Total"}),a.jsx("div",{className:"text-sm font-medium text-[#3C454A]",children:h(g.precio_total)})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[g.flag_peso_promedio&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["Peso Promedio: ",g.peso_promedio," kg"]}),g.documento&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(et,{className:"w-3 h-3 mr-1"}),"Con documento"]})]}),g.observaciones&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Observaciones"}),a.jsx("div",{className:"text-sm text-[#3C454A]",children:g.observaciones})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("span",{children:["Registrado por: ",g.usuarios?.nombre||"Usuario no disponible"]}),a.jsx("span",{children:new Date(g.created_at).toLocaleString("es-AR")})]})})]})},g.id))}),m.length>0&&a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{className:"flex items-center gap-2 bg-[#67806D] text-white px-4 py-2 rounded-lg hover:bg-[#5a6b60] transition-colors",children:[a.jsx(ma,{className:"w-4 h-4"}),"Exportar a Excel"]})})]})}const sm={critico:{label:"Crítico",color:"text-red-600 bg-red-50 border-red-200"},malo:{label:"Malo",color:"text-orange-600 bg-orange-50 border-orange-200"},bueno:{label:"Bueno",color:"text-yellow-600 bg-yellow-50 border-yellow-200"},excelente:{label:"Excelente",color:"text-green-600 bg-green-50 border-green-200"}};function zP({compra:e,onClose:t,onEditarCompra:r,onVerAnimal:n}){const{getAnimalesByCompra:s}=mu(),[l,c]=_.useState([]),[d,f]=_.useState(!0),[m,x]=_.useState("info");_.useEffect(()=>{e?.id&&h()},[e]);const h=async()=>{f(!0);try{const{data:j,error:w}=await s(e.id);w||c(j)}catch(j){console.error("Error cargando animales:",j)}finally{f(!1)}},v=j=>new Date(j).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric"}),g=j=>j?new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(j):"-",b=(()=>{const j=l.length,w=l.reduce((T,k)=>T+(parseFloat(k.peso_ingreso)||0),0),A=l.reduce((T,k)=>{const C=parseFloat(k.peso_ingreso)||0,M=parseFloat(k.precio_compra)||0;return T+C*M},0),S=l.reduce((T,k)=>{const C=k.categoria;return T[C]||(T[C]={cantidad:0,peso:0}),T[C].cantidad+=1,T[C].peso+=parseFloat(k.peso_ingreso)||0,T},{}),D=l.reduce((T,k)=>{const C=k.estado_fisico;return T[C]||(T[C]=0),T[C]+=1,T},{});return{totalAnimales:j,pesoTotal:w,valorTotal:A,porCategoria:S,porEstado:D}})();return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"bg-[#3C454A] text-white p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold",children:["Compra del ",v(e.fecha)]}),a.jsx("p",{className:"text-gray-300 text-sm mt-1",children:e.lugar_origen})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>r(e),className:"p-2 text-white hover:text-gray-300 hover:bg-white/10 rounded-lg transition-colors",title:"Editar compra",children:a.jsx(Rm,{className:"w-5 h-5"})}),a.jsx("button",{onClick:t,className:"p-2 text-white hover:text-gray-300 hover:bg-white/10 rounded-lg transition-colors",children:a.jsx(Qe,{className:"w-5 h-5"})})]})]})}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex space-x-8 px-6",children:[a.jsx("button",{onClick:()=>x("info"),className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="info"?"border-[#67806D] text-[#67806D]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Información General"}),a.jsxs("button",{onClick:()=>x("animales"),className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="animales"?"border-[#67806D] text-[#67806D]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Animales (",b.totalAnimales,")"]}),a.jsx("button",{onClick:()=>x("estadisticas"),className:`py-4 px-1 border-b-2 font-medium text-sm ${m==="estadisticas"?"border-[#67806D] text-[#67806D]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Estadísticas"})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[m==="info"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(We,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Fecha de Compra"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:v(e.fecha)})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Vt,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Proveedor"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:e.proveedores?.nombre||"No especificado"}),e.proveedores?.cuit&&a.jsxs("div",{className:"text-sm text-gray-500",children:["CUIT: ",e.proveedores.cuit]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ua,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Lugar de Origen"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:e.lugar_origen})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[e.transportadores&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Cn,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Transportador"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:e.transportadores.nombre})]})]}),e.precio_total&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(rr,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Precio Total"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:g(e.precio_total)})]})]}),e.documento&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(et,{className:"w-5 h-5 text-[#67806D]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Documento"}),a.jsx("div",{className:"font-medium text-[#3C454A]",children:"Archivo adjunto"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-2",children:"Método de Carga"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"w-4 h-4 text-[#67806D]"}),a.jsx("span",{className:"text-sm",children:e.flag_peso_promedio?"Lote con peso promedio":"Carga individual"})]}),e.flag_peso_promedio&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Peso promedio aplicado: ",e.peso_promedio," kg"]})]}),e.observaciones&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-2",children:"Observaciones"}),a.jsx("p",{className:"text-[#3C454A] text-sm",children:e.observaciones})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Información de Registro"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-600",children:"Registrado por:"}),a.jsx("span",{className:"ml-2 text-blue-800",children:e.usuarios?.nombre||"Usuario no disponible"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-600",children:"Fecha de registro:"}),a.jsx("span",{className:"ml-2 text-blue-800",children:new Date(e.created_at).toLocaleString("es-AR")})]})]})]})]}),m==="animales"&&a.jsx("div",{className:"space-y-6",children:d?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-[#67806D] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Cargando animales..."})]}):l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(st,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No hay animales registrados en esta compra."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h4",{className:"font-medium text-[#3C454A]",children:["Animales de la Compra (",l.length,")"]}),a.jsxs("button",{className:"flex items-center gap-2 bg-[#67806D] text-white px-4 py-2 rounded-lg hover:bg-[#5a6b60] transition-colors text-sm",children:[a.jsx(ma,{className:"w-4 h-4"}),"Exportar Lista"]})]}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Caravana"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoría"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Peso (kg)"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado Físico"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Precio/kg"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:l.map((j,w)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-[#3C454A] flex items-center gap-1",children:[a.jsx(Vd,{className:"w-3 h-3"}),j.numero_caravana||`Sin caravana #${w+1}`]}),j.color_caravana&&a.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[a.jsx(Gd,{className:"w-3 h-3"}),j.color_caravana]})]})}),a.jsx("td",{className:"px-4 py-3 text-[#3C454A]",children:j.categoria}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("span",{className:"flex items-center gap-1 text-[#3C454A]",children:[a.jsx(Wn,{className:"w-3 h-3"}),j.peso_ingreso]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full border ${sm[j.estado_fisico]?.color||"text-gray-600 bg-gray-50 border-gray-200"}`,children:[a.jsx(wr,{className:"w-3 h-3 inline mr-1"}),sm[j.estado_fisico]?.label||j.estado_fisico]})}),a.jsx("td",{className:"px-4 py-3 text-[#3C454A]",children:g(j.precio_compra)}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${j.estado==="en_campo"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.estado==="en_campo"?"En Campo":"Vendido"})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:()=>n&&n(j),className:"p-1 text-[#67806D] hover:text-[#5a6b60] transition-colors",title:"Ver detalle del animal",children:a.jsx(Kt,{className:"w-4 h-4"})})})})]},j.id))})]})})})]})}),m==="estadisticas"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center border border-blue-200",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.totalAnimales}),a.jsx("div",{className:"text-sm text-blue-800",children:"Total Animales"})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center border border-green-200",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[b.pesoTotal.toFixed(1)," kg"]}),a.jsx("div",{className:"text-sm text-green-800",children:"Peso Total"})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center border border-yellow-200",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:g(b.valorTotal)}),a.jsx("div",{className:"text-sm text-yellow-800",children:"Valor Total"})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-4",children:"Distribución por Categoría"}),a.jsx("div",{className:"space-y-3",children:Object.entries(b.porCategoria).map(([j,w])=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-[#3C454A]",children:j}),a.jsxs("div",{className:"text-sm text-gray-600",children:[w.cantidad," ",w.cantidad===1?"animal":"animales"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-medium text-[#3C454A]",children:[w.peso.toFixed(1)," kg"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Promedio: ",(w.peso/w.cantidad).toFixed(1)," kg"]})]})]},j))})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-4",children:"Estado Físico"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(b.porEstado).map(([j,w])=>a.jsxs("div",{className:`p-3 rounded-lg text-center border ${sm[j]?.color||"text-gray-600 bg-gray-50 border-gray-200"}`,children:[a.jsx("div",{className:"text-lg font-bold",children:w}),a.jsx("div",{className:"text-xs font-medium",children:sm[j]?.label||j})]},j))})]})]})]})]})}):null}function UP(){const{compras:e,loading:t,createCompra:r,deleteCompra:n}=kP(),{showSuccess:s,showError:l,showInfo:c,NotificationContainer:d}=ms(),{createAnimales:f}=mu(),[m,x]=_.useState(!1),[h,v]=_.useState(null),[g,y]=_.useState(!1),[b,j]=_.useState(!0),[w,A]=_.useState(0),S=async()=>{let L=0;for(const P of e)if(P.precio_total&&P.precio_total>0)L+=parseFloat(P.precio_total);else try{const{data:O}=await se.from("animales").select("peso_ingreso, precio_compra").eq("compra_id",P.id);if(O&&O.length>0){const z=O.reduce((V,G)=>{const K=parseFloat(G.peso_ingreso)||0,ce=parseFloat(G.precio_compra)||0;return V+K*ce},0);L+=z}}catch(O){console.error(`Error calculando monto para compra ${P.id}:`,O)}A(L)};_.useEffect(()=>{e.length>0?S():A(0)},[e]);const T=(()=>{const L=e.length,P=new Date().getMonth(),O=new Date().getFullYear(),z=e.filter(G=>{const K=new Date(G.fecha);return K.getMonth()===P&&K.getFullYear()===O}).length;return{total:L,esteMes:z,montoTotal:w}})(),k=async L=>{try{const{data:P,error:O}=await r({fecha:L.fecha,proveedor_id:L.proveedor_id,lugar_origen:L.lugar_origen,transportador_id:L.transportador_id||null,precio_total:parseFloat(L.precio_total)||null,documento:L.documento||null,flag_peso_promedio:L.flag_peso_promedio,peso_promedio:parseFloat(L.peso_promedio)||null,observaciones:L.observaciones});if(O)throw new Error(O);const z=L.animales.map(G=>{const{id:K,...ce}=G;return{...ce,compra_id:P.id}}),{error:V}=await f(z);if(V)throw new Error(V);x(!1),setTimeout(()=>{S()},500),s(`Se han registrado ${z.length} animales correctamente en el sistema.`,"Compra Registrada Exitosamente")}catch(P){console.error("Error al completar compra:",P),l(P.message,"Error al Registrar la Compra")}},C=L=>{v(L),y(!0)},M=L=>{c("Esta funcionalidad estará disponible en una próxima actualización.","Funcionalidad en Desarrollo")},I=async L=>{if(window.confirm("¿Está seguro de que desea eliminar esta compra? Esta acción no se puede deshacer.")){const{error:P}=await n(L.id);P?l(P,"Error al Eliminar la Compra"):s("La compra ha sido eliminada correctamente del sistema.","Compra Eliminada")}},R=L=>{c(`Caravana: ${L.numero_caravana||"Sin caravana"}. Vista de detalle próximamente.`,"Detalle del Animal")};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[#3C454A] flex items-center gap-2",children:[a.jsx(st,{className:"w-6 h-6"}),"Gestión de Compras"]}),a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Registre y administre las compras de animales con información detallada"})]}),a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 bg-[#67806D] text-white px-6 py-3 rounded-lg hover:bg-[#5a6b60] transition-all shadow-lg hover:shadow-xl",children:[a.jsx(gt,{className:"w-5 h-5"}),"Nueva Compra"]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Compras"}),a.jsx("p",{className:"text-2xl font-bold text-[#3C454A]",children:T.total})]}),a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:a.jsx(st,{className:"w-5 h-5 text-blue-600"})})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Este Mes"}),a.jsx("p",{className:"text-2xl font-bold text-[#3C454A]",children:T.esteMes})]}),a.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:a.jsx(We,{className:"w-5 h-5 text-green-600"})})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Monto Total"}),a.jsxs("p",{className:"text-2xl font-bold text-[#3C454A]",children:["$",T.montoTotal.toLocaleString("es-AR")]})]}),a.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:a.jsx(rr,{className:"w-5 h-5 text-yellow-600"})})]})})]}),b&&a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.2},className:"bg-[#F9E9D0] rounded-lg p-4 border border-[#805A36]/20",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ia,{className:"w-5 h-5 text-[#805A36] mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-[#3C454A] mb-1",children:"Wizard de Compras"}),a.jsx("p",{className:"text-[#805A36] text-sm",children:"El wizard lo guiará paso a paso para registrar una nueva compra: primero los datos generales (proveedor, fecha, lugar), luego la carga de animales (individual o por lote), y finalmente el resumen para confirmar toda la información."})]})]}),a.jsx("button",{onClick:()=>j(!1),className:"text-[#805A36] hover:text-[#3C454A] transition-colors p-1 rounded-full hover:bg-[#805A36]/10",title:"Cerrar ayuda",children:a.jsx(Qe,{className:"w-4 h-4"})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:a.jsx(BP,{compras:e,onVerDetalle:C,onEditar:M,onEliminar:I,loading:t})}),m&&a.jsx(IP,{onClose:()=>x(!1),onComplete:k}),g&&h&&a.jsx(zP,{compra:h,onClose:()=>{y(!1),v(null)},onEditarCompra:M,onVerAnimal:R}),a.jsx(d,{})]})}const Yb=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),[s,l]=_.useState(null),c=async()=>{try{n(!0);const{data:x,error:h}=await se.from("ventas").select(`
          *,
          compradores (id, nombre, cuit),
          usuarios (id, nombre)
        `).order("fecha",{ascending:!1});if(h)throw h;t(x||[])}catch(x){console.error("Error fetching ventas:",x),l(x.message)}finally{n(!1)}},d=async(x,h)=>{try{const{data:{user:v}}=await se.auth.getUser(),g=h.reduce((M,I)=>{const R=parseFloat(I.peso_salida)||parseFloat(I.peso_ingreso)||0;return M+R},0),y=h.length,b=h.reduce((M,I)=>{const R=parseFloat(I.peso_salida)||parseFloat(I.peso_ingreso)||0,L=parseFloat(x.precios_categoria?.[I.categoria]||0);return M+R*L},0),j=g>0?b/g:0,w={fecha:x.fecha,tipo:x.tipo,comprador_id:x.comprador_id,documentos:x.documentos,observaciones:x.observaciones,precios_categoria:x.precios_categoria,peso_total:g,total_animales:y,valor_total:b,precio_kilo:j,created_by:v?.id},{data:A,error:S}=await se.from("ventas").insert([w]).select().single();if(S)throw S;const D=h.map(M=>{const I=parseFloat(M.peso_salida)||parseFloat(M.peso_ingreso)||0,R=parseFloat(x.precios_categoria?.[M.categoria]||0),L=I*R;return{venta_id:A.id,animal_id:M.id,peso_salida:I,precio_final:L,created_by:v?.id}}),{error:T}=await se.from("detalle_venta").insert(D);if(T)throw T;const k=h.map(M=>M.id),{error:C}=await se.from("animales").update({estado:"vendido"}).in("id",k);if(C)throw C;return await c(),{data:A,error:null}}catch(v){return console.error("Error creating venta:",v),{data:null,error:v.message}}},f=async x=>{try{const{data:h,error:v}=await se.from("detalle_venta").select(`
          *,
          animales (
            id,
            numero_caravana,
            color_caravana,
            categoria,
            peso_ingreso,
            estado_fisico,
            proveedores (nombre),
            compras (fecha, lugar_origen)
          )
        `).eq("venta_id",x).order("created_at");if(v)throw v;return{data:h||[],error:null}}catch(h){return console.error("Error fetching detalle venta:",h),{data:[],error:h.message}}},m=async x=>{try{const{data:h}=await se.from("detalle_venta").select("animal_id").eq("venta_id",x);if(h&&h.length>0){const y=h.map(j=>j.animal_id),{error:b}=await se.from("animales").update({estado:"en_campo"}).in("id",y);if(b)throw b}const{error:v}=await se.from("detalle_venta").delete().eq("venta_id",x);if(v)throw v;const{error:g}=await se.from("ventas").delete().eq("id",x);if(g)throw g;return await c(),{error:null}}catch(h){return console.error("Error deleting venta:",h),{error:h.message}}};return _.useEffect(()=>{c()},[]),{ventas:e,loading:r,error:s,fetchVentas:c,createVenta:d,getDetalleVenta:f,deleteVenta:m}},H0=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!1),s=async()=>{try{n(!0);const{data:c,error:d}=await se.from("compradores").select("*").order("nombre");if(d)throw d;t(c||[])}catch(c){console.error("Error fetching compradores:",c)}finally{n(!1)}},l=async c=>{try{const{data:d,error:f}=await se.from("compradores").insert([c]).select().single();if(f)throw f;return await s(),{data:d,error:null}}catch(d){return console.error("Error creating comprador:",d),{data:null,error:d.message}}};return _.useEffect(()=>{s()},[]),{compradores:e,loading:r,fetchCompradores:s,createComprador:l}},$P=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!1);return{animalesDisponibles:e,loading:r,fetchAnimalesDisponibles:async(l={})=>{try{n(!0);let c=se.from("animales").select("*").eq("estado","en_campo").order("fecha_ingreso",{ascending:!1});if(l.busqueda&&l.busqueda.trim()){const x=l.busqueda.trim();c=c.or(`numero_caravana.ilike.%${x}%,categoria.ilike.%${x}%`)}l.categoria&&l.categoria.trim()&&(c=c.eq("categoria",l.categoria)),l.estado_fisico&&l.estado_fisico.trim()&&(c=c.eq("estado_fisico",l.estado_fisico)),l.proveedor_id&&l.proveedor_id.trim()&&(c=c.eq("proveedor_id",l.proveedor_id)),l.peso_min&&!isNaN(parseFloat(l.peso_min))&&(c=c.gte("peso_ingreso",parseFloat(l.peso_min))),l.peso_max&&!isNaN(parseFloat(l.peso_max))&&(c=c.lte("peso_ingreso",parseFloat(l.peso_max))),l.fecha_desde&&l.fecha_desde.trim()&&(c=c.gte("fecha_ingreso",l.fecha_desde)),l.fecha_hasta&&l.fecha_hasta.trim()&&(c=c.lte("fecha_ingreso",l.fecha_hasta));const{data:d,error:f}=await c;if(f)throw console.error("Error en consulta de animales:",f),f;const m=(d||[]).map(x=>({...x,peso_actual:x.peso_ingreso}));return t(m),{data:m,error:null}}catch(c){return console.error("Error fetching animales disponibles:",c),t([]),{data:[],error:c.message}}finally{n(!1)}}}},qP=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!1),s=async()=>{try{n(!0);const{data:l,error:c}=await se.from("lotes").select("*").order("fecha_creacion",{ascending:!1});if(c)throw c;const d=await Promise.all((l||[]).map(async f=>{const{data:m,error:x}=await se.from("animal_lote").select(`
              animal_id,
              animales!inner(
                id,
                numero_caravana,
                peso_ingreso,
                categoria,
                estado_fisico,
                estado
              )
            `).eq("lote_id",f.id).is("fecha_salida",null).eq("animales.estado","en_campo");if(x)return console.error("Error fetching animals for lote:",x),{...f,animales_activos:[],total_animales:0,peso_total:0,peso_promedio:0,distribucion_categorias:{}};const h=m||[],v=h.length,g=h.reduce((j,w)=>j+(parseFloat(w.animales?.peso_ingreso)||0),0),y=v>0?g/v:0,b=h.reduce((j,w)=>{const A=w.animales?.categoria||"Sin categoría";return j[A]=(j[A]||0)+1,j},{});return{...f,animales_activos:h.map(j=>j.animales),total_animales:v,peso_total:g,peso_promedio:y,distribucion_categorias:b}}));return t(d),{data:d,error:null}}catch(l){return console.error("Error fetching lotes:",l),t([]),{data:[],error:l.message}}finally{n(!1)}};return _.useEffect(()=>{s()},[]),{lotes:e,loading:r,fetchLotes:s}},r4=["Ternero","Ternera","Novillo","Vaquillona","Vaca","Toro"],Wp=[{value:"critico",label:"Crítico",color:"text-red-600 bg-red-50"},{value:"malo",label:"Malo",color:"text-orange-600 bg-orange-50"},{value:"bueno",label:"Bueno",color:"text-yellow-600 bg-yellow-50"},{value:"excelente",label:"Excelente",color:"text-green-600 bg-green-50"}];function HP({animalesSeleccionados:e,onChange:t,errores:r}){const{animalesDisponibles:n,loading:s,fetchAnimalesDisponibles:l}=$P(),{lotes:c,loading:d}=qP(),{proveedores:f}=Kb(),[m,x]=_.useState({busqueda:"",categoria:"",estado_fisico:"",proveedor_id:"",peso_min:"",peso_max:"",fecha_desde:"",fecha_hasta:""}),[h,v]=_.useState(!1),[g,y]=_.useState(!1),[b,j]=_.useState(null),[w,A]=_.useState(!1),[S,D]=_.useState(null),[T,k]=_.useState(!1);_.useEffect(()=>{Object.values(m).every(F=>F==="")?l({}):l(m)},[m]);const C=()=>{l(m)},M=()=>{x({busqueda:"",categoria:"",estado_fisico:"",proveedor_id:"",peso_min:"",peso_max:"",fecha_desde:"",fecha_hasta:""})},I=F=>{const Y=F.animales_activos.map(Q=>({...Q,peso_salida:Q.peso_ingreso,precio_final:0})).filter(Q=>!R(Q.id));t([...e,...Y]),A(!1)},R=F=>e.some(U=>U.id===F),L=F=>{if(R(F.id)){const Y=e.filter(Q=>Q.id!==F.id);t(Y)}else{const Y={...F,peso_salida:F.peso_ingreso,precio_final:0};t([...e,Y])}},P=()=>{if(g)t([]),y(!1);else{const F=n.filter(U=>!R(U.id)).map(U=>({...U,peso_salida:U.peso_ingreso,precio_final:0}));t([...e,...F]),y(!0)}},O=F=>{const U=n.filter(Y=>Y.categoria===F&&!R(Y.id)).map(Y=>({...Y,peso_salida:Y.peso_ingreso,precio_final:0}));t([...e,...U])},z=(F,U)=>{const Y=e.map(Q=>Q.id===F?{...Q,peso_salida:parseFloat(U)||0}:Q);t(Y)},V=F=>{D(F),k(!0)},G=()=>{D(null),k(!1)},K=()=>{const F=e.length,U=e.reduce((Q,ee)=>Q+(parseFloat(ee.peso_salida)||0),0),Y=e.reduce((Q,ee)=>{const De=ee.categoria;return Q[De]||(Q[De]=0),Q[De]++,Q},{});return{totalSeleccionados:F,pesoTotal:U,porCategoria:Y}},{totalSeleccionados:ce,pesoTotal:le,porCategoria:ne}=K(),Z=F=>new Date(F).toLocaleDateString("es-AR");return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#F9E9D0] rounded-lg p-4 border border-[#805A36]/20",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-2 flex items-center gap-2",children:[a.jsx(st,{className:"w-5 h-5"}),"Selección de Animales para Venta"]}),a.jsx("p",{className:"text-[#805A36] text-sm",children:"Seleccione los animales que desea vender. Puede usar filtros para encontrarlos más fácilmente."})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-medium text-[#3C454A] flex items-center gap-2",children:[a.jsx(Jr,{className:"w-5 h-5"}),"Filtros de Búsqueda"]}),a.jsxs("button",{onClick:()=>v(!h),className:"text-[#67806D] hover:text-[#5a6b60] text-sm font-medium",children:[h?"Ocultar":"Mostrar"," filtros"]})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",value:m.busqueda,onChange:F=>x(U=>({...U,busqueda:F.target.value})),placeholder:"Buscar por número de caravana...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})}),h&&a.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Categoría"}),a.jsxs("select",{value:m.categoria,onChange:F=>x(U=>({...U,categoria:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:[a.jsx("option",{value:"",children:"Todas"}),r4.map(F=>a.jsx("option",{value:F,children:F},F))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Estado Físico"}),a.jsxs("select",{value:m.estado_fisico,onChange:F=>x(U=>({...U,estado_fisico:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:[a.jsx("option",{value:"",children:"Todos"}),Wp.map(F=>a.jsx("option",{value:F.value,children:F.label},F.value))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Proveedor"}),a.jsxs("select",{value:m.proveedor_id,onChange:F=>x(U=>({...U,proveedor_id:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:[a.jsx("option",{value:"",children:"Todos"}),f.map(F=>a.jsx("option",{value:F.id,children:F.nombre},F.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Peso Mínimo (kg)"}),a.jsx("input",{type:"number",value:m.peso_min,onChange:F=>x(U=>({...U,peso_min:F.target.value})),placeholder:"300",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap",children:[a.jsx("button",{onClick:C,className:"px-4 py-2 bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60] transition-colors text-sm",children:"Aplicar Filtros"}),a.jsxs("button",{onClick:M,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[a.jsx(Hd,{className:"w-4 h-4 inline mr-1"}),"Limpiar"]}),a.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 border border-[#67806D] text-[#67806D] rounded-lg hover:bg-[#67806D]/5 transition-colors text-sm",children:[a.jsx(Hp,{className:"w-4 h-4 inline mr-1"}),"Seleccionar Lote"]})]})]}),ce>0&&a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Animales Seleccionados"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-green-600",children:"Total:"}),a.jsxs("span",{className:"ml-2 font-medium text-green-800",children:[ce," animales"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-green-600",children:"Peso Total:"}),a.jsxs("span",{className:"ml-2 font-medium text-green-800",children:[le.toFixed(1)," kg"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-green-600",children:"Promedio:"}),a.jsxs("span",{className:"ml-2 font-medium text-green-800",children:[ce>0?(le/ce).toFixed(1):0," kg"]})]})]}),Object.keys(ne).length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-green-200",children:[a.jsx("span",{className:"text-green-600 text-sm",children:"Por categoría:"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:Object.entries(ne).map(([F,U])=>a.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:[F,": ",U]},F))})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-3",children:"Selección Rápida"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[g?a.jsx(Od,{className:"w-4 h-4"}):a.jsx(ks,{className:"w-4 h-4"}),g?"Deseleccionar Todos":"Seleccionar Todos"]}),r4.map(F=>a.jsxs("button",{onClick:()=>O(F),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:["Todos ",F]},F))]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("h4",{className:"font-medium text-[#3C454A] flex items-center gap-2",children:[a.jsx(st,{className:"w-5 h-5"}),"Animales Disponibles",s&&a.jsx("div",{className:"w-4 h-4 border-2 border-[#67806D] border-t-transparent rounded-full animate-spin"}),"(",n.length,")"]})}),s?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-[#67806D] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Cargando animales..."})]}):n.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(st,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No hay animales disponibles con los filtros aplicados"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:g,onChange:P,className:"rounded border-gray-300 text-[#67806D] focus:ring-[#67806D]"})}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Caravana"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoría"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Peso (kg)"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proveedor"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ingreso"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map((F,U)=>{const Y=R(F.id),Q=e.find(ee=>ee.id===F.id);return a.jsxs("tr",{className:`hover:bg-gray-50 ${Y?"bg-green-50":""}`,children:[a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("input",{type:"checkbox",checked:Y,onChange:()=>L(F),className:"rounded border-gray-300 text-[#67806D] focus:ring-[#67806D]"})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-[#3C454A] flex items-center gap-1",children:[a.jsx(Vd,{className:"w-3 h-3"}),F.numero_caravana||`#${U+1}`]}),F.color_caravana&&a.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[a.jsx(Gd,{className:"w-3 h-3"}),F.color_caravana]})]})}),a.jsx("td",{className:"px-4 py-3 text-[#3C454A]",children:F.categoria}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Wn,{className:"w-3 h-3 text-gray-400"}),Y&&Q?a.jsx("input",{type:"number",value:Q.peso_salida||F.peso_ingreso,onChange:ee=>z(F.id,ee.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-[#67806D]",step:"0.1"}):a.jsx("span",{className:"text-[#3C454A]",children:F.peso_ingreso})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${Wp.find(ee=>ee.value===F.estado_fisico)?.color||"text-gray-600 bg-gray-50"}`,children:[a.jsx(wr,{className:"w-3 h-3 inline mr-1"}),Wp.find(ee=>ee.value===F.estado_fisico)?.label||F.estado_fisico]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Vt,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-sm text-[#3C454A]",children:F.proveedores?.nombre||"Sin datos"})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(We,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-sm text-[#3C454A]",children:Z(F.fecha_ingreso)})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:()=>V(F),className:"p-1 text-[#67806D] hover:text-[#5a6b60] transition-colors",title:"Ver detalle",children:a.jsx(Kt,{className:"w-4 h-4"})})})})]},F.id)})})]})})]}),r.animales_seleccionados&&a.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 border border-red-200 rounded-lg p-3",children:[a.jsx(hr,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm",children:r.animales_seleccionados})]}),T&&S&&a.jsx(Gb,{animal:S,onClose:G}),w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] flex items-center gap-2",children:[a.jsx(Hp,{className:"w-5 h-5"}),"Seleccionar Lote Completo"]}),a.jsx("button",{onClick:()=>A(!1),className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d?a.jsx("div",{className:"flex justify-center items-center h-32",children:a.jsx("div",{className:"w-8 h-8 border-2 border-[#67806D] border-t-transparent rounded-full animate-spin"})}):a.jsx("div",{className:"space-y-4",children:c.filter(F=>F.total_animales>0).length>0?c.filter(F=>F.total_animales>0).map(F=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-[#3C454A] flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full border-2",style:{backgroundColor:F.color}}),F.nombre]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Número: ",F.numero," • Creado: ",new Date(F.fecha_creacion).toLocaleDateString()]})]}),a.jsxs("button",{onClick:()=>I(F),className:"px-4 py-2 bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60] transition-colors text-sm",children:[a.jsx(xr,{className:"w-4 h-4 inline mr-1"}),"Seleccionar Lote"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-sm text-blue-600",children:"Total Animales"}),a.jsx("div",{className:"text-xl font-bold text-blue-800",children:F.total_animales})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-sm text-green-600",children:"Peso Total"}),a.jsxs("div",{className:"text-xl font-bold text-green-800",children:[F.peso_total.toFixed(1)," kg"]})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-sm text-yellow-600",children:"Peso Promedio"}),a.jsxs("div",{className:"text-xl font-bold text-yellow-800",children:[F.peso_promedio.toFixed(1)," kg"]})]})]}),F.observaciones&&a.jsxs("div",{className:"bg-gray-50 rounded p-2 text-sm text-gray-700",children:[a.jsx("strong",{children:"Observaciones:"})," ",F.observaciones]})]},F.id)):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Hp,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No hay lotes con animales disponibles"}),a.jsx("p",{className:"text-gray-500",children:"Todos los lotes están vacíos o no tienen animales en campo."})]})})]})})]})}const VP=e=>{if(!e)return"";console.log("📅 dateUtils - Formateando fecha:",e);try{const[t,r,n]=e.split("-"),l=new Date(parseInt(t),parseInt(r)-1,parseInt(n)).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric"});return console.log("📅 dateUtils - Fecha formateada:",l),l}catch(t){return console.error("Error formateando fecha:",t),e}},zv=()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),s=`${t}-${r}-${n}`;return console.log("📅 dateUtils - Fecha actual generada:",s),s},a4=[{value:"jaula",label:"Jaula",description:"Venta por jaula o lote cerrado"},{value:"remate",label:"Remate",description:"Venta en remate ganadero"},{value:"particular",label:"Particular",description:"Venta directa a particular"}];function GP({datos:e,onChange:t,errores:r}){console.log("📅 DatosVenta renderizado con fecha:",e.fecha);const{compradores:n,createComprador:s}=H0(),[l,c]=_.useState(!1),[d,f]=_.useState(""),[m,x]=_.useState(!1),[h,v]=_.useState(null),[g,y]=_.useState({nombre:"",contacto:"",cuit:"",observaciones:""});_.useEffect(()=>{if(e.comprador_id&&n.length>0){const P=n.find(O=>O.id===e.comprador_id);v(P),P&&!d&&f(P.nombre)}else v(null)},[e.comprador_id,n]);const b=n.filter(P=>P.nombre.toLowerCase().includes(d.toLowerCase())||P.cuit?.includes(d)),j=(P,O)=>{t({[P]:O})},w=async()=>{if(!g.nombre)return;const{data:P,error:O}=await s(g);!O&&P&&(t({comprador_id:P.id}),c(!1),y({nombre:"",contacto:"",cuit:"",observaciones:""}),f(P.nombre),x(!1))},A=P=>{t({comprador_id:P.id}),f(P.nombre),x(!1),v(P)},S=()=>{t({comprador_id:""}),f(""),v(null),x(!1)},D=P=>{f(P),x(P.length>0),h&&P!==h.nombre&&(t({comprador_id:""}),v(null))},T=()=>{const P=e.animales_seleccionados.length,O=e.animales_seleccionados.reduce((G,K)=>G+(parseFloat(K.peso_salida)||parseFloat(K.peso_ingreso)||0),0),z=e.animales_seleccionados.reduce((G,K)=>{const ce=parseFloat(K.peso_salida)||parseFloat(K.peso_ingreso)||0,le=parseFloat(e.precios_categoria?.[K.categoria]||0);return G+ce*le},0),V={};return e.animales_seleccionados.forEach(G=>{V[G.categoria]||(V[G.categoria]={cantidad:0,peso:0,valor:0}),V[G.categoria].cantidad+=1;const K=parseFloat(G.peso_salida)||parseFloat(G.peso_ingreso)||0;V[G.categoria].peso+=K;const ce=parseFloat(e.precios_categoria?.[G.categoria]||0);V[G.categoria].valor+=K*ce}),{totalAnimales:P,pesoTotal:O,valorTotal:z,categorias:V}},{totalAnimales:k,pesoTotal:C,valorTotal:M,categorias:I}=T(),R=[...new Set(e.animales_seleccionados.map(P=>P.categoria))].filter(Boolean),L=(P,O)=>{const z={...e.precios_categoria};z[P]=O,t({precios_categoria:z})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#F9E9D0] rounded-lg p-4 border border-[#805A36]/20",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-2 flex items-center gap-2",children:[a.jsx(et,{className:"w-5 h-5"}),"Datos de la Venta"]}),a.jsx("p",{className:"text-[#805A36] text-sm",children:"Complete la información de la venta: comprador, tipo de venta, precio y documentos."})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-medium text-blue-800 mb-3 flex items-center gap-2",children:[a.jsx(st,{className:"w-5 h-5"}),"Resumen de Animales Seleccionados"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-600",children:"Total Animales:"}),a.jsx("span",{className:"ml-2 font-bold text-blue-800",children:k})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-600",children:"Peso Total:"}),a.jsxs("span",{className:"ml-2 font-bold text-blue-800",children:[C.toFixed(1)," kg"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-600",children:"Valor Total:"}),a.jsxs("span",{className:"ml-2 font-bold text-blue-800",children:["$",M.toLocaleString("es-AR")]})]})]}),Object.keys(I).length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-blue-700 mb-2",children:"Detalle por Categoría:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(I).map(([P,O])=>a.jsxs("div",{className:"bg-white rounded p-3 border border-blue-200",children:[a.jsx("div",{className:"font-medium text-blue-800 text-sm",children:P}),a.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[a.jsxs("div",{children:[O.cantidad," animales • ",O.peso.toFixed(1)," kg"]}),a.jsxs("div",{className:"font-medium",children:["$",O.valor.toLocaleString("es-AR")]})]})]},P))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:[a.jsx(We,{className:"w-4 h-4 inline mr-1"}),"Fecha de Venta *"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"date",value:e.fecha,onChange:P=>j("fecha",P.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D] ${r.fecha?"border-red-500":"border-gray-300"}`}),a.jsx("button",{type:"button",onClick:()=>{const P=zv();console.log("🔄 Forzando fecha de hoy:",P),j("fecha",P)},className:"px-3 py-2 text-sm bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60] transition-colors",title:"Usar fecha de hoy",children:"Hoy"}),a.jsx("button",{type:"button",onClick:()=>{console.log("🐛 DEBUG - Fecha actual en datos:",e.fecha),console.log("🐛 DEBUG - Fecha del sistema:",new Date().toISOString()),console.log("🐛 DEBUG - Todos los datos:",e)},className:"px-2 py-2 text-xs bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Debug fecha",children:"🐛"})]}),r.fecha&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.fecha})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:[a.jsx(st,{className:"w-4 h-4 inline mr-1"}),"Tipo de Venta *"]}),a.jsx("select",{value:e.tipo,onChange:P=>j("tipo",P.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D] ${r.tipo?"border-red-500":"border-gray-300"}`,children:a4.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a4.find(P=>P.value===e.tipo)?.description}),r.tipo&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.tipo})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:[a.jsx(Vt,{className:"w-4 h-4 inline mr-1"}),"Comprador *"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",value:d,onChange:P=>D(P.target.value),onFocus:()=>x(d.length>0),placeholder:"Buscar comprador por nombre o CUIT...",className:`w-full pl-10 pr-10 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D] ${r.comprador_id?"border-red-500":"border-gray-300"}`}),h&&a.jsx("button",{onClick:S,className:"absolute right-3 top-3 text-gray-400 hover:text-red-500 transition-colors",children:a.jsx(Qe,{className:"w-4 h-4"})})]}),m&&d&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:b.length>0?b.map(P=>a.jsxs("button",{onClick:()=>A(P),className:"w-full px-4 py-2 text-left hover:bg-gray-50 border-b last:border-b-0 transition-colors",children:[a.jsx("div",{className:"font-medium",children:P.nombre}),P.cuit&&a.jsxs("div",{className:"text-sm text-gray-500",children:["CUIT: ",P.cuit]}),P.contacto&&a.jsxs("div",{className:"text-sm text-gray-500",children:["Contacto: ",P.contacto]})]},P.id)):a.jsxs("div",{className:"px-4 py-3 text-gray-500 text-sm text-center",children:[a.jsx("div",{children:"No se encontraron compradores"}),a.jsx("button",{onClick:()=>{y(P=>({...P,nombre:d})),c(!0),x(!1)},className:"text-[#67806D] hover:text-[#5a6b60] mt-1 text-xs",children:"¿Crear nuevo comprador con este nombre?"})]})})]}),a.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60] transition-colors",children:[a.jsx(gt,{className:"w-4 h-4"}),"Nuevo"]})]}),h&&a.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[a.jsx(en,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:h.nombre})]}),h.cuit&&a.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["CUIT: ",h.cuit]})]}),r.comprador_id&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.comprador_id})]}),R.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-3",children:[a.jsx(rr,{className:"w-4 h-4 inline mr-1"}),"Precios por Categoría *"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(P=>{const O=e.animales_seleccionados.filter(V=>V.categoria===P).length,z=e.animales_seleccionados.filter(V=>V.categoria===P).reduce((V,G)=>V+(parseFloat(G.peso_salida)||parseFloat(G.peso_ingreso)||0),0);return a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"mb-2",children:[a.jsx("div",{className:"font-medium text-[#3C454A]",children:P}),a.jsxs("div",{className:"text-sm text-gray-600",children:[O," animales • ",z.toFixed(1)," kg"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:"$"}),a.jsx("input",{type:"number",value:e.precios_categoria?.[P]||"",onChange:V=>L(P,V.target.value),placeholder:"450.00",step:"0.01",min:"0",className:`w-full pl-8 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D] ${r[`precio_${P}`]?"border-red-500":"border-gray-300"}`})]}),e.precios_categoria?.[P]&&z>0&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Subtotal: $",(parseFloat(e.precios_categoria[P])*z).toLocaleString("es-AR")]}),r[`precio_${P}`]&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r[`precio_${P}`]})]},P)})}),r.precios_categoria&&a.jsx("p",{className:"text-red-500 text-sm mt-2",children:r.precios_categoria})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:[a.jsx(fu,{className:"w-4 h-4 inline mr-1"}),"Documentos de Venta (Opcional)"]}),a.jsx("input",{type:"file",onChange:P=>j("documentos",Array.from(P.target.files)),accept:".pdf,.jpg,.jpeg,.png",multiple:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Puede subir múltiples archivos. Formatos soportados: PDF, JPG, PNG"}),e.documentos&&e.documentos.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Archivos seleccionados:"}),a.jsx("div",{className:"space-y-1",children:e.documentos.map((P,O)=>a.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 px-2 py-1 rounded",children:P.name},O))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:"Observaciones"}),a.jsx("textarea",{value:e.observaciones,onChange:P=>j("observaciones",P.target.value),placeholder:"Información adicional sobre la venta...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Nuevo Comprador"}),a.jsx("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700",children:a.jsx(Qe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",value:g.nombre,onChange:P=>y(O=>({...O,nombre:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Contacto"}),a.jsx("input",{type:"text",value:g.contacto,onChange:P=>y(O=>({...O,contacto:P.target.value})),placeholder:"Teléfono, email, etc.",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"CUIT"}),a.jsx("input",{type:"text",value:g.cuit,onChange:P=>y(O=>({...O,cuit:P.target.value})),placeholder:"20-12345678-9",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-1",children:"Observaciones"}),a.jsx("textarea",{value:g.observaciones,onChange:P=>y(O=>({...O,observaciones:P.target.value})),placeholder:"Información adicional...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),a.jsxs("div",{className:"flex gap-2 mt-6",children:[a.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:w,disabled:!g.nombre,className:"flex-1 px-4 py-2 bg-[#67806D] text-white rounded-lg hover:bg-[#5a6b60] disabled:opacity-50",children:"Crear"})]})]})})]})}function KP({datos:e,compradores:t=[],proveedores:r=[]}){const[n,s]=_.useState(!1),l=t?.find(g=>g.id===e.comprador_id),c=()=>{const g=e.animales_seleccionados.length,y=e.animales_seleccionados.reduce((j,w)=>j+(parseFloat(w.peso_salida)||parseFloat(w.peso_ingreso)||0),0),b=e.animales_seleccionados.reduce((j,w)=>{const A=parseFloat(w.peso_salida)||parseFloat(w.peso_ingreso)||0,S=parseFloat(e.precios_categoria?.[w.categoria]||0),D=A*S;return j+D},0);return{totalAnimales:g,pesoTotal:y,valorTotal:b}},d=()=>{const g={};return e.animales_seleccionados.forEach(y=>{g[y.categoria]||(g[y.categoria]=[]),g[y.categoria].push(y)}),g},{totalAnimales:f,pesoTotal:m,valorTotal:x}=c(),h=d(),v=g=>({jaula:"Jaula",remate:"Remate",particular:"Particular"})[g]||g;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#F9E9D0] rounded-lg p-4 border border-[#805A36]/20",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-2 flex items-center gap-2",children:[a.jsx(et,{className:"w-5 h-5"}),"Resumen de Venta"]}),a.jsx("p",{className:"text-[#805A36] text-sm",children:"Revise todos los datos antes de confirmar la venta."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx(st,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold text-blue-800",children:f}),a.jsx("div",{className:"text-sm text-blue-600",children:"Animales"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx(Wn,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),a.jsxs("div",{className:"text-2xl font-bold text-green-800",children:[m.toFixed(1)," kg"]}),a.jsx("div",{className:"text-sm text-green-600",children:"Peso Total"})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[a.jsx(rr,{className:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),a.jsxs("div",{className:"text-2xl font-bold text-yellow-800",children:["$",(!isNaN(x)&&isFinite(x)?x:0).toLocaleString("es-AR")]}),a.jsx("div",{className:"text-sm text-yellow-600",children:"Valor Total"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(et,{className:"w-5 h-5"}),"Datos de la Venta"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[a.jsx(We,{className:"w-4 h-4"}),"Fecha:"]}),a.jsx("span",{className:"font-medium",children:VP(e.fecha)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[a.jsx(st,{className:"w-4 h-4"}),"Tipo:"]}),a.jsx("span",{className:"font-medium",children:v(e.tipo)})]}),e.precios_categoria&&Object.keys(e.precios_categoria).length>0&&a.jsxs("div",{className:"pt-2 border-t",children:[a.jsxs("span",{className:"text-gray-600 text-sm flex items-center gap-1 mb-2",children:[a.jsx(rr,{className:"w-4 h-4"}),"Precios por Categoría:"]}),a.jsx("div",{className:"space-y-1",children:Object.entries(e.precios_categoria).map(([g,y])=>{const b=parseFloat(y||0),j=!isNaN(b)&&isFinite(b)?b:0;return a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:[g,":"]}),a.jsxs("span",{className:"font-medium",children:["$",j.toFixed(2),"/kg"]})]},g)})})]}),e.observaciones&&a.jsxs("div",{className:"pt-2 border-t",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Observaciones:"}),a.jsx("p",{className:"text-sm mt-1 text-gray-800",children:e.observaciones})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(Vt,{className:"w-5 h-5"}),"Comprador"]}),l?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Nombre:"}),a.jsx("p",{className:"font-medium",children:l.nombre})]}),l.contacto&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Contacto:"}),a.jsx("p",{className:"font-medium",children:l.contacto})]}),l.cuit&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"CUIT:"}),a.jsx("p",{className:"font-medium",children:l.cuit})]}),l.observaciones&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Observaciones:"}),a.jsx("p",{className:"text-sm text-gray-800",children:l.observaciones})]})]}):a.jsx("p",{className:"text-gray-500",children:"No se encontró información del comprador"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-[#3C454A] mb-4",children:"Resumen por Categoría"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(h).map(([g,y])=>{const b=y.reduce((S,D)=>S+(parseFloat(D.peso_salida)||parseFloat(D.peso_ingreso)||0),0),j=parseFloat(e.precios_categoria?.[g]||0),w=b*j,A=!isNaN(w)&&isFinite(w)?w:0;return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-[#3C454A] mb-2",children:g}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Cantidad:"}),a.jsx("span",{className:"font-medium",children:y.length})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Peso:"}),a.jsxs("span",{className:"font-medium",children:[b.toFixed(1)," kg"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Precio/kg:"}),a.jsxs("span",{className:"font-medium",children:["$",j.toLocaleString("es-AR")]})]}),a.jsxs("div",{className:"flex justify-between border-t pt-1",children:[a.jsx("span",{children:"Valor:"}),a.jsxs("span",{className:"font-medium",children:["$",A.toLocaleString("es-AR")]})]})]})]},g)})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-[#3C454A]",children:["Detalle de Animales (",f,")"]}),a.jsxs("button",{onClick:()=>s(!n),className:"flex items-center gap-2 text-[#67806D] hover:text-[#5a6b60] transition-colors",children:[a.jsx(Kt,{className:"w-4 h-4"}),n?"Ocultar":"Ver detalle"]})]}),n&&a.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-2 max-h-96 overflow-y-auto",children:[a.jsxs("div",{className:"grid grid-cols-6 gap-2 text-sm font-medium text-gray-600 border-b pb-2",children:[a.jsx("div",{children:"Caravana"}),a.jsx("div",{children:"Color"}),a.jsx("div",{children:"Categoría"}),a.jsx("div",{children:"Estado"}),a.jsx("div",{children:"Peso Salida"}),a.jsx("div",{children:"Valor"})]}),e.animales_seleccionados.map((g,y)=>{const b=parseFloat(g.peso_salida)||parseFloat(g.peso_ingreso)||0,j=parseFloat(e.precios_categoria?.[g.categoria]||0),w=b*j,A=!isNaN(w)&&isFinite(w)?w:0;return a.jsxs("div",{className:"grid grid-cols-6 gap-2 text-sm py-2 border-b border-gray-100 last:border-b-0",children:[a.jsx("div",{className:"font-medium",children:g.numero_caravana}),a.jsx("div",{children:g.color_caravana}),a.jsx("div",{children:g.categoria}),a.jsx("div",{children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g.estado_fisico==="excelente"?"bg-green-100 text-green-800":g.estado_fisico==="bueno"?"bg-blue-100 text-blue-800":g.estado_fisico==="malo"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:g.estado_fisico})}),a.jsxs("div",{className:"font-medium",children:[b.toFixed(1)," kg"]}),a.jsxs("div",{className:"font-medium",children:["$",A.toLocaleString("es-AR")]})]},g.id)})]})]}),e.documentos&&e.documentos.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(et,{className:"w-5 h-5"}),"Documentos (",e.documentos.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.documentos.map((g,y)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx(et,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-700 flex-1",children:g.name}),a.jsxs("span",{className:"text-xs text-gray-500",children:[(g.size/1024/1024).toFixed(1)," MB"]})]},y))})]})]})}const im=[{id:1,titulo:"Selección de Animales",icono:st},{id:2,titulo:"Datos de Venta",icono:et},{id:3,titulo:"Resumen y Confirmación",icono:cs}];function YP({onClose:e,onComplete:t}){const{createVenta:r}=Yb(),{compradores:n}=H0(),{proveedores:s}=Kb(),{showSuccess:l,showError:c}=ms(),[d,f]=_.useState(1),[m,x]=_.useState(()=>{const T=zv();return console.log("🏗️ Inicializando estado del wizard con fecha:",T),{fecha:T,tipo:"particular",comprador_id:"",precios_categoria:{},documentos:[],observaciones:"",animales_seleccionados:[]}}),[h,v]=_.useState({}),[g,y]=_.useState(!1);_.useEffect(()=>{const T=zv();console.log("🔄 Reseteando datos del wizard..."),console.log("📅 Nueva fecha inicializada:",T),f(1),x({fecha:T,tipo:"particular",comprador_id:"",precios_categoria:{},documentos:[],observaciones:"",animales_seleccionados:[]}),v({}),y(!1)},[]);const b=T=>{x(k=>({...k,...T})),v({})},j=T=>{const k={};if(T===1&&m.animales_seleccionados.length===0&&(k.animales_seleccionados="Debe seleccionar al menos un animal"),T===2){m.fecha||(k.fecha="La fecha es obligatoria"),m.tipo||(k.tipo="El tipo de venta es obligatorio"),m.comprador_id||(k.comprador_id="El comprador es obligatorio");const C=[...new Set(m.animales_seleccionados.map(I=>I.categoria))].filter(Boolean),M=[];C.forEach(I=>{const R=parseFloat(m.precios_categoria?.[I]||0);(!R||R<=0)&&(M.push(I),k[`precio_${I}`]=`El precio para ${I} debe ser mayor a 0`)}),M.length>0&&(k.precios_categoria=`Faltan precios para: ${M.join(", ")}`)}return v(k),Object.keys(k).length===0},w=()=>{j(d)&&f(T=>Math.min(T+1,im.length))},A=()=>{f(T=>Math.max(T-1,1))},S=async()=>{if(j(d)){y(!0);try{const T={fecha:m.fecha,tipo:m.tipo,comprador_id:m.comprador_id,precios_categoria:m.precios_categoria,documentos:m.documentos,observaciones:m.observaciones},k=m.animales_seleccionados.map(I=>{const R=parseFloat(I.peso_salida)||parseFloat(I.peso_ingreso),L=parseFloat(m.precios_categoria[I.categoria]||0);return{...I,peso_salida:R,precio_kilo:L,precio_final:R*L}}),{data:C,error:M}=await r(T,k);if(M)throw new Error(M);l(`Venta registrada exitosamente con ${k.length} animales`),e(),t&&t(C)}catch(T){console.error("Error al completar venta:",T),c("Error al registrar la venta: "+T.message)}finally{y(!1)}}},D=()=>{switch(d){case 1:return a.jsx(HP,{animalesSeleccionados:m.animales_seleccionados,onChange:T=>b({animales_seleccionados:T}),errores:h});case 2:return a.jsx(GP,{datos:m,onChange:b,errores:h});case 3:return a.jsx(KP,{datos:m,compradores:n,proveedores:s});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[95vh] flex flex-col my-8",children:[a.jsxs("div",{className:"bg-[#3C454A] text-white p-6 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5"}),"Nueva Venta"]}),a.jsx("button",{onClick:e,className:"text-white hover:text-gray-300 transition-colors",children:"✕"})]}),a.jsx("div",{className:"flex items-center justify-center mt-6 space-x-4",children:im.map((T,k)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`
                  flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all
                  ${d>=T.id?"bg-[#67806D] border-[#67806D] text-white":"border-gray-400 text-gray-400"}
                `,children:d>T.id?a.jsx(cs,{className:"w-5 h-5"}):a.jsx(T.icono,{className:"w-5 h-5"})}),a.jsxs("div",{className:"ml-2",children:[a.jsxs("div",{className:`text-sm font-medium ${d>=T.id?"text-white":"text-gray-400"}`,children:["Paso ",T.id]}),a.jsx("div",{className:`text-xs ${d>=T.id?"text-gray-200":"text-gray-500"}`,children:T.titulo})]}),k<im.length-1&&a.jsx(Xo,{className:"w-4 h-4 mx-4 text-gray-400"})]},T.id))})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 min-h-0",children:a.jsx(Sa,{mode:"wait",children:a.jsx(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:D()},d)})}),a.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-between flex-shrink-0",children:[a.jsxs("button",{onClick:A,disabled:d===1,className:`
              flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all
              ${d===1?"text-gray-400 cursor-not-allowed":"text-[#3C454A] hover:bg-gray-200"}
            `,children:[a.jsx(Zo,{className:"w-4 h-4"}),"Anterior"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancelar"}),d<im.length?a.jsxs("button",{onClick:w,className:"flex items-center gap-2 bg-[#67806D] text-white px-6 py-2 rounded-lg hover:bg-[#5a6b60] transition-all",children:["Siguiente",a.jsx(Xo,{className:"w-4 h-4"})]}):a.jsx("button",{onClick:S,disabled:g,className:"flex items-center gap-2 bg-[#67806D] text-white px-6 py-2 rounded-lg hover:bg-[#5a6b60] transition-all disabled:opacity-50",children:g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Procesando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(cs,{className:"w-4 h-4"}),"Completar Venta"]})})]})]})]})})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Im={};Im.version="0.18.5";var eA=1252,WP=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],tA=function(e){WP.indexOf(e)!=-1&&(eA=e)};function XP(){tA(1252)}var Kd=function(e){tA(e)};function ZP(){Kd(1200),XP()}var lm=function(t){return String.fromCharCode(t)},n4=function(t){return String.fromCharCode(t)},Bm,Oi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Yd(e){for(var t="",r=0,n=0,s=0,l=0,c=0,d=0,f=0,m=0;m<e.length;)r=e.charCodeAt(m++),l=r>>2,n=e.charCodeAt(m++),c=(r&3)<<4|n>>4,s=e.charCodeAt(m++),d=(n&15)<<2|s>>6,f=s&63,isNaN(n)?d=f=64:isNaN(s)&&(f=64),t+=Oi.charAt(l)+Oi.charAt(c)+Oi.charAt(d)+Oi.charAt(f);return t}function $s(e){var t="",r=0,n=0,s=0,l=0,c=0,d=0,f=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var m=0;m<e.length;)l=Oi.indexOf(e.charAt(m++)),c=Oi.indexOf(e.charAt(m++)),r=l<<2|c>>4,t+=String.fromCharCode(r),d=Oi.indexOf(e.charAt(m++)),n=(c&15)<<4|d>>2,d!==64&&(t+=String.fromCharCode(n)),f=Oi.indexOf(e.charAt(m++)),s=(d&3)<<6|f,f!==64&&(t+=String.fromCharCode(s));return t}var ht=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Xs=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Dl(e){return ht?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function s4(e){return ht?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Hn=function(t){return ht?Xs(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function V0(e){if(typeof ArrayBuffer>"u")return Hn(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function xu(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function QP(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var Wr=ht?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Xs(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(l){return Array.isArray(l)?l:[].slice.call(l)}))};function JP(e){for(var t=[],r=0,n=e.length+250,s=Dl(e.length+255),l=0;l<e.length;++l){var c=e.charCodeAt(l);if(c<128)s[r++]=c;else if(c<2048)s[r++]=192|c>>6&31,s[r++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var d=e.charCodeAt(++l)&1023;s[r++]=240|c>>8&7,s[r++]=128|c>>2&63,s[r++]=128|d>>6&15|(c&3)<<4,s[r++]=128|d&63}else s[r++]=224|c>>12&15,s[r++]=128|c>>6&63,s[r++]=128|c&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Dl(65535),n=65530)}return t.push(s.slice(0,r)),Wr(t)}var Fd=/\u0000/g,om=/[\u0001-\u0006]/g;function qo(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Kn(e,t){var r=""+e;return r.length>=t?r:Jt("0",t-r.length)+r}function Wb(e,t){var r=""+e;return r.length>=t?r:Jt(" ",t-r.length)+r}function zm(e,t){var r=""+e;return r.length>=t?r:r+Jt(" ",t-r.length)}function eM(e,t){var r=""+Math.round(e);return r.length>=t?r:Jt("0",t-r.length)+r}function tM(e,t){var r=""+e;return r.length>=t?r:Jt("0",t-r.length)+r}var i4=Math.pow(2,32);function Fo(e,t){if(e>i4||e<-i4)return eM(e,t);var r=Math.round(e);return tM(r,t)}function Um(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var l4=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Xp=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function rM(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var tr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},o4={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},aM={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function $m(e,t,r){for(var n=e<0?-1:1,s=e*n,l=0,c=1,d=0,f=1,m=0,x=0,h=Math.floor(s);m<t&&(h=Math.floor(s),d=h*c+l,x=h*m+f,!(s-h<5e-8));)s=1/(s-h),l=c,c=d,f=m,m=x;if(x>t&&(m>t?(x=f,d=l):(x=m,d=c)),!r)return[0,n*d,x];var v=Math.floor(n*d/x);return[v,n*d-v*x,x]}function cm(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),l=0,c=[],d={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),t&&t.date1904&&(n+=1462),d.u>.9999&&(d.u=0,++s==86400&&(d.T=s=0,++n,++d.D)),n===60)c=r?[1317,10,29]:[1900,2,29],l=3;else if(n===0)c=r?[1317,8,29]:[1900,1,0],l=6;else{n>60&&--n;var f=new Date(1900,0,1);f.setDate(f.getDate()+n-1),c=[f.getFullYear(),f.getMonth()+1,f.getDate()],l=f.getDay(),n<60&&(l=(l+6)%7),r&&(l=dM(f,c))}return d.y=c[0],d.m=c[1],d.d=c[2],d.S=s%60,s=Math.floor(s/60),d.M=s%60,s=Math.floor(s/60),d.H=s,d.q=l,d}var rA=new Date(1899,11,31,0,0,0),nM=rA.getTime(),sM=new Date(1900,2,1,0,0,0);function aA(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=sM&&(r+=1440*60*1e3),(r-(nM+(e.getTimezoneOffset()-rA.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Xb(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function iM(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function lM(e){var t=e<0?12:11,r=Xb(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function oM(e){var t=Xb(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function cM(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=lM(e):t===10?r=e.toFixed(10).substr(0,12):r=oM(e),Xb(iM(r.toUpperCase()))}function Uv(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):cM(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Mi(14,aA(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function dM(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function uM(e,t,r,n){var s="",l=0,c=0,d=r.y,f,m=0;switch(e){case 98:d=r.y+543;case 121:switch(t.length){case 1:case 2:f=d%100,m=2;break;default:f=d%1e4,m=4;break}break;case 109:switch(t.length){case 1:case 2:f=r.m,m=t.length;break;case 3:return Xp[r.m-1][1];case 5:return Xp[r.m-1][0];default:return Xp[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:f=r.d,m=t.length;break;case 3:return l4[r.q][0];default:return l4[r.q][1]}break;case 104:switch(t.length){case 1:case 2:f=1+(r.H+11)%12,m=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:f=r.H,m=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:f=r.M,m=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Kn(r.S,t.length):(n>=2?c=n===3?1e3:100:c=n===1?10:1,l=Math.round(c*(r.S+r.u)),l>=60*c&&(l=0),t==="s"?l===0?"0":""+l/c:(s=Kn(l,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":f=r.D*24+r.H;break;case"[m]":case"[mm]":f=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":f=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}m=t.length===3?1:2;break;case 101:f=d,m=1;break}var x=m>0?Kn(f,m):"";return x}function ki(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var nA=/%/g;function fM(e,t,r){var n=t.replace(nA,""),s=t.length-n.length;return Fs(e,n,r*Math.pow(10,2*s))+Jt("%",s)}function mM(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Fs(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function sA(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+sA(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var l=Math.floor(Math.log(t)*Math.LOG10E)%s;if(l<0&&(l+=s),r=(t/Math.pow(10,l)).toPrecision(n+1+(s+l)%s),r.indexOf("e")===-1){var c=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+l):r+="E+"+(c-l);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,f,m,x){return f+m+x.substr(0,(s+l)%s)+"."+x.substr(l)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var iA=/# (\?+)( ?)\/( ?)(\d+)/;function xM(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),l=Math.floor(s/n),c=s-l*n,d=n;return r+(l===0?"":""+l)+" "+(c===0?Jt(" ",e[1].length+1+e[4].length):Wb(c,e[1].length)+e[2]+"/"+e[3]+Kn(d,e[4].length))}function hM(e,t,r){return r+(t===0?"":""+t)+Jt(" ",e[1].length+2+e[4].length)}var lA=/^#*0*\.([0#]+)/,oA=/\).*[0#]/,cA=/\(###\) ###\\?-####/;function pa(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function c4(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function d4(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function pM(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function gM(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function wn(e,t,r){if(e.charCodeAt(0)===40&&!t.match(oA)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?wn("n",n,r):"("+wn("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return mM(e,t,r);if(t.indexOf("%")!==-1)return fM(e,t,r);if(t.indexOf("E")!==-1)return sA(t,r);if(t.charCodeAt(0)===36)return"$"+wn(e,t.substr(t.charAt(1)==" "?2:1),r);var s,l,c,d,f=Math.abs(r),m=r<0?"-":"";if(t.match(/^00+$/))return m+Fo(f,t.length);if(t.match(/^[#?]+$/))return s=Fo(r,0),s==="0"&&(s=""),s.length>t.length?s:pa(t.substr(0,t.length-s.length))+s;if(l=t.match(iA))return xM(l,f,m);if(t.match(/^#+0+$/))return m+Fo(f,t.length-t.indexOf("0"));if(l=t.match(lA))return s=c4(r,l[1].length).replace(/^([^\.]+)$/,"$1."+pa(l[1])).replace(/\.$/,"."+pa(l[1])).replace(/\.(\d*)$/,function(y,b){return"."+b+Jt("0",pa(l[1]).length-b.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),l=t.match(/^(0*)\.(#*)$/))return m+c4(f,l[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=t.match(/^#{1,3},##0(\.?)$/))return m+ki(Fo(f,0));if(l=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+wn(e,t,-r):ki(""+(Math.floor(r)+pM(r,l[1].length)))+"."+Kn(d4(r,l[1].length),l[1].length);if(l=t.match(/^#,#*,#0/))return wn(e,t.replace(/^#,#*,/,""),r);if(l=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=qo(wn(e,t.replace(/[\\-]/g,""),r)),c=0,qo(qo(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return c<s.length?s.charAt(c++):y==="0"?"0":""}));if(t.match(cA))return s=wn(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var x="";if(l=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(l[4].length,7),d=$m(f,Math.pow(10,c)-1,!1),s=""+m,x=Fs("n",l[1],d[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),s+=x+l[2]+"/"+l[3],x=zm(d[2],c),x.length<l[4].length&&(x=pa(l[4].substr(l[4].length-x.length))+x),s+=x,s;if(l=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(l[1].length,l[4].length),7),d=$m(f,Math.pow(10,c)-1,!0),m+(d[0]||(d[1]?"":"0"))+" "+(d[1]?Wb(d[1],c)+l[2]+"/"+l[3]+zm(d[2],c):Jt(" ",2*c+1+l[2].length+l[3].length));if(l=t.match(/^[#0?]+$/))return s=Fo(r,0),t.length<=s.length?s:pa(t.substr(0,t.length-s.length))+s;if(l=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),c=s.indexOf(".");var h=t.indexOf(".")-c,v=t.length-s.length-h;return pa(t.substr(0,h)+s+t.substr(t.length-v))}if(l=t.match(/^00,000\.([#0]*0)$/))return c=d4(r,l[1].length),r<0?"-"+wn(e,t,-r):ki(gM(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Kn(0,3-y.length):"")+y})+"."+Kn(c,l[1].length);switch(t){case"###,##0.00":return wn(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=ki(Fo(f,0));return g!=="0"?m+g:"";case"###,###.00":return wn(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return wn(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function vM(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Fs(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function bM(e,t,r){var n=t.replace(nA,""),s=t.length-n.length;return Fs(e,n,r*Math.pow(10,2*s))+Jt("%",s)}function dA(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+dA(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var l=Math.floor(Math.log(t)*Math.LOG10E)%s;if(l<0&&(l+=s),r=(t/Math.pow(10,l)).toPrecision(n+1+(s+l)%s),!r.match(/[Ee]/)){var c=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+l):r+="E+"+(c-l),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,f,m,x){return f+m+x.substr(0,(s+l)%s)+"."+x.substr(l)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ss(e,t,r){if(e.charCodeAt(0)===40&&!t.match(oA)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ss("n",n,r):"("+ss("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return vM(e,t,r);if(t.indexOf("%")!==-1)return bM(e,t,r);if(t.indexOf("E")!==-1)return dA(t,r);if(t.charCodeAt(0)===36)return"$"+ss(e,t.substr(t.charAt(1)==" "?2:1),r);var s,l,c,d,f=Math.abs(r),m=r<0?"-":"";if(t.match(/^00+$/))return m+Kn(f,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:pa(t.substr(0,t.length-s.length))+s;if(l=t.match(iA))return hM(l,f,m);if(t.match(/^#+0+$/))return m+Kn(f,t.length-t.indexOf("0"));if(l=t.match(lA))return s=(""+r).replace(/^([^\.]+)$/,"$1."+pa(l[1])).replace(/\.$/,"."+pa(l[1])),s=s.replace(/\.(\d*)$/,function(y,b){return"."+b+Jt("0",pa(l[1]).length-b.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),l=t.match(/^(0*)\.(#*)$/))return m+(""+f).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=t.match(/^#{1,3},##0(\.?)$/))return m+ki(""+f);if(l=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ss(e,t,-r):ki(""+r)+"."+Jt("0",l[1].length);if(l=t.match(/^#,#*,#0/))return ss(e,t.replace(/^#,#*,/,""),r);if(l=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=qo(ss(e,t.replace(/[\\-]/g,""),r)),c=0,qo(qo(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return c<s.length?s.charAt(c++):y==="0"?"0":""}));if(t.match(cA))return s=ss(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var x="";if(l=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(l[4].length,7),d=$m(f,Math.pow(10,c)-1,!1),s=""+m,x=Fs("n",l[1],d[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),s+=x+l[2]+"/"+l[3],x=zm(d[2],c),x.length<l[4].length&&(x=pa(l[4].substr(l[4].length-x.length))+x),s+=x,s;if(l=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(l[1].length,l[4].length),7),d=$m(f,Math.pow(10,c)-1,!0),m+(d[0]||(d[1]?"":"0"))+" "+(d[1]?Wb(d[1],c)+l[2]+"/"+l[3]+zm(d[2],c):Jt(" ",2*c+1+l[2].length+l[3].length));if(l=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:pa(t.substr(0,t.length-s.length))+s;if(l=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),c=s.indexOf(".");var h=t.indexOf(".")-c,v=t.length-s.length-h;return pa(t.substr(0,h)+s+t.substr(t.length-v))}if(l=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ss(e,t,-r):ki(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Kn(0,3-y.length):"")+y})+"."+Kn(0,l[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=ki(""+f);return g!=="0"?m+g:"";default:if(t.match(/\.[0#?]*$/))return ss(e,t.slice(0,t.lastIndexOf(".")),r)+pa(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Fs(e,t,r){return(r|0)===r?ss(e,t,r):wn(e,t,r)}function yM(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var uA=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fA(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Um(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(uA))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function jM(e,t,r,n){for(var s=[],l="",c=0,d="",f="t",m,x,h,v="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!Um(e,c))throw new Error("unrecognized character "+d+" in "+e);s[s.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";(h=e.charCodeAt(++c))!==34&&c<e.length;)l+=String.fromCharCode(h);s[s.length]={t:"t",v:l},++c;break;case"\\":var g=e.charAt(++c),y=g==="("||g===")"?g:"t";s[s.length]={t:y,v:g},++c;break;case"_":s[s.length]={t:"t",v:" "},c+=2;break;case"@":s[s.length]={t:"T",v:t},++c;break;case"B":case"b":if(e.charAt(c+1)==="1"||e.charAt(c+1)==="2"){if(m==null&&(m=cm(t,r,e.charAt(c+1)==="2"),m==null))return"";s[s.length]={t:"X",v:e.substr(c,2)},f=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||m==null&&(m=cm(t,r),m==null))return"";for(l=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)l+=d;d==="m"&&f.toLowerCase()==="h"&&(d="M"),d==="h"&&(d=v),s[s.length]={t:d,v:l},f=d;break;case"A":case"a":case"上":var b={t:d,v:d};if(m==null&&(m=cm(t,r)),e.substr(c,3).toUpperCase()==="A/P"?(m!=null&&(b.v=m.H>=12?"P":"A"),b.t="T",v="h",c+=3):e.substr(c,5).toUpperCase()==="AM/PM"?(m!=null&&(b.v=m.H>=12?"PM":"AM"),b.t="T",c+=5,v="h"):e.substr(c,5).toUpperCase()==="上午/下午"?(m!=null&&(b.v=m.H>=12?"下午":"上午"),b.t="T",c+=5,v="h"):(b.t="t",++c),m==null&&b.t==="T")return"";s[s.length]=b,f=d;break;case"[":for(l=d;e.charAt(c++)!=="]"&&c<e.length;)l+=e.charAt(c);if(l.slice(-1)!=="]")throw'unterminated "[" block: |'+l+"|";if(l.match(uA)){if(m==null&&(m=cm(t,r),m==null))return"";s[s.length]={t:"Z",v:l.toLowerCase()},f=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",fA(e)||(s[s.length]={t:"t",v:l}));break;case".":if(m!=null){for(l=d;++c<e.length&&(d=e.charAt(c))==="0";)l+=d;s[s.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)l+=d;s[s.length]={t:"n",v:l};break;case"?":for(l=d;e.charAt(++c)===d;)l+=d;s[s.length]={t:d,v:l},f=d;break;case"*":++c,(e.charAt(c)==" "||e.charAt(c)=="*")&&++c;break;case"(":case")":s[s.length]={t:n===1?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);s[s.length]={t:"D",v:l};break;case" ":s[s.length]={t:d,v:d},++c;break;case"$":s[s.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(d)===-1)throw new Error("unrecognized character "+d+" in "+e);s[s.length]={t:"t",v:d},++c;break}var j=0,w=0,A;for(c=s.length-1,f="t";c>=0;--c)switch(s[c].t){case"h":case"H":s[c].t=v,f="h",j<1&&(j=1);break;case"s":(A=s[c].v.match(/\.0+$/))&&(w=Math.max(w,A[0].length-1)),j<3&&(j=3);case"d":case"y":case"M":case"e":f=s[c].t;break;case"m":f==="s"&&(s[c].t="M",j<2&&(j=2));break;case"X":break;case"Z":j<1&&s[c].v.match(/[Hh]/)&&(j=1),j<2&&s[c].v.match(/[Mm]/)&&(j=2),j<3&&s[c].v.match(/[Ss]/)&&(j=3)}switch(j){case 0:break;case 1:m.u>=.5&&(m.u=0,++m.S),m.S>=60&&(m.S=0,++m.M),m.M>=60&&(m.M=0,++m.H);break;case 2:m.u>=.5&&(m.u=0,++m.S),m.S>=60&&(m.S=0,++m.M);break}var S="",D;for(c=0;c<s.length;++c)switch(s[c].t){case"t":case"T":case" ":case"D":break;case"X":s[c].v="",s[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[c].v=uM(s[c].t.charCodeAt(0),s[c].v,m,w),s[c].t="t";break;case"n":case"?":for(D=c+1;s[D]!=null&&((d=s[D].t)==="?"||d==="D"||(d===" "||d==="t")&&s[D+1]!=null&&(s[D+1].t==="?"||s[D+1].t==="t"&&s[D+1].v==="/")||s[c].t==="("&&(d===" "||d==="n"||d===")")||d==="t"&&(s[D].v==="/"||s[D].v===" "&&s[D+1]!=null&&s[D+1].t=="?"));)s[c].v+=s[D].v,s[D]={v:"",t:";"},++D;S+=s[c].v,c=D-1;break;case"G":s[c].t="t",s[c].v=Uv(t,r);break}var T="",k,C;if(S.length>0){S.charCodeAt(0)==40?(k=t<0&&S.charCodeAt(0)===45?-t:t,C=Fs("n",S,k)):(k=t<0&&n>1?-t:t,C=Fs("n",S,k),k<0&&s[0]&&s[0].t=="t"&&(C=C.substr(1),s[0].v="-"+s[0].v)),D=C.length-1;var M=s.length;for(c=0;c<s.length;++c)if(s[c]!=null&&s[c].t!="t"&&s[c].v.indexOf(".")>-1){M=c;break}var I=s.length;if(M===s.length&&C.indexOf("E")===-1){for(c=s.length-1;c>=0;--c)s[c]==null||"n?".indexOf(s[c].t)===-1||(D>=s[c].v.length-1?(D-=s[c].v.length,s[c].v=C.substr(D+1,s[c].v.length)):D<0?s[c].v="":(s[c].v=C.substr(0,D+1),D=-1),s[c].t="t",I=c);D>=0&&I<s.length&&(s[I].v=C.substr(0,D+1)+s[I].v)}else if(M!==s.length&&C.indexOf("E")===-1){for(D=C.indexOf(".")-1,c=M;c>=0;--c)if(!(s[c]==null||"n?".indexOf(s[c].t)===-1)){for(x=s[c].v.indexOf(".")>-1&&c===M?s[c].v.indexOf(".")-1:s[c].v.length-1,T=s[c].v.substr(x+1);x>=0;--x)D>=0&&(s[c].v.charAt(x)==="0"||s[c].v.charAt(x)==="#")&&(T=C.charAt(D--)+T);s[c].v=T,s[c].t="t",I=c}for(D>=0&&I<s.length&&(s[I].v=C.substr(0,D+1)+s[I].v),D=C.indexOf(".")+1,c=M;c<s.length;++c)if(!(s[c]==null||"n?(".indexOf(s[c].t)===-1&&c!==M)){for(x=s[c].v.indexOf(".")>-1&&c===M?s[c].v.indexOf(".")+1:0,T=s[c].v.substr(0,x);x<s[c].v.length;++x)D<C.length&&(T+=C.charAt(D++));s[c].v=T,s[c].t="t",I=c}}}for(c=0;c<s.length;++c)s[c]!=null&&"n?".indexOf(s[c].t)>-1&&(k=n>1&&t<0&&c>0&&s[c-1].v==="-"?-t:t,s[c].v=Fs(s[c].t,s[c].v,k),s[c].t="t");var R="";for(c=0;c!==s.length;++c)s[c]!=null&&(R+=s[c].v);return R}var u4=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function f4(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function NM(e,t){var r=yM(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var l=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,l];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var c=r[0].match(u4),d=r[1].match(u4);return f4(t,c)?[n,r[0]]:f4(t,d)?[n,r[1]]:[n,r[c!=null&&d!=null?2:1]]}return[n,l]}function Mi(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:tr)[e],n==null&&(n=r.table&&r.table[o4[e]]||tr[o4[e]]),n==null&&(n=aM[e]||"General");break}if(Um(n,0))return Uv(t,r);t instanceof Date&&(t=aA(t,r.date1904));var s=NM(n,t);if(Um(s[1]))return Uv(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return jM(s[1],t,r,s[0])}function mA(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(tr[r]==null){t<0&&(t=r);continue}if(tr[r]==e){t=r;break}}t<0&&(t=391)}return tr[t]=e,t}function G0(e){for(var t=0;t!=392;++t)e[t]!==void 0&&mA(e[t],t)}function K0(){tr=rM()}var xA=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function wM(e){var t=typeof e=="number"?tr[e]:e;return t=t.replace(xA,"(\\d+)"),new RegExp("^"+t+"$")}function _M(e,t,r){var n=-1,s=-1,l=-1,c=-1,d=-1,f=-1;(t.match(xA)||[]).forEach(function(h,v){var g=parseInt(r[v+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=g;break;case"d":l=g;break;case"h":c=g;break;case"s":f=g;break;case"m":c>=0?d=g:s=g;break}}),f>=0&&d==-1&&s>=0&&(d=s,s=-1);var m=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(l>=1?l:1)).slice(-2);m.length==7&&(m="0"+m),m.length==8&&(m="20"+m);var x=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2);return c==-1&&d==-1&&f==-1?m:n==-1&&s==-1&&l==-1?x:m+"T"+x}var EM=function(){var e={};e.version="1.2.0";function t(){for(var C=0,M=new Array(256),I=0;I!=256;++I)C=I,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,M[I]=C;return typeof Int32Array<"u"?new Int32Array(M):M}var r=t();function n(C){var M=0,I=0,R=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)L[R]=C[R];for(R=0;R!=256;++R)for(I=C[R],M=256+R;M<4096;M+=256)I=L[M]=I>>>8^C[I&255];var P=[];for(R=1;R!=16;++R)P[R-1]=typeof Int32Array<"u"?L.subarray(R*256,R*256+256):L.slice(R*256,R*256+256);return P}var s=n(r),l=s[0],c=s[1],d=s[2],f=s[3],m=s[4],x=s[5],h=s[6],v=s[7],g=s[8],y=s[9],b=s[10],j=s[11],w=s[12],A=s[13],S=s[14];function D(C,M){for(var I=M^-1,R=0,L=C.length;R<L;)I=I>>>8^r[(I^C.charCodeAt(R++))&255];return~I}function T(C,M){for(var I=M^-1,R=C.length-15,L=0;L<R;)I=S[C[L++]^I&255]^A[C[L++]^I>>8&255]^w[C[L++]^I>>16&255]^j[C[L++]^I>>>24]^b[C[L++]]^y[C[L++]]^g[C[L++]]^v[C[L++]]^h[C[L++]]^x[C[L++]]^m[C[L++]]^f[C[L++]]^d[C[L++]]^c[C[L++]]^l[C[L++]]^r[C[L++]];for(R+=15;L<R;)I=I>>>8^r[(I^C[L++])&255];return~I}function k(C,M){for(var I=M^-1,R=0,L=C.length,P=0,O=0;R<L;)P=C.charCodeAt(R++),P<128?I=I>>>8^r[(I^P)&255]:P<2048?(I=I>>>8^r[(I^(192|P>>6&31))&255],I=I>>>8^r[(I^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,O=C.charCodeAt(R++)&1023,I=I>>>8^r[(I^(240|P>>8&7))&255],I=I>>>8^r[(I^(128|P>>2&63))&255],I=I>>>8^r[(I^(128|O>>6&15|(P&3)<<4))&255],I=I>>>8^r[(I^(128|O&63))&255]):(I=I>>>8^r[(I^(224|P>>12&15))&255],I=I>>>8^r[(I^(128|P>>6&63))&255],I=I>>>8^r[(I^(128|P&63))&255]);return~I}return e.table=r,e.bstr=D,e.buf=T,e.str=k,e}(),Ot=function(){var t={};t.version="1.2.1";function r(q,re){for(var W=q.split("/"),J=re.split("/"),te=0,ae=0,pe=Math.min(W.length,J.length);te<pe;++te){if(ae=W[te].length-J[te].length)return ae;if(W[te]!=J[te])return W[te]<J[te]?-1:1}return W.length-J.length}function n(q){if(q.charAt(q.length-1)=="/")return q.slice(0,-1).indexOf("/")===-1?q:n(q.slice(0,-1));var re=q.lastIndexOf("/");return re===-1?q:q.slice(0,re+1)}function s(q){if(q.charAt(q.length-1)=="/")return s(q.slice(0,-1));var re=q.lastIndexOf("/");return re===-1?q:q.slice(re+1)}function l(q,re){typeof re=="string"&&(re=new Date(re));var W=re.getHours();W=W<<6|re.getMinutes(),W=W<<5|re.getSeconds()>>>1,q.write_shift(2,W);var J=re.getFullYear()-1980;J=J<<4|re.getMonth()+1,J=J<<5|re.getDate(),q.write_shift(2,J)}function c(q){var re=q.read_shift(2)&65535,W=q.read_shift(2)&65535,J=new Date,te=W&31;W>>>=5;var ae=W&15;W>>>=4,J.setMilliseconds(0),J.setFullYear(W+1980),J.setMonth(ae-1),J.setDate(te);var pe=re&31;re>>>=5;var we=re&63;return re>>>=6,J.setHours(re),J.setMinutes(we),J.setSeconds(pe<<1),J}function d(q){Ya(q,0);for(var re={},W=0;q.l<=q.length-4;){var J=q.read_shift(2),te=q.read_shift(2),ae=q.l+te,pe={};switch(J){case 21589:W=q.read_shift(1),W&1&&(pe.mtime=q.read_shift(4)),te>5&&(W&2&&(pe.atime=q.read_shift(4)),W&4&&(pe.ctime=q.read_shift(4))),pe.mtime&&(pe.mt=new Date(pe.mtime*1e3));break}q.l=ae,re[J]=pe}return re}var f;function m(){return f||(f={})}function x(q,re){if(q[0]==80&&q[1]==75)return wc(q,re);if((q[0]|32)==109&&(q[1]|32)==105)return Ix(q,re);if(q.length<512)throw new Error("CFB file size "+q.length+" < 512");var W=3,J=512,te=0,ae=0,pe=0,we=0,me=0,ve=[],ye=q.slice(0,512);Ya(ye,0);var Oe=h(ye);switch(W=Oe[0],W){case 3:J=512;break;case 4:J=4096;break;case 0:if(Oe[1]==0)return wc(q,re);default:throw new Error("Major Version: Expected 3 or 4 saw "+W)}J!==512&&(ye=q.slice(0,J),Ya(ye,28));var Me=q.slice(0,J);v(ye,W);var ze=ye.read_shift(4,"i");if(W===3&&ze!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ze);ye.l+=4,pe=ye.read_shift(4,"i"),ye.l+=4,ye.chk("00100000","Mini Stream Cutoff Size: "),we=ye.read_shift(4,"i"),te=ye.read_shift(4,"i"),me=ye.read_shift(4,"i"),ae=ye.read_shift(4,"i");for(var Pe=-1,Be=0;Be<109&&(Pe=ye.read_shift(4,"i"),!(Pe<0));++Be)ve[Be]=Pe;var Ze=g(q,J);j(me,ae,Ze,J,ve);var Et=A(Ze,pe,ve,J);Et[pe].name="!Directory",te>0&&we!==O&&(Et[we].name="!MiniFAT"),Et[ve[0]].name="!FAT",Et.fat_addrs=ve,Et.ssz=J;var St={},Ft=[],hs=[],ni=[];S(pe,Et,Ze,Ft,te,St,hs,we),y(hs,ni,Ft),Ft.shift();var un={FileIndex:hs,FullPaths:ni};return re&&re.raw&&(un.raw={header:Me,sectors:Ze}),un}function h(q){if(q[q.l]==80&&q[q.l+1]==75)return[0,0];q.chk(z,"Header Signature: "),q.l+=16;var re=q.read_shift(2,"u");return[q.read_shift(2,"u"),re]}function v(q,re){var W=9;switch(q.l+=2,W=q.read_shift(2)){case 9:if(re!=3)throw new Error("Sector Shift: Expected 9 saw "+W);break;case 12:if(re!=4)throw new Error("Sector Shift: Expected 12 saw "+W);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+W)}q.chk("0600","Mini Sector Shift: "),q.chk("000000000000","Reserved: ")}function g(q,re){for(var W=Math.ceil(q.length/re)-1,J=[],te=1;te<W;++te)J[te-1]=q.slice(te*re,(te+1)*re);return J[W-1]=q.slice(W*re),J}function y(q,re,W){for(var J=0,te=0,ae=0,pe=0,we=0,me=W.length,ve=[],ye=[];J<me;++J)ve[J]=ye[J]=J,re[J]=W[J];for(;we<ye.length;++we)J=ye[we],te=q[J].L,ae=q[J].R,pe=q[J].C,ve[J]===J&&(te!==-1&&ve[te]!==te&&(ve[J]=ve[te]),ae!==-1&&ve[ae]!==ae&&(ve[J]=ve[ae])),pe!==-1&&(ve[pe]=J),te!==-1&&J!=ve[J]&&(ve[te]=ve[J],ye.lastIndexOf(te)<we&&ye.push(te)),ae!==-1&&J!=ve[J]&&(ve[ae]=ve[J],ye.lastIndexOf(ae)<we&&ye.push(ae));for(J=1;J<me;++J)ve[J]===J&&(ae!==-1&&ve[ae]!==ae?ve[J]=ve[ae]:te!==-1&&ve[te]!==te&&(ve[J]=ve[te]));for(J=1;J<me;++J)if(q[J].type!==0){if(we=J,we!=ve[we])do we=ve[we],re[J]=re[we]+"/"+re[J];while(we!==0&&ve[we]!==-1&&we!=ve[we]);ve[J]=-1}for(re[0]+="/",J=1;J<me;++J)q[J].type!==2&&(re[J]+="/")}function b(q,re,W){for(var J=q.start,te=q.size,ae=[],pe=J;W&&te>0&&pe>=0;)ae.push(re.slice(pe*P,pe*P+P)),te-=P,pe=bl(W,pe*4);return ae.length===0?_e(0):Wr(ae).slice(0,q.size)}function j(q,re,W,J,te){var ae=O;if(q===O){if(re!==0)throw new Error("DIFAT chain shorter than expected")}else if(q!==-1){var pe=W[q],we=(J>>>2)-1;if(!pe)return;for(var me=0;me<we&&(ae=bl(pe,me*4))!==O;++me)te.push(ae);j(bl(pe,J-4),re-1,W,J,te)}}function w(q,re,W,J,te){var ae=[],pe=[];te||(te=[]);var we=J-1,me=0,ve=0;for(me=re;me>=0;){te[me]=!0,ae[ae.length]=me,pe.push(q[me]);var ye=W[Math.floor(me*4/J)];if(ve=me*4&we,J<4+ve)throw new Error("FAT boundary crossed: "+me+" 4 "+J);if(!q[ye])break;me=bl(q[ye],ve)}return{nodes:ae,data:y4([pe])}}function A(q,re,W,J){var te=q.length,ae=[],pe=[],we=[],me=[],ve=J-1,ye=0,Oe=0,Me=0,ze=0;for(ye=0;ye<te;++ye)if(we=[],Me=ye+re,Me>=te&&(Me-=te),!pe[Me]){me=[];var Pe=[];for(Oe=Me;Oe>=0;){Pe[Oe]=!0,pe[Oe]=!0,we[we.length]=Oe,me.push(q[Oe]);var Be=W[Math.floor(Oe*4/J)];if(ze=Oe*4&ve,J<4+ze)throw new Error("FAT boundary crossed: "+Oe+" 4 "+J);if(!q[Be]||(Oe=bl(q[Be],ze),Pe[Oe]))break}ae[Me]={nodes:we,data:y4([me])}}return ae}function S(q,re,W,J,te,ae,pe,we){for(var me=0,ve=J.length?2:0,ye=re[q].data,Oe=0,Me=0,ze;Oe<ye.length;Oe+=128){var Pe=ye.slice(Oe,Oe+128);Ya(Pe,64),Me=Pe.read_shift(2),ze=ty(Pe,0,Me-ve),J.push(ze);var Be={name:ze,type:Pe.read_shift(1),color:Pe.read_shift(1),L:Pe.read_shift(4,"i"),R:Pe.read_shift(4,"i"),C:Pe.read_shift(4,"i"),clsid:Pe.read_shift(16),state:Pe.read_shift(4,"i"),start:0,size:0},Ze=Pe.read_shift(2)+Pe.read_shift(2)+Pe.read_shift(2)+Pe.read_shift(2);Ze!==0&&(Be.ct=D(Pe,Pe.l-8));var Et=Pe.read_shift(2)+Pe.read_shift(2)+Pe.read_shift(2)+Pe.read_shift(2);Et!==0&&(Be.mt=D(Pe,Pe.l-8)),Be.start=Pe.read_shift(4,"i"),Be.size=Pe.read_shift(4,"i"),Be.size<0&&Be.start<0&&(Be.size=Be.type=0,Be.start=O,Be.name=""),Be.type===5?(me=Be.start,te>0&&me!==O&&(re[me].name="!StreamData")):Be.size>=4096?(Be.storage="fat",re[Be.start]===void 0&&(re[Be.start]=w(W,Be.start,re.fat_addrs,re.ssz)),re[Be.start].name=Be.name,Be.content=re[Be.start].data.slice(0,Be.size)):(Be.storage="minifat",Be.size<0?Be.size=0:me!==O&&Be.start!==O&&re[me]&&(Be.content=b(Be,re[me].data,(re[we]||{}).data))),Be.content&&Ya(Be.content,0),ae[ze]=Be,pe.push(Be)}}function D(q,re){return new Date((Za(q,re+4)/1e7*Math.pow(2,32)+Za(q,re)/1e7-11644473600)*1e3)}function T(q,re){return m(),x(f.readFileSync(q),re)}function k(q,re){var W=re&&re.type;switch(W||ht&&Buffer.isBuffer(q)&&(W="buffer"),W||"base64"){case"file":return T(q,re);case"base64":return x(Hn($s(q)),re);case"binary":return x(Hn(q),re)}return x(q,re)}function C(q,re){var W=re||{},J=W.root||"Root Entry";if(q.FullPaths||(q.FullPaths=[]),q.FileIndex||(q.FileIndex=[]),q.FullPaths.length!==q.FileIndex.length)throw new Error("inconsistent CFB structure");q.FullPaths.length===0&&(q.FullPaths[0]=J+"/",q.FileIndex[0]={name:J,type:5}),W.CLSID&&(q.FileIndex[0].clsid=W.CLSID),M(q)}function M(q){var re="Sh33tJ5";if(!Ot.find(q,"/"+re)){var W=_e(4);W[0]=55,W[1]=W[3]=50,W[2]=54,q.FileIndex.push({name:re,type:2,content:W,size:4,L:69,R:69,C:69}),q.FullPaths.push(q.FullPaths[0]+re),I(q)}}function I(q,re){C(q);for(var W=!1,J=!1,te=q.FullPaths.length-1;te>=0;--te){var ae=q.FileIndex[te];switch(ae.type){case 0:J?W=!0:(q.FileIndex.pop(),q.FullPaths.pop());break;case 1:case 2:case 5:J=!0,isNaN(ae.R*ae.L*ae.C)&&(W=!0),ae.R>-1&&ae.L>-1&&ae.R==ae.L&&(W=!0);break;default:W=!0;break}}if(!(!W&&!re)){var pe=new Date(1987,1,19),we=0,me=Object.create?Object.create(null):{},ve=[];for(te=0;te<q.FullPaths.length;++te)me[q.FullPaths[te]]=!0,q.FileIndex[te].type!==0&&ve.push([q.FullPaths[te],q.FileIndex[te]]);for(te=0;te<ve.length;++te){var ye=n(ve[te][0]);J=me[ye],J||(ve.push([ye,{name:s(ye).replace("/",""),type:1,clsid:G,ct:pe,mt:pe,content:null}]),me[ye]=!0)}for(ve.sort(function(ze,Pe){return r(ze[0],Pe[0])}),q.FullPaths=[],q.FileIndex=[],te=0;te<ve.length;++te)q.FullPaths[te]=ve[te][0],q.FileIndex[te]=ve[te][1];for(te=0;te<ve.length;++te){var Oe=q.FileIndex[te],Me=q.FullPaths[te];if(Oe.name=s(Me).replace("/",""),Oe.L=Oe.R=Oe.C=-(Oe.color=1),Oe.size=Oe.content?Oe.content.length:0,Oe.start=0,Oe.clsid=Oe.clsid||G,te===0)Oe.C=ve.length>1?1:-1,Oe.size=0,Oe.type=5;else if(Me.slice(-1)=="/"){for(we=te+1;we<ve.length&&n(q.FullPaths[we])!=Me;++we);for(Oe.C=we>=ve.length?-1:we,we=te+1;we<ve.length&&n(q.FullPaths[we])!=n(Me);++we);Oe.R=we>=ve.length?-1:we,Oe.type=1}else n(q.FullPaths[te+1]||"")==n(Me)&&(Oe.R=te+1),Oe.type=2}}}function R(q,re){var W=re||{};if(W.fileType=="mad")return Jn(q,W);switch(I(q),W.fileType){case"zip":return Zi(q,W)}var J=function(ze){for(var Pe=0,Be=0,Ze=0;Ze<ze.FileIndex.length;++Ze){var Et=ze.FileIndex[Ze];if(Et.content){var St=Et.content.length;St>0&&(St<4096?Pe+=St+63>>6:Be+=St+511>>9)}}for(var Ft=ze.FullPaths.length+3>>2,hs=Pe+7>>3,ni=Pe+127>>7,un=hs+Be+Ft+ni,Rn=un+127>>7,Qi=Rn<=109?0:Math.ceil((Rn-109)/127);un+Rn+Qi+127>>7>Rn;)Qi=++Rn<=109?0:Math.ceil((Rn-109)/127);var In=[1,Qi,Rn,ni,Ft,Be,Pe,0];return ze.FileIndex[0].size=Pe<<6,In[7]=(ze.FileIndex[0].start=In[0]+In[1]+In[2]+In[3]+In[4]+In[5])+(In[6]+7>>3),In}(q),te=_e(J[7]<<9),ae=0,pe=0;{for(ae=0;ae<8;++ae)te.write_shift(1,V[ae]);for(ae=0;ae<8;++ae)te.write_shift(2,0);for(te.write_shift(2,62),te.write_shift(2,3),te.write_shift(2,65534),te.write_shift(2,9),te.write_shift(2,6),ae=0;ae<3;++ae)te.write_shift(2,0);for(te.write_shift(4,0),te.write_shift(4,J[2]),te.write_shift(4,J[0]+J[1]+J[2]+J[3]-1),te.write_shift(4,0),te.write_shift(4,4096),te.write_shift(4,J[3]?J[0]+J[1]+J[2]-1:O),te.write_shift(4,J[3]),te.write_shift(-4,J[1]?J[0]-1:O),te.write_shift(4,J[1]),ae=0;ae<109;++ae)te.write_shift(-4,ae<J[2]?J[1]+ae:-1)}if(J[1])for(pe=0;pe<J[1];++pe){for(;ae<236+pe*127;++ae)te.write_shift(-4,ae<J[2]?J[1]+ae:-1);te.write_shift(-4,pe===J[1]-1?O:pe+1)}var we=function(ze){for(pe+=ze;ae<pe-1;++ae)te.write_shift(-4,ae+1);ze&&(++ae,te.write_shift(-4,O))};for(pe=ae=0,pe+=J[1];ae<pe;++ae)te.write_shift(-4,K.DIFSECT);for(pe+=J[2];ae<pe;++ae)te.write_shift(-4,K.FATSECT);we(J[3]),we(J[4]);for(var me=0,ve=0,ye=q.FileIndex[0];me<q.FileIndex.length;++me)ye=q.FileIndex[me],ye.content&&(ve=ye.content.length,!(ve<4096)&&(ye.start=pe,we(ve+511>>9)));for(we(J[6]+7>>3);te.l&511;)te.write_shift(-4,K.ENDOFCHAIN);for(pe=ae=0,me=0;me<q.FileIndex.length;++me)ye=q.FileIndex[me],ye.content&&(ve=ye.content.length,!(!ve||ve>=4096)&&(ye.start=pe,we(ve+63>>6)));for(;te.l&511;)te.write_shift(-4,K.ENDOFCHAIN);for(ae=0;ae<J[4]<<2;++ae){var Oe=q.FullPaths[ae];if(!Oe||Oe.length===0){for(me=0;me<17;++me)te.write_shift(4,0);for(me=0;me<3;++me)te.write_shift(4,-1);for(me=0;me<12;++me)te.write_shift(4,0);continue}ye=q.FileIndex[ae],ae===0&&(ye.start=ye.size?ye.start-1:O);var Me=ae===0&&W.root||ye.name;if(ve=2*(Me.length+1),te.write_shift(64,Me,"utf16le"),te.write_shift(2,ve),te.write_shift(1,ye.type),te.write_shift(1,ye.color),te.write_shift(-4,ye.L),te.write_shift(-4,ye.R),te.write_shift(-4,ye.C),ye.clsid)te.write_shift(16,ye.clsid,"hex");else for(me=0;me<4;++me)te.write_shift(4,0);te.write_shift(4,ye.state||0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,ye.start),te.write_shift(4,ye.size),te.write_shift(4,0)}for(ae=1;ae<q.FileIndex.length;++ae)if(ye=q.FileIndex[ae],ye.size>=4096)if(te.l=ye.start+1<<9,ht&&Buffer.isBuffer(ye.content))ye.content.copy(te,te.l,0,ye.size),te.l+=ye.size+511&-512;else{for(me=0;me<ye.size;++me)te.write_shift(1,ye.content[me]);for(;me&511;++me)te.write_shift(1,0)}for(ae=1;ae<q.FileIndex.length;++ae)if(ye=q.FileIndex[ae],ye.size>0&&ye.size<4096)if(ht&&Buffer.isBuffer(ye.content))ye.content.copy(te,te.l,0,ye.size),te.l+=ye.size+63&-64;else{for(me=0;me<ye.size;++me)te.write_shift(1,ye.content[me]);for(;me&63;++me)te.write_shift(1,0)}if(ht)te.l=te.length;else for(;te.l<te.length;)te.write_shift(1,0);return te}function L(q,re){var W=q.FullPaths.map(function(me){return me.toUpperCase()}),J=W.map(function(me){var ve=me.split("/");return ve[ve.length-(me.slice(-1)=="/"?2:1)]}),te=!1;re.charCodeAt(0)===47?(te=!0,re=W[0].slice(0,-1)+re):te=re.indexOf("/")!==-1;var ae=re.toUpperCase(),pe=te===!0?W.indexOf(ae):J.indexOf(ae);if(pe!==-1)return q.FileIndex[pe];var we=!ae.match(om);for(ae=ae.replace(Fd,""),we&&(ae=ae.replace(om,"!")),pe=0;pe<W.length;++pe)if((we?W[pe].replace(om,"!"):W[pe]).replace(Fd,"")==ae||(we?J[pe].replace(om,"!"):J[pe]).replace(Fd,"")==ae)return q.FileIndex[pe];return null}var P=64,O=-2,z="d0cf11e0a1b11ae1",V=[208,207,17,224,161,177,26,225],G="00000000000000000000000000000000",K={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:G,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(q,re,W){m();var J=R(q,W);f.writeFileSync(re,J)}function le(q){for(var re=new Array(q.length),W=0;W<q.length;++W)re[W]=String.fromCharCode(q[W]);return re.join("")}function ne(q,re){var W=R(q,re);switch(re&&re.type||"buffer"){case"file":return m(),f.writeFileSync(re.filename,W),W;case"binary":return typeof W=="string"?W:le(W);case"base64":return Yd(typeof W=="string"?W:le(W));case"buffer":if(ht)return Buffer.isBuffer(W)?W:Xs(W);case"array":return typeof W=="string"?Hn(W):W}return W}var Z;function F(q){try{var re=q.InflateRaw,W=new re;if(W._processChunk(new Uint8Array([3,0]),W._finishFlushFlag),W.bytesRead)Z=q;else throw new Error("zlib does not expose bytesRead")}catch(J){console.error("cannot use native zlib: "+(J.message||J))}}function U(q,re){if(!Z)return Hu(q,re);var W=Z.InflateRaw,J=new W,te=J._processChunk(q.slice(q.l),J._finishFlushFlag);return q.l+=J.bytesRead,te}function Y(q){return Z?Z.deflateRawSync(q):Uu(q)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],De=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ke(q){var re=(q<<1|q<<11)&139536|(q<<5|q<<15)&558144;return(re>>16|re>>8|re)&255}for(var fe=typeof Uint8Array<"u",Ee=fe?new Uint8Array(256):[],Ie=0;Ie<256;++Ie)Ee[Ie]=ke(Ie);function Ne(q,re){var W=Ee[q&255];return re<=8?W>>>8-re:(W=W<<8|Ee[q>>8&255],re<=16?W>>>16-re:(W=W<<8|Ee[q>>16&255],W>>>24-re))}function Je(q,re){var W=re&7,J=re>>>3;return(q[J]|(W<=6?0:q[J+1]<<8))>>>W&3}function qe(q,re){var W=re&7,J=re>>>3;return(q[J]|(W<=5?0:q[J+1]<<8))>>>W&7}function Bt(q,re){var W=re&7,J=re>>>3;return(q[J]|(W<=4?0:q[J+1]<<8))>>>W&15}function at(q,re){var W=re&7,J=re>>>3;return(q[J]|(W<=3?0:q[J+1]<<8))>>>W&31}function Re(q,re){var W=re&7,J=re>>>3;return(q[J]|(W<=1?0:q[J+1]<<8))>>>W&127}function Br(q,re,W){var J=re&7,te=re>>>3,ae=(1<<W)-1,pe=q[te]>>>J;return W<8-J||(pe|=q[te+1]<<8-J,W<16-J)||(pe|=q[te+2]<<16-J,W<24-J)||(pe|=q[te+3]<<24-J),pe&ae}function cn(q,re,W){var J=re&7,te=re>>>3;return J<=5?q[te]|=(W&7)<<J:(q[te]|=W<<J&255,q[te+1]=(W&7)>>8-J),re+3}function Zn(q,re,W){var J=re&7,te=re>>>3;return W=(W&1)<<J,q[te]|=W,re+1}function Ln(q,re,W){var J=re&7,te=re>>>3;return W<<=J,q[te]|=W&255,W>>>=8,q[te+1]=W,re+8}function zu(q,re,W){var J=re&7,te=re>>>3;return W<<=J,q[te]|=W&255,W>>>=8,q[te+1]=W&255,q[te+2]=W>>>8,re+16}function Zl(q,re){var W=q.length,J=2*W>re?2*W:re+5,te=0;if(W>=re)return q;if(ht){var ae=s4(J);if(q.copy)q.copy(ae);else for(;te<q.length;++te)ae[te]=q[te];return ae}else if(fe){var pe=new Uint8Array(J);if(pe.set)pe.set(q);else for(;te<W;++te)pe[te]=q[te];return pe}return q.length=J,q}function dn(q){for(var re=new Array(q),W=0;W<q;++W)re[W]=0;return re}function Ql(q,re,W){var J=1,te=0,ae=0,pe=0,we=0,me=q.length,ve=fe?new Uint16Array(32):dn(32);for(ae=0;ae<32;++ae)ve[ae]=0;for(ae=me;ae<W;++ae)q[ae]=0;me=q.length;var ye=fe?new Uint16Array(me):dn(me);for(ae=0;ae<me;++ae)ve[te=q[ae]]++,J<te&&(J=te),ye[ae]=0;for(ve[0]=0,ae=1;ae<=J;++ae)ve[ae+16]=we=we+ve[ae-1]<<1;for(ae=0;ae<me;++ae)we=q[ae],we!=0&&(ye[ae]=ve[we+16]++);var Oe=0;for(ae=0;ae<me;++ae)if(Oe=q[ae],Oe!=0)for(we=Ne(ye[ae],J)>>J-Oe,pe=(1<<J+4-Oe)-1;pe>=0;--pe)re[we|pe<<Oe]=Oe&15|ae<<4;return J}var xs=fe?new Uint16Array(512):dn(512),zr=fe?new Uint16Array(32):dn(32);if(!fe){for(var aa=0;aa<512;++aa)xs[aa]=0;for(aa=0;aa<32;++aa)zr[aa]=0}(function(){for(var q=[],re=0;re<32;re++)q.push(5);Ql(q,zr,32);var W=[];for(re=0;re<=143;re++)W.push(8);for(;re<=255;re++)W.push(9);for(;re<=279;re++)W.push(7);for(;re<=287;re++)W.push(8);Ql(W,xs,288)})();var xa=function(){for(var re=fe?new Uint8Array(32768):[],W=0,J=0;W<De.length-1;++W)for(;J<De[W+1];++J)re[J]=W;for(;J<32768;++J)re[J]=29;var te=fe?new Uint8Array(259):[];for(W=0,J=0;W<ee.length-1;++W)for(;J<ee[W+1];++J)te[J]=W;function ae(we,me){for(var ve=0;ve<we.length;){var ye=Math.min(65535,we.length-ve),Oe=ve+ye==we.length;for(me.write_shift(1,+Oe),me.write_shift(2,ye),me.write_shift(2,~ye&65535);ye-- >0;)me[me.l++]=we[ve++]}return me.l}function pe(we,me){for(var ve=0,ye=0,Oe=fe?new Uint16Array(32768):[];ye<we.length;){var Me=Math.min(65535,we.length-ye);if(Me<10){for(ve=cn(me,ve,+(ye+Me==we.length)),ve&7&&(ve+=8-(ve&7)),me.l=ve/8|0,me.write_shift(2,Me),me.write_shift(2,~Me&65535);Me-- >0;)me[me.l++]=we[ye++];ve=me.l*8;continue}ve=cn(me,ve,+(ye+Me==we.length)+2);for(var ze=0;Me-- >0;){var Pe=we[ye];ze=(ze<<5^Pe)&32767;var Be=-1,Ze=0;if((Be=Oe[ze])&&(Be|=ye&-32768,Be>ye&&(Be-=32768),Be<ye))for(;we[Be+Ze]==we[ye+Ze]&&Ze<250;)++Ze;if(Ze>2){Pe=te[Ze],Pe<=22?ve=Ln(me,ve,Ee[Pe+1]>>1)-1:(Ln(me,ve,3),ve+=5,Ln(me,ve,Ee[Pe-23]>>5),ve+=3);var Et=Pe<8?0:Pe-4>>2;Et>0&&(zu(me,ve,Ze-ee[Pe]),ve+=Et),Pe=re[ye-Be],ve=Ln(me,ve,Ee[Pe]>>3),ve-=3;var St=Pe<4?0:Pe-2>>1;St>0&&(zu(me,ve,ye-Be-De[Pe]),ve+=St);for(var Ft=0;Ft<Ze;++Ft)Oe[ze]=ye&32767,ze=(ze<<5^we[ye])&32767,++ye;Me-=Ze-1}else Pe<=143?Pe=Pe+48:ve=Zn(me,ve,1),ve=Ln(me,ve,Ee[Pe]),Oe[ze]=ye&32767,++ye}ve=Ln(me,ve,0)-1}return me.l=(ve+7)/8|0,me.l}return function(me,ve){return me.length<8?ae(me,ve):pe(me,ve)}}();function Uu(q){var re=_e(50+Math.floor(q.length*1.1)),W=xa(q,re);return re.slice(0,W)}var $u=fe?new Uint16Array(32768):dn(32768),qu=fe?new Uint16Array(32768):dn(32768),Yi=fe?new Uint16Array(128):dn(128),Wi=1,Qn=1;function Jl(q,re){var W=at(q,re)+257;re+=5;var J=at(q,re)+1;re+=5;var te=Bt(q,re)+4;re+=4;for(var ae=0,pe=fe?new Uint8Array(19):dn(19),we=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],me=1,ve=fe?new Uint8Array(8):dn(8),ye=fe?new Uint8Array(8):dn(8),Oe=pe.length,Me=0;Me<te;++Me)pe[Q[Me]]=ae=qe(q,re),me<ae&&(me=ae),ve[ae]++,re+=3;var ze=0;for(ve[0]=0,Me=1;Me<=me;++Me)ye[Me]=ze=ze+ve[Me-1]<<1;for(Me=0;Me<Oe;++Me)(ze=pe[Me])!=0&&(we[Me]=ye[ze]++);var Pe=0;for(Me=0;Me<Oe;++Me)if(Pe=pe[Me],Pe!=0){ze=Ee[we[Me]]>>8-Pe;for(var Be=(1<<7-Pe)-1;Be>=0;--Be)Yi[ze|Be<<Pe]=Pe&7|Me<<3}var Ze=[];for(me=1;Ze.length<W+J;)switch(ze=Yi[Re(q,re)],re+=ze&7,ze>>>=3){case 16:for(ae=3+Je(q,re),re+=2,ze=Ze[Ze.length-1];ae-- >0;)Ze.push(ze);break;case 17:for(ae=3+qe(q,re),re+=3;ae-- >0;)Ze.push(0);break;case 18:for(ae=11+Re(q,re),re+=7;ae-- >0;)Ze.push(0);break;default:Ze.push(ze),me<ze&&(me=ze);break}var Et=Ze.slice(0,W),St=Ze.slice(W);for(Me=W;Me<286;++Me)Et[Me]=0;for(Me=J;Me<30;++Me)St[Me]=0;return Wi=Ql(Et,$u,286),Qn=Ql(St,qu,30),re}function Xi(q,re){if(q[0]==3&&!(q[1]&3))return[Dl(re),2];for(var W=0,J=0,te=s4(re||1<<18),ae=0,pe=te.length>>>0,we=0,me=0;(J&1)==0;){if(J=qe(q,W),W+=3,J>>>1)J>>1==1?(we=9,me=5):(W=Jl(q,W),we=Wi,me=Qn);else{W&7&&(W+=8-(W&7));var ve=q[W>>>3]|q[(W>>>3)+1]<<8;if(W+=32,ve>0)for(!re&&pe<ae+ve&&(te=Zl(te,ae+ve),pe=te.length);ve-- >0;)te[ae++]=q[W>>>3],W+=8;continue}for(;;){!re&&pe<ae+32767&&(te=Zl(te,ae+32767),pe=te.length);var ye=Br(q,W,we),Oe=J>>>1==1?xs[ye]:$u[ye];if(W+=Oe&15,Oe>>>=4,(Oe>>>8&255)===0)te[ae++]=Oe;else{if(Oe==256)break;Oe-=257;var Me=Oe<8?0:Oe-4>>2;Me>5&&(Me=0);var ze=ae+ee[Oe];Me>0&&(ze+=Br(q,W,Me),W+=Me),ye=Br(q,W,me),Oe=J>>>1==1?zr[ye]:qu[ye],W+=Oe&15,Oe>>>=4;var Pe=Oe<4?0:Oe-2>>1,Be=De[Oe];for(Pe>0&&(Be+=Br(q,W,Pe),W+=Pe),!re&&pe<ze&&(te=Zl(te,ze+100),pe=te.length);ae<ze;)te[ae]=te[ae-Be],++ae}}}return re?[te,W+7>>>3]:[te.slice(0,ae),W+7>>>3]}function Hu(q,re){var W=q.slice(q.l||0),J=Xi(W,re);return q.l+=J[1],J[0]}function Nc(q,re){if(q)typeof console<"u"&&console.error(re);else throw new Error(re)}function wc(q,re){var W=q;Ya(W,0);var J=[],te=[],ae={FileIndex:J,FullPaths:te};C(ae,{root:re.root});for(var pe=W.length-4;(W[pe]!=80||W[pe+1]!=75||W[pe+2]!=5||W[pe+3]!=6)&&pe>=0;)--pe;W.l=pe+4,W.l+=4;var we=W.read_shift(2);W.l+=6;var me=W.read_shift(4);for(W.l=me,pe=0;pe<we;++pe){W.l+=20;var ve=W.read_shift(4),ye=W.read_shift(4),Oe=W.read_shift(2),Me=W.read_shift(2),ze=W.read_shift(2);W.l+=8;var Pe=W.read_shift(4),Be=d(W.slice(W.l+Oe,W.l+Oe+Me));W.l+=Oe+Me+ze;var Ze=W.l;W.l=Pe+4,_c(W,ve,ye,ae,Be),W.l=Ze}return ae}function _c(q,re,W,J,te){q.l+=2;var ae=q.read_shift(2),pe=q.read_shift(2),we=c(q);if(ae&8257)throw new Error("Unsupported ZIP encryption");for(var me=q.read_shift(4),ve=q.read_shift(4),ye=q.read_shift(4),Oe=q.read_shift(2),Me=q.read_shift(2),ze="",Pe=0;Pe<Oe;++Pe)ze+=String.fromCharCode(q[q.l++]);if(Me){var Be=d(q.slice(q.l,q.l+Me));(Be[21589]||{}).mt&&(we=Be[21589].mt),((te||{})[21589]||{}).mt&&(we=te[21589].mt)}q.l+=Me;var Ze=q.slice(q.l,q.l+ve);switch(pe){case 8:Ze=U(q,ye);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+pe)}var Et=!1;ae&8&&(me=q.read_shift(4),me==134695760&&(me=q.read_shift(4),Et=!0),ve=q.read_shift(4),ye=q.read_shift(4)),ve!=re&&Nc(Et,"Bad compressed size: "+re+" != "+ve),ye!=W&&Nc(Et,"Bad uncompressed size: "+W+" != "+ye),Tr(J,ze,Ze,{unsafe:!0,mt:we})}function Zi(q,re){var W=re||{},J=[],te=[],ae=_e(1),pe=W.compression?8:0,we=0,me=0,ve=0,ye=0,Oe=0,Me=q.FullPaths[0],ze=Me,Pe=q.FileIndex[0],Be=[],Ze=0;for(me=1;me<q.FullPaths.length;++me)if(ze=q.FullPaths[me].slice(Me.length),Pe=q.FileIndex[me],!(!Pe.size||!Pe.content||ze=="Sh33tJ5")){var Et=ye,St=_e(ze.length);for(ve=0;ve<ze.length;++ve)St.write_shift(1,ze.charCodeAt(ve)&127);St=St.slice(0,St.l),Be[Oe]=EM.buf(Pe.content,0);var Ft=Pe.content;pe==8&&(Ft=Y(Ft)),ae=_e(30),ae.write_shift(4,67324752),ae.write_shift(2,20),ae.write_shift(2,we),ae.write_shift(2,pe),Pe.mt?l(ae,Pe.mt):ae.write_shift(4,0),ae.write_shift(-4,Be[Oe]),ae.write_shift(4,Ft.length),ae.write_shift(4,Pe.content.length),ae.write_shift(2,St.length),ae.write_shift(2,0),ye+=ae.length,J.push(ae),ye+=St.length,J.push(St),ye+=Ft.length,J.push(Ft),ae=_e(46),ae.write_shift(4,33639248),ae.write_shift(2,0),ae.write_shift(2,20),ae.write_shift(2,we),ae.write_shift(2,pe),ae.write_shift(4,0),ae.write_shift(-4,Be[Oe]),ae.write_shift(4,Ft.length),ae.write_shift(4,Pe.content.length),ae.write_shift(2,St.length),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(4,0),ae.write_shift(4,Et),Ze+=ae.l,te.push(ae),Ze+=St.length,te.push(St),++Oe}return ae=_e(22),ae.write_shift(4,101010256),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,Oe),ae.write_shift(2,Oe),ae.write_shift(4,Ze),ae.write_shift(4,ye),ae.write_shift(2,0),Wr([Wr(J),Wr(te),ae])}var eo={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Vu(q,re){if(q.ctype)return q.ctype;var W=q.name||"",J=W.match(/\.([^\.]+)$/);return J&&eo[J[1]]||re&&(J=(W=re).match(/[\.\\]([^\.\\])+$/),J&&eo[J[1]])?eo[J[1]]:"application/octet-stream"}function Gu(q){for(var re=Yd(q),W=[],J=0;J<re.length;J+=76)W.push(re.slice(J,J+76));return W.join(`\r
`)+`\r
`}function Ec(q){var re=q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ve){var ye=ve.charCodeAt(0).toString(16).toUpperCase();return"="+(ye.length==1?"0"+ye:ye)});re=re.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),re.charAt(0)==`
`&&(re="=0D"+re.slice(1)),re=re.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var W=[],J=re.split(`\r
`),te=0;te<J.length;++te){var ae=J[te];if(ae.length==0){W.push("");continue}for(var pe=0;pe<ae.length;){var we=76,me=ae.slice(pe,pe+we);me.charAt(we-1)=="="?we--:me.charAt(we-2)=="="?we-=2:me.charAt(we-3)=="="&&(we-=3),me=ae.slice(pe,pe+we),pe+=we,pe<ae.length&&(me+="="),W.push(me)}}return W.join(`\r
`)}function Sc(q){for(var re=[],W=0;W<q.length;++W){for(var J=q[W];W<=q.length&&J.charAt(J.length-1)=="=";)J=J.slice(0,J.length-1)+q[++W];re.push(J)}for(var te=0;te<re.length;++te)re[te]=re[te].replace(/[=][0-9A-Fa-f]{2}/g,function(ae){return String.fromCharCode(parseInt(ae.slice(1),16))});return Hn(re.join(`\r
`))}function Ku(q,re,W){for(var J="",te="",ae="",pe,we=0;we<10;++we){var me=re[we];if(!me||me.match(/^\s*$/))break;var ve=me.match(/^(.*?):\s*([^\s].*)$/);if(ve)switch(ve[1].toLowerCase()){case"content-location":J=ve[2].trim();break;case"content-type":ae=ve[2].trim();break;case"content-transfer-encoding":te=ve[2].trim();break}}switch(++we,te.toLowerCase()){case"base64":pe=Hn($s(re.slice(we).join("")));break;case"quoted-printable":pe=Sc(re.slice(we));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+te)}var ye=Tr(q,J.slice(W.length),pe,{unsafe:!0});ae&&(ye.ctype=ae)}function Ix(q,re){if(le(q.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var W=re&&re.root||"",J=(ht&&Buffer.isBuffer(q)?q.toString("binary"):le(q)).split(`\r
`),te=0,ae="";for(te=0;te<J.length;++te)if(ae=J[te],!!/^Content-Location:/i.test(ae)&&(ae=ae.slice(ae.indexOf("file")),W||(W=ae.slice(0,ae.lastIndexOf("/")+1)),ae.slice(0,W.length)!=W))for(;W.length>0&&(W=W.slice(0,W.length-1),W=W.slice(0,W.lastIndexOf("/")+1),ae.slice(0,W.length)!=W););var pe=(J[1]||"").match(/boundary="(.*?)"/);if(!pe)throw new Error("MAD cannot find boundary");var we="--"+(pe[1]||""),me=[],ve=[],ye={FileIndex:me,FullPaths:ve};C(ye);var Oe,Me=0;for(te=0;te<J.length;++te){var ze=J[te];ze!==we&&ze!==we+"--"||(Me++&&Ku(ye,J.slice(Oe,te),W),Oe=te)}return ye}function Jn(q,re){var W=re||{},J=W.boundary||"SheetJS";J="------="+J;for(var te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+J.slice(2)+'"',"","",""],ae=q.FullPaths[0],pe=ae,we=q.FileIndex[0],me=1;me<q.FullPaths.length;++me)if(pe=q.FullPaths[me].slice(ae.length),we=q.FileIndex[me],!(!we.size||!we.content||pe=="Sh33tJ5")){pe=pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ze){return"_x"+Ze.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ze){return"_u"+Ze.charCodeAt(0).toString(16)+"_"});for(var ve=we.content,ye=ht&&Buffer.isBuffer(ve)?ve.toString("binary"):le(ve),Oe=0,Me=Math.min(1024,ye.length),ze=0,Pe=0;Pe<=Me;++Pe)(ze=ye.charCodeAt(Pe))>=32&&ze<128&&++Oe;var Be=Oe>=Me*4/5;te.push(J),te.push("Content-Location: "+(W.root||"file:///C:/SheetJS/")+pe),te.push("Content-Transfer-Encoding: "+(Be?"quoted-printable":"base64")),te.push("Content-Type: "+Vu(we,pe)),te.push(""),te.push(Be?Ec(ye):Gu(ye))}return te.push(J+`--\r
`),te.join(`\r
`)}function Cr(q){var re={};return C(re,q),re}function Tr(q,re,W,J){var te=J&&J.unsafe;te||C(q);var ae=!te&&Ot.find(q,re);if(!ae){var pe=q.FullPaths[0];re.slice(0,pe.length)==pe?pe=re:(pe.slice(-1)!="/"&&(pe+="/"),pe=(pe+re).replace("//","/")),ae={name:s(re),type:2},q.FileIndex.push(ae),q.FullPaths.push(pe),te||Ot.utils.cfb_gc(q)}return ae.content=W,ae.size=W?W.length:0,J&&(J.CLSID&&(ae.clsid=J.CLSID),J.mt&&(ae.mt=J.mt),J.ct&&(ae.ct=J.ct)),ae}function ai(q,re){C(q);var W=Ot.find(q,re);if(W){for(var J=0;J<q.FileIndex.length;++J)if(q.FileIndex[J]==W)return q.FileIndex.splice(J,1),q.FullPaths.splice(J,1),!0}return!1}function Ac(q,re,W){C(q);var J=Ot.find(q,re);if(J){for(var te=0;te<q.FileIndex.length;++te)if(q.FileIndex[te]==J)return q.FileIndex[te].name=s(W),q.FullPaths[te]=W,!0}return!1}function Bx(q){I(q,!0)}return t.find=L,t.read=k,t.parse=x,t.write=ne,t.writeFile=ce,t.utils={cfb_new:Cr,cfb_add:Tr,cfb_del:ai,cfb_mov:Ac,cfb_gc:Bx,ReadShift:Rd,CheckField:kA,prep_blob:Ya,bconcat:Wr,use_zlib:F,_deflateRaw:Uu,_inflateRaw:Hu,consts:K},t}();function SM(e){return typeof e=="string"?V0(e):Array.isArray(e)?QP(e):e}function hu(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=V0(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Xd(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([SM(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var l=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),chrome.downloads.download({url:l,filename:e,saveAs:!0});var c=document.createElement("a");if(c.download!=null)return c.download=e,c.href=l,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),l}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(e);return d.open("w"),d.encoding="binary",Array.isArray(t)&&(t=xu(t)),d.write(t),d.close(),t}catch(f){if(!f.message||!f.message.match(/onstruct/))throw f}throw new Error("cannot save file "+e)}function ea(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function m4(e,t){for(var r=[],n=ea(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function Zb(e){for(var t=[],r=ea(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function Y0(e){for(var t=[],r=ea(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function AM(e){for(var t=[],r=ea(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var qm=new Date(1899,11,30,0,0,0);function Fa(e,t){var r=e.getTime(),n=qm.getTime()+(e.getTimezoneOffset()-qm.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var hA=new Date,CM=qm.getTime()+(hA.getTimezoneOffset()-qm.getTimezoneOffset())*6e4,x4=hA.getTimezoneOffset();function pA(e){var t=new Date;return t.setTime(e*24*60*60*1e3+CM),t.getTimezoneOffset()!==x4&&t.setTime(t.getTime()+(t.getTimezoneOffset()-x4)*6e4),t}var h4=new Date("2017-02-19T19:06:09.000Z"),gA=isNaN(h4.getFullYear())?new Date("2/19/17"):h4,TM=gA.getFullYear()==2017;function wa(e,t){var r=new Date(e);if(TM)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(gA.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],l=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(l=new Date(l.getTime()-l.getTimezoneOffset()*60*1e3)),l}function W0(e,t){if(ht&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(l){return r[l]||l})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function La(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=La(e[r]));return t}function Jt(e,t){for(var r="";r.length<t;)r+=e;return r}function Ls(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,l){return r=-r,l}),!isNaN(t=Number(n)))?t/r:t}var DM=["january","february","march","april","may","june","july","august","september","october","november","december"];function Wd(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),l=t.getDate();if(isNaN(l))return r;var c=e.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&DM.indexOf(c)==-1)return r}else if(c.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||l>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function tt(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return ht?n=Xs(r):n=JP(r),Ot.utils.cfb_add(e,t,n)}Ot.utils.cfb_add(e,t,r)}else e.file(t,r)}function Qb(){return Ot.utils.cfb_new()}var vr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,OM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Jb=Zb(OM),ey=/[&<>'"]/g,kM=/[\u0000-\u0008\u000b-\u001f]/g;function wt(e){var t=e+"";return t.replace(ey,function(r){return Jb[r]}).replace(kM,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function p4(e){return wt(e).replace(/ /g,"_x0020_")}var vA=/[\u0000-\u001f]/g;function PM(e){var t=e+"";return t.replace(ey,function(r){return Jb[r]}).replace(/\n/g,"<br/>").replace(vA,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function MM(e){var t=e+"";return t.replace(ey,function(r){return Jb[r]}).replace(vA,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function FM(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function LM(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Zp(e){for(var t="",r=0,n=0,s=0,l=0,c=0,d=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){c=(n&31)<<6,c|=s&63,t+=String.fromCharCode(c);continue}if(l=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|l&63);continue}c=e.charCodeAt(r++),d=((n&7)<<18|(s&63)<<12|(l&63)<<6|c&63)-65536,t+=String.fromCharCode(55296+(d>>>10&1023)),t+=String.fromCharCode(56320+(d&1023))}return t}function g4(e){var t=Dl(2*e.length),r,n,s=1,l=0,c=0,d;for(n=0;n<e.length;n+=s)s=1,(d=e.charCodeAt(n))<128?r=d:d<224?(r=(d&31)*64+(e.charCodeAt(n+1)&63),s=2):d<240?(r=(d&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(d&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,c=55296+(r>>>10&1023),r=56320+(r&1023)),c!==0&&(t[l++]=c&255,t[l++]=c>>>8,c=0),t[l++]=r%256,t[l++]=r>>>8;return t.slice(0,l).toString("ucs2")}function v4(e){return Xs(e,"binary").toString("utf8")}var dm="foo bar bazâð£",Ld=ht&&(v4(dm)==Zp(dm)&&v4||g4(dm)==Zp(dm)&&g4)||Zp,Xd=ht?function(e){return Xs(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},RM=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}}(),bA=/(^\s|\s$|\n)/;function Xr(e,t){return"<"+e+(t.match(bA)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Zd(e){return ea(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Fe(e,t,r){return"<"+e+(r!=null?Zd(r):"")+(t!=null?(t.match(bA)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function $v(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function IM(e,t){switch(typeof e){case"string":var r=Fe("vt:lpwstr",wt(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Fe((e|0)==e?"vt:i4":"vt:r8",wt(String(e)));case"boolean":return Fe("vt:bool",e?"true":"false")}if(e instanceof Date)return Fe("vt:filetime",$v(e));throw new Error("Unable to serialize "+e)}var Mr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},lc=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Xa={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function BM(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,l=5;l>=0;--l)s=s*256+e[t+l];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function zM(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,l=0,c=n?-t:t;isFinite(c)?c==0?s=l=0:(s=Math.floor(Math.log(c)/Math.LN2),l=c*Math.pow(2,52-s),s<=-1023&&(!isFinite(l)||l<Math.pow(2,52))?s=-1022:(l-=Math.pow(2,52),s+=1023)):(s=2047,l=isNaN(t)?26985:0);for(var d=0;d<=5;++d,l/=256)e[r+d]=l&255;e[r+6]=(s&15)<<4|l&15,e[r+7]=s>>4|n}var b4=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,l=e[0][n].length;s<l;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},y4=ht?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Xs(t)})):b4(e)}:b4,j4=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(kd(e,s)));return n.join("").replace(Fd,"")},ty=ht?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Fd,""):j4(e,t,r)}:j4,N4=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},yA=ht?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):N4(e,t,r)}:N4,w4=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(zo(e,s)));return n.join("")},pu=ht?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):w4(t,r,n)}:w4,jA=function(e,t){var r=Za(e,t);return r>0?pu(e,t+4,t+4+r-1):""},NA=jA,wA=function(e,t){var r=Za(e,t);return r>0?pu(e,t+4,t+4+r-1):""},_A=wA,EA=function(e,t){var r=2*Za(e,t);return r>0?pu(e,t+4,t+4+r-1):""},SA=EA,AA=function(t,r){var n=Za(t,r);return n>0?ty(t,r+4,r+4+n):""},CA=AA,TA=function(e,t){var r=Za(e,t);return r>0?pu(e,t+4,t+4+r):""},DA=TA,OA=function(e,t){return BM(e,t)},Hm=OA,ry=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};ht&&(NA=function(t,r){if(!Buffer.isBuffer(t))return jA(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},_A=function(t,r){if(!Buffer.isBuffer(t))return wA(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},SA=function(t,r){if(!Buffer.isBuffer(t))return EA(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},CA=function(t,r){if(!Buffer.isBuffer(t))return AA(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},DA=function(t,r){if(!Buffer.isBuffer(t))return TA(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Hm=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):OA(t,r)},ry=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var zo=function(e,t){return e[t]},kd=function(e,t){return e[t+1]*256+e[t]},UM=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Za=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},bl=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},$M=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Rd(e,t){var r="",n,s,l=[],c,d,f,m;switch(t){case"dbcs":if(m=this.l,ht&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(f=0;f<e;++f)r+=String.fromCharCode(kd(this,m)),m+=2;e*=2;break;case"utf8":r=pu(this,this.l,this.l+e);break;case"utf16le":e*=2,r=ty(this,this.l,this.l+e);break;case"wstr":return Rd.call(this,e,"dbcs");case"lpstr-ansi":r=NA(this,this.l),e=4+Za(this,this.l);break;case"lpstr-cp":r=_A(this,this.l),e=4+Za(this,this.l);break;case"lpwstr":r=SA(this,this.l),e=4+2*Za(this,this.l);break;case"lpp4":e=4+Za(this,this.l),r=CA(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Za(this,this.l),r=DA(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(c=zo(this,this.l+e++))!==0;)l.push(lm(c));r=l.join("");break;case"_wstr":for(e=0,r="";(c=kd(this,this.l+e))!==0;)l.push(lm(c)),e+=2;e+=2,r=l.join("");break;case"dbcs-cont":for(r="",m=this.l,f=0;f<e;++f){if(this.lens&&this.lens.indexOf(m)!==-1)return c=zo(this,m),this.l=m+1,d=Rd.call(this,e-f,c?"dbcs-cont":"sbcs-cont"),l.join("")+d;l.push(lm(kd(this,m))),m+=2}r=l.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",m=this.l,f=0;f!=e;++f){if(this.lens&&this.lens.indexOf(m)!==-1)return c=zo(this,m),this.l=m+1,d=Rd.call(this,e-f,c?"dbcs-cont":"sbcs-cont"),l.join("")+d;l.push(lm(zo(this,m))),m+=1}r=l.join("");break;default:switch(e){case 1:return n=zo(this,this.l),this.l++,n;case 2:return n=(t==="i"?UM:kd)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?bl:$M)(this,this.l),this.l+=4,n):(s=Za(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=Hm(this,this.l):s=Hm([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=yA(this,this.l,e);break}}return this.l+=e,r}var qM=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},HM=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},VM=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function GM(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)VM(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var l=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var c=t.charCodeAt(s);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<l;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,qM(this,t,this.l);break;case 8:if(n=8,r==="f"){zM(this,t,this.l);break}case 16:break;case-4:n=4,HM(this,t,this.l);break}return this.l+=n,this}function kA(e,t){var r=yA(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ya(e,t){e.l=t,e.read_shift=Rd,e.chk=kA,e.write_shift=GM}function ds(e,t){e.l+=t}function _e(e){var t=Dl(e);return Ya(t,0),t}function Ma(){var e=[],t=ht?256:2048,r=function(m){var x=_e(m);return Ya(x,0),x},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},l=function(m){return n&&m<n.length-n.l?n:(s(),n=r(Math.max(m+1,t)))},c=function(){return s(),Wr(e)},d=function(m){s(),n=m,n.l==null&&(n.l=n.length),l(t)};return{next:l,push:d,end:c,_bufs:e}}function Te(e,t,r,n){var s=+t,l;if(!isNaN(s)){n||(n=B9[s].p||(r||[]).length||0),l=1+(s>=128?1:0)+1,n>=128&&++l,n>=16384&&++l,n>=2097152&&++l;var c=e.next(l);s<=127?c.write_shift(1,s):(c.write_shift(1,(s&127)+128),c.write_shift(1,s>>7));for(var d=0;d!=4;++d)if(n>=128)c.write_shift(1,(n&127)+128),n>>=7;else{c.write_shift(1,n);break}n>0&&ry(r)&&e.push(r)}}function Id(e,t,r){var n=La(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function _4(e,t,r){var n=La(e);return n.s=Id(n.s,t.s,r),n.e=Id(n.e,t.s,r),n}function Bd(e,t){if(e.cRel&&e.c<0)for(e=La(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=La(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=_t(e);return!e.cRel&&e.cRel!=null&&(r=WM(r)),!e.rRel&&e.rRel!=null&&(r=KM(r)),r}function Qp(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+oa(e.s.c)+":"+(e.e.cRel?"":"$")+oa(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Qr(e.s.r)+":"+(e.e.rRel?"":"$")+Qr(e.e.r):Bd(e.s,t.biff)+":"+Bd(e.e,t.biff)}function ay(e){return parseInt(YM(e),10)-1}function Qr(e){return""+(e+1)}function KM(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function YM(e){return e.replace(/\$(\d+)$/,"$1")}function ny(e){for(var t=XM(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function oa(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function WM(e){return e.replace(/^([A-Z])/,"$$$1")}function XM(e){return e.replace(/^\$([A-Z])/,"$1")}function ZM(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Fr(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function _t(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function an(e){var t=e.indexOf(":");return t==-1?{s:Fr(e),e:Fr(e)}:{s:Fr(e.slice(0,t)),e:Fr(e.slice(t+1))}}function pr(e,t){return typeof t>"u"||typeof t=="number"?pr(e.s,e.e):(typeof e!="string"&&(e=_t(e)),typeof t!="string"&&(t=_t(t)),e==t?e:e+":"+t)}function Ut(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,l=e.length;for(r=0;n<l&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<l&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===l||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=l&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=l&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function E4(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Mi(e.z,r?Fa(t):t)}catch{}try{return e.w=Mi((e.XF||{}).numFmtId||(r?14:0),r?Fa(t):t)}catch{return""+t}}function qs(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?gu[e.v]||e.v:t==null?E4(e,e.v):E4(e,t))}function ql(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function PA(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,l=e||(s?[]:{}),c=0,d=0;if(l&&n.origin!=null){if(typeof n.origin=="number")c=n.origin;else{var f=typeof n.origin=="string"?Fr(n.origin):n.origin;c=f.r,d=f.c}l["!ref"]||(l["!ref"]="A1:A1")}var m={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(l["!ref"]){var x=Ut(l["!ref"]);m.s.c=x.s.c,m.s.r=x.s.r,m.e.c=Math.max(m.e.c,x.e.c),m.e.r=Math.max(m.e.r,x.e.r),c==-1&&(m.e.r=c=x.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var v=0;v!=t[h].length;++v)if(!(typeof t[h][v]>"u")){var g={v:t[h][v]},y=c+h,b=d+v;if(m.s.r>y&&(m.s.r=y),m.s.c>b&&(m.s.c=b),m.e.r<y&&(m.e.r=y),m.e.c<b&&(m.e.c=b),t[h][v]&&typeof t[h][v]=="object"&&!Array.isArray(t[h][v])&&!(t[h][v]instanceof Date))g=t[h][v];else if(Array.isArray(g.v)&&(g.f=t[h][v][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||tr[14],n.cellDates?(g.t="d",g.w=Mi(g.z,Fa(g.v))):(g.t="n",g.v=Fa(g.v),g.w=Mi(g.z,g.v))):g.t="s";if(s)l[y]||(l[y]=[]),l[y][b]&&l[y][b].z&&(g.z=l[y][b].z),l[y][b]=g;else{var j=_t({c:b,r:y});l[j]&&l[j].z&&(g.z=l[j].z),l[j]=g}}}return m.s.c<1e7&&(l["!ref"]=pr(m)),l}function oc(e,t){return PA(null,e,t)}function QM(e){return e.read_shift(4,"i")}function Yn(e,t){return t||(t=_e(4)),t.write_shift(4,e),t}function ca(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Lr(e,t){var r=!1;return t==null&&(r=!0,t=_e(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function JM(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function eF(e,t){return t||(t=_e(4)),t.write_shift(2,0),t.write_shift(2,0),t}function sy(e,t){var r=e.l,n=e.read_shift(1),s=ca(e),l=[],c={t:s,h:s};if((n&1)!==0){for(var d=e.read_shift(4),f=0;f!=d;++f)l.push(JM(e));c.r=l}else c.r=[{ich:0,ifnt:0}];return e.l=r+t,c}function tF(e,t){var r=!1;return t==null&&(r=!0,t=_e(15+4*e.t.length)),t.write_shift(1,0),Lr(e.t,t),r?t.slice(0,t.l):t}var rF=sy;function aF(e,t){var r=!1;return t==null&&(r=!0,t=_e(23+4*e.t.length)),t.write_shift(1,1),Lr(e.t,t),t.write_shift(4,1),eF({},t),r?t.slice(0,t.l):t}function Mn(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Hl(e,t){return t==null&&(t=_e(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Vl(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Gl(e,t){return t==null&&(t=_e(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var nF=ca,MA=Lr;function iy(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Vm(e,t){var r=!1;return t==null&&(r=!0,t=_e(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var sF=ca,qv=iy,ly=Vm;function FA(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?Hm([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):bl(t,0)>>2;return r?s/100:s}function LA(e,t){t==null&&(t=_e(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function RA(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function iF(e,t){return t||(t=_e(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Kl=RA,cc=iF;function dc(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Ol(e,t){return(t||_e(8)).write_shift(8,e,"f")}function lF(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),l=e.read_shift(2,"i"),c=e.read_shift(1),d=e.read_shift(1),f=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var m=pF[s];m&&(t.rgb=L4(m));break;case 2:t.rgb=L4([c,d,f]);break;case 3:t.theme=s;break}return l!=0&&(t.tint=l>0?l/32767:l/32768),t}function Gm(e,t){if(t||(t=_e(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function oF(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function cF(e,t){t||(t=_e(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var IA=2,Ka=3,um=11,Km=19,fm=64,dF=65,uF=71,fF=4108,mF=4126,Kr=80,S4={1:{n:"CodePage",t:IA},2:{n:"Category",t:Kr},3:{n:"PresentationFormat",t:Kr},4:{n:"ByteCount",t:Ka},5:{n:"LineCount",t:Ka},6:{n:"ParagraphCount",t:Ka},7:{n:"SlideCount",t:Ka},8:{n:"NoteCount",t:Ka},9:{n:"HiddenCount",t:Ka},10:{n:"MultimediaClipCount",t:Ka},11:{n:"ScaleCrop",t:um},12:{n:"HeadingPairs",t:fF},13:{n:"TitlesOfParts",t:mF},14:{n:"Manager",t:Kr},15:{n:"Company",t:Kr},16:{n:"LinksUpToDate",t:um},17:{n:"CharacterCount",t:Ka},19:{n:"SharedDoc",t:um},22:{n:"HyperlinksChanged",t:um},23:{n:"AppVersion",t:Ka,p:"version"},24:{n:"DigSig",t:dF},26:{n:"ContentType",t:Kr},27:{n:"ContentStatus",t:Kr},28:{n:"Language",t:Kr},29:{n:"Version",t:Kr},255:{},2147483648:{n:"Locale",t:Km},2147483651:{n:"Behavior",t:Km},1919054434:{}},A4={1:{n:"CodePage",t:IA},2:{n:"Title",t:Kr},3:{n:"Subject",t:Kr},4:{n:"Author",t:Kr},5:{n:"Keywords",t:Kr},6:{n:"Comments",t:Kr},7:{n:"Template",t:Kr},8:{n:"LastAuthor",t:Kr},9:{n:"RevNumber",t:Kr},10:{n:"EditTime",t:fm},11:{n:"LastPrinted",t:fm},12:{n:"CreatedDate",t:fm},13:{n:"ModifiedDate",t:fm},14:{n:"PageCount",t:Ka},15:{n:"WordCount",t:Ka},16:{n:"CharCount",t:Ka},17:{n:"Thumbnail",t:uF},18:{n:"Application",t:Kr},19:{n:"DocSecurity",t:Ka},255:{},2147483648:{n:"Locale",t:Km},2147483651:{n:"Behavior",t:Km},1919054434:{}};function xF(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var hF=xF([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),pF=La(hF),gu={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},gF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},mm={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function BA(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function zA(e,t){var r=AM(gF),n=[],s;n[n.length]=vr,n[n.length]=Fe("Types",null,{xmlns:Mr.CT,"xmlns:xsd":Mr.xsd,"xmlns:xsi":Mr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(f){return Fe("Default",null,{Extension:f[0],ContentType:f[1]})}));var l=function(f){e[f]&&e[f].length>0&&(s=e[f][0],n[n.length]=Fe("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:mm[f][t.bookType]||mm[f].xlsx}))},c=function(f){(e[f]||[]).forEach(function(m){n[n.length]=Fe("Override",null,{PartName:(m[0]=="/"?"":"/")+m,ContentType:mm[f][t.bookType]||mm[f].xlsx})})},d=function(f){(e[f]||[]).forEach(function(m){n[n.length]=Fe("Override",null,{PartName:(m[0]=="/"?"":"/")+m,ContentType:r[f][0]})})};return l("workbooks"),c("sheets"),c("charts"),d("themes"),["strs","styles"].forEach(l),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),c("metadata"),d("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ut={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function UA(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Ho(e){var t=[vr,Fe("Relationships",null,{xmlns:Mr.RELS})];return ea(e["!id"]).forEach(function(r){t[t.length]=Fe("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function jt(e,t,r,n,s,l){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[ut.HLINK,ut.XPATH,ut.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}function vF(e){var t=[vr];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function C4(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function bF(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function yF(e){var t=[vr];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(C4(e[r][0],e[r][1])),t.push(bF("",e[r][0]));return t.push(C4("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function $A(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Im.version+"</meta:generator></office:meta></office:document-meta>"}var _l=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Jp(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=wt(t),n[n.length]=r?Fe(e,t,r):Xr(e,t))}function qA(e,t){var r=t||{},n=[vr,Fe("cp:coreProperties",null,{"xmlns:cp":Mr.CORE_PROPS,"xmlns:dc":Mr.dc,"xmlns:dcterms":Mr.dcterms,"xmlns:dcmitype":Mr.dcmitype,"xmlns:xsi":Mr.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&Jp("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:$v(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&Jp("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:$v(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var l=0;l!=_l.length;++l){var c=_l[l],d=r.Props&&r.Props[c[1]]!=null?r.Props[c[1]]:e?e[c[1]]:null;d===!0?d="1":d===!1?d="0":typeof d=="number"&&(d=String(d)),d!=null&&Jp(c[0],d,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Vo=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],HA=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function VA(e){var t=[],r=Fe;return e||(e={}),e.Application="SheetJS",t[t.length]=vr,t[t.length]=Fe("Properties",null,{xmlns:Mr.EXT_PROPS,"xmlns:vt":Mr.vt}),Vo.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=wt(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+wt(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function GA(e){var t=[vr,Fe("Properties",null,{xmlns:Mr.CUST_PROPS,"xmlns:vt":Mr.vt})];if(!e)return t.join("");var r=1;return ea(e).forEach(function(s){++r,t[t.length]=Fe("property",IM(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:wt(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var T4={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function jF(e,t){var r=[];return ea(T4).map(function(n){for(var s=0;s<_l.length;++s)if(_l[s][1]==n)return _l[s];for(s=0;s<Vo.length;++s)if(Vo[s][1]==n)return Vo[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Xr(T4[n[1]]||n[1],s))}}),Fe("DocumentProperties",r.join(""),{xmlns:Xa.o})}function NF(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&ea(e).forEach(function(l){if(Object.prototype.hasOwnProperty.call(e,l)){for(var c=0;c<_l.length;++c)if(l==_l[c][1])return;for(c=0;c<Vo.length;++c)if(l==Vo[c][1])return;for(c=0;c<r.length;++c)if(l==r[c])return;var d=e[l],f="string";typeof d=="number"?(f="float",d=String(d)):d===!0||d===!1?(f="boolean",d=d?"1":"0"):d=String(d),s.push(Fe(p4(l),d,{"dt:dt":f}))}}),t&&ea(t).forEach(function(l){if(Object.prototype.hasOwnProperty.call(t,l)&&!(e&&Object.prototype.hasOwnProperty.call(e,l))){var c=t[l],d="string";typeof c=="number"?(d="float",c=String(c)):c===!0||c===!1?(d="boolean",c=c?"1":"0"):c instanceof Date?(d="dateTime.tz",c=c.toISOString()):c=String(c),s.push(Fe(p4(l),c,{"dt:dt":d}))}}),"<"+n+' xmlns="'+Xa.o+'">'+s.join("")+"</"+n+">"}function wF(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var l=n/Math.pow(2,32)|0;l>0&&(n=n%Math.pow(2,32),s+=l);var c=_e(8);return c.write_shift(4,n),c.write_shift(4,s),c}function D4(e,t){var r=_e(4),n=_e(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=_e(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=wF(t);break;case 31:case 80:for(n=_e(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Wr([r,n])}var KA=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function _F(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function O4(e,t,r){var n=_e(8),s=[],l=[],c=8,d=0,f=_e(8),m=_e(8);if(f.write_shift(4,2),f.write_shift(4,1200),m.write_shift(4,1),l.push(f),s.push(m),c+=8+f.length,!t){m=_e(8),m.write_shift(4,0),s.unshift(m);var x=[_e(4)];for(x[0].write_shift(4,e.length),d=0;d<e.length;++d){var h=e[d][0];for(f=_e(8+2*(h.length+1)+(h.length%2?0:2)),f.write_shift(4,d+2),f.write_shift(4,h.length+1),f.write_shift(0,h,"dbcs");f.l!=f.length;)f.write_shift(1,0);x.push(f)}f=Wr(x),l.unshift(f),c+=8+f.length}for(d=0;d<e.length;++d)if(!(t&&!t[e[d][0]])&&!(KA.indexOf(e[d][0])>-1||HA.indexOf(e[d][0])>-1)&&e[d][1]!=null){var v=e[d][1],g=0;if(t){g=+t[e[d][0]];var y=r[g];if(y.p=="version"&&typeof v=="string"){var b=v.split(".");v=(+b[0]<<16)+(+b[1]||0)}f=D4(y.t,v)}else{var j=_F(v);j==-1&&(j=31,v=String(v)),f=D4(j,v)}l.push(f),m=_e(8),m.write_shift(4,t?g:2+d),s.push(m),c+=8+f.length}var w=8*(l.length+1);for(d=0;d<l.length;++d)s[d].write_shift(4,w),w+=l[d].length;return n.write_shift(4,c),n.write_shift(4,l.length),Wr([n].concat(s).concat(l))}function k4(e,t,r,n,s,l){var c=_e(s?68:48),d=[c];c.write_shift(2,65534),c.write_shift(2,0),c.write_shift(4,842412599),c.write_shift(16,Ot.utils.consts.HEADER_CLSID,"hex"),c.write_shift(4,s?2:1),c.write_shift(16,t,"hex"),c.write_shift(4,s?68:48);var f=O4(e,r,n);if(d.push(f),s){var m=O4(s,null,null);c.write_shift(16,l,"hex"),c.write_shift(4,68+f.length),d.push(m)}return Wr(d)}function EF(e,t){t||(t=_e(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function SF(e,t){return e.read_shift(t)===1}function ga(e,t){return t||(t=_e(2)),t.write_shift(2,+!!e),t}function YA(e){return e.read_shift(2,"u")}function En(e,t){return t||(t=_e(2)),t.write_shift(2,e),t}function WA(e,t,r){return r||(r=_e(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function XA(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var l=e.read_shift(1);l&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var c=n?e.read_shift(n,s):"";return c}function AF(e){var t=e.t||"",r=_e(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=_e(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return Wr(s)}function CF(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function TF(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):CF(e,n,r)}function DF(e,t,r){if(r.biff>5)return TF(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function ZA(e,t,r){return r||(r=_e(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function P4(e,t){t||(t=_e(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function OF(e){var t=_e(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),l=s>-1?31:23;switch(n.charAt(0)){case"#":l=28;break;case".":l&=-3;break}t.write_shift(4,2),t.write_shift(4,l);var c=[8,6815827,6619237,4849780,83];for(r=0;r<c.length;++r)t.write_shift(4,c[r]);if(l==28)n=n.slice(1),P4(n,t);else if(l&2){for(c="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<c.length;++r)t.write_shift(1,parseInt(c[r],16));var d=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(d.length+1)),r=0;r<d.length;++r)t.write_shift(2,d.charCodeAt(r));t.write_shift(2,0),l&8&&P4(s>-1?n.slice(s+1):"",t)}else{for(c="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<c.length;++r)t.write_shift(1,parseInt(c[r],16));for(var f=0;n.slice(f*3,f*3+3)=="../"||n.slice(f*3,f*3+3)=="..\\";)++f;for(t.write_shift(2,f),t.write_shift(4,n.length-3*f+1),r=0;r<n.length-3*f;++r)t.write_shift(1,n.charCodeAt(r+3*f)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function kl(e,t,r,n){return n||(n=_e(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function kF(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),l=e.read_shift(n,"i"),c=e.read_shift(n,"i");return[s,l,c]}function PF(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function QA(e,t){return t||(t=_e(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function oy(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var l=_e(s);return l.write_shift(2,n),l.write_shift(2,t),s>4&&l.write_shift(2,29282),s>6&&l.write_shift(2,1997),s>8&&(l.write_shift(2,49161),l.write_shift(2,1),l.write_shift(2,1798),l.write_shift(2,0)),l}function MF(e,t){var r=!t||t.biff==8,n=_e(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function FF(e,t){var r=!t||t.biff>=8?2:1,n=_e(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function LF(e,t){var r=_e(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=AF(e[s]);var l=Wr([r].concat(n));return l.parts=[r.length].concat(n.map(function(c){return c.length})),l}function RF(){var e=_e(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function IF(e){var t=_e(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function BF(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,l=_e(s);return l.write_shift(2,e.sz*20),l.write_shift(4,0),l.write_shift(2,400),l.write_shift(4,0),l.write_shift(2,0),l.write_shift(1,r.length),n||l.write_shift(1,1),l.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),l}function zF(e,t,r,n){var s=_e(10);return kl(e,t,n,s),s.write_shift(4,r),s}function UF(e,t,r,n,s){var l=!s||s.biff==8,c=_e(8+ +l+(1+l)*r.length);return kl(e,t,n,c),c.write_shift(2,r.length),l&&c.write_shift(1,1),c.write_shift((1+l)*r.length,r,l?"utf16le":"sbcs"),c}function $F(e,t,r,n){var s=r&&r.biff==5;n||(n=_e(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var l=n.length>n.l?n.slice(0,n.l):n;return l.l==null&&(l.l=l.length),l}function qF(e,t){var r=t.biff==8||!t.biff?4:2,n=_e(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function M4(e,t,r,n){var s=r&&r.biff==5;n||(n=_e(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var l=0;return e.numFmtId>0&&s&&(l|=1024),n.write_shift(4,l),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function HF(e){var t=_e(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function VF(e,t,r,n,s,l){var c=_e(8);return kl(e,t,n,c),WA(r,l,c),c}function GF(e,t,r,n){var s=_e(14);return kl(e,t,n,s),Ol(r,s),s}function KF(e,t,r){if(r.biff<8)return YF(e,t,r);for(var n=[],s=e.l+t,l=e.read_shift(r.biff>8?4:2);l--!==0;)n.push(kF(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function YF(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=XA(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function WF(e){var t=_e(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)QA(e[r],t);return t}function XF(e){var t=_e(24),r=Fr(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return Wr([t,OF(e[1])])}function ZF(e){var t=e[1].Tooltip,r=_e(10+2*(t.length+1));r.write_shift(2,2048);var n=Fr(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function QF(e){return e||(e=_e(4)),e.write_shift(2,1),e.write_shift(2,1),e}function JF(e,t,r){if(!r.cellStyles)return ds(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(n),d=e.read_shift(n),f=e.read_shift(2);n==2&&(e.l+=2);var m={s,e:l,w:c,ixfe:d,flags:f};return(r.biff>=5||!r.biff)&&(m.level=f>>8&7),m}function eL(e,t){var r=_e(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function tL(e){for(var t=_e(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function rL(e,t,r){var n=_e(15);return bu(n,e,t),n.write_shift(8,r,"f"),n}function aL(e,t,r){var n=_e(9);return bu(n,e,t),n.write_shift(2,r),n}var nL=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Zb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(d,f){var m=[],x=Dl(1);switch(f.type){case"base64":x=Hn($s(d));break;case"binary":x=Hn(d);break;case"buffer":case"array":x=d;break}Ya(x,0);var h=x.read_shift(1),v=!!(h&136),g=!1,y=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,v=!0;break;case 49:g=!0,v=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var b=0,j=521;h==2&&(b=x.read_shift(2)),x.l+=3,h!=2&&(b=x.read_shift(4)),b>1048576&&(b=1e6),h!=2&&(j=x.read_shift(2));var w=x.read_shift(2),A=f.codepage||1252;h!=2&&(x.l+=16,x.read_shift(1),x[x.l]!==0&&(A=e[x[x.l]]),x.l+=1,x.l+=2),y&&(x.l+=36);for(var S=[],D={},T=Math.min(x.length,h==2?521:j-10-(g?264:0)),k=y?32:11;x.l<T&&x[x.l]!=13;)switch(D={},D.name=Bm.utils.decode(A,x.slice(x.l,x.l+k)).replace(/[\u0000\r\n].*$/g,""),x.l+=k,D.type=String.fromCharCode(x.read_shift(1)),h!=2&&!y&&(D.offset=x.read_shift(4)),D.len=x.read_shift(1),h==2&&(D.offset=x.read_shift(2)),D.dec=x.read_shift(1),D.name.length&&S.push(D),h!=2&&(x.l+=y?13:14),D.type){case"B":(!g||D.len!=8)&&f.WTF&&console.log("Skipping "+D.name+":"+D.type);break;case"G":case"P":f.WTF&&console.log("Skipping "+D.name+":"+D.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+D.type)}if(x[x.l]!==13&&(x.l=j-1),x.read_shift(1)!==13)throw new Error("DBF Terminator not found "+x.l+" "+x[x.l]);x.l=j;var C=0,M=0;for(m[0]=[],M=0;M!=S.length;++M)m[0][M]=S[M].name;for(;b-- >0;){if(x[x.l]===42){x.l+=w;continue}for(++x.l,m[++C]=[],M=0,M=0;M!=S.length;++M){var I=x.slice(x.l,x.l+S[M].len);x.l+=S[M].len,Ya(I,0);var R=Bm.utils.decode(A,I);switch(S[M].type){case"C":R.trim().length&&(m[C][M]=R.replace(/\s+$/,""));break;case"D":R.length===8?m[C][M]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):m[C][M]=R;break;case"F":m[C][M]=parseFloat(R.trim());break;case"+":case"I":m[C][M]=y?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":m[C][M]=!0;break;case"N":case"F":m[C][M]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!v)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));m[C][M]="##MEMO##"+(y?parseInt(R.trim(),10):I.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(m[C][M]=+R||0);break;case"@":m[C][M]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":m[C][M]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":m[C][M]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":m[C][M]=-I.read_shift(-8,"f");break;case"B":if(g&&S[M].len==8){m[C][M]=I.read_shift(8,"f");break}case"G":case"P":I.l+=S[M].len;break;case"0":if(S[M].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[M].type)}}}if(h!=2&&x.l<x.length&&x[x.l++]!=26)throw new Error("DBF EOF Marker missing "+(x.l-1)+" of "+x.length+" "+x[x.l-1].toString(16));return f&&f.sheetRows&&(m=m.slice(0,f.sheetRows)),f.DBF=S,m}function n(d,f){var m=f||{};m.dateNF||(m.dateNF="yyyymmdd");var x=oc(r(d,m),m);return x["!cols"]=m.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete m.DBF,x}function s(d,f){try{return ql(n(d,f),f)}catch(m){if(f&&f.WTF)throw m}return{SheetNames:[],Sheets:{}}}var l={B:8,C:250,L:1,D:8,"?":0,"":0};function c(d,f){var m=f||{};if(+m.codepage>=0&&Kd(+m.codepage),m.type=="string")throw new Error("Cannot write DBF to JS string");var x=Ma(),h=Qm(d,{header:1,raw:!0,cellDates:!0}),v=h[0],g=h.slice(1),y=d["!cols"]||[],b=0,j=0,w=0,A=1;for(b=0;b<v.length;++b){if(((y[b]||{}).DBF||{}).name){v[b]=y[b].DBF.name,++w;continue}if(v[b]!=null){if(++w,typeof v[b]=="number"&&(v[b]=v[b].toString(10)),typeof v[b]!="string")throw new Error("DBF Invalid column name "+v[b]+" |"+typeof v[b]+"|");if(v.indexOf(v[b])!==b){for(j=0;j<1024;++j)if(v.indexOf(v[b]+"_"+j)==-1){v[b]+="_"+j;break}}}}var S=Ut(d["!ref"]),D=[],T=[],k=[];for(b=0;b<=S.e.c-S.s.c;++b){var C="",M="",I=0,R=[];for(j=0;j<g.length;++j)g[j][b]!=null&&R.push(g[j][b]);if(R.length==0||v[b]==null){D[b]="?";continue}for(j=0;j<R.length;++j){switch(typeof R[j]){case"number":M="B";break;case"string":M="C";break;case"boolean":M="L";break;case"object":M=R[j]instanceof Date?"D":"C";break;default:M="C"}I=Math.max(I,String(R[j]).length),C=C&&C!=M?"C":M}I>250&&(I=250),M=((y[b]||{}).DBF||{}).type,M=="C"&&y[b].DBF.len>I&&(I=y[b].DBF.len),C=="B"&&M=="N"&&(C="N",k[b]=y[b].DBF.dec,I=y[b].DBF.len),T[b]=C=="C"||M=="N"?I:l[C]||0,A+=T[b],D[b]=C}var L=x.next(32);for(L.write_shift(4,318902576),L.write_shift(4,g.length),L.write_shift(2,296+32*w),L.write_shift(2,A),b=0;b<4;++b)L.write_shift(4,0);for(L.write_shift(4,0|(+t[eA]||3)<<8),b=0,j=0;b<v.length;++b)if(v[b]!=null){var P=x.next(32),O=(v[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,O,"sbcs"),P.write_shift(1,D[b]=="?"?"C":D[b],"sbcs"),P.write_shift(4,j),P.write_shift(1,T[b]||l[D[b]]||0),P.write_shift(1,k[b]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),j+=T[b]||l[D[b]]||0}var z=x.next(264);for(z.write_shift(4,13),b=0;b<65;++b)z.write_shift(4,0);for(b=0;b<g.length;++b){var V=x.next(A);for(V.write_shift(1,0),j=0;j<v.length;++j)if(v[j]!=null)switch(D[j]){case"L":V.write_shift(1,g[b][j]==null?63:g[b][j]?84:70);break;case"B":V.write_shift(8,g[b][j]||0,"f");break;case"N":var G="0";for(typeof g[b][j]=="number"&&(G=g[b][j].toFixed(k[j]||0)),w=0;w<T[j]-G.length;++w)V.write_shift(1,32);V.write_shift(1,G,"sbcs");break;case"D":g[b][j]?(V.write_shift(4,("0000"+g[b][j].getFullYear()).slice(-4),"sbcs"),V.write_shift(2,("00"+(g[b][j].getMonth()+1)).slice(-2),"sbcs"),V.write_shift(2,("00"+g[b][j].getDate()).slice(-2),"sbcs")):V.write_shift(8,"00000000","sbcs");break;case"C":var K=String(g[b][j]!=null?g[b][j]:"").slice(0,T[j]);for(V.write_shift(1,K,"sbcs"),w=0;w<T[j]-K.length;++w)V.write_shift(1,32);break}}return x.next(1).write_shift(1,26),x.end()}return{to_workbook:s,to_sheet:n,from_sheet:c}}(),sL=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ea(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(v,g){var y=e[g];return typeof y=="number"?n4(y):y},n=function(v,g,y){var b=g.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return b==59?v:n4(b)};e["|"]=254;function s(v,g){switch(g.type){case"base64":return l($s(v),g);case"binary":return l(v,g);case"buffer":return l(ht&&Buffer.isBuffer(v)?v.toString("binary"):xu(v),g);case"array":return l(W0(v),g)}throw new Error("Unrecognized type "+g.type)}function l(v,g){var y=v.split(/[\n\r]+/),b=-1,j=-1,w=0,A=0,S=[],D=[],T=null,k={},C=[],M=[],I=[],R=0,L;for(+g.codepage>=0&&Kd(+g.codepage);w!==y.length;++w){R=0;var P=y[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),O=P.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),z=O[0],V;if(P.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&D.push(P.slice(3).replace(/;;/g,";"));break;case"C":var G=!1,K=!1,ce=!1,le=!1,ne=-1,Z=-1;for(A=1;A<O.length;++A)switch(O[A].charAt(0)){case"A":break;case"X":j=parseInt(O[A].slice(1))-1,K=!0;break;case"Y":for(b=parseInt(O[A].slice(1))-1,K||(j=0),L=S.length;L<=b;++L)S[L]=[];break;case"K":V=O[A].slice(1),V.charAt(0)==='"'?V=V.slice(1,V.length-1):V==="TRUE"?V=!0:V==="FALSE"?V=!1:isNaN(Ls(V))?isNaN(Wd(V).getDate())||(V=wa(V)):(V=Ls(V),T!==null&&fA(T)&&(V=pA(V))),G=!0;break;case"E":le=!0;var F=aR(O[A].slice(1),{r:b,c:j});S[b][j]=[S[b][j],F];break;case"S":ce=!0,S[b][j]=[S[b][j],"S5S"];break;case"G":break;case"R":ne=parseInt(O[A].slice(1))-1;break;case"C":Z=parseInt(O[A].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}if(G&&(S[b][j]&&S[b][j].length==2?S[b][j][0]=V:S[b][j]=V,T=null),ce){if(le)throw new Error("SYLK shared formula cannot have own formula");var U=ne>-1&&S[ne][Z];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");S[b][j][1]=nR(U[1],{r:b-ne,c:j-Z})}break;case"F":var Y=0;for(A=1;A<O.length;++A)switch(O[A].charAt(0)){case"X":j=parseInt(O[A].slice(1))-1,++Y;break;case"Y":for(b=parseInt(O[A].slice(1))-1,L=S.length;L<=b;++L)S[L]=[];break;case"M":R=parseInt(O[A].slice(1))/20;break;case"F":break;case"G":break;case"P":T=D[parseInt(O[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=O[A].slice(1).split(" "),L=parseInt(I[0],10);L<=parseInt(I[1],10);++L)R=parseInt(I[2],10),M[L-1]=R===0?{hidden:!0}:{wch:R},cy(M[L-1]);break;case"C":j=parseInt(O[A].slice(1))-1,M[j]||(M[j]={});break;case"R":b=parseInt(O[A].slice(1))-1,C[b]||(C[b]={}),R>0?(C[b].hpt=R,C[b].hpx=aC(R)):R===0&&(C[b].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}Y<1&&(T=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}}return C.length>0&&(k["!rows"]=C),M.length>0&&(k["!cols"]=M),g&&g.sheetRows&&(S=S.slice(0,g.sheetRows)),[S,k]}function c(v,g){var y=s(v,g),b=y[0],j=y[1],w=oc(b,g);return ea(j).forEach(function(A){w[A]=j[A]}),w}function d(v,g){return ql(c(v,g),g)}function f(v,g,y,b){var j="C;Y"+(y+1)+";X"+(b+1)+";K";switch(v.t){case"n":j+=v.v||0,v.f&&!v.F&&(j+=";E"+uy(v.f,{r:y,c:b}));break;case"b":j+=v.v?"TRUE":"FALSE";break;case"e":j+=v.w||v.v;break;case"d":j+='"'+(v.w||v.v)+'"';break;case"s":j+='"'+v.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return j}function m(v,g){g.forEach(function(y,b){var j="F;W"+(b+1)+" "+(b+1)+" ";y.hidden?j+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=Ym(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=Wm(y.wpx)),typeof y.wch=="number"&&(j+=Math.round(y.wch))),j.charAt(j.length-1)!=" "&&v.push(j)})}function x(v,g){g.forEach(function(y,b){var j="F;";y.hidden?j+="M0;":y.hpt?j+="M"+20*y.hpt+";":y.hpx&&(j+="M"+20*Xm(y.hpx)+";"),j.length>2&&v.push(j+"R"+(b+1))})}function h(v,g){var y=["ID;PWXL;N;E"],b=[],j=Ut(v["!ref"]),w,A=Array.isArray(v),S=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),v["!cols"]&&m(y,v["!cols"]),v["!rows"]&&x(y,v["!rows"]),y.push("B;Y"+(j.e.r-j.s.r+1)+";X"+(j.e.c-j.s.c+1)+";D"+[j.s.c,j.s.r,j.e.c,j.e.r].join(" "));for(var D=j.s.r;D<=j.e.r;++D)for(var T=j.s.c;T<=j.e.c;++T){var k=_t({r:D,c:T});w=A?(v[D]||[])[T]:v[k],!(!w||w.v==null&&(!w.f||w.F))&&b.push(f(w,v,D,T))}return y.join(S)+S+b.join(S)+S+"E"+S}return{to_workbook:d,to_sheet:c,from_sheet:h}}(),iL=function(){function e(l,c){switch(c.type){case"base64":return t($s(l),c);case"binary":return t(l,c);case"buffer":return t(ht&&Buffer.isBuffer(l)?l.toString("binary"):xu(l),c);case"array":return t(W0(l),c)}throw new Error("Unrecognized type "+c.type)}function t(l,c){for(var d=l.split(`
`),f=-1,m=-1,x=0,h=[];x!==d.length;++x){if(d[x].trim()==="BOT"){h[++f]=[],m=0;continue}if(!(f<0)){var v=d[x].trim().split(","),g=v[0],y=v[1];++x;for(var b=d[x]||"";(b.match(/["]/g)||[]).length&1&&x<d.length-1;)b+=`
`+d[++x];switch(b=b.trim(),+g){case-1:if(b==="BOT"){h[++f]=[],m=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?h[f][m]=!0:b==="FALSE"?h[f][m]=!1:isNaN(Ls(y))?isNaN(Wd(y).getDate())?h[f][m]=y:h[f][m]=wa(y):h[f][m]=Ls(y),++m;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),h[f][m++]=b!==""?b:null;break}if(b==="EOD")break}}return c&&c.sheetRows&&(h=h.slice(0,c.sheetRows)),h}function r(l,c){return oc(e(l,c),c)}function n(l,c){return ql(r(l,c),c)}var s=function(){var l=function(f,m,x,h,v){f.push(m),f.push(x+","+h),f.push('"'+v.replace(/"/g,'""')+'"')},c=function(f,m,x,h){f.push(m+","+x),f.push(m==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(f){var m=[],x=Ut(f["!ref"]),h,v=Array.isArray(f);l(m,"TABLE",0,1,"sheetjs"),l(m,"VECTORS",0,x.e.r-x.s.r+1,""),l(m,"TUPLES",0,x.e.c-x.s.c+1,""),l(m,"DATA",0,0,"");for(var g=x.s.r;g<=x.e.r;++g){c(m,-1,0,"BOT");for(var y=x.s.c;y<=x.e.c;++y){var b=_t({r:g,c:y});if(h=v?(f[g]||[])[y]:f[b],!h){c(m,1,0,"");continue}switch(h.t){case"n":var j=h.w;!j&&h.v!=null&&(j=h.v),j==null?h.f&&!h.F?c(m,1,0,"="+h.f):c(m,1,0,""):c(m,0,j,"V");break;case"b":c(m,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":c(m,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Mi(h.z||tr[14],Fa(wa(h.v)))),c(m,0,h.w,"V");break;default:c(m,1,0,"")}}}c(m,-1,0,"EOD");var w=`\r
`,A=m.join(w);return A}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),JA=function(){function e(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,v){for(var g=h.split(`
`),y=-1,b=-1,j=0,w=[];j!==g.length;++j){var A=g[j].trim().split(":");if(A[0]==="cell"){var S=Fr(A[1]);if(w.length<=S.r)for(y=w.length;y<=S.r;++y)w[y]||(w[y]=[]);switch(y=S.r,b=S.c,A[2]){case"t":w[y][b]=e(A[3]);break;case"v":w[y][b]=+A[3];break;case"vtf":var D=A[A.length-1];case"vtc":switch(A[3]){case"nl":w[y][b]=!!+A[4];break;default:w[y][b]=+A[4];break}A[2]=="vtf"&&(w[y][b]=[w[y][b],D])}}}return v&&v.sheetRows&&(w=w.slice(0,v.sheetRows)),w}function n(h,v){return oc(r(h,v),v)}function s(h,v){return ql(n(h,v),v)}var l=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),f="--SocialCalcSpreadsheetControlSave--";function m(h){if(!h||!h["!ref"])return"";for(var v=[],g=[],y,b="",j=an(h["!ref"]),w=Array.isArray(h),A=j.s.r;A<=j.e.r;++A)for(var S=j.s.c;S<=j.e.c;++S)if(b=_t({r:A,c:S}),y=w?(h[A]||[])[S]:h[b],!(!y||y.v==null||y.t==="z")){switch(g=["cell",b,"t"],y.t){case"s":case"str":g.push(t(y.v));break;case"n":y.f?(g[2]="vtf",g[3]="n",g[4]=y.v,g[5]=t(y.f)):(g[2]="v",g[3]=y.v);break;case"b":g[2]="vt"+(y.f?"f":"c"),g[3]="nl",g[4]=y.v?"1":"0",g[5]=t(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var D=Fa(wa(y.v));g[2]="vtc",g[3]="nd",g[4]=""+D,g[5]=y.w||Mi(y.z||tr[14],D);break;case"e":continue}v.push(g.join(":"))}return v.push("sheet:c:"+(j.e.c-j.s.c+1)+":r:"+(j.e.r-j.s.r+1)+":tvf:1"),v.push("valueformat:1:text-wiki"),v.join(`
`)}function x(h){return[l,c,d,c,m(h),f].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:x}}(),lL=function(){function e(x,h,v,g,y){y.raw?h[v][g]=x:x===""||(x==="TRUE"?h[v][g]=!0:x==="FALSE"?h[v][g]=!1:isNaN(Ls(x))?isNaN(Wd(x).getDate())?h[v][g]=x:h[v][g]=wa(x):h[v][g]=Ls(x))}function t(x,h){var v=h||{},g=[];if(!x||x.length===0)return g;for(var y=x.split(/[\r\n]/),b=y.length-1;b>=0&&y[b].length===0;)--b;for(var j=10,w=0,A=0;A<=b;++A)w=y[A].indexOf(" "),w==-1?w=y[A].length:w++,j=Math.max(j,w);for(A=0;A<=b;++A){g[A]=[];var S=0;for(e(y[A].slice(0,j).trim(),g,A,S,v),S=1;S<=(y[A].length-j)/10+1;++S)e(y[A].slice(j+(S-1)*10,j+S*10).trim(),g,A,S,v)}return v.sheetRows&&(g=g.slice(0,v.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(x){for(var h={},v=!1,g=0,y=0;g<x.length;++g)(y=x.charCodeAt(g))==34?v=!v:!v&&y in r&&(h[y]=(h[y]||0)+1);y=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&y.push([h[g],g]);if(!y.length){h=n;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&y.push([h[g],g])}return y.sort(function(b,j){return b[0]-j[0]||n[b[1]]-n[j[1]]}),r[y.pop()[1]]||44}function l(x,h){var v=h||{},g="",y=v.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};x.slice(0,4)=="sep="?x.charCodeAt(5)==13&&x.charCodeAt(6)==10?(g=x.charAt(4),x=x.slice(7)):x.charCodeAt(5)==13||x.charCodeAt(5)==10?(g=x.charAt(4),x=x.slice(6)):g=s(x.slice(0,1024)):v&&v.FS?g=v.FS:g=s(x.slice(0,1024));var j=0,w=0,A=0,S=0,D=0,T=g.charCodeAt(0),k=!1,C=0,M=x.charCodeAt(0);x=x.replace(/\r\n/mg,`
`);var I=v.dateNF!=null?wM(v.dateNF):null;function R(){var L=x.slice(S,D),P={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)P.t="z";else if(v.raw)P.t="s",P.v=L;else if(L.trim().length===0)P.t="s",P.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(P.t="s",P.v=L.slice(2,-1).replace(/""/g,'"')):sR(L)?(P.t="n",P.f=L.slice(1)):(P.t="s",P.v=L);else if(L=="TRUE")P.t="b",P.v=!0;else if(L=="FALSE")P.t="b",P.v=!1;else if(!isNaN(A=Ls(L)))P.t="n",v.cellText!==!1&&(P.w=L),P.v=A;else if(!isNaN(Wd(L).getDate())||I&&L.match(I)){P.z=v.dateNF||tr[14];var O=0;I&&L.match(I)&&(L=_M(L,v.dateNF,L.match(I)||[]),O=1),v.cellDates?(P.t="d",P.v=wa(L,O)):(P.t="n",P.v=Fa(wa(L,O))),v.cellText!==!1&&(P.w=Mi(P.z,P.v instanceof Date?Fa(P.v):P.v)),v.cellNF||delete P.z}else P.t="s",P.v=L;if(P.t=="z"||(v.dense?(y[j]||(y[j]=[]),y[j][w]=P):y[_t({c:w,r:j})]=P),S=D+1,M=x.charCodeAt(S),b.e.c<w&&(b.e.c=w),b.e.r<j&&(b.e.r=j),C==T)++w;else if(w=0,++j,v.sheetRows&&v.sheetRows<=j)return!0}e:for(;D<x.length;++D)switch(C=x.charCodeAt(D)){case 34:M===34&&(k=!k);break;case T:case 10:case 13:if(!k&&R())break e;break}return D-S>0&&R(),y["!ref"]=pr(b),y}function c(x,h){return!(h&&h.PRN)||h.FS||x.slice(0,4)=="sep="||x.indexOf("	")>=0||x.indexOf(",")>=0||x.indexOf(";")>=0?l(x,h):oc(t(x,h),h)}function d(x,h){var v="",g=h.type=="string"?[0,0,0,0]:bB(x,h);switch(h.type){case"base64":v=$s(x);break;case"binary":v=x;break;case"buffer":h.codepage==65001?v=x.toString("utf8"):h.codepage&&typeof Bm<"u"||(v=ht&&Buffer.isBuffer(x)?x.toString("binary"):xu(x));break;case"array":v=W0(x);break;case"string":v=x;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?v=Ld(v.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?v=Ld(v):h.type=="binary"&&typeof Bm<"u",v.slice(0,19)=="socialcalc:version:"?JA.to_sheet(h.type=="string"?v:Ld(v),h):c(v,h)}function f(x,h){return ql(d(x,h),h)}function m(x){for(var h=[],v=Ut(x["!ref"]),g,y=Array.isArray(x),b=v.s.r;b<=v.e.r;++b){for(var j=[],w=v.s.c;w<=v.e.c;++w){var A=_t({r:b,c:w});if(g=y?(x[b]||[])[w]:x[A],!g||g.v==null){j.push("          ");continue}for(var S=(g.w||(qs(g),g.w)||"").slice(0,10);S.length<10;)S+=" ";j.push(S+(w===0?" ":""))}h.push(j.join(""))}return h.join(`
`)}return{to_workbook:f,to_sheet:d,from_sheet:m}}(),F4=function(){function e(F,U,Y){if(F){Ya(F,F.l||0);for(var Q=Y.Enum||ne;F.l<F.length;){var ee=F.read_shift(2),De=Q[ee]||Q[65535],ke=F.read_shift(2),fe=F.l+ke,Ee=De.f&&De.f(F,ke,Y);if(F.l=fe,U(Ee,De,ee))return}}}function t(F,U){switch(U.type){case"base64":return r(Hn($s(F)),U);case"binary":return r(Hn(F),U);case"buffer":case"array":return r(F,U)}throw"Unsupported type "+U.type}function r(F,U){if(!F)return F;var Y=U||{},Q=Y.dense?[]:{},ee="Sheet1",De="",ke=0,fe={},Ee=[],Ie=[],Ne={s:{r:0,c:0},e:{r:0,c:0}},Je=Y.sheetRows||0;if(F[2]==0&&(F[3]==8||F[3]==9)&&F.length>=16&&F[14]==5&&F[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(F[2]==2)Y.Enum=ne,e(F,function(Re,Br,cn){switch(cn){case 0:Y.vers=Re,Re>=4096&&(Y.qpro=!0);break;case 6:Ne=Re;break;case 204:Re&&(De=Re);break;case 222:De=Re;break;case 15:case 51:Y.qpro||(Re[1].v=Re[1].v.slice(1));case 13:case 14:case 16:cn==14&&(Re[2]&112)==112&&(Re[2]&15)>1&&(Re[2]&15)<15&&(Re[1].z=Y.dateNF||tr[14],Y.cellDates&&(Re[1].t="d",Re[1].v=pA(Re[1].v))),Y.qpro&&Re[3]>ke&&(Q["!ref"]=pr(Ne),fe[ee]=Q,Ee.push(ee),Q=Y.dense?[]:{},Ne={s:{r:0,c:0},e:{r:0,c:0}},ke=Re[3],ee=De||"Sheet"+(ke+1),De="");var Zn=Y.dense?(Q[Re[0].r]||[])[Re[0].c]:Q[_t(Re[0])];if(Zn){Zn.t=Re[1].t,Zn.v=Re[1].v,Re[1].z!=null&&(Zn.z=Re[1].z),Re[1].f!=null&&(Zn.f=Re[1].f);break}Y.dense?(Q[Re[0].r]||(Q[Re[0].r]=[]),Q[Re[0].r][Re[0].c]=Re[1]):Q[_t(Re[0])]=Re[1];break}},Y);else if(F[2]==26||F[2]==14)Y.Enum=Z,F[2]==14&&(Y.qpro=!0,F.l=0),e(F,function(Re,Br,cn){switch(cn){case 204:ee=Re;break;case 22:Re[1].v=Re[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Re[3]>ke&&(Q["!ref"]=pr(Ne),fe[ee]=Q,Ee.push(ee),Q=Y.dense?[]:{},Ne={s:{r:0,c:0},e:{r:0,c:0}},ke=Re[3],ee="Sheet"+(ke+1)),Je>0&&Re[0].r>=Je)break;Y.dense?(Q[Re[0].r]||(Q[Re[0].r]=[]),Q[Re[0].r][Re[0].c]=Re[1]):Q[_t(Re[0])]=Re[1],Ne.e.c<Re[0].c&&(Ne.e.c=Re[0].c),Ne.e.r<Re[0].r&&(Ne.e.r=Re[0].r);break;case 27:Re[14e3]&&(Ie[Re[14e3][0]]=Re[14e3][1]);break;case 1537:Ie[Re[0]]=Re[1],Re[0]==ke&&(ee=Re[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+F[2]);if(Q["!ref"]=pr(Ne),fe[De||ee]=Q,Ee.push(De||ee),!Ie.length)return{SheetNames:Ee,Sheets:fe};for(var qe={},Bt=[],at=0;at<Ie.length;++at)fe[Ee[at]]?(Bt.push(Ie[at]||Ee[at]),qe[Ie[at]]=fe[Ie[at]]||fe[Ee[at]]):(Bt.push(Ie[at]),qe[Ie[at]]={"!ref":"A1"});return{SheetNames:Bt,Sheets:qe}}function n(F,U){var Y=U||{};if(+Y.codepage>=0&&Kd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=Ma(),ee=Ut(F["!ref"]),De=Array.isArray(F),ke=[];Le(Q,0,l(1030)),Le(Q,6,f(ee));for(var fe=Math.min(ee.e.r,8191),Ee=ee.s.r;Ee<=fe;++Ee)for(var Ie=Qr(Ee),Ne=ee.s.c;Ne<=ee.e.c;++Ne){Ee===ee.s.r&&(ke[Ne]=oa(Ne));var Je=ke[Ne]+Ie,qe=De?(F[Ee]||[])[Ne]:F[Je];if(!(!qe||qe.t=="z"))if(qe.t=="n")(qe.v|0)==qe.v&&qe.v>=-32768&&qe.v<=32767?Le(Q,13,g(Ee,Ne,qe.v)):Le(Q,14,b(Ee,Ne,qe.v));else{var Bt=qs(qe);Le(Q,15,h(Ee,Ne,Bt.slice(0,239)))}}return Le(Q,1),Q.end()}function s(F,U){var Y=U||{};if(+Y.codepage>=0&&Kd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=Ma();Le(Q,0,c(F));for(var ee=0,De=0;ee<F.SheetNames.length;++ee)(F.Sheets[F.SheetNames[ee]]||{})["!ref"]&&Le(Q,27,le(F.SheetNames[ee],De++));var ke=0;for(ee=0;ee<F.SheetNames.length;++ee){var fe=F.Sheets[F.SheetNames[ee]];if(!(!fe||!fe["!ref"])){for(var Ee=Ut(fe["!ref"]),Ie=Array.isArray(fe),Ne=[],Je=Math.min(Ee.e.r,8191),qe=Ee.s.r;qe<=Je;++qe)for(var Bt=Qr(qe),at=Ee.s.c;at<=Ee.e.c;++at){qe===Ee.s.r&&(Ne[at]=oa(at));var Re=Ne[at]+Bt,Br=Ie?(fe[qe]||[])[at]:fe[Re];if(!(!Br||Br.t=="z"))if(Br.t=="n")Le(Q,23,R(qe,at,ke,Br.v));else{var cn=qs(Br);Le(Q,22,C(qe,at,ke,cn.slice(0,239)))}}++ke}}return Le(Q,1),Q.end()}function l(F){var U=_e(2);return U.write_shift(2,F),U}function c(F){var U=_e(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var Y=0,Q=0,ee=0,De=0;De<F.SheetNames.length;++De){var ke=F.SheetNames[De],fe=F.Sheets[ke];if(!(!fe||!fe["!ref"])){++ee;var Ee=an(fe["!ref"]);Y<Ee.e.r&&(Y=Ee.e.r),Q<Ee.e.c&&(Q=Ee.e.c)}}return Y>8191&&(Y=8191),U.write_shift(2,Y),U.write_shift(1,ee),U.write_shift(1,Q),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function d(F,U,Y){var Q={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&Y.qpro?(Q.s.c=F.read_shift(1),F.l++,Q.s.r=F.read_shift(2),Q.e.c=F.read_shift(1),F.l++,Q.e.r=F.read_shift(2),Q):(Q.s.c=F.read_shift(2),Q.s.r=F.read_shift(2),U==12&&Y.qpro&&(F.l+=2),Q.e.c=F.read_shift(2),Q.e.r=F.read_shift(2),U==12&&Y.qpro&&(F.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function f(F){var U=_e(8);return U.write_shift(2,F.s.c),U.write_shift(2,F.s.r),U.write_shift(2,F.e.c),U.write_shift(2,F.e.r),U}function m(F,U,Y){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(Q[0].c=F.read_shift(1),Q[3]=F.read_shift(1),Q[0].r=F.read_shift(2),F.l+=2):(Q[2]=F.read_shift(1),Q[0].c=F.read_shift(2),Q[0].r=F.read_shift(2)),Q}function x(F,U,Y){var Q=F.l+U,ee=m(F,U,Y);if(ee[1].t="s",Y.vers==20768){F.l++;var De=F.read_shift(1);return ee[1].v=F.read_shift(De,"utf8"),ee}return Y.qpro&&F.l++,ee[1].v=F.read_shift(Q-F.l,"cstr"),ee}function h(F,U,Y){var Q=_e(7+Y.length);Q.write_shift(1,255),Q.write_shift(2,U),Q.write_shift(2,F),Q.write_shift(1,39);for(var ee=0;ee<Q.length;++ee){var De=Y.charCodeAt(ee);Q.write_shift(1,De>=128?95:De)}return Q.write_shift(1,0),Q}function v(F,U,Y){var Q=m(F,U,Y);return Q[1].v=F.read_shift(2,"i"),Q}function g(F,U,Y){var Q=_e(7);return Q.write_shift(1,255),Q.write_shift(2,U),Q.write_shift(2,F),Q.write_shift(2,Y,"i"),Q}function y(F,U,Y){var Q=m(F,U,Y);return Q[1].v=F.read_shift(8,"f"),Q}function b(F,U,Y){var Q=_e(13);return Q.write_shift(1,255),Q.write_shift(2,U),Q.write_shift(2,F),Q.write_shift(8,Y,"f"),Q}function j(F,U,Y){var Q=F.l+U,ee=m(F,U,Y);if(ee[1].v=F.read_shift(8,"f"),Y.qpro)F.l=Q;else{var De=F.read_shift(2);D(F.slice(F.l,F.l+De),ee),F.l+=De}return ee}function w(F,U,Y){var Q=U&32768;return U&=-32769,U=(Q?F:0)+(U>=8192?U-16384:U),(Q?"":"$")+(Y?oa(U):Qr(U))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function D(F,U){Ya(F,0);for(var Y=[],Q=0,ee="",De="",ke="",fe="";F.l<F.length;){var Ee=F[F.l++];switch(Ee){case 0:Y.push(F.read_shift(8,"f"));break;case 1:De=w(U[0].c,F.read_shift(2),!0),ee=w(U[0].r,F.read_shift(2),!1),Y.push(De+ee);break;case 2:{var Ie=w(U[0].c,F.read_shift(2),!0),Ne=w(U[0].r,F.read_shift(2),!1);De=w(U[0].c,F.read_shift(2),!0),ee=w(U[0].r,F.read_shift(2),!1),Y.push(Ie+Ne+":"+De+ee)}break;case 3:if(F.l<F.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(F.read_shift(2));break;case 6:{for(var Je="";Ee=F[F.l++];)Je+=String.fromCharCode(Ee);Y.push('"'+Je.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:fe=Y.pop(),ke=Y.pop(),Y.push(["AND","OR"][Ee-20]+"("+ke+","+fe+")");break;default:if(Ee<32&&S[Ee])fe=Y.pop(),ke=Y.pop(),Y.push(ke+S[Ee]+fe);else if(A[Ee]){if(Q=A[Ee][1],Q==69&&(Q=F[F.l++]),Q>Y.length){console.error("WK1 bad formula parse 0x"+Ee.toString(16)+":|"+Y.join("|")+"|");return}var qe=Y.slice(-Q);Y.length-=Q,Y.push(A[Ee][0]+"("+qe.join(",")+")")}else return Ee<=7?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=24?console.error("WK1 unsupported op "+Ee.toString(16)):Ee<=30?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=115?console.error("WK1 unsupported function opcode "+Ee.toString(16)):console.error("WK1 unrecognized opcode "+Ee.toString(16))}}Y.length==1?U[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function T(F){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=F.read_shift(2),U[3]=F[F.l++],U[0].c=F[F.l++],U}function k(F,U){var Y=T(F);return Y[1].t="s",Y[1].v=F.read_shift(U-4,"cstr"),Y}function C(F,U,Y,Q){var ee=_e(6+Q.length);ee.write_shift(2,F),ee.write_shift(1,Y),ee.write_shift(1,U),ee.write_shift(1,39);for(var De=0;De<Q.length;++De){var ke=Q.charCodeAt(De);ee.write_shift(1,ke>=128?95:ke)}return ee.write_shift(1,0),ee}function M(F,U){var Y=T(F);Y[1].v=F.read_shift(2);var Q=Y[1].v>>1;if(Y[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return Y[1].v=Q,Y}function I(F,U){var Y=T(F),Q=F.read_shift(4),ee=F.read_shift(4),De=F.read_shift(2);if(De==65535)return Q===0&&ee===3221225472?(Y[1].t="e",Y[1].v=15):Q===0&&ee===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var ke=De&32768;return De=(De&32767)-16446,Y[1].v=(1-ke*2)*(ee*Math.pow(2,De+32)+Q*Math.pow(2,De)),Y}function R(F,U,Y,Q){var ee=_e(14);if(ee.write_shift(2,F),ee.write_shift(1,Y),ee.write_shift(1,U),Q==0)return ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(2,65535),ee;var De=0,ke=0,fe=0,Ee=0;return Q<0&&(De=1,Q=-Q),ke=Math.log2(Q)|0,Q/=Math.pow(2,ke-31),Ee=Q>>>0,(Ee&2147483648)==0&&(Q/=2,++ke,Ee=Q>>>0),Q-=Ee,Ee|=2147483648,Ee>>>=0,Q*=Math.pow(2,32),fe=Q>>>0,ee.write_shift(4,fe),ee.write_shift(4,Ee),ke+=16383+(De?32768:0),ee.write_shift(2,ke),ee}function L(F,U){var Y=I(F);return F.l+=U-14,Y}function P(F,U){var Y=T(F),Q=F.read_shift(4);return Y[1].v=Q>>6,Y}function O(F,U){var Y=T(F),Q=F.read_shift(8,"f");return Y[1].v=Q,Y}function z(F,U){var Y=O(F);return F.l+=U-10,Y}function V(F,U){return F[F.l+U-1]==0?F.read_shift(U,"cstr"):""}function G(F,U){var Y=F[F.l++];Y>U-1&&(Y=U-1);for(var Q="";Q.length<Y;)Q+=String.fromCharCode(F[F.l++]);return Q}function K(F,U,Y){if(!(!Y.qpro||U<21)){var Q=F.read_shift(1);F.l+=17,F.l+=1,F.l+=2;var ee=F.read_shift(U-21,"cstr");return[Q,ee]}}function ce(F,U){for(var Y={},Q=F.l+U;F.l<Q;){var ee=F.read_shift(2);if(ee==14e3){for(Y[ee]=[0,""],Y[ee][0]=F.read_shift(2);F[F.l];)Y[ee][1]+=String.fromCharCode(F[F.l]),F.l++;F.l++}}return Y}function le(F,U){var Y=_e(5+F.length);Y.write_shift(2,14e3),Y.write_shift(2,U);for(var Q=0;Q<F.length;++Q){var ee=F.charCodeAt(Q);Y[Y.l++]=ee>127?95:ee}return Y[Y.l++]=0,Y}var ne={0:{n:"BOF",f:YA},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:d},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:v},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:x},16:{n:"FORMULA",f:j},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:x},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:V},222:{n:"SHEETNAMELP",f:G},65535:{n:""}},Z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:M},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:V},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:K},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}}(),oL=/^\s|\s$|[\t\n\r]/;function eC(e,t){if(!t.bookSST)return"";var r=[vr];r[r.length]=Fe("sst",null,{xmlns:lc[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],l="<si>";s.r?l+=s.r:(l+="<t",s.t||(s.t=""),s.t.match(oL)&&(l+=' xml:space="preserve"'),l+=">"+wt(s.t)+"</t>"),l+="</si>",r[r.length]=l}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function cL(e){return[e.read_shift(4),e.read_shift(4)]}function dL(e,t){return t||(t=_e(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var uL=tF;function fL(e){var t=Ma();Te(t,159,dL(e));for(var r=0;r<e.length;++r)Te(t,19,uL(e[r]));return Te(t,160),t.end()}function mL(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function tC(e){var t=0,r,n=mL(e),s=n.length+1,l,c,d,f,m;for(r=Dl(s),r[0]=n.length,l=1;l!=s;++l)r[l]=n[l-1];for(l=s-1;l>=0;--l)c=r[l],d=(t&16384)===0?0:1,f=t<<1&32767,m=d|f,t=m^c;return t^52811}var xL=function(){function e(s,l){switch(l.type){case"base64":return t($s(s),l);case"binary":return t(s,l);case"buffer":return t(ht&&Buffer.isBuffer(s)?s.toString("binary"):xu(s),l);case"array":return t(W0(s),l)}throw new Error("Unrecognized type "+l.type)}function t(s,l){var c=l||{},d=c.dense?[]:{},f=s.match(/\\trowd.*?\\row\b/g);if(!f.length)throw new Error("RTF missing table");var m={s:{c:0,r:0},e:{c:0,r:f.length-1}};return f.forEach(function(x,h){Array.isArray(d)&&(d[h]=[]);for(var v=/\\\w+\b/g,g=0,y,b=-1;y=v.exec(x);){switch(y[0]){case"\\cell":var j=x.slice(g,v.lastIndex-y[0].length);if(j[0]==" "&&(j=j.slice(1)),++b,j.length){var w={v:j,t:"s"};Array.isArray(d)?d[h][b]=w:d[_t({r:h,c:b})]=w}break}g=v.lastIndex}b>m.e.c&&(m.e.c=b)}),d["!ref"]=pr(m),d}function r(s,l){return ql(e(s,l),l)}function n(s){for(var l=["{\\rtf1\\ansi"],c=Ut(s["!ref"]),d,f=Array.isArray(s),m=c.s.r;m<=c.e.r;++m){l.push("\\trowd\\trautofit1");for(var x=c.s.c;x<=c.e.c;++x)l.push("\\cellx"+(x+1));for(l.push("\\pard\\intbl"),x=c.s.c;x<=c.e.c;++x){var h=_t({r:m,c:x});d=f?(s[m]||[])[x]:s[h],!(!d||d.v==null&&(!d.f||d.F))&&(l.push(" "+(d.w||(qs(d),d.w))),l.push("\\cell"))}l.push("\\pard\\intbl\\row")}return l.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function L4(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var hL=6,Rs=hL;function Ym(e){return Math.floor((e+Math.round(128/Rs)/256)*Rs)}function Wm(e){return Math.floor((e-5)/Rs*100+.5)/100}function Hv(e){return Math.round((e*Rs+5)/Rs*256)/256}function cy(e){e.width?(e.wpx=Ym(e.width),e.wch=Wm(e.wpx),e.MDW=Rs):e.wpx?(e.wch=Wm(e.wpx),e.width=Hv(e.wch),e.MDW=Rs):typeof e.wch=="number"&&(e.width=Hv(e.wch),e.wpx=Ym(e.width),e.MDW=Rs),e.customWidth&&delete e.customWidth}var pL=96,rC=pL;function Xm(e){return e*96/rC}function aC(e){return e*rC/96}function gL(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Fe("numFmt",null,{numFmtId:n,formatCode:wt(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Fe("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function vL(e){var t=[];return t[t.length]=Fe("cellXfs",null),e.forEach(function(r){t[t.length]=Fe("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Fe("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function nC(e,t){var r=[vr,Fe("styleSheet",null,{xmlns:lc[0],"xmlns:vt":Mr.vt})],n;return e.SSF&&(n=gL(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=vL(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function bL(e,t){var r=e.read_shift(2),n=ca(e);return[r,n]}function yL(e,t,r){r||(r=_e(6+4*t.length)),r.write_shift(2,e),Lr(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function jL(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=oF(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var l=e.read_shift(2);switch(l===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var c=e.read_shift(1);c!=0&&(n.underline=c);var d=e.read_shift(1);d>0&&(n.family=d);var f=e.read_shift(1);switch(f>0&&(n.charset=f),e.l++,n.color=lF(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ca(e),n}function NL(e,t){t||(t=_e(153)),t.write_shift(2,e.sz*20),cF(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Gm(e.color,t);var n=0;return n=2,t.write_shift(1,n),Lr(e.name,t),t.length>t.l?t.slice(0,t.l):t}var wL=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],eg,_L=ds;function R4(e,t){t||(t=_e(84)),eg||(eg=Zb(wL));var r=eg[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Gm({auto:1},t),Gm({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function EL(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function sC(e,t,r){r||(r=_e(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function jd(e,t){return t||(t=_e(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var SL=ds;function AL(e,t){return t||(t=_e(51)),t.write_shift(1,0),jd(null,t),jd(null,t),jd(null,t),jd(null,t),jd(null,t),t.length>t.l?t.slice(0,t.l):t}function CL(e,t){return t||(t=_e(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Vm(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function TL(e,t,r){var n=_e(2052);return n.write_shift(4,e),Vm(t,n),Vm(r,n),n.length>n.l?n.slice(0,n.l):n}function DL(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Te(e,615,Yn(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Te(e,44,yL(s,t[s]))}),Te(e,616))}}function OL(e){var t=1;Te(e,611,Yn(t)),Te(e,43,NL({sz:12,color:{theme:1},name:"Calibri",family:2})),Te(e,612)}function kL(e){var t=2;Te(e,603,Yn(t)),Te(e,45,R4({patternType:"none"})),Te(e,45,R4({patternType:"gray125"})),Te(e,604)}function PL(e){var t=1;Te(e,613,Yn(t)),Te(e,46,AL()),Te(e,614)}function ML(e){var t=1;Te(e,626,Yn(t)),Te(e,47,sC({numFmtId:0},65535)),Te(e,627)}function FL(e,t){Te(e,617,Yn(t.length)),t.forEach(function(r){Te(e,47,sC(r,0))}),Te(e,618)}function LL(e){var t=1;Te(e,619,Yn(t)),Te(e,48,CL({xfId:0,name:"Normal"})),Te(e,620)}function RL(e){var t=0;Te(e,505,Yn(t)),Te(e,506)}function IL(e){var t=0;Te(e,508,TL(t,"TableStyleMedium9","PivotStyleMedium4")),Te(e,509)}function BL(e,t){var r=Ma();return Te(r,278),DL(r,e.SSF),OL(r),kL(r),PL(r),ML(r),FL(r,t.cellXfs),LL(r),RL(r),IL(r),Te(r,279),r.end()}function iC(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[vr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function zL(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ca(e)}}function UL(e){var t=_e(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Lr(e.name,t),t.slice(0,t.l)}function $L(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function qL(e){var t=_e(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function HL(e,t){var r=_e(8+2*t.length);return r.write_shift(4,e),Lr(t,r),r.slice(0,r.l)}function VL(e){return e.l+=4,e.read_shift(4)!=0}function GL(e,t){var r=_e(8);return r.write_shift(4,e),r.write_shift(4,1),r}function KL(){var e=Ma();return Te(e,332),Te(e,334,Yn(1)),Te(e,335,UL({name:"XLDAPR",version:12e4,flags:3496657072})),Te(e,336),Te(e,339,HL(1,"XLDAPR")),Te(e,52),Te(e,35,Yn(514)),Te(e,4096,Yn(0)),Te(e,4097,En(1)),Te(e,36),Te(e,53),Te(e,340),Te(e,337,GL(1)),Te(e,51,qL([[1,0]])),Te(e,338),Te(e,333),e.end()}function lC(){var e=[vr];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function YL(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=_t(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var Uo=1024;function oC(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Fe("xml",null,{"xmlns:v":Xa.v,"xmlns:o":Xa.o,"xmlns:x":Xa.x,"xmlns:mv":Xa.mv}).replace(/\/>/,">"),Fe("o:shapelayout",Fe("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Fe("v:shapetype",[Fe("v:stroke",null,{joinstyle:"miter"}),Fe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Uo<e*1e3;)Uo+=1e3;return t.forEach(function(l){var c=Fr(l[0]),d={color2:"#BEFF82",type:"gradient"};d.type=="gradient"&&(d.angle="-180");var f=d.type=="gradient"?Fe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,m=Fe("v:fill",f,d),x={on:"t",obscured:"t"};++Uo,s=s.concat(["<v:shape"+Zd({id:"_x0000_s"+Uo,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(l[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",m,Fe("v:shadow",null,x),Fe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Xr("x:Anchor",[c.c+1,0,c.r+1,0,c.c+3,20,c.r+5,20].join(",")),Xr("x:AutoFill","False"),Xr("x:Row",String(c.r)),Xr("x:Column",String(c.c)),l[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function cC(e){var t=[vr,Fe("comments",null,{xmlns:lc[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var l=wt(s.a);r.indexOf(l)==-1&&(r.push(l),t.push("<author>"+l+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,l=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(f){f.a&&(s=r.indexOf(wt(f.a))),l.push(f.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),l.length<=1)t.push(Xr("t",wt(l[0]||"")));else{for(var c=`Comment:
    `+l[0]+`
`,d=1;d<l.length;++d)c+=`Reply:
    `+l[d]+`
`;t.push(Xr("t",wt(c)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function WL(e,t,r){var n=[vr,Fe("ThreadedComments",null,{xmlns:Mr.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var l="";(s[1]||[]).forEach(function(c,d){if(!c.T){delete c.ID;return}c.a&&t.indexOf(c.a)==-1&&t.push(c.a);var f={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};d==0?l=f.id:f.parentId=l,c.ID=f.id,c.a&&(f.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(c.a)).slice(-12)+"}"),n.push(Fe("threadedComment",Xr("text",c.t||""),f))})}),n.push("</ThreadedComments>"),n.join("")}function XL(e){var t=[vr,Fe("personList",null,{xmlns:Mr.TCMNT,"xmlns:x":lc[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Fe("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function ZL(e){var t={};t.iauthor=e.read_shift(4);var r=Kl(e);return t.rfx=r.s,t.ref=_t(r.s),e.l+=16,t}function QL(e,t){return t==null&&(t=_e(36)),t.write_shift(4,e[1].iauthor),cc(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var JL=ca;function eR(e){return Lr(e.slice(0,54))}function tR(e){var t=Ma(),r=[];return Te(t,628),Te(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Te(t,632,eR(s.a)))})}),Te(t,631),Te(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var l={s:Fr(n[0]),e:Fr(n[0])};Te(t,635,QL([l,s])),s.t&&s.t.length>0&&Te(t,637,aF(s)),Te(t,636),delete s.iauthor})}),Te(t,634),Te(t,629),t.end()}function rR(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Ot.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var dC=["xlsb","xlsm","xlam","biff8","xla"],aR=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,l,c){var d=!1,f=!1;l.length==0?f=!0:l.charAt(0)=="["&&(f=!0,l=l.slice(1,-1)),c.length==0?d=!0:c.charAt(0)=="["&&(d=!0,c=c.slice(1,-1));var m=l.length>0?parseInt(l,10)|0:0,x=c.length>0?parseInt(c,10)|0:0;return d?x+=t.c:--x,f?m+=t.r:--m,s+(d?"":"$")+oa(x)+(f?"":"$")+Qr(m)}return function(s,l){return t=l,s.replace(e,r)}}(),dy=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,uy=function(){return function(t,r){return t.replace(dy,function(n,s,l,c,d,f){var m=ny(c)-(l?0:r.c),x=ay(f)-(d?0:r.r),h=x==0?"":d?x+1:"["+x+"]",v=m==0?"":l?m+1:"["+m+"]";return s+"R"+h+"C"+v})}}();function nR(e,t){return e.replace(dy,function(r,n,s,l,c,d){return n+(s=="$"?s+l:oa(ny(l)+t.c))+(c=="$"?c+d:Qr(ay(d)+t.r))})}function sR(e){return e.length!=1}function ur(e){e.l+=1}function Fi(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function uC(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return fC(e);r.biff==12&&(n=4)}var s=e.read_shift(n),l=e.read_shift(n),c=Fi(e),d=Fi(e);return{s:{r:s,c:c[0],cRel:c[1],rRel:c[2]},e:{r:l,c:d[0],cRel:d[1],rRel:d[2]}}}function fC(e){var t=Fi(e),r=Fi(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function iR(e,t,r){if(r.biff<8)return fC(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),l=Fi(e),c=Fi(e);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:s,c:c[0],cRel:c[1],rRel:c[2]}}}function mC(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return lR(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Fi(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function lR(e){var t=Fi(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function oR(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function cR(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return dR(e);var s=e.read_shift(n>=12?4:2),l=e.read_shift(2),c=(l&16384)>>14,d=(l&32768)>>15;if(l&=16383,d==1)for(;s>524287;)s-=1048576;if(c==1)for(;l>8191;)l=l-16384;return{r:s,c:l,cRel:c,rRel:d}}function dR(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function uR(e,t,r){var n=(e[e.l++]&96)>>5,s=uC(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function fR(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),l=8;if(r)switch(r.biff){case 5:e.l+=12,l=6;break;case 12:l=12;break}var c=uC(e,l,r);return[n,s,c]}function mR(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function xR(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),l=8;if(r)switch(r.biff){case 5:e.l+=12,l=6;break;case 12:l=12;break}return e.l+=l,[n,s]}function hR(e,t,r){var n=(e[e.l++]&96)>>5,s=iR(e,t-1,r);return[n,s]}function pR(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function I4(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function gR(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],l=0;l<=n;++l)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function vR(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function bR(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function yR(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function jR(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function xC(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function NR(e){return e.read_shift(2),xC(e)}function wR(e){return e.read_shift(2),xC(e)}function _R(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=mC(e,0,r);return[n,s]}function ER(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=cR(e,0,r);return[n,s]}function SR(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var l=mC(e,0,r);return[n,s,l]}function AR(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[A7[s],gC[s],n]}function CR(e,t,r){var n=e[e.l++],s=e.read_shift(1),l=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:TR(e);return[s,(l[0]===0?gC:S7)[l[1]]]}function TR(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function DR(e,t,r){e.l+=r&&r.biff==2?3:4}function OR(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function kR(e){return e.l++,gu[e.read_shift(1)]}function PR(e){return e.l++,e.read_shift(2)}function MR(e){return e.l++,e.read_shift(1)!==0}function FR(e){return e.l++,dc(e)}function LR(e,t,r){return e.l++,XA(e,t-1,r)}function RR(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=SF(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=gu[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=dc(e);break;case 2:r[1]=DF(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function IR(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],l=0;l!=n;++l)s.push((r.biff==12?Kl:PF)(e));return s}function BR(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var l=0,c=[];l!=n&&(c[l]=[]);++l)for(var d=0;d!=s;++d)c[l][d]=RR(e,r.biff);return c}function zR(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,l=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,l]}function UR(e,t,r){if(r.biff==5)return $R(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),l=e.read_shift(4);return[n,s,l]}function $R(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function qR(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function HR(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function VR(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function GR(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),l=4;if(r)switch(r.biff){case 5:l=15;break;case 12:l=6;break}return e.l+=l,[n,s]}var KR=ds,YR=ds,WR=ds;function vu(e,t,r){return e.l+=2,[oR(e)]}function fy(e){return e.l+=6,[]}var XR=vu,ZR=fy,QR=fy,JR=vu;function hC(e){return e.l+=2,[YA(e),e.read_shift(2)&1]}var e7=vu,t7=hC,r7=fy,a7=vu,n7=vu,s7=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function i7(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),l=e.read_shift(2),c=s7[r>>2&31];return{ixti:t,coltype:r&3,rt:c,idx:n,c:s,C:l}}function l7(e){return e.l+=2,[e.read_shift(4)]}function o7(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function c7(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function d7(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function u7(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function f7(e){return e.l+=4,[0,0]}var B4={1:{n:"PtgExp",f:OR},2:{n:"PtgTbl",f:WR},3:{n:"PtgAdd",f:ur},4:{n:"PtgSub",f:ur},5:{n:"PtgMul",f:ur},6:{n:"PtgDiv",f:ur},7:{n:"PtgPower",f:ur},8:{n:"PtgConcat",f:ur},9:{n:"PtgLt",f:ur},10:{n:"PtgLe",f:ur},11:{n:"PtgEq",f:ur},12:{n:"PtgGe",f:ur},13:{n:"PtgGt",f:ur},14:{n:"PtgNe",f:ur},15:{n:"PtgIsect",f:ur},16:{n:"PtgUnion",f:ur},17:{n:"PtgRange",f:ur},18:{n:"PtgUplus",f:ur},19:{n:"PtgUminus",f:ur},20:{n:"PtgPercent",f:ur},21:{n:"PtgParen",f:ur},22:{n:"PtgMissArg",f:ur},23:{n:"PtgStr",f:LR},26:{n:"PtgSheet",f:o7},27:{n:"PtgEndSheet",f:c7},28:{n:"PtgErr",f:kR},29:{n:"PtgBool",f:MR},30:{n:"PtgInt",f:PR},31:{n:"PtgNum",f:FR},32:{n:"PtgArray",f:pR},33:{n:"PtgFunc",f:AR},34:{n:"PtgFuncVar",f:CR},35:{n:"PtgName",f:zR},36:{n:"PtgRef",f:_R},37:{n:"PtgArea",f:uR},38:{n:"PtgMemArea",f:qR},39:{n:"PtgMemErr",f:KR},40:{n:"PtgMemNoMem",f:YR},41:{n:"PtgMemFunc",f:HR},42:{n:"PtgRefErr",f:VR},43:{n:"PtgAreaErr",f:mR},44:{n:"PtgRefN",f:ER},45:{n:"PtgAreaN",f:hR},46:{n:"PtgMemAreaN",f:d7},47:{n:"PtgMemNoMemN",f:u7},57:{n:"PtgNameX",f:UR},58:{n:"PtgRef3d",f:SR},59:{n:"PtgArea3d",f:fR},60:{n:"PtgRefErr3d",f:GR},61:{n:"PtgAreaErr3d",f:xR},255:{}},m7={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},x7={1:{n:"PtgElfLel",f:hC},2:{n:"PtgElfRw",f:a7},3:{n:"PtgElfCol",f:XR},6:{n:"PtgElfRwV",f:n7},7:{n:"PtgElfColV",f:JR},10:{n:"PtgElfRadical",f:e7},11:{n:"PtgElfRadicalS",f:r7},13:{n:"PtgElfColS",f:ZR},15:{n:"PtgElfColSV",f:QR},16:{n:"PtgElfRadicalLel",f:t7},25:{n:"PtgList",f:i7},29:{n:"PtgSxName",f:l7},255:{}},h7={0:{n:"PtgAttrNoop",f:f7},1:{n:"PtgAttrSemi",f:jR},2:{n:"PtgAttrIf",f:bR},4:{n:"PtgAttrChoose",f:gR},8:{n:"PtgAttrGoto",f:vR},16:{n:"PtgAttrSum",f:DR},32:{n:"PtgAttrBaxcel",f:I4},33:{n:"PtgAttrBaxcel",f:I4},64:{n:"PtgAttrSpace",f:NR},65:{n:"PtgAttrSpaceSemi",f:wR},128:{n:"PtgAttrIfError",f:yR},255:{}};function p7(e,t,r,n){if(n.biff<8)return ds(e,t);for(var s=e.l+t,l=[],c=0;c!==r.length;++c)switch(r[c][0]){case"PtgArray":r[c][1]=BR(e,0,n),l.push(r[c][1]);break;case"PtgMemArea":r[c][2]=IR(e,r[c][1],n),l.push(r[c][2]);break;case"PtgExp":n&&n.biff==12&&(r[c][1][1]=e.read_shift(4),l.push(r[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[c][0]}return t=s-e.l,t!==0&&l.push(ds(e,t)),l}function g7(e,t,r){for(var n=e.l+t,s,l,c=[];n!=e.l;)t=n-e.l,l=e[e.l],s=B4[l]||B4[m7[l]],(l===24||l===25)&&(s=(l===24?x7:h7)[e[e.l+1]]),!s||!s.f?ds(e,t):c.push([s.n,s.f(e,t,r)]);return c}function v7(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],l=0;l<n.length;++l){var c=n[l];if(c)switch(c[0]){case 2:s.push('"'+c[1].replace(/"/g,'""')+'"');break;default:s.push(c[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var b7={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function y7(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function pC(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(l){return l.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function z4(e,t,r){var n=pC(e,t,r);return n=="#REF"?n:y7(n,r)}function Qo(e,t,r,n,s){var l=s&&s.biff||8,c={s:{c:0,r:0}},d=[],f,m,x,h=0,v=0,g,y="";if(!e[0]||!e[0][0])return"";for(var b=-1,j="",w=0,A=e[0].length;w<A;++w){var S=e[0][w];switch(S[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(f=d.pop(),m=d.pop(),b>=0){switch(e[0][b][1][0]){case 0:j=Jt(" ",e[0][b][1][1]);break;case 1:j=Jt("\r",e[0][b][1][1]);break;default:if(j="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}m=m+j,b=-1}d.push(m+b7[S[0]]+f);break;case"PtgIsect":f=d.pop(),m=d.pop(),d.push(m+" "+f);break;case"PtgUnion":f=d.pop(),m=d.pop(),d.push(m+","+f);break;case"PtgRange":f=d.pop(),m=d.pop(),d.push(m+":"+f);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":x=Id(S[1][1],c,s),d.push(Bd(x,l));break;case"PtgRefN":x=r?Id(S[1][1],r,s):S[1][1],d.push(Bd(x,l));break;case"PtgRef3d":h=S[1][1],x=Id(S[1][2],c,s),y=z4(n,h,s),d.push(y+"!"+Bd(x,l));break;case"PtgFunc":case"PtgFuncVar":var D=S[1][0],T=S[1][1];D||(D=0),D&=127;var k=D==0?[]:d.slice(-D);d.length-=D,T==="User"&&(T=k.shift()),d.push(T+"("+k.join(",")+")");break;case"PtgBool":d.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":d.push(S[1]);break;case"PtgNum":d.push(String(S[1]));break;case"PtgStr":d.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":d.push(S[1]);break;case"PtgAreaN":g=_4(S[1][1],r?{s:r}:c,s),d.push(Qp(g,s));break;case"PtgArea":g=_4(S[1][1],c,s),d.push(Qp(g,s));break;case"PtgArea3d":h=S[1][1],g=S[1][2],y=z4(n,h,s),d.push(y+"!"+Qp(g,s));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":v=S[1][2];var C=(n.names||[])[v-1]||(n[0]||[])[v],M=C?C.Name:"SH33TJSNAME"+String(v);M&&M.slice(0,6)=="_xlfn."&&!s.xlfn&&(M=M.slice(6)),d.push(M);break;case"PtgNameX":var I=S[1][1];v=S[1][2];var R;if(s.biff<=5)I<0&&(I=-I),n[I]&&(R=n[I][v]);else{var L="";if(((n[I]||[])[0]||[])[0]==14849||(((n[I]||[])[0]||[])[0]==1025?n[I][v]&&n[I][v].itab>0&&(L=n.SheetNames[n[I][v].itab-1]+"!"):L=n.SheetNames[v-1]+"!"),n[I]&&n[I][v])L+=n[I][v].Name;else if(n[0]&&n[0][v])L+=n[0][v].Name;else{var P=(pC(n,I,s)||"").split(";;");P[v-1]?L=P[v-1]:L+="SH33TJSERRX"}d.push(L);break}R||(R={Name:"SH33TJSERRY"}),d.push(R.Name);break;case"PtgParen":var O="(",z=")";if(b>=0){switch(j="",e[0][b][1][0]){case 2:O=Jt(" ",e[0][b][1][1])+O;break;case 3:O=Jt("\r",e[0][b][1][1])+O;break;case 4:z=Jt(" ",e[0][b][1][1])+z;break;case 5:z=Jt("\r",e[0][b][1][1])+z;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}b=-1}d.push(O+d.pop()+z);break;case"PtgRefErr":d.push("#REF!");break;case"PtgRefErr3d":d.push("#REF!");break;case"PtgExp":x={c:S[1][1],r:S[1][0]};var V={c:r.c,r:r.r};if(n.sharedf[_t(x)]){var G=n.sharedf[_t(x)];d.push(Qo(G,c,V,n,s))}else{var K=!1;for(f=0;f!=n.arrayf.length;++f)if(m=n.arrayf[f],!(x.c<m[0].s.c||x.c>m[0].e.c)&&!(x.r<m[0].s.r||x.r>m[0].e.r)){d.push(Qo(m[1],c,V,n,s)),K=!0;break}K||d.push(S[1])}break;case"PtgArray":d.push("{"+v7(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":d.push("");break;case"PtgAreaErr":d.push("#REF!");break;case"PtgAreaErr3d":d.push("#REF!");break;case"PtgList":d.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&b>=0&&ce.indexOf(e[0][w][0])==-1){S=e[0][b];var le=!0;switch(S[1][0]){case 4:le=!1;case 0:j=Jt(" ",S[1][1]);break;case 5:le=!1;case 1:j=Jt("\r",S[1][1]);break;default:if(j="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}d.push((le?j:"")+d.pop()+(le?"":j)),b=-1}}if(d.length>1&&s.WTF)throw new Error("bad formula stack");return d[0]}function j7(e){if(e==null){var t=_e(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Ol(e);return Ol(0)}function N7(e,t,r,n,s){var l=kl(t,r,s),c=j7(e.v),d=_e(6),f=33;d.write_shift(2,f),d.write_shift(4,0);for(var m=_e(e.bf.length),x=0;x<e.bf.length;++x)m[x]=e.bf[x];var h=Wr([l,c,d,m]);return h}function X0(e,t,r){var n=e.read_shift(4),s=g7(e,n,r),l=e.read_shift(4),c=l>0?p7(e,l,s,r):null;return[s,c]}var w7=X0,Z0=X0,_7=X0,E7=X0,S7={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},gC={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},A7={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function C7(e){var t="of:="+e.replace(dy,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function T7(e){return e.replace(/\./,"!")}var zd=typeof Map<"u";function my(e,t,r){var n=0,s=e.length;if(r){if(zd?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var l=zd?r.get(t):r[t];n<l.length;++n)if(e[l[n]].t===t)return e.Count++,l[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(zd?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function Q0(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Rs=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Wm(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=Hv(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function vC(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function $i(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,l=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){mA(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=l;++s)if(e[s].numFmtId===n)return s;return e[l]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},l}function D7(e,t,r){if(e&&e["!ref"]){var n=Ut(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function O7(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+pr(e[r])+'"/>';return t+"</mergeCells>"}function k7(e,t,r,n,s){var l=!1,c={},d=null;if(n.bookType!=="xlsx"&&t.vbaraw){var f=t.SheetNames[r];try{t.Workbook&&(f=t.Workbook.Sheets[r].CodeName||f)}catch{}l=!0,c.codeName=Xd(wt(f))}if(e&&e["!outline"]){var m={summaryBelow:1,summaryRight:1};e["!outline"].above&&(m.summaryBelow=0),e["!outline"].left&&(m.summaryRight=0),d=(d||"")+Fe("outlinePr",null,m)}!l&&!d||(s[s.length]=Fe("sheetPr",d,c))}var P7=["objects","scenarios","selectLockedCells","selectUnlockedCells"],M7=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function F7(e){var t={sheet:1};return P7.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),M7.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=tC(e.password).toString(16).toUpperCase()),Fe("sheetProtection",null,t)}function L7(e){return vC(e),Fe("pageMargins",null,e)}function R7(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=Fe("col",null,Q0(s,n)));return r[r.length]="</cols>",r.join("")}function I7(e,t,r,n){var s=typeof e.ref=="string"?e.ref:pr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,c=an(s);c.s.r==c.e.r&&(c.e.r=an(t["!ref"]).e.r,s=pr(c));for(var d=0;d<l.length;++d){var f=l[d];if(f.Name=="_xlnm._FilterDatabase"&&f.Sheet==n){f.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return d==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Fe("autoFilter",null,{ref:s})}function B7(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Fe("sheetViews",Fe("sheetView",null,s),{})}function z7(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",l=e.t,c=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=gu[e.v];break;case"d":n&&n.cellDates?s=wa(e.v,-1).toISOString():(e=La(e),e.t="n",s=""+(e.v=Fa(wa(e.v)))),typeof e.z>"u"&&(e.z=tr[14]);break;default:s=e.v;break}var d=Xr("v",wt(s)),f={r:t},m=$i(n.cellXfs,e,n);switch(m!==0&&(f.s=m),e.t){case"n":break;case"d":f.t="d";break;case"b":f.t="b";break;case"e":f.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){d=Xr("v",""+my(n.Strings,e.v,n.revStrings)),f.t="s";break}f.t="str";break}if(e.t!=l&&(e.t=l,e.v=c),typeof e.f=="string"&&e.f){var x=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;d=Fe("f",wt(e.f),x)+(e.v!=null?d:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(f.cm=1),Fe("c",d,f)}function U7(e,t,r,n){var s=[],l=[],c=Ut(e["!ref"]),d="",f,m="",x=[],h=0,v=0,g=e["!rows"],y=Array.isArray(e),b={r:m},j,w=-1;for(v=c.s.c;v<=c.e.c;++v)x[v]=oa(v);for(h=c.s.r;h<=c.e.r;++h){for(l=[],m=Qr(h),v=c.s.c;v<=c.e.c;++v){f=x[v]+m;var A=y?(e[h]||[])[v]:e[f];A!==void 0&&(d=z7(A,f,e,t))!=null&&l.push(d)}(l.length>0||g&&g[h])&&(b={r:m},g&&g[h]&&(j=g[h],j.hidden&&(b.hidden=1),w=-1,j.hpx?w=Xm(j.hpx):j.hpt&&(w=j.hpt),w>-1&&(b.ht=w,b.customHeight=1),j.level&&(b.outlineLevel=j.level)),s[s.length]=Fe("row",l.join(""),b))}if(g)for(;h<g.length;++h)g&&g[h]&&(b={r:h+1},j=g[h],j.hidden&&(b.hidden=1),w=-1,j.hpx?w=Xm(j.hpx):j.hpt&&(w=j.hpt),w>-1&&(b.ht=w,b.customHeight=1),j.level&&(b.outlineLevel=j.level),s[s.length]=Fe("row","",b));return s.join("")}function bC(e,t,r,n){var s=[vr,Fe("worksheet",null,{xmlns:lc[0],"xmlns:r":Mr.r})],l=r.SheetNames[e],c=0,d="",f=r.Sheets[l];f==null&&(f={});var m=f["!ref"]||"A1",x=Ut(m);if(x.e.c>16383||x.e.r>1048575){if(t.WTF)throw new Error("Range "+m+" exceeds format limit A1:XFD1048576");x.e.c=Math.min(x.e.c,16383),x.e.r=Math.min(x.e.c,1048575),m=pr(x)}n||(n={}),f["!comments"]=[];var h=[];k7(f,r,e,t,s),s[s.length]=Fe("dimension",null,{ref:m}),s[s.length]=B7(f,t,e,r),t.sheetFormat&&(s[s.length]=Fe("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),f["!cols"]!=null&&f["!cols"].length>0&&(s[s.length]=R7(f,f["!cols"])),s[c=s.length]="<sheetData/>",f["!links"]=[],f["!ref"]!=null&&(d=U7(f,t),d.length>0&&(s[s.length]=d)),s.length>c+1&&(s[s.length]="</sheetData>",s[c]=s[c].replace("/>",">")),f["!protect"]&&(s[s.length]=F7(f["!protect"])),f["!autofilter"]!=null&&(s[s.length]=I7(f["!autofilter"],f,r,e)),f["!merges"]!=null&&f["!merges"].length>0&&(s[s.length]=O7(f["!merges"]));var v=-1,g,y=-1;return f["!links"].length>0&&(s[s.length]="<hyperlinks>",f["!links"].forEach(function(b){b[1].Target&&(g={ref:b[0]},b[1].Target.charAt(0)!="#"&&(y=jt(n,-1,wt(b[1].Target).replace(/#.*$/,""),ut.HLINK),g["r:id"]="rId"+y),(v=b[1].Target.indexOf("#"))>-1&&(g.location=wt(b[1].Target.slice(v+1))),b[1].Tooltip&&(g.tooltip=wt(b[1].Tooltip)),s[s.length]=Fe("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete f["!links"],f["!margins"]!=null&&(s[s.length]=L7(f["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Xr("ignoredErrors",Fe("ignoredError",null,{numberStoredAsText:1,sqref:m}))),h.length>0&&(y=jt(n,-1,"../drawings/drawing"+(e+1)+".xml",ut.DRAW),s[s.length]=Fe("drawing",null,{"r:id":"rId"+y}),f["!drawing"]=h),f["!comments"].length>0&&(y=jt(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ut.VML),s[s.length]=Fe("legacyDrawing",null,{"r:id":"rId"+y}),f["!legacy"]=y),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function $7(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var l=e.read_shift(1);return e.l=n,l&7&&(r.level=l&7),l&16&&(r.hidden=!0),l&32&&(r.hpt=s/20),r}function q7(e,t,r){var n=_e(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var l=320;s.hpx?l=Xm(s.hpx)*20:s.hpt&&(l=s.hpt*20),n.write_shift(2,l),n.write_shift(1,0);var c=0;s.level&&(c|=s.level),s.hidden&&(c|=16),(s.hpx||s.hpt)&&(c|=32),n.write_shift(1,c),n.write_shift(1,0);var d=0,f=n.l;n.l+=4;for(var m={r:e,c:0},x=0;x<16;++x)if(!(t.s.c>x+1<<10||t.e.c<x<<10)){for(var h=-1,v=-1,g=x<<10;g<x+1<<10;++g){m.c=g;var y=Array.isArray(r)?(r[m.r]||[])[m.c]:r[_t(m)];y&&(h<0&&(h=g),v=g)}h<0||(++d,n.write_shift(4,h),n.write_shift(4,v))}var b=n.l;return n.l=f,n.write_shift(4,d),n.l=b,n.length>n.l?n.slice(0,n.l):n}function H7(e,t,r,n){var s=q7(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Te(e,0,s)}var V7=Kl,G7=cc;function K7(){}function Y7(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=nF(e),r}function W7(e,t,r){r==null&&(r=_e(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return Gm({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),MA(e,r),r.slice(0,r.l)}function X7(e){var t=Mn(e);return[t]}function Z7(e,t,r){return r==null&&(r=_e(8)),Hl(t,r)}function Q7(e){var t=Vl(e);return[t]}function J7(e,t,r){return r==null&&(r=_e(4)),Gl(t,r)}function eI(e){var t=Mn(e),r=e.read_shift(1);return[t,r,"b"]}function tI(e,t,r){return r==null&&(r=_e(9)),Hl(t,r),r.write_shift(1,e.v?1:0),r}function rI(e){var t=Vl(e),r=e.read_shift(1);return[t,r,"b"]}function aI(e,t,r){return r==null&&(r=_e(5)),Gl(t,r),r.write_shift(1,e.v?1:0),r}function nI(e){var t=Mn(e),r=e.read_shift(1);return[t,r,"e"]}function sI(e,t,r){return r==null&&(r=_e(9)),Hl(t,r),r.write_shift(1,e.v),r}function iI(e){var t=Vl(e),r=e.read_shift(1);return[t,r,"e"]}function lI(e,t,r){return r==null&&(r=_e(8)),Gl(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function oI(e){var t=Mn(e),r=e.read_shift(4);return[t,r,"s"]}function cI(e,t,r){return r==null&&(r=_e(12)),Hl(t,r),r.write_shift(4,t.v),r}function dI(e){var t=Vl(e),r=e.read_shift(4);return[t,r,"s"]}function uI(e,t,r){return r==null&&(r=_e(8)),Gl(t,r),r.write_shift(4,t.v),r}function fI(e){var t=Mn(e),r=dc(e);return[t,r,"n"]}function mI(e,t,r){return r==null&&(r=_e(16)),Hl(t,r),Ol(e.v,r),r}function xI(e){var t=Vl(e),r=dc(e);return[t,r,"n"]}function hI(e,t,r){return r==null&&(r=_e(12)),Gl(t,r),Ol(e.v,r),r}function pI(e){var t=Mn(e),r=FA(e);return[t,r,"n"]}function gI(e,t,r){return r==null&&(r=_e(12)),Hl(t,r),LA(e.v,r),r}function vI(e){var t=Vl(e),r=FA(e);return[t,r,"n"]}function bI(e,t,r){return r==null&&(r=_e(8)),Gl(t,r),LA(e.v,r),r}function yI(e){var t=Mn(e),r=sy(e);return[t,r,"is"]}function jI(e){var t=Mn(e),r=ca(e);return[t,r,"str"]}function NI(e,t,r){return r==null&&(r=_e(12+4*e.v.length)),Hl(t,r),Lr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function wI(e){var t=Vl(e),r=ca(e);return[t,r,"str"]}function _I(e,t,r){return r==null&&(r=_e(8+4*e.v.length)),Gl(t,r),Lr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function EI(e,t,r){var n=e.l+t,s=Mn(e);s.r=r["!row"];var l=e.read_shift(1),c=[s,l,"b"];if(r.cellFormula){e.l+=2;var d=Z0(e,n-e.l,r);c[3]=Qo(d,null,s,r.supbooks,r)}else e.l=n;return c}function SI(e,t,r){var n=e.l+t,s=Mn(e);s.r=r["!row"];var l=e.read_shift(1),c=[s,l,"e"];if(r.cellFormula){e.l+=2;var d=Z0(e,n-e.l,r);c[3]=Qo(d,null,s,r.supbooks,r)}else e.l=n;return c}function AI(e,t,r){var n=e.l+t,s=Mn(e);s.r=r["!row"];var l=dc(e),c=[s,l,"n"];if(r.cellFormula){e.l+=2;var d=Z0(e,n-e.l,r);c[3]=Qo(d,null,s,r.supbooks,r)}else e.l=n;return c}function CI(e,t,r){var n=e.l+t,s=Mn(e);s.r=r["!row"];var l=ca(e),c=[s,l,"str"];if(r.cellFormula){e.l+=2;var d=Z0(e,n-e.l,r);c[3]=Qo(d,null,s,r.supbooks,r)}else e.l=n;return c}var TI=Kl,DI=cc;function OI(e,t){return t==null&&(t=_e(4)),t.write_shift(4,e),t}function kI(e,t){var r=e.l+t,n=Kl(e),s=iy(e),l=ca(e),c=ca(e),d=ca(e);e.l=r;var f={rfx:n,relId:s,loc:l,display:d};return c&&(f.Tooltip=c),f}function PI(e,t){var r=_e(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));cc({s:Fr(e[0]),e:Fr(e[0])},r),ly("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return Lr(s||"",r),Lr(e[1].Tooltip||"",r),Lr("",r),r.slice(0,r.l)}function MI(){}function FI(e,t,r){var n=e.l+t,s=RA(e),l=e.read_shift(1),c=[s];if(c[2]=l,r.cellFormula){var d=w7(e,n-e.l,r);c[1]=d}else e.l=n;return c}function LI(e,t,r){var n=e.l+t,s=Kl(e),l=[s];if(r.cellFormula){var c=E7(e,n-e.l,r);l[1]=c,e.l=n}else e.l=n;return l}function RI(e,t,r){r==null&&(r=_e(18));var n=Q0(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var yC=["left","right","top","bottom","header","footer"];function II(e){var t={};return yC.forEach(function(r){t[r]=dc(e)}),t}function BI(e,t){return t==null&&(t=_e(48)),vC(e),yC.forEach(function(r){Ol(e[r],t)}),t}function zI(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function UI(e,t,r){r==null&&(r=_e(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function $I(e){var t=_e(24);return t.write_shift(4,4),t.write_shift(4,1),cc(e,t),t}function qI(e,t){return t==null&&(t=_e(66)),t.write_shift(2,e.password?tC(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function HI(){}function VI(){}function GI(e,t,r,n,s,l,c){if(t.v===void 0)return!1;var d="";switch(t.t){case"b":d=t.v?"1":"0";break;case"d":t=La(t),t.z=t.z||tr[14],t.v=Fa(wa(t.v)),t.t="n";break;case"n":case"e":d=""+t.v;break;default:d=t.v;break}var f={r,c:n};switch(f.s=$i(s.cellXfs,t,s),t.l&&l["!links"].push([_t(f),t.l]),t.c&&l["!comments"].push([_t(f),t.c]),t.t){case"s":case"str":return s.bookSST?(d=my(s.Strings,t.v,s.revStrings),f.t="s",f.v=d,c?Te(e,18,uI(t,f)):Te(e,7,cI(t,f))):(f.t="str",c?Te(e,17,_I(t,f)):Te(e,6,NI(t,f))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?c?Te(e,13,bI(t,f)):Te(e,2,gI(t,f)):c?Te(e,16,hI(t,f)):Te(e,5,mI(t,f)),!0;case"b":return f.t="b",c?Te(e,15,aI(t,f)):Te(e,4,tI(t,f)),!0;case"e":return f.t="e",c?Te(e,14,lI(t,f)):Te(e,3,sI(t,f)),!0}return c?Te(e,12,J7(t,f)):Te(e,1,Z7(t,f)),!0}function KI(e,t,r,n){var s=Ut(t["!ref"]||"A1"),l,c="",d=[];Te(e,145);var f=Array.isArray(t),m=s.e.r;t["!rows"]&&(m=Math.max(s.e.r,t["!rows"].length-1));for(var x=s.s.r;x<=m;++x){c=Qr(x),H7(e,t,s,x);var h=!1;if(x<=s.e.r)for(var v=s.s.c;v<=s.e.c;++v){x===s.s.r&&(d[v]=oa(v)),l=d[v]+c;var g=f?(t[x]||[])[v]:t[l];if(!g){h=!1;continue}h=GI(e,g,x,v,n,t,h)}}Te(e,146)}function YI(e,t){!t||!t["!merges"]||(Te(e,177,OI(t["!merges"].length)),t["!merges"].forEach(function(r){Te(e,176,DI(r))}),Te(e,178))}function WI(e,t){!t||!t["!cols"]||(Te(e,390),t["!cols"].forEach(function(r,n){r&&Te(e,60,RI(n,r))}),Te(e,391))}function XI(e,t){!t||!t["!ref"]||(Te(e,648),Te(e,649,$I(Ut(t["!ref"]))),Te(e,650))}function ZI(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=jt(r,-1,n[1].Target.replace(/#.*$/,""),ut.HLINK);Te(e,494,PI(n,s))}}),delete t["!links"]}function QI(e,t,r,n){if(t["!comments"].length>0){var s=jt(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ut.VML);Te(e,551,ly("rId"+s)),t["!legacy"]=s}}function JI(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],l=typeof s.ref=="string"?s.ref:pr(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var c=r.Workbook.Names,d=an(l);d.s.r==d.e.r&&(d.e.r=an(t["!ref"]).e.r,l=pr(d));for(var f=0;f<c.length;++f){var m=c[f];if(m.Name=="_xlnm._FilterDatabase"&&m.Sheet==n){m.Ref="'"+r.SheetNames[n]+"'!"+l;break}}f==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+l}),Te(e,161,cc(Ut(l))),Te(e,162)}}function e9(e,t,r){Te(e,133),Te(e,137,UI(t,r)),Te(e,138),Te(e,134)}function t9(e,t){t["!protect"]&&Te(e,535,qI(t["!protect"]))}function r9(e,t,r,n){var s=Ma(),l=r.SheetNames[e],c=r.Sheets[l]||{},d=l;try{r&&r.Workbook&&(d=r.Workbook.Sheets[e].CodeName||d)}catch{}var f=Ut(c["!ref"]||"A1");if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575)}return c["!links"]=[],c["!comments"]=[],Te(s,129),(r.vbaraw||c["!outline"])&&Te(s,147,W7(d,c["!outline"])),Te(s,148,G7(f)),e9(s,c,r.Workbook),WI(s,c),KI(s,c,e,t),t9(s,c),JI(s,c,r,e),YI(s,c),ZI(s,c,n),c["!margins"]&&Te(s,476,BI(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&XI(s,c),QI(s,c,e,n),Te(s,130),s.end()}function a9(e,t){e.l+=10;var r=ca(e);return{name:r}}var n9=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function s9(e){return!e.Workbook||!e.Workbook.WBProps?"false":LM(e.Workbook.WBProps.date1904)?"true":"false"}var i9="][*?/\\".split("");function jC(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return i9.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function l9(e,t,r){e.forEach(function(n,s){jC(n);for(var l=0;l<s;++l)if(n==e[l])throw new Error("Duplicate Sheet Name: "+n);if(r){var c=t&&t[s]&&t[s].CodeName||n;if(c.charCodeAt(0)==95&&c.length>22)throw new Error("Bad Code Name: Worksheet"+c)}})}function o9(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];l9(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)D7(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function NC(e){var t=[vr];t[t.length]=Fe("workbook",null,{xmlns:lc[0],"xmlns:r":Mr.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(n9.forEach(function(d){e.Workbook.WBProps[d[0]]!=null&&e.Workbook.WBProps[d[0]]!=d[1]&&(n[d[0]]=e.Workbook.WBProps[d[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Fe("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],l=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",l=0;l!=e.SheetNames.length&&!(!s[l]||!s[l].Hidden);++l);l==e.SheetNames.length&&(l=0),t[t.length]='<workbookView firstSheet="'+l+'" activeTab="'+l+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",l=0;l!=e.SheetNames.length;++l){var c={name:wt(e.SheetNames[l].slice(0,31))};if(c.sheetId=""+(l+1),c["r:id"]="rId"+(l+1),s[l])switch(s[l].Hidden){case 1:c.state="hidden";break;case 2:c.state="veryHidden";break}t[t.length]=Fe("sheet",null,c)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(d){var f={name:d.Name};d.Comment&&(f.comment=d.Comment),d.Sheet!=null&&(f.localSheetId=""+d.Sheet),d.Hidden&&(f.hidden="1"),d.Ref&&(t[t.length]=Fe("definedName",wt(d.Ref),f))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function c9(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=qv(e),r.name=ca(e),r}function d9(e,t){return t||(t=_e(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),ly(e.strRelID,t),Lr(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function u9(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?ca(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function f9(e,t){t||(t=_e(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),MA(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function m9(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),l=sF(e),c=_7(e,0,r),d=iy(e);e.l=n;var f={Name:l,Ptg:c};return s<268435455&&(f.Sheet=s),d&&(f.Comment=d),f}function x9(e,t){Te(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Te(e,156,d9(s))}Te(e,144)}function h9(e,t){t||(t=_e(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Lr("SheetJS",t),Lr(Im.version,t),Lr(Im.version,t),Lr("7262",t),t.length>t.l?t.slice(0,t.l):t}function p9(e,t){t||(t=_e(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function g9(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,l=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&l==-1&&(l=n);l>s||(Te(e,135),Te(e,158,p9(s)),Te(e,136))}}function v9(e,t){var r=Ma();return Te(r,131),Te(r,128,h9()),Te(r,153,f9(e.Workbook&&e.Workbook.WBProps||null)),g9(r,e),x9(r,e),Te(r,132),r.end()}function b9(e,t,r){return(t.slice(-4)===".bin"?v9:NC)(e)}function y9(e,t,r,n,s){return(t.slice(-4)===".bin"?r9:bC)(e,r,n,s)}function j9(e,t,r){return(t.slice(-4)===".bin"?BL:nC)(e,r)}function N9(e,t,r){return(t.slice(-4)===".bin"?fL:eC)(e,r)}function w9(e,t,r){return(t.slice(-4)===".bin"?tR:cC)(e)}function _9(e){return(e.slice(-4)===".bin"?KL:lC)()}function E9(e,t){var r=[];return e.Props&&r.push(jF(e.Props,t)),e.Custprops&&r.push(NF(e.Props,e.Custprops)),r.join("")}function S9(){return""}function A9(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var l=[];l.push(Fe("NumberFormat",null,{"ss:Format":wt(tr[n.numFmtId])}));var c={"ss:ID":"s"+(21+s)};r.push(Fe("Style",l.join(""),c))}),Fe("Styles",r.join(""))}function wC(e){return Fe("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+uy(e.Ref,{r:0,c:0})})}function C9(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(wC(s)))}return Fe("Names",r.join(""))}function T9(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,l=[],c=0;c<s.length;++c){var d=s[c];d.Sheet==r&&(d.Name.match(/^_xlfn\./)||l.push(wC(d)))}return l.join("")}function D9(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(Fe("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(Fe("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(Fe("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Fe("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var l=0;l<r&&!(n.Workbook.Sheets[l]&&!n.Workbook.Sheets[l].Hidden);++l);l==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Xr("ProtectContents","True")),e["!protect"].objects&&s.push(Xr("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Xr("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Xr("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Xr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(c){e["!protect"][c[0]]&&s.push("<"+c[1]+"/>")})),s.length==0?"":Fe("WorksheetOptions",s.join(""),{xmlns:Xa.x})}function O9(e){return e.map(function(t){var r=FM(t.t||""),n=Fe("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Fe("Comment",n,{"ss:Author":t.a})}).join("")}function k9(e,t,r,n,s,l,c){if(!e||e.v==null&&e.f==null)return"";var d={};if(e.f&&(d["ss:Formula"]="="+wt(uy(e.f,c))),e.F&&e.F.slice(0,t.length)==t){var f=Fr(e.F.slice(t.length+1));d["ss:ArrayRange"]="RC:R"+(f.r==c.r?"":"["+(f.r-c.r)+"]")+"C"+(f.c==c.c?"":"["+(f.c-c.c)+"]")}if(e.l&&e.l.Target&&(d["ss:HRef"]=wt(e.l.Target),e.l.Tooltip&&(d["x:HRefScreenTip"]=wt(e.l.Tooltip))),r["!merges"])for(var m=r["!merges"],x=0;x!=m.length;++x)m[x].s.c!=c.c||m[x].s.r!=c.r||(m[x].e.c>m[x].s.c&&(d["ss:MergeAcross"]=m[x].e.c-m[x].s.c),m[x].e.r>m[x].s.r&&(d["ss:MergeDown"]=m[x].e.r-m[x].s.r));var h="",v="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",v=String(e.v);break;case"b":h="Boolean",v=e.v?"1":"0";break;case"e":h="Error",v=gu[e.v];break;case"d":h="DateTime",v=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||tr[14]);break;case"s":h="String",v=MM(e.v||"");break}var g=$i(n.cellXfs,e,n);d["ss:StyleID"]="s"+(21+g),d["ss:Index"]=c.c+1;var y=e.v!=null?v:"",b=e.t=="z"?"":'<Data ss:Type="'+h+'">'+y+"</Data>";return(e.c||[]).length>0&&(b+=O9(e.c)),Fe("Cell",b,d)}function P9(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=aC(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function M9(e,t,r,n){if(!e["!ref"])return"";var s=Ut(e["!ref"]),l=e["!merges"]||[],c=0,d=[];e["!cols"]&&e["!cols"].forEach(function(j,w){cy(j);var A=!!j.width,S=Q0(w,j),D={"ss:Index":w+1};A&&(D["ss:Width"]=Ym(S.width)),j.hidden&&(D["ss:Hidden"]="1"),d.push(Fe("Column",null,D))});for(var f=Array.isArray(e),m=s.s.r;m<=s.e.r;++m){for(var x=[P9(m,(e["!rows"]||[])[m])],h=s.s.c;h<=s.e.c;++h){var v=!1;for(c=0;c!=l.length;++c)if(!(l[c].s.c>h)&&!(l[c].s.r>m)&&!(l[c].e.c<h)&&!(l[c].e.r<m)){(l[c].s.c!=h||l[c].s.r!=m)&&(v=!0);break}if(!v){var g={r:m,c:h},y=_t(g),b=f?(e[m]||[])[h]:e[y];x.push(k9(b,y,e,t,r,n,g))}}x.push("</Row>"),x.length>2&&d.push(x.join(""))}return d.join("")}function F9(e,t,r){var n=[],s=r.SheetNames[e],l=r.Sheets[s],c=l?T9(l,t,e,r):"";return c.length>0&&n.push("<Names>"+c+"</Names>"),c=l?M9(l,t,e,r):"",c.length>0&&n.push("<Table>"+c+"</Table>"),n.push(D9(l,t,e,r)),n.join("")}function L9(e,t){t||(t={}),e.SSF||(e.SSF=La(tr)),e.SSF&&(K0(),G0(e.SSF),t.revssf=Y0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],$i(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(E9(e,t)),r.push(S9()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Fe("Worksheet",F9(n,t,e),{"ss:Name":wt(e.SheetNames[n])}));return r[2]=A9(e,t),r[3]=C9(e),vr+Fe("Workbook",r.join(""),{xmlns:Xa.ss,"xmlns:o":Xa.o,"xmlns:x":Xa.x,"xmlns:ss":Xa.ss,"xmlns:dt":Xa.dt,"xmlns:html":Xa.html})}var tg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function R9(e,t){var r=[],n=[],s=[],l=0,c,d=m4(S4,"n"),f=m4(A4,"n");if(e.Props)for(c=ea(e.Props),l=0;l<c.length;++l)(Object.prototype.hasOwnProperty.call(d,c[l])?r:Object.prototype.hasOwnProperty.call(f,c[l])?n:s).push([c[l],e.Props[c[l]]]);if(e.Custprops)for(c=ea(e.Custprops),l=0;l<c.length;++l)Object.prototype.hasOwnProperty.call(e.Props||{},c[l])||(Object.prototype.hasOwnProperty.call(d,c[l])?r:Object.prototype.hasOwnProperty.call(f,c[l])?n:s).push([c[l],e.Custprops[c[l]]]);var m=[];for(l=0;l<s.length;++l)KA.indexOf(s[l][0])>-1||HA.indexOf(s[l][0])>-1||s[l][1]!=null&&m.push(s[l]);n.length&&Ot.utils.cfb_add(t,"/SummaryInformation",k4(n,tg.SI,f,A4)),(r.length||m.length)&&Ot.utils.cfb_add(t,"/DocumentSummaryInformation",k4(r,tg.DSI,d,S4,m.length?m:null,tg.UDI))}function I9(e,t){var r=t||{},n=Ot.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Ot.utils.cfb_add(n,s,_C(e,r)),r.biff==8&&(e.Props||e.Custprops)&&R9(e,n),r.biff==8&&e.vbaraw&&rR(n,Ot.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var B9={0:{f:$7},1:{f:X7},2:{f:pI},3:{f:nI},4:{f:eI},5:{f:fI},6:{f:jI},7:{f:oI},8:{f:CI},9:{f:AI},10:{f:EI},11:{f:SI},12:{f:Q7},13:{f:vI},14:{f:iI},15:{f:rI},16:{f:xI},17:{f:wI},18:{f:dI},19:{f:sy},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:m9},40:{},42:{},43:{f:jL},44:{f:bL},45:{f:_L},46:{f:SL},47:{f:EL},48:{},49:{f:QM},50:{},51:{f:$L},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:JF},62:{f:yI},63:{f:YL},64:{f:HI},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ds,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:zI},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Y7},148:{f:V7,p:16},151:{f:MI},152:{},153:{f:u9},154:{},155:{},156:{f:c9},157:{},158:{},159:{T:1,f:cL},160:{T:-1},161:{T:1,f:Kl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:TI},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:zL},336:{T:-1},337:{f:VL,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:qv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:KF},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:FI},427:{f:LI},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:II},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:K7},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:kI},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:qv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:JL},633:{T:1},634:{T:-1},635:{T:1,f:ZL},636:{T:-1},637:{f:rF},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:a9},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:VI},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Le(e,t,r,n){var s=t;if(!isNaN(s)){var l=n||(r||[]).length||0,c=e.next(4);c.write_shift(2,s),c.write_shift(2,l),l>0&&ry(r)&&e.push(r)}}function z9(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return Le(e,t,r,s);var l=t;if(!isNaN(l)){for(var c=r.parts||[],d=0,f=0,m=0;m+(c[d]||8224)<=8224;)m+=c[d]||8224,d++;var x=e.next(4);for(x.write_shift(2,l),x.write_shift(2,m),e.push(r.slice(f,f+m)),f+=m;f<s;){for(x=e.next(4),x.write_shift(2,60),m=0;m+(c[d]||8224)<=8224;)m+=c[d]||8224,d++;x.write_shift(2,m),e.push(r.slice(f,f+m)),f+=m}}}function bu(e,t,r){return e||(e=_e(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function U9(e,t,r,n){var s=_e(9);return bu(s,e,t),WA(r,n||"b",s),s}function $9(e,t,r){var n=_e(8+2*r.length);return bu(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function q9(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Fa(wa(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?Le(e,2,aL(r,n,s)):Le(e,3,rL(r,n,s));return;case"b":case"e":Le(e,5,U9(r,n,t.v,t.t));return;case"s":case"str":Le(e,4,$9(r,n,(t.v||"").slice(0,255)));return}Le(e,1,bu(null,r,n))}function H9(e,t,r,n){var s=Array.isArray(t),l=Ut(t["!ref"]||"A1"),c,d="",f=[];if(l.e.c>255||l.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");l.e.c=Math.min(l.e.c,255),l.e.r=Math.min(l.e.c,16383),c=pr(l)}for(var m=l.s.r;m<=l.e.r;++m){d=Qr(m);for(var x=l.s.c;x<=l.e.c;++x){m===l.s.r&&(f[x]=oa(x)),c=f[x]+d;var h=s?(t[m]||[])[x]:t[c];h&&q9(e,h,m,x)}}}function V9(e,t){for(var r=t||{},n=Ma(),s=0,l=0;l<e.SheetNames.length;++l)e.SheetNames[l]==r.sheet&&(s=l);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Le(n,r.biff==4?1033:r.biff==3?521:9,oy(e,16,r)),H9(n,e.Sheets[e.SheetNames[s]],s,r),Le(n,10),n.end()}function G9(e,t,r){Le(e,49,BF({sz:12,name:"Arial"},r))}function K9(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Le(e,1054,$F(s,t[s],r))})}function Y9(e,t){var r=_e(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Le(e,2151,r),r=_e(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),QA(Ut(t["!ref"]||"A1"),r),r.write_shift(4,4),Le(e,2152,r)}function W9(e,t){for(var r=0;r<16;++r)Le(e,224,M4({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Le(e,224,M4(n,0,t))})}function X9(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Le(e,440,XF(n)),n[1].Tooltip&&Le(e,2048,ZF(n))}delete t["!links"]}function Z9(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&Le(e,125,eL(Q0(s,n),s))})}}function Q9(e,t,r,n,s){var l=16+$i(s.cellXfs,t,s);if(t.v==null&&!t.bf){Le(e,513,kl(r,n,l));return}if(t.bf)Le(e,6,N7(t,r,n,s,l));else switch(t.t){case"d":case"n":var c=t.t=="d"?Fa(wa(t.v)):t.v;Le(e,515,GF(r,n,c,l));break;case"b":case"e":Le(e,517,VF(r,n,t.v,l,s,t.t));break;case"s":case"str":if(s.bookSST){var d=my(s.Strings,t.v,s.revStrings);Le(e,253,zF(r,n,d,l))}else Le(e,516,UF(r,n,(t.v||"").slice(0,255),l,s));break;default:Le(e,513,kl(r,n,l))}}function J9(e,t,r){var n=Ma(),s=r.SheetNames[e],l=r.Sheets[s]||{},c=(r||{}).Workbook||{},d=(c.Sheets||[])[e]||{},f=Array.isArray(l),m=t.biff==8,x,h="",v=[],g=Ut(l["!ref"]||"A1"),y=m?65536:16384;if(g.e.c>255||g.e.r>=y){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,y-1)}Le(n,2057,oy(r,16,t)),Le(n,13,En(1)),Le(n,12,En(100)),Le(n,15,ga(!0)),Le(n,17,ga(!1)),Le(n,16,Ol(.001)),Le(n,95,ga(!0)),Le(n,42,ga(!1)),Le(n,43,ga(!1)),Le(n,130,En(1)),Le(n,128,HF()),Le(n,131,ga(!1)),Le(n,132,ga(!1)),m&&Z9(n,l["!cols"]),Le(n,512,qF(g,t)),m&&(l["!links"]=[]);for(var b=g.s.r;b<=g.e.r;++b){h=Qr(b);for(var j=g.s.c;j<=g.e.c;++j){b===g.s.r&&(v[j]=oa(j)),x=v[j]+h;var w=f?(l[b]||[])[j]:l[x];w&&(Q9(n,w,b,j,t),m&&w.l&&l["!links"].push([x,w.l]))}}var A=d.CodeName||d.name||s;return m&&Le(n,574,IF((c.Views||[])[0])),m&&(l["!merges"]||[]).length&&Le(n,229,WF(l["!merges"])),m&&X9(n,l),Le(n,442,ZA(A)),m&&Y9(n,l),Le(n,10),n.end()}function eB(e,t,r){var n=Ma(),s=(e||{}).Workbook||{},l=s.Sheets||[],c=s.WBProps||{},d=r.biff==8,f=r.biff==5;if(Le(n,2057,oy(e,5,r)),r.bookType=="xla"&&Le(n,135),Le(n,225,d?En(1200):null),Le(n,193,EF(2)),f&&Le(n,191),f&&Le(n,192),Le(n,226),Le(n,92,MF("SheetJS",r)),Le(n,66,En(d?1200:1252)),d&&Le(n,353,En(0)),d&&Le(n,448),Le(n,317,tL(e.SheetNames.length)),d&&e.vbaraw&&Le(n,211),d&&e.vbaraw){var m=c.CodeName||"ThisWorkbook";Le(n,442,ZA(m))}Le(n,156,En(17)),Le(n,25,ga(!1)),Le(n,18,ga(!1)),Le(n,19,En(0)),d&&Le(n,431,ga(!1)),d&&Le(n,444,En(0)),Le(n,61,RF()),Le(n,64,ga(!1)),Le(n,141,En(0)),Le(n,34,ga(s9(e)=="true")),Le(n,14,ga(!0)),d&&Le(n,439,ga(!1)),Le(n,218,En(0)),G9(n,e,r),K9(n,e.SSF,r),W9(n,r),d&&Le(n,352,ga(!1));var x=n.end(),h=Ma();d&&Le(h,140,QF()),d&&r.Strings&&z9(h,252,LF(r.Strings)),Le(h,10);var v=h.end(),g=Ma(),y=0,b=0;for(b=0;b<e.SheetNames.length;++b)y+=(d?12:11)+(d?2:1)*e.SheetNames[b].length;var j=x.length+y+v.length;for(b=0;b<e.SheetNames.length;++b){var w=l[b]||{};Le(g,133,FF({pos:j,hs:w.Hidden||0,dt:0,name:e.SheetNames[b]},r)),j+=t[b].length}var A=g.end();if(y!=A.length)throw new Error("BS8 "+y+" != "+A.length);var S=[];return x.length&&S.push(x),A.length&&S.push(A),v.length&&S.push(v),Wr(S)}function tB(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=La(tr)),e&&e.SSF&&(K0(),G0(e.SSF),r.revssf=Y0(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,xy(r),r.cellXfs=[],$i(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=J9(s,r,e);return n.unshift(eB(e,n,r)),Wr(n)}function _C(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=an(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var l=t||{};switch(l.biff||2){case 8:case 5:return tB(e,t);case 4:case 3:case 2:return V9(e,t)}throw new Error("invalid type "+l.bookType+" for BIFF")}function rB(e,t,r,n){for(var s=e["!merges"]||[],l=[],c=t.s.c;c<=t.e.c;++c){for(var d=0,f=0,m=0;m<s.length;++m)if(!(s[m].s.r>r||s[m].s.c>c)&&!(s[m].e.r<r||s[m].e.c<c)){if(s[m].s.r<r||s[m].s.c<c){d=-1;break}d=s[m].e.r-s[m].s.r+1,f=s[m].e.c-s[m].s.c+1;break}if(!(d<0)){var x=_t({r,c}),h=n.dense?(e[r]||[])[c]:e[x],v=h&&h.v!=null&&(h.h||PM(h.w||(qs(h),h.w)||""))||"",g={};d>1&&(g.rowspan=d),f>1&&(g.colspan=f),n.editable?v='<span contenteditable="true">'+v+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(v='<a href="'+h.l.Target+'">'+v+"</a>")),g.id=(n.id||"sjs")+"-"+x,l.push(Fe("td",v,g))}}var y="<tr>";return y+l.join("")+"</tr>"}var aB='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',nB="</body></html>";function sB(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function EC(e,t){var r=t||{},n=r.header!=null?r.header:aB,s=r.footer!=null?r.footer:nB,l=[n],c=an(e["!ref"]);r.dense=Array.isArray(e),l.push(sB(e,c,r));for(var d=c.s.r;d<=c.e.r;++d)l.push(rB(e,c,d,r));return l.push("</table>"+s),l.join("")}function SC(e,t,r){var n=r||{},s=0,l=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?Fr(n.origin):n.origin;s=c.r,l=c.c}var d=t.getElementsByTagName("tr"),f=Math.min(n.sheetRows||1e7,d.length),m={s:{r:0,c:0},e:{r:s,c:l}};if(e["!ref"]){var x=an(e["!ref"]);m.s.r=Math.min(m.s.r,x.s.r),m.s.c=Math.min(m.s.c,x.s.c),m.e.r=Math.max(m.e.r,x.e.r),m.e.c=Math.max(m.e.c,x.e.c),s==-1&&(m.e.r=s=x.e.r+1)}var h=[],v=0,g=e["!rows"]||(e["!rows"]=[]),y=0,b=0,j=0,w=0,A=0,S=0;for(e["!cols"]||(e["!cols"]=[]);y<d.length&&b<f;++y){var D=d[y];if(U4(D)){if(n.display)continue;g[b]={hidden:!0}}var T=D.children;for(j=w=0;j<T.length;++j){var k=T[j];if(!(n.display&&U4(k))){var C=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):RM(k.innerHTML),M=k.getAttribute("data-z")||k.getAttribute("z");for(v=0;v<h.length;++v){var I=h[v];I.s.c==w+l&&I.s.r<b+s&&b+s<=I.e.r&&(w=I.e.c+1-l,v=-1)}S=+k.getAttribute("colspan")||1,((A=+k.getAttribute("rowspan")||1)>1||S>1)&&h.push({s:{r:b+s,c:w+l},e:{r:b+s+(A||1)-1,c:w+l+(S||1)-1}});var R={t:"s",v:C},L=k.getAttribute("data-t")||k.getAttribute("t")||"";C!=null&&(C.length==0?R.t=L||"z":n.raw||C.trim().length==0||L=="s"||(C==="TRUE"?R={t:"b",v:!0}:C==="FALSE"?R={t:"b",v:!1}:isNaN(Ls(C))?isNaN(Wd(C).getDate())||(R={t:"d",v:wa(C)},n.cellDates||(R={t:"n",v:Fa(R.v)}),R.z=n.dateNF||tr[14]):R={t:"n",v:Ls(C)})),R.z===void 0&&M!=null&&(R.z=M);var P="",O=k.getElementsByTagName("A");if(O&&O.length)for(var z=0;z<O.length&&!(O[z].hasAttribute("href")&&(P=O[z].getAttribute("href"),P.charAt(0)!="#"));++z);P&&P.charAt(0)!="#"&&(R.l={Target:P}),n.dense?(e[b+s]||(e[b+s]=[]),e[b+s][w+l]=R):e[_t({c:w+l,r:b+s})]=R,m.e.c<w+l&&(m.e.c=w+l),w+=S}}++b}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),m.e.r=Math.max(m.e.r,b-1+s),e["!ref"]=pr(m),b>=f&&(e["!fullref"]=pr((m.e.r=d.length-y+b-1+s,m))),e}function AC(e,t){var r=t||{},n=r.dense?[]:{};return SC(n,e,t)}function iB(e,t){return ql(AC(e,t),t)}function U4(e){var t="",r=lB(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function lB(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var oB=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Zd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return vr+t}}(),$4=function(){var e=function(l){return wt(l).replace(/  +/g,function(c){return'<text:s text:c="'+c.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(l,c,d){var f=[];f.push('      <table:table table:name="'+wt(c.SheetNames[d])+`" table:style-name="ta1">
`);var m=0,x=0,h=an(l["!ref"]||"A1"),v=l["!merges"]||[],g=0,y=Array.isArray(l);if(l["!cols"])for(x=0;x<=h.e.c;++x)f.push("        <table:table-column"+(l["!cols"][x]?' table:style-name="co'+l["!cols"][x].ods+'"':"")+`></table:table-column>
`);var b="",j=l["!rows"]||[];for(m=0;m<h.s.r;++m)b=j[m]?' table:style-name="ro'+j[m].ods+'"':"",f.push("        <table:table-row"+b+`></table:table-row>
`);for(;m<=h.e.r;++m){for(b=j[m]?' table:style-name="ro'+j[m].ods+'"':"",f.push("        <table:table-row"+b+`>
`),x=0;x<h.s.c;++x)f.push(t);for(;x<=h.e.c;++x){var w=!1,A={},S="";for(g=0;g!=v.length;++g)if(!(v[g].s.c>x)&&!(v[g].s.r>m)&&!(v[g].e.c<x)&&!(v[g].e.r<m)){(v[g].s.c!=x||v[g].s.r!=m)&&(w=!0),A["table:number-columns-spanned"]=v[g].e.c-v[g].s.c+1,A["table:number-rows-spanned"]=v[g].e.r-v[g].s.r+1;break}if(w){f.push(r);continue}var D=_t({r:m,c:x}),T=y?(l[m]||[])[x]:l[D];if(T&&T.f&&(A["table:formula"]=wt(C7(T.f)),T.F&&T.F.slice(0,D.length)==D)){var k=an(T.F);A["table:number-matrix-columns-spanned"]=k.e.c-k.s.c+1,A["table:number-matrix-rows-spanned"]=k.e.r-k.s.r+1}if(!T){f.push(t);continue}switch(T.t){case"b":S=T.v?"TRUE":"FALSE",A["office:value-type"]="boolean",A["office:boolean-value"]=T.v?"true":"false";break;case"n":S=T.w||String(T.v||0),A["office:value-type"]="float",A["office:value"]=T.v||0;break;case"s":case"str":S=T.v==null?"":T.v,A["office:value-type"]="string";break;case"d":S=T.w||wa(T.v).toISOString(),A["office:value-type"]="date",A["office:date-value"]=wa(T.v).toISOString(),A["table:style-name"]="ce1";break;default:f.push(t);continue}var C=e(S);if(T.l&&T.l.Target){var M=T.l.Target;M=M.charAt(0)=="#"?"#"+T7(M.slice(1)):M,M.charAt(0)!="#"&&!M.match(/^\w+:/)&&(M="../"+M),C=Fe("text:a",C,{"xlink:href":M.replace(/&/g,"&amp;")})}f.push("          "+Fe("table:table-cell",Fe("text:p",C,{}),A)+`
`)}f.push(`        </table:table-row>
`)}return f.push(`      </table:table>
`),f.join("")},s=function(l,c){l.push(` <office:automatic-styles>
`),l.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),l.push(`   <number:month number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:day number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:year/>
`),l.push(`  </number:date-style>
`);var d=0;c.SheetNames.map(function(m){return c.Sheets[m]}).forEach(function(m){if(m&&m["!cols"]){for(var x=0;x<m["!cols"].length;++x)if(m["!cols"][x]){var h=m["!cols"][x];if(h.width==null&&h.wpx==null&&h.wch==null)continue;cy(h),h.ods=d;var v=m["!cols"][x].wpx+"px";l.push('  <style:style style:name="co'+d+`" style:family="table-column">
`),l.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+v+`"/>
`),l.push(`  </style:style>
`),++d}}});var f=0;c.SheetNames.map(function(m){return c.Sheets[m]}).forEach(function(m){if(m&&m["!rows"]){for(var x=0;x<m["!rows"].length;++x)if(m["!rows"][x]){m["!rows"][x].ods=f;var h=m["!rows"][x].hpx+"px";l.push('  <style:style style:name="ro'+f+`" style:family="table-row">
`),l.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),l.push(`  </style:style>
`),++f}}}),l.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),l.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),l.push(`  </style:style>
`),l.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),l.push(` </office:automatic-styles>
`)};return function(c,d){var f=[vr],m=Zd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),x=Zd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});d.bookType=="fods"?(f.push("<office:document"+m+x+`>
`),f.push($A().replace(/office:document-meta/g,"office:meta"))):f.push("<office:document-content"+m+`>
`),s(f,c),f.push(`  <office:body>
`),f.push(`    <office:spreadsheet>
`);for(var h=0;h!=c.SheetNames.length;++h)f.push(n(c.Sheets[c.SheetNames[h]],c,h));return f.push(`    </office:spreadsheet>
`),f.push(`  </office:body>
`),d.bookType=="fods"?f.push("</office:document>"):f.push("</office:document-content>"),f.join("")}}();function CC(e,t){if(t.bookType=="fods")return $4(e,t);var r=Qb(),n="",s=[],l=[];return n="mimetype",tt(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",tt(r,n,$4(e,t)),s.push([n,"text/xml"]),l.push([n,"ContentFile"]),n="styles.xml",tt(r,n,oB(e,t)),s.push([n,"text/xml"]),l.push([n,"StylesFile"]),n="meta.xml",tt(r,n,vr+$A()),s.push([n,"text/xml"]),l.push([n,"MetadataFile"]),n="manifest.rdf",tt(r,n,yF(l)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",tt(r,n,vF(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Zm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function cB(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Hn(Xd(e))}function dB(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Li(e){var t=e.reduce(function(s,l){return s+l.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function uB(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var l=0;s>=1;++l,s/=256)e[t+l]=s&255;e[t+15]|=r>=0?0:128}function Qd(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function yt(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Go(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function jr(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=Qd(e,r),l=s&7;s=Math.floor(s/8);var c=0,d;if(s==0)break;switch(l){case 0:{for(var f=r[0];e[r[0]++]>=128;);d=e.slice(f,r[0])}break;case 5:c=4,d=e.slice(r[0],r[0]+c),r[0]+=c;break;case 1:c=8,d=e.slice(r[0],r[0]+c),r[0]+=c;break;case 2:c=Qd(e,r),d=e.slice(r[0],r[0]+c),r[0]+=c;break;case 3:case 4:default:throw new Error("PB Type ".concat(l," for Field ").concat(s," at offset ").concat(n))}var m={data:d,type:l};t[s]==null?t[s]=[m]:t[s].push(m)}return t}function Vr(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(yt(n*8+s.type)),s.type==2&&t.push(yt(s.data.length)),t.push(s.data))})}),Li(t)}function $n(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=Qd(e,n),l=jr(e.slice(n[0],n[0]+s));n[0]+=s;var c={id:Go(l[1][0].data),messages:[]};l[2].forEach(function(d){var f=jr(d.data),m=Go(f[3][0].data);c.messages.push({meta:f,data:e.slice(n[0],n[0]+m)}),n[0]+=m}),(t=l[3])!=null&&t[0]&&(c.merge=Go(l[3][0].data)>>>0>0),r.push(c)}return r}function Lo(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:yt(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:yt(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(c){s.push(c.data),c.meta[3]=[{type:0,data:yt(c.data.length)}],n[2].push({data:Vr(c.meta),type:2})});var l=Vr(n);t.push(yt(l.length)),t.push(l),s.forEach(function(c){return t.push(c)})}),Li(t)}function fB(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Qd(t,r),s=[];r[0]<t.length;){var l=t[r[0]]&3;if(l==0){var c=t[r[0]++]>>2;if(c<60)++c;else{var d=c-59;c=t[r[0]],d>1&&(c|=t[r[0]+1]<<8),d>2&&(c|=t[r[0]+2]<<16),d>3&&(c|=t[r[0]+3]<<24),c>>>=0,c++,r[0]+=d}s.push(t.slice(r[0],r[0]+c)),r[0]+=c;continue}else{var f=0,m=0;if(l==1?(m=(t[r[0]]>>2&7)+4,f=(t[r[0]++]&224)<<3,f|=t[r[0]++]):(m=(t[r[0]++]>>2)+1,l==2?(f=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(f=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Li(s)],f==0)throw new Error("Invalid offset 0");if(f>s[0].length)throw new Error("Invalid offset beyond length");if(m>=f)for(s.push(s[0].slice(-f)),m-=f;m>=s[s.length-1].length;)s.push(s[s.length-1]),m-=s[s.length-1].length;s.push(s[0].slice(-f,-f+m))}}var x=Li(s);if(x.length!=n)throw new Error("Unexpected length: ".concat(x.length," != ").concat(n));return x}function qn(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(fB(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Li(t)}function Ro(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var l=yt(n),c=l.length;t.push(l),n<=60?(c++,t.push(new Uint8Array([n-1<<2]))):n<=256?(c+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(c+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(c+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(c+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),c+=n,s[0]=0,s[1]=c&255,s[2]=c>>8&255,s[3]=c>>16&255,r+=n}return Li(t)}function rg(e,t){var r=new Uint8Array(32),n=Zm(r),s=12,l=0;switch(r[0]=5,e.t){case"n":r[1]=2,uB(r,s,e.v),l|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),l|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),l|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,l,!0),r.slice(0,s)}function ag(e,t){var r=new Uint8Array(32),n=Zm(r),s=12,l=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),l|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),l|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),l|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,l,!0),r.slice(0,s)}function Ai(e){var t=jr(e);return Qd(t[1][0].data)}function mB(e,t,r){var n,s,l,c;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var d=((c=(l=e[8])==null?void 0:l[0])==null?void 0:c.data)&&Go(e[8][0].data)>0||!1;if(d)throw"Math only works with normal offsets";for(var f=0,m=Zm(e[7][0].data),x=0,h=[],v=Zm(e[4][0].data),g=0,y=[],b=0;b<t.length;++b){if(t[b]==null){m.setUint16(b*2,65535,!0),v.setUint16(b*2,65535);continue}m.setUint16(b*2,x,!0),v.setUint16(b*2,g,!0);var j,w;switch(typeof t[b]){case"string":j=rg({t:"s",v:t[b]},r),w=ag({t:"s",v:t[b]},r);break;case"number":j=rg({t:"n",v:t[b]},r),w=ag({t:"n",v:t[b]},r);break;case"boolean":j=rg({t:"b",v:t[b]},r),w=ag({t:"b",v:t[b]},r);break;default:throw new Error("Unsupported value "+t[b])}h.push(j),x+=j.length,y.push(w),g+=w.length,++f}for(e[2][0].data=yt(f);b<e[7][0].data.length/2;++b)m.setUint16(b*2,65535,!0),v.setUint16(b*2,65535,!0);return e[6][0].data=Li(h),e[3][0].data=Li(y),f}function xB(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=an(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(pr(n)));var l=Qm(r,{range:n,header:1}),c=["~Sh33tJ5~"];l.forEach(function(U){return U.forEach(function(Y){typeof Y=="string"&&c.push(Y)})});var d={},f=[],m=Ot.read(t.numbers,{type:"base64"});m.FileIndex.map(function(U,Y){return[U,m.FullPaths[Y]]}).forEach(function(U){var Y=U[0],Q=U[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var ee=Y.content,De=qn(ee),ke=$n(De);ke.forEach(function(fe){f.push(fe.id),d[fe.id]={deps:[],location:Q,type:Go(fe.messages[0].meta[1][0].data)}})}}),f.sort(function(U,Y){return U-Y});var x=f.filter(function(U){return U>1}).map(function(U){return[U,yt(U)]});m.FileIndex.map(function(U,Y){return[U,m.FullPaths[Y]]}).forEach(function(U){var Y=U[0];if(U[1],!!Y.name.match(/\.iwa/)){var Q=$n(qn(Y.content));Q.forEach(function(ee){ee.messages.forEach(function(De){x.forEach(function(ke){ee.messages.some(function(fe){return Go(fe.meta[1][0].data)!=11006&&dB(fe.data,ke[1])})&&d[ke[0]].deps.push(ee.id)})})})}});for(var h=Ot.find(m,d[1].location),v=$n(qn(h.content)),g,y=0;y<v.length;++y){var b=v[y];b.id==1&&(g=b)}var j=Ai(jr(g.messages[0].data)[1][0].data);for(h=Ot.find(m,d[j].location),v=$n(qn(h.content)),y=0;y<v.length;++y)b=v[y],b.id==j&&(g=b);for(j=Ai(jr(g.messages[0].data)[2][0].data),h=Ot.find(m,d[j].location),v=$n(qn(h.content)),y=0;y<v.length;++y)b=v[y],b.id==j&&(g=b);for(j=Ai(jr(g.messages[0].data)[2][0].data),h=Ot.find(m,d[j].location),v=$n(qn(h.content)),y=0;y<v.length;++y)b=v[y],b.id==j&&(g=b);var w=jr(g.messages[0].data);{w[6][0].data=yt(n.e.r+1),w[7][0].data=yt(n.e.c+1);var A=Ai(w[46][0].data),S=Ot.find(m,d[A].location),D=$n(qn(S.content));{for(var T=0;T<D.length&&D[T].id!=A;++T);if(D[T].id!=A)throw"Bad ColumnRowUIDMapArchive";var k=jr(D[T].messages[0].data);k[1]=[],k[2]=[],k[3]=[];for(var C=0;C<=n.e.c;++C){var M=[];M[1]=M[2]=[{type:0,data:yt(C+420690)}],k[1].push({type:2,data:Vr(M)}),k[2].push({type:0,data:yt(C)}),k[3].push({type:0,data:yt(C)})}k[4]=[],k[5]=[],k[6]=[];for(var I=0;I<=n.e.r;++I)M=[],M[1]=M[2]=[{type:0,data:yt(I+726270)}],k[4].push({type:2,data:Vr(M)}),k[5].push({type:0,data:yt(I)}),k[6].push({type:0,data:yt(I)});D[T].messages[0].data=Vr(k)}S.content=Ro(Lo(D)),S.size=S.content.length,delete w[46];var R=jr(w[4][0].data);{R[7][0].data=yt(n.e.r+1);var L=jr(R[1][0].data),P=Ai(L[2][0].data);S=Ot.find(m,d[P].location),D=$n(qn(S.content));{if(D[0].id!=P)throw"Bad HeaderStorageBucket";var O=jr(D[0].messages[0].data);for(I=0;I<l.length;++I){var z=jr(O[2][0].data);z[1][0].data=yt(I),z[4][0].data=yt(l[I].length),O[2][I]={type:O[2][0].type,data:Vr(z)}}D[0].messages[0].data=Vr(O)}S.content=Ro(Lo(D)),S.size=S.content.length;var V=Ai(R[2][0].data);S=Ot.find(m,d[V].location),D=$n(qn(S.content));{if(D[0].id!=V)throw"Bad HeaderStorageBucket";for(O=jr(D[0].messages[0].data),C=0;C<=n.e.c;++C)z=jr(O[2][0].data),z[1][0].data=yt(C),z[4][0].data=yt(n.e.r+1),O[2][C]={type:O[2][0].type,data:Vr(z)};D[0].messages[0].data=Vr(O)}S.content=Ro(Lo(D)),S.size=S.content.length;var G=Ai(R[4][0].data);(function(){for(var U=Ot.find(m,d[G].location),Y=$n(qn(U.content)),Q,ee=0;ee<Y.length;++ee){var De=Y[ee];De.id==G&&(Q=De)}var ke=jr(Q.messages[0].data);{ke[3]=[];var fe=[];c.forEach(function(Ne,Je){fe[1]=[{type:0,data:yt(Je)}],fe[2]=[{type:0,data:yt(1)}],fe[3]=[{type:2,data:cB(Ne)}],ke[3].push({type:2,data:Vr(fe)})})}Q.messages[0].data=Vr(ke);var Ee=Lo(Y),Ie=Ro(Ee);U.content=Ie,U.size=U.content.length})();var K=jr(R[3][0].data);{var ce=K[1][0];delete K[2];var le=jr(ce.data);{var ne=Ai(le[2][0].data);(function(){for(var U=Ot.find(m,d[ne].location),Y=$n(qn(U.content)),Q,ee=0;ee<Y.length;++ee){var De=Y[ee];De.id==ne&&(Q=De)}var ke=jr(Q.messages[0].data);{delete ke[6],delete K[7];var fe=new Uint8Array(ke[5][0].data);ke[5]=[];for(var Ee=0,Ie=0;Ie<=n.e.r;++Ie){var Ne=jr(fe);Ee+=mB(Ne,l[Ie],c),Ne[1][0].data=yt(Ie),ke[5].push({data:Vr(Ne),type:2})}ke[1]=[{type:0,data:yt(n.e.c+1)}],ke[2]=[{type:0,data:yt(n.e.r+1)}],ke[3]=[{type:0,data:yt(Ee)}],ke[4]=[{type:0,data:yt(n.e.r+1)}]}Q.messages[0].data=Vr(ke);var Je=Lo(Y),qe=Ro(Je);U.content=qe,U.size=U.content.length})()}ce.data=Vr(le)}R[3][0].data=Vr(K)}w[4][0].data=Vr(R)}g.messages[0].data=Vr(w);var Z=Lo(v),F=Ro(Z);return h.content=F,h.size=h.content.length,m}function hB(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function xy(e){hB([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function pB(e,t){return t.bookType=="ods"?CC(e,t):t.bookType=="numbers"?xB(e,t):t.bookType=="xlsb"?gB(e,t):vB(e,t)}function gB(e,t){Uo=1024,e&&!e.SSF&&(e.SSF=La(tr)),e&&e.SSF&&(K0(),G0(e.SSF),t.revssf=Y0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=dC.indexOf(t.bookType)>-1,s=BA();xy(t=t||{});var l=Qb(),c="",d=0;if(t.cellXfs=[],$i(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),c="docProps/core.xml",tt(l,c,qA(e.Props,t)),s.coreprops.push(c),jt(t.rels,2,c,ut.CORE_PROPS),c="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var f=[],m=0;m<e.SheetNames.length;++m)(e.Workbook.Sheets[m]||{}).Hidden!=2&&f.push(e.SheetNames[m]);e.Props.SheetNames=f}for(e.Props.Worksheets=e.Props.SheetNames.length,tt(l,c,VA(e.Props)),s.extprops.push(c),jt(t.rels,3,c,ut.EXT_PROPS),e.Custprops!==e.Props&&ea(e.Custprops||{}).length>0&&(c="docProps/custom.xml",tt(l,c,GA(e.Custprops)),s.custprops.push(c),jt(t.rels,4,c,ut.CUST_PROPS)),d=1;d<=e.SheetNames.length;++d){var x={"!id":{}},h=e.Sheets[e.SheetNames[d-1]],v=(h||{})["!type"]||"sheet";switch(v){case"chart":default:c="xl/worksheets/sheet"+d+"."+r,tt(l,c,y9(d-1,c,t,e,x)),s.sheets.push(c),jt(t.wbrels,-1,"worksheets/sheet"+d+"."+r,ut.WS[0])}if(h){var g=h["!comments"],y=!1,b="";g&&g.length>0&&(b="xl/comments"+d+"."+r,tt(l,b,w9(g,b)),s.comments.push(b),jt(x,-1,"../comments"+d+"."+r,ut.CMNT),y=!0),h["!legacy"]&&y&&tt(l,"xl/drawings/vmlDrawing"+d+".vml",oC(d,h["!comments"])),delete h["!comments"],delete h["!legacy"]}x["!id"].rId1&&tt(l,UA(c),Ho(x))}return t.Strings!=null&&t.Strings.length>0&&(c="xl/sharedStrings."+r,tt(l,c,N9(t.Strings,c,t)),s.strs.push(c),jt(t.wbrels,-1,"sharedStrings."+r,ut.SST)),c="xl/workbook."+r,tt(l,c,b9(e,c)),s.workbooks.push(c),jt(t.rels,1,c,ut.WB),c="xl/theme/theme1.xml",tt(l,c,iC(e.Themes,t)),s.themes.push(c),jt(t.wbrels,-1,"theme/theme1.xml",ut.THEME),c="xl/styles."+r,tt(l,c,j9(e,c,t)),s.styles.push(c),jt(t.wbrels,-1,"styles."+r,ut.STY),e.vbaraw&&n&&(c="xl/vbaProject.bin",tt(l,c,e.vbaraw),s.vba.push(c),jt(t.wbrels,-1,"vbaProject.bin",ut.VBA)),c="xl/metadata."+r,tt(l,c,_9(c)),s.metadata.push(c),jt(t.wbrels,-1,"metadata."+r,ut.XLMETA),tt(l,"[Content_Types].xml",zA(s,t)),tt(l,"_rels/.rels",Ho(t.rels)),tt(l,"xl/_rels/workbook."+r+".rels",Ho(t.wbrels)),delete t.revssf,delete t.ssf,l}function vB(e,t){Uo=1024,e&&!e.SSF&&(e.SSF=La(tr)),e&&e.SSF&&(K0(),G0(e.SSF),t.revssf=Y0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=dC.indexOf(t.bookType)>-1,s=BA();xy(t=t||{});var l=Qb(),c="",d=0;if(t.cellXfs=[],$i(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),c="docProps/core.xml",tt(l,c,qA(e.Props,t)),s.coreprops.push(c),jt(t.rels,2,c,ut.CORE_PROPS),c="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var f=[],m=0;m<e.SheetNames.length;++m)(e.Workbook.Sheets[m]||{}).Hidden!=2&&f.push(e.SheetNames[m]);e.Props.SheetNames=f}e.Props.Worksheets=e.Props.SheetNames.length,tt(l,c,VA(e.Props)),s.extprops.push(c),jt(t.rels,3,c,ut.EXT_PROPS),e.Custprops!==e.Props&&ea(e.Custprops||{}).length>0&&(c="docProps/custom.xml",tt(l,c,GA(e.Custprops)),s.custprops.push(c),jt(t.rels,4,c,ut.CUST_PROPS));var x=["SheetJ5"];for(t.tcid=0,d=1;d<=e.SheetNames.length;++d){var h={"!id":{}},v=e.Sheets[e.SheetNames[d-1]],g=(v||{})["!type"]||"sheet";switch(g){case"chart":default:c="xl/worksheets/sheet"+d+"."+r,tt(l,c,bC(d-1,t,e,h)),s.sheets.push(c),jt(t.wbrels,-1,"worksheets/sheet"+d+"."+r,ut.WS[0])}if(v){var y=v["!comments"],b=!1,j="";if(y&&y.length>0){var w=!1;y.forEach(function(A){A[1].forEach(function(S){S.T==!0&&(w=!0)})}),w&&(j="xl/threadedComments/threadedComment"+d+"."+r,tt(l,j,WL(y,x,t)),s.threadedcomments.push(j),jt(h,-1,"../threadedComments/threadedComment"+d+"."+r,ut.TCMNT)),j="xl/comments"+d+"."+r,tt(l,j,cC(y)),s.comments.push(j),jt(h,-1,"../comments"+d+"."+r,ut.CMNT),b=!0}v["!legacy"]&&b&&tt(l,"xl/drawings/vmlDrawing"+d+".vml",oC(d,v["!comments"])),delete v["!comments"],delete v["!legacy"]}h["!id"].rId1&&tt(l,UA(c),Ho(h))}return t.Strings!=null&&t.Strings.length>0&&(c="xl/sharedStrings."+r,tt(l,c,eC(t.Strings,t)),s.strs.push(c),jt(t.wbrels,-1,"sharedStrings."+r,ut.SST)),c="xl/workbook."+r,tt(l,c,NC(e)),s.workbooks.push(c),jt(t.rels,1,c,ut.WB),c="xl/theme/theme1.xml",tt(l,c,iC(e.Themes,t)),s.themes.push(c),jt(t.wbrels,-1,"theme/theme1.xml",ut.THEME),c="xl/styles."+r,tt(l,c,nC(e,t)),s.styles.push(c),jt(t.wbrels,-1,"styles."+r,ut.STY),e.vbaraw&&n&&(c="xl/vbaProject.bin",tt(l,c,e.vbaraw),s.vba.push(c),jt(t.wbrels,-1,"vbaProject.bin",ut.VBA)),c="xl/metadata."+r,tt(l,c,lC()),s.metadata.push(c),jt(t.wbrels,-1,"metadata."+r,ut.XLMETA),x.length>1&&(c="xl/persons/person.xml",tt(l,c,XL(x)),s.people.push(c),jt(t.wbrels,-1,"persons/person.xml",ut.PEOPLE)),tt(l,"[Content_Types].xml",zA(s,t)),tt(l,"_rels/.rels",Ho(t.rels)),tt(l,"xl/_rels/workbook."+r+".rels",Ho(t.wbrels)),delete t.revssf,delete t.ssf,l}function bB(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=$s(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function TC(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return hu(t.file,Ot.write(e,{type:ht?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Ot.write(e,t)}function yB(e,t){var r=La(t||{}),n=pB(e,r);return jB(n,r)}function jB(e,t){var r={},n=ht?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Ot.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(V0(s))}return t.password&&typeof encrypt_agile<"u"?TC(encrypt_agile(s,t.password),t):t.type==="file"?hu(t.file,s):t.type=="string"?Ld(s):s}function NB(e,t){var r=t||{},n=I9(e,r);return TC(n,r)}function is(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Yd(Xd(n));case"binary":return Xd(n);case"string":return e;case"file":return hu(t.file,n,"utf8");case"buffer":return ht?Xs(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):is(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function wB(e,t){switch(t.type){case"base64":return Yd(e);case"binary":return e;case"string":return e;case"file":return hu(t.file,e,"binary");case"buffer":return ht?Xs(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function xm(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Yd(r):t.type=="string"?Ld(r):r;case"file":return hu(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function DC(e,t){ZP(),o9(e);var r=La(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=DC(e,r);return r.type="array",V0(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return is(L9(e,r),r);case"slk":case"sylk":return is(sL.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return is(EC(e.Sheets[e.SheetNames[s]],r),r);case"txt":return wB(OC(e.Sheets[e.SheetNames[s]],r),r);case"csv":return is(hy(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return is(iL.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return xm(nL.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return is(lL.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return is(xL.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return is(JA.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return is(CC(e,r),r);case"wk1":return xm(F4.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return xm(F4.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),xm(_C(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),NB(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return yB(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function _B(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function yu(e,t,r){var n={};return n.type="file",n.file=t,_B(n),DC(e,n)}function EB(e,t,r,n,s,l,c,d){var f=Qr(r),m=d.defval,x=d.raw||!Object.prototype.hasOwnProperty.call(d,"raw"),h=!0,v=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(v,"__rowNum__",{value:r,enumerable:!1})}catch{v.__rowNum__=r}else v.__rowNum__=r;if(!c||e[r])for(var g=t.s.c;g<=t.e.c;++g){var y=c?e[r][g]:e[n[g]+f];if(y===void 0||y.t===void 0){if(m===void 0)continue;l[g]!=null&&(v[l[g]]=m);continue}var b=y.v;switch(y.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(l[g]!=null){if(b==null)if(y.t=="e"&&b===null)v[l[g]]=null;else if(m!==void 0)v[l[g]]=m;else if(x&&b===null)v[l[g]]=null;else continue;else v[l[g]]=x&&(y.t!=="n"||y.t==="n"&&d.rawNumbers!==!1)?b:qs(y,b,d);b!=null&&(h=!1)}}return{row:v,isempty:h}}function Qm(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,l=[],c=0,d="",f={s:{r:0,c:0},e:{r:0,c:0}},m=t||{},x=m.range!=null?m.range:e["!ref"];switch(m.header===1?n=1:m.header==="A"?n=2:Array.isArray(m.header)?n=3:m.header==null&&(n=0),typeof x){case"string":f=Ut(x);break;case"number":f=Ut(e["!ref"]),f.s.r=x;break;default:f=x}n>0&&(s=0);var h=Qr(f.s.r),v=[],g=[],y=0,b=0,j=Array.isArray(e),w=f.s.r,A=0,S={};j&&!e[w]&&(e[w]=[]);var D=m.skipHidden&&e["!cols"]||[],T=m.skipHidden&&e["!rows"]||[];for(A=f.s.c;A<=f.e.c;++A)if(!(D[A]||{}).hidden)switch(v[A]=oa(A),r=j?e[w][A]:e[v[A]+h],n){case 1:l[A]=A-f.s.c;break;case 2:l[A]=v[A];break;case 3:l[A]=m.header[A-f.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),d=c=qs(r,null,m),b=S[c]||0,!b)S[c]=1;else{do d=c+"_"+b++;while(S[d]);S[c]=b,S[d]=1}l[A]=d}for(w=f.s.r+s;w<=f.e.r;++w)if(!(T[w]||{}).hidden){var k=EB(e,f,w,v,n,l,j,m);(k.isempty===!1||(n===1?m.blankrows!==!1:m.blankrows))&&(g[y++]=k.row)}return g.length=y,g}var q4=/"/g;function SB(e,t,r,n,s,l,c,d){for(var f=!0,m=[],x="",h=Qr(r),v=t.s.c;v<=t.e.c;++v)if(n[v]){var g=d.dense?(e[r]||[])[v]:e[n[v]+h];if(g==null)x="";else if(g.v!=null){f=!1,x=""+(d.rawNumbers&&g.t=="n"?g.v:qs(g,null,d));for(var y=0,b=0;y!==x.length;++y)if((b=x.charCodeAt(y))===s||b===l||b===34||d.forceQuotes){x='"'+x.replace(q4,'""')+'"';break}x=="ID"&&(x='"ID"')}else g.f!=null&&!g.F?(f=!1,x="="+g.f,x.indexOf(",")>=0&&(x='"'+x.replace(q4,'""')+'"')):x="";m.push(x)}return d.blankrows===!1&&f?null:m.join(c)}function hy(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Ut(e["!ref"]),l=n.FS!==void 0?n.FS:",",c=l.charCodeAt(0),d=n.RS!==void 0?n.RS:`
`,f=d.charCodeAt(0),m=new RegExp((l=="|"?"\\|":l)+"+$"),x="",h=[];n.dense=Array.isArray(e);for(var v=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(v[y]||{}).hidden||(h[y]=oa(y));for(var b=0,j=s.s.r;j<=s.e.r;++j)(g[j]||{}).hidden||(x=SB(e,s,j,h,c,f,l,n),x!=null&&(n.strip&&(x=x.replace(m,"")),(x||n.blankrows!==!1)&&r.push((b++?d:"")+x)));return delete n.dense,r.join("")}function OC(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=hy(e,t);return r}function AB(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Ut(e["!ref"]),l="",c=[],d,f=[],m=Array.isArray(e);for(d=s.s.c;d<=s.e.c;++d)c[d]=oa(d);for(var x=s.s.r;x<=s.e.r;++x)for(l=Qr(x),d=s.s.c;d<=s.e.c;++d)if(t=c[d]+l,r=m?(e[x]||[])[d]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}f[f.length]=t+"="+n}return f}function kC(e,t,r){var n=r||{},s=+!n.skipHeader,l=e||{},c=0,d=0;if(l&&n.origin!=null)if(typeof n.origin=="number")c=n.origin;else{var f=typeof n.origin=="string"?Fr(n.origin):n.origin;c=f.r,d=f.c}var m,x={s:{c:0,r:0},e:{c:d,r:c+t.length-1+s}};if(l["!ref"]){var h=Ut(l["!ref"]);x.e.c=Math.max(x.e.c,h.e.c),x.e.r=Math.max(x.e.r,h.e.r),c==-1&&(c=h.e.r+1,x.e.r=c+t.length-1+s)}else c==-1&&(c=0,x.e.r=t.length-1+s);var v=n.header||[],g=0;t.forEach(function(b,j){ea(b).forEach(function(w){(g=v.indexOf(w))==-1&&(v[g=v.length]=w);var A=b[w],S="z",D="",T=_t({c:d+g,r:c+j+s});m=Jd(l,T),A&&typeof A=="object"&&!(A instanceof Date)?l[T]=A:(typeof A=="number"?S="n":typeof A=="boolean"?S="b":typeof A=="string"?S="s":A instanceof Date?(S="d",n.cellDates||(S="n",A=Fa(A)),D=n.dateNF||tr[14]):A===null&&n.nullError&&(S="e",A=0),m?(m.t=S,m.v=A,delete m.w,delete m.R,D&&(m.z=D)):l[T]=m={t:S,v:A},D&&(m.z=D))})}),x.e.c=Math.max(x.e.c,d+v.length-1);var y=Qr(c);if(s)for(g=0;g<v.length;++g)l[oa(g+d)+y]={t:"s",v:v[g]};return l["!ref"]=pr(x),l}function CB(e,t){return kC(null,e,t)}function Jd(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Fr(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Jd(e,_t(t)):Jd(e,_t({r:t,c:r||0}))}function TB(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function DB(){return{SheetNames:[],Sheets:{}}}function OB(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var l=r.match(/(^.*?)(\d+)$/);s=l&&+l[2]||0;var c=l&&l[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=c+s)!=-1;++s);}if(jC(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function kB(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=TB(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function PB(e,t){return e.z=t,e}function PC(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function MB(e,t,r){return PC(e,"#"+t,r)}function FB(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function LB(e,t,r,n){for(var s=typeof t!="string"?t:Ut(t),l=typeof t=="string"?t:pr(t),c=s.s.r;c<=s.e.r;++c)for(var d=s.s.c;d<=s.e.c;++d){var f=Jd(e,c,d);f.t="n",f.F=l,delete f.v,c==s.s.r&&d==s.s.c&&(f.f=r,n&&(f.D=!0))}return e}var _a={encode_col:oa,encode_row:Qr,encode_cell:_t,encode_range:pr,decode_col:ny,decode_row:ay,split_cell:ZM,decode_cell:Fr,decode_range:an,format_cell:qs,sheet_add_aoa:PA,sheet_add_json:kC,sheet_add_dom:SC,aoa_to_sheet:oc,json_to_sheet:CB,table_to_sheet:AC,table_to_book:iB,sheet_to_csv:hy,sheet_to_txt:OC,sheet_to_json:Qm,sheet_to_html:EC,sheet_to_formulae:AB,sheet_to_row_object_array:Qm,sheet_get_cell:Jd,book_new:DB,book_append_sheet:OB,book_set_sheet_visibility:kB,cell_set_number_format:PB,cell_set_hyperlink:PC,cell_set_internal_link:MB,cell_add_comment:FB,sheet_set_array_formula:LB,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function RB({onNuevaVenta:e,onVerDetalle:t}){const{ventas:r,fetchVentas:n,deleteVenta:s}=Yb(),{compradores:l}=H0(),{showSuccess:c,showError:d}=ms(),[f,m]=_.useState({busqueda:"",tipo:"",comprador_id:"",fecha_desde:"",fecha_hasta:""}),[x,h]=_.useState(!1),[v,g]=_.useState(new Set),[y,b]=_.useState(!0),[j,w]=_.useState(null);_.useEffect(()=>{A()},[]);const A=async()=>{b(!0),await n(),b(!1)},S=r.filter(O=>{const V=l.find(Z=>Z.id===O.comprador_id)?.nombre||"",G=!f.busqueda||V.toLowerCase().includes(f.busqueda.toLowerCase())||O.observaciones?.toLowerCase().includes(f.busqueda.toLowerCase()),K=!f.tipo||O.tipo===f.tipo,ce=!f.comprador_id||O.comprador_id===f.comprador_id,le=!f.fecha_desde||new Date(O.fecha)>=new Date(f.fecha_desde),ne=!f.fecha_hasta||new Date(O.fecha)<=new Date(f.fecha_hasta);return G&&K&&ce&&le&&ne}),D=()=>{m({busqueda:"",tipo:"",comprador_id:"",fecha_desde:"",fecha_hasta:""})},T=()=>{const O=S.map(K=>{const ce=l.find(Y=>Y.id===K.comprador_id),[le,ne,Z]=K.fecha.split("-");return{Fecha:new Date(le,ne-1,Z).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric",timeZone:"UTC"}),Tipo:K.tipo,Comprador:ce?.nombre||"Sin comprador","Precio/kg":`$${K.precio_kilo}`,"Total Animales":K.total_animales||0,"Peso Total (kg)":K.peso_total||0,"Valor Total":`$${((K.peso_total||0)*K.precio_kilo).toLocaleString("es-AR")}`,Observaciones:K.observaciones||""}}),z=_a.json_to_sheet(O),V=_a.book_new();_a.book_append_sheet(V,z,"Ventas");const G=new Date().toISOString().split("T")[0];yu(V,`ventas_${G}.xlsx`)},k=async()=>{if(j)try{await s(j.id),c("Venta eliminada correctamente"),w(null),A()}catch(O){d("Error al eliminar la venta: "+O.message)}},C=O=>{const z=new Set(v);z.has(O)?z.delete(O):z.add(O),g(z)},M=O=>{if(!O)return 0;if(O.valor_total&&!isNaN(O.valor_total)&&isFinite(O.valor_total))return parseFloat(O.valor_total);if(!O.precios_categoria||Object.keys(O.precios_categoria).length===0){const ne=parseFloat(O.peso_total||0),Z=parseFloat(O.precio_kilo||0),F=ne*Z;return console.log("📊 Cálculo fallback:",{pesoTotal:ne,precioKilo:Z,resultado:F}),isFinite(F)?F:0}let z=O.precios_categoria;if(typeof z=="string")try{z=JSON.parse(z)}catch(ne){return console.error("Error parsing precios_categoria:",ne),0}if(!O.peso_total&&O.total_animales){const ne=parseFloat(O.total_animales||0),Z=parseFloat(O.precio_kilo||0),F=ne*350*Z;return console.log("📊 Cálculo desde total_animales:",{totalAnimales:ne,precioKilo:Z,resultado:F}),isFinite(F)?F:0}const V=Object.keys(z);if(V.length===1){const ne=parseFloat(z[V[0]]||0),Z=parseFloat(O.peso_total||0),F=Z*ne;return console.log("📊 Cálculo una categoría:",{precio:ne,pesoTotal:Z,resultado:F}),isFinite(F)?F:0}const G=Object.values(z).map(ne=>{const Z=parseFloat(ne||0);return isFinite(Z)?Z:0}),K=G.length>0?G.reduce((ne,Z)=>ne+Z,0)/G.length:0,ce=parseFloat(O.peso_total||0),le=ce*K;return console.log("📊 Cálculo múltiples categorías:",{preciosArray:G,precioPromedio:K,pesoTotal:ce,resultado:le}),isFinite(le)?le:0},I=()=>{g(new Set(S.map(O=>O.id)))},R=()=>{g(new Set)},L=O=>({jaula:"Jaula",remate:"Remate",particular:"Particular"})[O]||O,P=O=>{const[z,V,G]=O.split("-");return new Date(z,V-1,G).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric",timeZone:"UTC"})};return y?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"w-8 h-8 border-2 border-[#67806D] border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-[#3C454A]",children:"Ventas"}),a.jsxs("p",{className:"text-gray-600",children:[S.length," venta",S.length!==1?"s":"",f.busqueda||f.tipo||f.comprador_id||f.fecha_desde||f.fecha_hasta?` (filtrada${S.length!==1?"s":""} de ${r.length})`:""]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>h(!x),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(Jr,{className:"w-4 h-4"}),"Filtros"]}),a.jsxs("button",{onClick:T,disabled:S.length===0,className:"flex items-center gap-2 px-4 py-2 border border-[#67806D] text-[#67806D] rounded-lg hover:bg-[#67806D]/5 transition-colors disabled:opacity-50",children:[a.jsx(ma,{className:"w-4 h-4"}),"Excel"]})]})]}),x&&a.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Búsqueda"}),a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",value:f.busqueda,onChange:O=>m(z=>({...z,busqueda:O.target.value})),placeholder:"Comprador, observaciones...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Venta"}),a.jsxs("select",{value:f.tipo,onChange:O=>m(z=>({...z,tipo:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:[a.jsx("option",{value:"",children:"Todos"}),a.jsx("option",{value:"jaula",children:"Jaula"}),a.jsx("option",{value:"remate",children:"Remate"}),a.jsx("option",{value:"particular",children:"Particular"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comprador"}),a.jsxs("select",{value:f.comprador_id,onChange:O=>m(z=>({...z,comprador_id:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]",children:[a.jsx("option",{value:"",children:"Todos"}),l.map(O=>a.jsx("option",{value:O.id,children:O.nombre},O.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Desde"}),a.jsx("input",{type:"date",value:f.fecha_desde,onChange:O=>m(z=>({...z,fecha_desde:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Hasta"}),a.jsx("input",{type:"date",value:f.fecha_hasta,onChange:O=>m(z=>({...z,fecha_hasta:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#67806D]"})]})]}),a.jsx("div",{className:"flex justify-end mt-4",children:a.jsx("button",{onClick:D,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Limpiar filtros"})})]}),S.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("span",{className:"text-sm text-gray-600",children:[v.size," de ",S.length," expandida",v.size!==1?"s":""]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:I,className:"text-sm text-[#67806D] hover:text-[#5a6b60] flex items-center gap-1",children:[a.jsx(Iv,{className:"w-4 h-4"}),"Expandir todas"]}),a.jsx("span",{className:"text-gray-300",children:"|"}),a.jsxs("button",{onClick:R,className:"text-sm text-[#67806D] hover:text-[#5a6b60] flex items-center gap-1",children:[a.jsx(V2,{className:"w-4 h-4"}),"Contraer todas"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:S.map(O=>{const z=l.find(K=>K.id===O.comprador_id),V=M(O),G=v.has(O.id);return a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] flex items-center gap-2",children:[a.jsx(We,{className:"w-5 h-5"}),P(O.fecha)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[L(O.tipo)," • ID: ",O.id.slice(0,8)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O.tipo==="jaula"?"bg-blue-100 text-blue-800":O.tipo==="remate"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:L(O.tipo)}),a.jsx("button",{onClick:()=>C(O.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:G?a.jsx(V2,{className:"w-5 h-5 text-gray-500"}):a.jsx(Iv,{className:"w-5 h-5 text-gray-500"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vt,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Comprador"}),a.jsx("p",{className:"font-medium",children:z?.nombre||"Sin comprador"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Animales"}),a.jsx("p",{className:"font-medium",children:O.total_animales||0})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wn,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Peso Total"}),a.jsxs("p",{className:"font-medium",children:[(O.peso_total||0).toFixed(1)," kg"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rr,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total"}),a.jsxs("p",{className:"font-bold text-[#67806D] text-lg",children:["$",V.toLocaleString("es-AR")]})]})]})]}),O.observaciones&&a.jsxs("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[a.jsx(et,{className:"w-4 h-4 inline mr-1"}),O.observaciones]})]}),a.jsxs("div",{className:"flex lg:flex-col gap-2",children:[a.jsxs("button",{onClick:()=>C(O.id),className:"flex items-center gap-1 px-3 py-2 text-[#67806D] border border-[#67806D] rounded-lg hover:bg-[#67806D]/5 transition-colors",children:[a.jsx(Kt,{className:"w-4 h-4"}),v.has(O.id)?"Ocultar":"Ver"]}),a.jsxs("button",{onClick:()=>w(O),className:"flex items-center gap-1 px-3 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors",children:[a.jsx(lr,{className:"w-4 h-4"}),"Eliminar"]})]})]})}),a.jsx(Sa,{children:G&&a.jsx(de.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"border-t border-gray-200 overflow-hidden",children:a.jsxs("div",{className:"p-6 bg-gray-50",children:[a.jsxs("h4",{className:"text-lg font-semibold text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(Mt,{className:"w-5 h-5"}),"Detalles de la Venta"]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsxs("h5",{className:"font-medium text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),"Información del Comprador"]}),z?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Nombre:"}),a.jsx("span",{className:"ml-2 font-medium",children:z.nombre})]}),z.contacto&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Contacto:"}),a.jsx("span",{className:"ml-2",children:z.contacto})]}),z.cuit&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-gray-600",children:"CUIT:"}),a.jsx("span",{className:"ml-2",children:z.cuit})]})]}):a.jsx("p",{className:"text-gray-500 text-sm",children:"Sin información del comprador"})]}),a.jsx(IB,{venta:O,valorTotal:V})]}),O.precios_categoria&&Object.keys(O.precios_categoria).length>0&&a.jsx(BB,{venta:O}),a.jsxs("div",{className:"mt-6 bg-white rounded-lg p-4 border border-gray-200",children:[a.jsxs("h5",{className:"font-medium text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx(st,{className:"w-4 h-4"}),"Animales Vendidos"]}),a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(st,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"Lista de animales próximamente disponible"}),a.jsxs("p",{className:"text-sm",children:["Total: ",O.total_animales||0," animales • ",(O.peso_total||0).toFixed(1)," kg"]})]})]})]})})})]},O.id)})})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(st,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:r.length===0?"No hay ventas registradas":"No se encontraron ventas"}),a.jsx("p",{className:"text-gray-500 mb-4",children:r.length===0?"Comience registrando su primera venta":"Intente modificar los filtros de búsqueda"})]}),j&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4",children:"Confirmar Eliminación"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"¿Está seguro de que desea eliminar esta venta? Esta acción no se puede deshacer."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>w(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:k,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Eliminar"})]})]})})]})}const IB=({venta:e,valorTotal:t})=>{const r=!isNaN(t)&&isFinite(t)?t:0,n=!isNaN(e.peso_total)&&isFinite(e.peso_total)?e.peso_total:0,s=e.total_animales||0;let l=0;if(e.precios_categoria&&Object.keys(e.precios_categoria).length>0){if(Object.keys(e.precios_categoria).length===1){const c=Object.values(e.precios_categoria)[0];l=!isNaN(c)&&isFinite(c)?parseFloat(c):0}}else e.precio_kilo&&(l=!isNaN(e.precio_kilo)&&isFinite(e.precio_kilo)?parseFloat(e.precio_kilo):0);return a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsxs("h5",{className:"font-medium text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx(rr,{className:"w-4 h-4"}),"Resumen Financiero"]}),a.jsxs("div",{className:"space-y-2",children:[e.precios_categoria&&Object.keys(e.precios_categoria).length>1?a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Precios por categoría:"}),a.jsx("span",{className:"font-medium text-xs",children:"Ver detalle abajo"})]}):a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Precio por kg:"}),a.jsxs("span",{className:"font-medium",children:["$",l.toLocaleString("es-AR")]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Peso total:"}),a.jsxs("span",{className:"font-medium",children:[n.toFixed(1)," kg"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Total animales:"}),a.jsx("span",{className:"font-medium",children:s})]}),a.jsxs("div",{className:"flex justify-between border-t pt-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total:"}),a.jsxs("span",{className:"font-bold text-[#67806D] text-lg",children:["$",r.toLocaleString("es-AR")]})]})]})]})},BB=({venta:e})=>{const[t,r]=_.useState({}),[n,s]=_.useState(!0);return _.useEffect(()=>{(async()=>{if(e.precios_categoria){s(!0);try{console.log("🔍 Cargando resumen para venta:",e.id),console.log("📊 Precios categoria (raw):",e.precios_categoria),console.log("📊 Tipo de precios_categoria:",typeof e.precios_categoria);let c=e.precios_categoria;if(typeof c=="string")try{c=JSON.parse(c)}catch(x){console.error("Error parsing precios_categoria:",x);return}console.log("📊 Precios categoria (parsed):",c);const{data:d,error:f}=await se.from("detalle_venta").select(`
            *,
            animales (categoria, peso_ingreso)
          `).eq("venta_id",e.id);if(f)throw f;console.log("🐄 Detalles venta obtenidos:",d);const m={};d.forEach(x=>{const h=x.animales?.categoria;if(console.log("🏷️ Procesando animal categoria:",h),!h)return;if(!m[h]){const y=parseFloat(c[h]||0);console.log(`💰 Precio para ${h}:`,y),m[h]={cantidad:0,peso:0,precio_kg:y,valor:0}}const v=parseFloat(x.peso_salida||x.animales.peso_ingreso||0),g=v*m[h].precio_kg;console.log(`� Categoria ${h}: peso=${v}, precio=${m[h].precio_kg}, valor=${g}`),m[h].cantidad+=1,m[h].peso+=v,m[h].valor+=g}),console.log("📋 Resumen final:",m),r(m)}catch(c){console.error("Error cargando resumen por categoría:",c)}finally{s(!1)}}})()},[e.id,e.precios_categoria]),n?a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsx("h5",{className:"font-medium text-gray-700 mb-3",children:"Resumen por Categoría"}),a.jsx("div",{className:"animate-pulse text-gray-500 text-sm",children:"Cargando..."})]}):Object.keys(t).length===0?null:a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mt-4",children:[a.jsxs("h5",{className:"font-medium text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx(Mt,{className:"w-4 h-4"}),"Resumen por Categoría"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(t).map(([l,c])=>{console.log(`🎯 Renderizando ${l}:`,c);const d=c.cantidad||0,f=c.peso||0,m=c.precio_kg||0,x=c.valor||0,h=!isNaN(x)&&isFinite(x)?x:0,v=!isNaN(f)&&isFinite(f)?f:0,g=!isNaN(m)&&isFinite(m)?m:0;return console.log(`✅ Valores finales ${l}:`,{cantidad:d,peso:v,precio:g,valor:h}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("h6",{className:"font-medium text-gray-800 mb-2 capitalize",children:l}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Cantidad:"}),a.jsx("span",{className:"font-medium",children:d})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Peso:"}),a.jsxs("span",{className:"font-medium",children:[v.toFixed(1)," kg"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Precio/kg:"}),a.jsxs("span",{className:"font-medium",children:["$",g.toLocaleString("es-AR")]})]}),a.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-1",children:[a.jsx("span",{className:"text-gray-700 font-medium",children:"Valor:"}),a.jsxs("span",{className:"font-bold text-[#67806D]",children:["$",h.toLocaleString("es-AR")]})]})]})]},l)})})]})};function zB({ventas:e,compradores:t}){const r=_.useMemo(()=>{if(!e||e.length===0)return{totalVentas:0,ventasEsteMes:0,montoTotal:0,montoEsteMes:0,totalCompradores:0,totalAnimales:0,pesoTotal:0,precioPromedio:0};const l=new Date,c=new Date(l.getFullYear(),l.getMonth(),1),d=e.filter(y=>new Date(y.fecha)>=c),f=e.reduce((y,b)=>y+(b.peso_total||0)*(b.precio_kilo||0),0),m=d.reduce((y,b)=>y+(b.peso_total||0)*(b.precio_kilo||0),0),x=e.reduce((y,b)=>y+(b.total_animales||0),0),h=e.reduce((y,b)=>y+(b.peso_total||0),0),v=h>0?f/h:0,g=new Set(e.map(y=>y.comprador_id));return{totalVentas:e.length,ventasEsteMes:d.length,montoTotal:f,montoEsteMes:m,totalCompradores:g.size,totalAnimales:x,pesoTotal:h,precioPromedio:v}},[e]),n=[{titulo:"Total Ventas",valor:r.totalVentas,subtitulo:`${r.ventasEsteMes} este mes`,icono:We,color:"blue"},{titulo:"Ingresos Totales",valor:`$${r.montoTotal.toLocaleString("es-AR")}`,subtitulo:`$${r.montoEsteMes.toLocaleString("es-AR")} este mes`,icono:rr,color:"green"},{titulo:"Animales Vendidos",valor:r.totalAnimales,subtitulo:`${r.pesoTotal.toFixed(1)} kg total`,icono:st,color:"purple"},{titulo:"Precio Promedio",valor:`$${r.precioPromedio.toFixed(2)}/kg`,subtitulo:`${r.totalCompradores} compradores`,icono:Mt,color:"orange"}],s=l=>{const c={blue:"bg-blue-50 border-blue-200 text-blue-600",green:"bg-green-50 border-green-200 text-green-600",purple:"bg-purple-50 border-purple-200 text-purple-600",orange:"bg-orange-50 border-orange-200 text-orange-600"};return c[l]||c.blue};return e.length===0?a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-50 rounded-lg border border-gray-200 p-8 text-center",children:[a.jsx(wl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Sin datos de ventas"}),a.jsx("p",{className:"text-gray-500",children:"Las estadísticas aparecerán aquí cuando registre su primera venta."})]}):a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-[#67806D]/10 rounded-lg",children:a.jsx(wl,{className:"w-5 h-5 text-[#67806D]"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Resumen de Ventas"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Estadísticas generales de las ventas realizadas"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map((l,c)=>a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},className:`p-4 rounded-lg border ${s(l.color)}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:l.titulo}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:l.valor}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l.subtitulo})]}),a.jsx("div",{className:`p-2 rounded-lg ${l.color==="blue"?"bg-blue-100":l.color==="green"?"bg-green-100":l.color==="purple"?"bg-purple-100":"bg-orange-100"}`,children:a.jsx(l.icono,{className:"w-5 h-5"})})]})},l.titulo))})]})}function UB(){const{NotificationContainer:e}=ms(),[t,r]=_.useState("listado"),{ventas:n}=Yb(),{compradores:s}=H0(),l=()=>{console.log("🚀 Abriendo nueva venta..."),r("wizard")},c=()=>{console.log("🔙 Volviendo al listado..."),r("listado")},d=()=>{console.log("✅ Venta creada, volviendo al listado..."),r("listado")},f=()=>{const m={listado:"Gestión de Ventas",wizard:"Nueva Venta"};return a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[t!=="listado"&&a.jsxs(de.button,{onClick:c,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 text-[#67806D] hover:text-[#5a6b60] transition-colors",children:[a.jsx(Zo,{className:"w-5 h-5"}),"Volver"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-[#3C454A]",children:m[t]}),a.jsxs("p",{className:"text-gray-600 mt-2",children:[t==="listado"&&"Administre todas las ventas realizadas y vea estadísticas en tiempo real",t==="wizard"&&"Complete los datos para registrar una nueva venta"]})]})]}),t==="listado"&&a.jsxs(de.button,{onClick:l,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 bg-[#67806D] text-white px-4 py-2 rounded-lg hover:bg-[#5a6b60] transition-colors",children:[a.jsx(gt,{className:"w-5 h-5"}),"Nueva Venta"]})]})};return a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6",children:[f(),a.jsxs("div",{className:"min-h-[600px]",children:[t==="listado"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(zB,{ventas:n,compradores:s}),a.jsx(RB,{onNuevaVenta:l})]}),t==="wizard"&&a.jsx(YP,{onComplete:d,onClose:c},`wizard-${Date.now()}`)]}),a.jsx(e,{})]})}const $B=({isOpen:e,onClose:t,onSuccess:r})=>{const{animales:n,createPesada:s,fetchAnimales:l,loading:c}=Ra(),{user:d}=ln(),[f,m]=_.useState({animal_id:"",fecha_pesada:new Date().toISOString().split("T")[0],peso:"",observaciones:"",created_by:""}),[x,h]=_.useState(""),[v,g]=_.useState(!1),[y,b]=_.useState({});_.useEffect(()=>{e&&n.length===0&&l()},[e,n.length,l]);const j=n.filter(C=>C.estado==="en_campo"&&(C.numero_caravana?.toLowerCase().includes(x.toLowerCase())||C.categoria?.toLowerCase().includes(x.toLowerCase()))),w=n.find(C=>C.id===f.animal_id),A=C=>{const{name:M,value:I}=C.target;m(R=>({...R,[M]:I})),y[M]&&b(R=>({...R,[M]:""}))},S=C=>{m(M=>({...M,animal_id:C.id})),h(`${C.numero_caravana} - ${C.categoria}`),g(!1)},D=()=>{const C={};return f.animal_id||(C.animal_id="Debe seleccionar un animal"),f.fecha_pesada||(C.fecha_pesada="La fecha es obligatoria"),(!f.peso||f.peso<=0)&&(C.peso="El peso debe ser mayor a 0"),b(C),Object.keys(C).length===0},T=async C=>{if(C.preventDefault(),!!D())try{await s({...f,peso:parseFloat(f.peso),created_by:d?.id||null}),m({animal_id:"",fecha_pesada:new Date().toISOString().split("T")[0],peso:"",observaciones:"",created_by:""}),h(""),r&&r(),t()}catch(M){console.error("Error al crear pesada:",M)}},k=()=>{m({animal_id:"",fecha_pesada:new Date().toISOString().split("T")[0],peso:"",observaciones:"",created_by:""}),h(""),b({}),g(!1),t()};return a.jsx(Sa,{children:e&&a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:k,children:a.jsxs(de.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:C=>C.stopPropagation(),className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-[#67806D] bg-opacity-10 rounded-lg",children:a.jsx(Zr,{className:"h-5 w-5 text-[#67806D]"})}),a.jsx("h2",{className:"text-xl font-bold text-[#3C454A]",children:"Nueva Pesada"})]}),a.jsx("button",{onClick:k,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Qe,{className:"h-5 w-5 text-[#3C454A]"})})]}),a.jsxs("form",{onSubmit:T,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A]",children:["Animal ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-3 h-4 w-4 text-[#3C454A] opacity-50"}),a.jsx("input",{type:"text",value:x,onChange:C=>{h(C.target.value),g(!0)},onFocus:()=>g(!0),placeholder:"Buscar animal por caravana o categoría...",className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent ${y.animal_id?"border-red-300":"border-gray-200"}`})]}),v&&x&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-y-auto",children:j.length>0?j.map(C=>a.jsx("button",{type:"button",onClick:()=>S(C),className:"w-full text-left px-4 py-3 hover:bg-[#F5F2E7] transition-colors border-b border-gray-100 last:border-b-0",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full bg-${C.color_caravana||"gray"}-500`}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-[#3C454A]",children:[C.numero_caravana||"S/N"," - ",C.categoria]}),a.jsxs("p",{className:"text-sm text-[#3C454A] opacity-70",children:[C.proveedores?.nombre," - Peso: ",C.peso_ingreso," kg"]})]})]})},C.id)):a.jsx("div",{className:"px-4 py-3 text-center text-[#3C454A] opacity-70",children:"No se encontraron animales"})})]}),y.animal_id&&a.jsx("p",{className:"text-red-500 text-sm",children:y.animal_id})]}),w&&a.jsxs("div",{className:"bg-[#F9E9D0] rounded-xl p-4",children:[a.jsx("h3",{className:"font-medium text-[#3C454A] mb-2",children:"Animal Seleccionado"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Caravana:"}),a.jsx("span",{className:"ml-2 font-medium",children:w.numero_caravana||"S/N"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Categoría:"}),a.jsx("span",{className:"ml-2 font-medium",children:w.categoria})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Peso Ingreso:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[w.peso_ingreso," kg"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Estado Físico:"}),a.jsx("span",{className:"ml-2 font-medium capitalize",children:w.estado_fisico})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A]",children:["Fecha de Pesada ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(We,{className:"absolute left-3 top-3 h-4 w-4 text-[#3C454A] opacity-50"}),a.jsx("input",{type:"date",name:"fecha_pesada",value:f.fecha_pesada,onChange:A,className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent ${y.fecha_pesada?"border-red-300":"border-gray-200"}`})]}),y.fecha_pesada&&a.jsx("p",{className:"text-red-500 text-sm",children:y.fecha_pesada})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A]",children:["Peso (kg) ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Zr,{className:"absolute left-3 top-3 h-4 w-4 text-[#3C454A] opacity-50"}),a.jsx("input",{type:"number",name:"peso",value:f.peso,onChange:A,step:"0.1",min:"0",placeholder:"Peso en kilogramos",className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent ${y.peso?"border-red-300":"border-gray-200"}`})]}),y.peso&&a.jsx("p",{className:"text-red-500 text-sm",children:y.peso})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A]",children:"Observaciones"}),a.jsxs("div",{className:"relative",children:[a.jsx(et,{className:"absolute left-3 top-3 h-4 w-4 text-[#3C454A] opacity-50"}),a.jsx("textarea",{name:"observaciones",value:f.observaciones,onChange:A,rows:3,placeholder:"Observaciones sobre la pesada...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent resize-none"})]})]}),a.jsxs("div",{className:"flex gap-4 pt-6",children:[a.jsx("button",{type:"button",onClick:k,className:"flex-1 px-4 py-3 border border-gray-200 text-[#3C454A] rounded-xl hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-3 bg-[#67806D] text-white rounded-xl hover:bg-[#67806D]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Guardando...":"Guardar Pesada"})]})]})]})})})},qB=()=>{const{pesadas:e,animales:t,lotes:r,loading:n,error:s,fetchPesadas:l,fetchAnimales:c,fetchLotes:d,deletePesada:f}=Ra(),[m,x]=_.useState(""),[h,v]=_.useState({fechaDesde:"",fechaHasta:"",categoria:"",animal:"",lote:"",pesoMin:"",pesoMax:""}),[g,y]=_.useState([]),[b,j]=_.useState(!1),[w,A]=_.useState("campo"),[S,D]=_.useState(!1),[T,k]=_.useState(!1),[C,M]=_.useState(null);_.useEffect(()=>{l(),c(),d()},[]);const I=e.filter(U=>U.animales?.estado==="en_campo"),R=e.filter(U=>U.animales?.estado==="vendido"),L=U=>U.filter(Y=>{const Q=Y.animales?.numero_caravana?.toLowerCase().includes(m.toLowerCase())||Y.observaciones?.toLowerCase().includes(m.toLowerCase()),ee=!h.fechaDesde||Y.fecha_pesada>=h.fechaDesde,De=!h.fechaHasta||Y.fecha_pesada<=h.fechaHasta,ke=!h.categoria||Y.animales?.categoria===h.categoria,fe=!h.animal||Y.animal_id===h.animal,Ee=!h.lote||Y.animales?.animal_lote?.some(Je=>Je.lote_id===h.lote&&!Je.fecha_salida),Ie=!h.pesoMin||Y.peso>=parseFloat(h.pesoMin),Ne=!h.pesoMax||Y.peso<=parseFloat(h.pesoMax);return Q&&ee&&De&&ke&&fe&&Ee&&Ie&&Ne}),P=L(I),O=L(R),z=w==="campo"?P:w==="vendidos"?O:[...P,...O],V={totalPesadas:z.length,animalesUnicos:new Set(z.map(U=>U.animal_id)).size,pesoPromedio:z.reduce((U,Y)=>U+Y.peso,0)/Math.max(z.length,1),gananciaTotal:0,gananciaPromedioPorDia:0,gananciaPromedioPorPesada:0},G={cantidad:g.length,pesoPromedio:g.length>0?g.reduce((U,Y)=>{const Q=z.find(ee=>ee.id===Y);return U+(Q?.peso||0)},0)/g.length:0,pesoTotal:g.reduce((U,Y)=>{const Q=z.find(ee=>ee.id===Y);return U+(Q?.peso||0)},0)},K=[],ce={};z.forEach(U=>{ce[U.animal_id]||(ce[U.animal_id]=[]),ce[U.animal_id].push(U)}),Object.values(ce).forEach(U=>{if(U.length>1){U.sort((Y,Q)=>new Date(Y.fecha_pesada)-new Date(Q.fecha_pesada));for(let Y=1;Y<U.length;Y++){const Q=U[Y],ee=U[Y-1],De=Q.peso-ee.peso,ke=(new Date(Q.fecha_pesada)-new Date(ee.fecha_pesada))/(1e3*60*60*24);K.push({ganancia:De,dias:ke,gananciaPerDia:De/Math.max(ke,1)})}}}),K.length>0&&(V.gananciaTotal=K.reduce((U,Y)=>U+Y.ganancia,0),V.gananciaPromedioPorPesada=V.gananciaTotal/K.length,V.gananciaPromedioPorDia=K.reduce((U,Y)=>U+Y.gananciaPerDia,0)/K.length);const le=async U=>{if(window.confirm("¿Está seguro de eliminar esta pesada?"))try{await f(U)}catch(Y){console.error("Error al eliminar pesada:",Y)}},ne=U=>{y(Y=>Y.includes(U)?Y.filter(Q=>Q!==U):[...Y,U])},Z=U=>{const Y=U.map(ee=>ee.id),Q=Y.every(ee=>g.includes(ee));y(Q?ee=>ee.filter(De=>!Y.includes(De)):ee=>[...new Set([...ee,...Y])])},F=()=>{console.log("Exportar a Excel")};return n?a.jsx("div",{className:"min-h-screen bg-[#F5F2E7] flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#67806D] mx-auto mb-4"}),a.jsx("p",{className:"text-[#3C454A]",children:"Cargando pesadas..."})]})}):s?a.jsx("div",{className:"min-h-screen bg-[#F5F2E7] flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:["Error: ",s]})})}):a.jsxs("div",{className:"min-h-screen bg-[#F5F2E7] p-4 lg:p-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-[#67806D] bg-opacity-10 rounded-xl",children:a.jsx(Zr,{className:"h-6 w-6 text-[#67806D]"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#3C454A]",children:"Pesadas"}),a.jsx("p",{className:"text-[#3C454A] opacity-70",children:"Control de pesadas y seguimiento de ganancia de peso"})]})]}),a.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 bg-[#67806D] text-white px-4 py-2 rounded-xl hover:bg-[#67806D]/90 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),"Nueva Pesada"]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex gap-1 bg-[#F5F2E7] p-1 rounded-lg",children:[a.jsxs("button",{onClick:()=>A("campo"),className:`px-4 py-2 rounded-lg font-medium transition-all ${w==="campo"?"bg-[#67806D] text-white shadow-md":"text-[#3C454A] hover:bg-white"}`,children:["Animales en Campo (",P.length,")"]}),a.jsxs("button",{onClick:()=>A("vendidos"),className:`px-4 py-2 rounded-lg font-medium transition-all ${w==="vendidos"?"bg-[#805A36] text-white shadow-md":"text-[#3C454A] hover:bg-white"}`,children:["Animales Vendidos (",O.length,")"]}),a.jsxs("button",{onClick:()=>A("todos"),className:`px-4 py-2 rounded-lg font-medium transition-all ${w==="todos"?"bg-[#3C454A] text-white shadow-md":"text-[#3C454A] hover:bg-white"}`,children:["Todos (",P.length+O.length,")"]})]}),g.length>0&&a.jsxs("button",{onClick:()=>y([]),className:"text-sm text-[#F8B36A] hover:underline",children:["Limpiar selección (",g.length,")"]})]})}),g.length>0&&a.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-[#67806D] bg-opacity-10 border-2 border-[#67806D] border-dashed rounded-xl p-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#67806D] mb-4 flex items-center gap-2",children:[a.jsx(xr,{className:"h-5 w-5"}),"Estadísticas de Selección (",g.length," pesadas)"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4",children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Peso Promedio"}),a.jsxs("p",{className:"text-2xl font-bold text-[#67806D]",children:[G.pesoPromedio.toFixed(1)," kg"]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4",children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Peso Total"}),a.jsxs("p",{className:"text-2xl font-bold text-[#3C454A]",children:[G.pesoTotal.toFixed(1)," kg"]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4",children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Animales Únicos"}),a.jsx("p",{className:"text-2xl font-bold text-[#805A36]",children:new Set(g.map(U=>z.find(Q=>Q.id===U)?.animal_id)).size})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Total Pesadas"}),a.jsx("p",{className:"text-2xl font-bold text-[#3C454A]",children:V.totalPesadas})]}),a.jsx(Zr,{className:"h-8 w-8 text-[#67806D]"})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Animales"}),a.jsx("p",{className:"text-2xl font-bold text-[#3C454A]",children:V.animalesUnicos})]}),a.jsx(xr,{className:"h-8 w-8 text-[#67806D]"})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Peso Promedio"}),a.jsxs("p",{className:"text-2xl font-bold text-[#3C454A]",children:[V.pesoPromedio.toFixed(1)," kg"]})]}),a.jsx(Zr,{className:"h-8 w-8 text-[#805A36]"})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Ganancia/Pesada"}),a.jsxs("p",{className:"text-2xl font-bold text-[#67806D]",children:[V.gananciaPromedioPorPesada>0?"+":"",V.gananciaPromedioPorPesada.toFixed(1)," kg"]})]}),V.gananciaPromedioPorPesada>0?a.jsx(Mt,{className:"h-8 w-8 text-[#67806D]"}):a.jsx(zb,{className:"h-8 w-8 text-[#F8B36A]"})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Ganancia/Día"}),a.jsxs("p",{className:"text-2xl font-bold text-[#67806D]",children:[V.gananciaPromedioPorDia>0?"+":"",V.gananciaPromedioPorDia.toFixed(2)," kg"]})]}),a.jsx(We,{className:"h-8 w-8 text-[#67806D]"})]})})]}),b&&a.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4",children:"Estadísticas Detalladas"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-2",children:"Ganancia Total"}),a.jsxs("p",{className:"text-3xl font-bold text-[#67806D]",children:[V.gananciaTotal>0?"+":"",V.gananciaTotal.toFixed(1)," kg"]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-2",children:"Promedio por Animal"}),a.jsxs("p",{className:"text-3xl font-bold text-[#3C454A]",children:[(V.gananciaTotal/Math.max(V.animalesUnicos,1)).toFixed(1)," kg"]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-[#3C454A] mb-2",children:"Rendimiento"}),a.jsx("p",{className:"text-3xl font-bold text-[#805A36]",children:V.gananciaPromedioPorDia>0?"Positivo":"Negativo"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Filtros y Búsqueda"}),a.jsxs("button",{onClick:()=>j(!b),className:"text-sm text-[#67806D] hover:underline",children:[b?"Ocultar":"Ver"," estadísticas detalladas"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-4",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-3 h-4 w-4 text-[#3C454A] opacity-50"}),a.jsx("input",{type:"text",placeholder:"Buscar por caravana o observaciones...",value:m,onChange:U=>x(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]})}),a.jsx("div",{children:a.jsxs("select",{value:h.categoria,onChange:U=>v({...h,categoria:U.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todas las categorías"}),a.jsx("option",{value:"Ternero",children:"Ternero"}),a.jsx("option",{value:"Novillo",children:"Novillo"}),a.jsx("option",{value:"Vaca",children:"Vaca"}),a.jsx("option",{value:"Toro",children:"Toro"}),a.jsx("option",{value:"Vaquilla",children:"Vaquilla"})]})}),a.jsx("div",{children:a.jsxs("select",{value:h.lote,onChange:U=>v({...h,lote:U.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos los lotes"}),r.map(U=>a.jsxs("option",{value:U.id,children:[U.nombre," - ",U.numero]},U.id))]})}),a.jsx("div",{children:a.jsxs("select",{value:h.animal,onChange:U=>v({...h,animal:U.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos los animales"}),t.map(U=>a.jsxs("option",{value:U.id,children:[U.numero_caravana," - ",U.categoria]},U.id))]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Fecha desde"}),a.jsx("input",{type:"date",value:h.fechaDesde,onChange:U=>v({...h,fechaDesde:U.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Fecha hasta"}),a.jsx("input",{type:"date",value:h.fechaHasta,onChange:U=>v({...h,fechaHasta:U.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Peso mínimo (kg)"}),a.jsx("input",{type:"number",step:"0.1",value:h.pesoMin,onChange:U=>v({...h,pesoMin:U.target.value}),placeholder:"0",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Peso máximo (kg)"}),a.jsx("input",{type:"number",step:"0.1",value:h.pesoMax,onChange:U=>v({...h,pesoMax:U.target.value}),placeholder:"1000",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Acciones"}),a.jsx("button",{onClick:()=>{v({fechaDesde:"",fechaHasta:"",categoria:"",animal:"",lote:"",pesoMin:"",pesoMax:""}),x("")},className:"w-full bg-gray-500 text-white px-4 py-2 rounded-xl hover:bg-gray-600 transition-colors",children:"Limpiar"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Exportar"}),a.jsxs("button",{onClick:F,className:"w-full bg-[#805A36] text-white px-4 py-2 rounded-xl hover:bg-[#805A36]/90 transition-colors flex items-center justify-center gap-2",children:[a.jsx(ma,{className:"h-4 w-4"}),"Excel"]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto table-scroll",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:`${w==="campo"?"bg-[#67806D] bg-opacity-10":w==="vendidos"?"bg-[#805A36] bg-opacity-10":"bg-[#F9E9D0]"}`,children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 font-semibold text-[#3C454A] w-12",children:a.jsx("input",{type:"checkbox",checked:z.length>0&&z.every(U=>g.includes(U.id)),onChange:()=>Z(z),className:"rounded border-gray-300 text-[#67806D] focus:ring-[#67806D]"})}),a.jsx("th",{className:"text-left p-4 font-semibold text-[#3C454A]",children:"Animal"}),a.jsx("th",{className:"text-left p-4 font-semibold text-[#3C454A]",children:"Estado"}),a.jsx("th",{className:"text-left p-4 font-semibold text-[#3C454A]",children:"Fecha"}),a.jsx("th",{className:"text-left p-4 font-semibold text-[#3C454A]",children:"Peso"}),a.jsx("th",{className:"text-left p-4 font-semibold text-[#3C454A]",children:"Ganancia"}),a.jsx("th",{className:"text-left p-4 font-semibold text-[#3C454A]",children:"Lote"}),a.jsx("th",{className:"text-left p-4 font-semibold text-[#3C454A]",children:"Observaciones"}),a.jsx("th",{className:"text-center p-4 font-semibold text-[#3C454A]",children:"Acciones"})]})}),a.jsx("tbody",{children:z.map((U,Y)=>{const Q=U.animales,ee=Q?.animal_lote?.[0]?.lotes,De=g.includes(U.id),ke=Q?.estado==="vendido",fe=e.filter(Ie=>Ie.animal_id===U.animal_id&&Ie.fecha_pesada<U.fecha_pesada).sort((Ie,Ne)=>new Date(Ne.fecha_pesada)-new Date(Ie.fecha_pesada))[0],Ee=fe?U.peso-fe.peso:null;return a.jsxs(de.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Y*.05},className:`border-b border-gray-100 transition-all cursor-pointer
                        ${De?"bg-[#67806D] bg-opacity-10 ring-2 ring-[#67806D] ring-opacity-30":ke?"bg-[#805A36] bg-opacity-5 hover:bg-[#805A36] hover:bg-opacity-10":"hover:bg-[#F5F2E7]"}
                        ${ke?"opacity-75":""}`,onClick:()=>ne(U.id),children:[a.jsx("td",{className:"p-4",onClick:Ie=>Ie.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:De,onChange:()=>ne(U.id),className:"rounded border-gray-300 text-[#67806D] focus:ring-[#67806D]"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full bg-${Q?.color_caravana||"gray"}-500`}),a.jsxs("div",{children:[a.jsx("p",{className:`font-medium ${ke?"text-[#805A36]":"text-[#3C454A]"}`,children:Q?.numero_caravana||"S/N"}),a.jsx("p",{className:`text-sm opacity-70 ${ke?"text-[#805A36]":"text-[#3C454A]"}`,children:Q?.categoria})]})]})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ke?"bg-[#805A36] bg-opacity-20 text-[#805A36]":"bg-[#67806D] bg-opacity-20 text-[#67806D]"}`,children:ke?"Vendido":"En Campo"})}),a.jsx("td",{className:`p-4 ${ke?"text-[#805A36]":"text-[#3C454A]"}`,children:new Date(U.fecha_pesada).toLocaleDateString("es-AR")}),a.jsx("td",{className:"p-4",children:a.jsxs("span",{className:`font-semibold ${ke?"text-[#805A36]":"text-[#3C454A]"}`,children:[U.peso," kg"]})}),a.jsx("td",{className:"p-4",children:Ee!==null?a.jsxs("span",{className:`font-semibold ${Ee>0?"text-[#67806D]":"text-[#F8B36A]"}`,children:[Ee>0?"+":"",Ee.toFixed(1)," kg"]}):a.jsx("span",{className:`opacity-50 ${ke?"text-[#805A36]":"text-[#3C454A]"}`,children:"Primera pesada"})}),a.jsx("td",{className:"p-4",children:ee?a.jsxs("span",{className:`px-2 py-1 rounded-lg text-sm ${ke?"bg-[#805A36] bg-opacity-10 text-[#805A36]":"bg-[#67806D] bg-opacity-10 text-[#67806D]"}`,children:[ee.nombre," - ",ee.numero]}):a.jsx("span",{className:`opacity-50 ${ke?"text-[#805A36]":"text-[#3C454A]"}`,children:"Sin lote"})}),a.jsx("td",{className:`p-4 opacity-70 max-w-xs truncate ${ke?"text-[#805A36]":"text-[#3C454A]"}`,children:U.observaciones||"-"}),a.jsx("td",{className:"p-4",onClick:Ie=>Ie.stopPropagation(),children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>{M(U),k(!0)},className:`p-2 rounded-lg transition-colors ${ke?"text-[#805A36] hover:bg-[#805A36] hover:bg-opacity-10":"text-[#67806D] hover:bg-[#67806D] hover:bg-opacity-10"}`,title:"Ver detalle",children:a.jsx(Kt,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>le(U.id),className:"p-2 text-[#F8B36A] hover:bg-[#F8B36A] hover:bg-opacity-10 rounded-lg transition-colors",title:"Eliminar",children:a.jsx(lr,{className:"h-4 w-4"})})]})})]},U.id)})})]})}),z.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Zr,{className:"h-12 w-12 text-[#3C454A] opacity-30 mx-auto mb-4"}),a.jsx("p",{className:"text-[#3C454A] opacity-70",children:w==="campo"?"No hay pesadas de animales en campo":w==="vendidos"?"No hay pesadas de animales vendidos":"No se encontraron pesadas"})]})]})]}),a.jsx($B,{isOpen:S,onClose:()=>D(!1),onSuccess:()=>{console.log("Pesada creada exitosamente")}}),T&&C&&a.jsx("div",{children:"Modal Detalle Pesada"})]})},HB=({isOpen:e,onClose:t,onEventoCreado:r})=>{const{animales:n,lotes:s,createEventoSanitario:l,fetchAnimales:c,fetchLotes:d,loading:f}=Ra(),[m,x]=_.useState(1),[h,v]=_.useState({tipo:"",descripcion:"",fecha:new Date().toISOString().split("T")[0],aplicacion:"individual",animales_seleccionados:[],lote_seleccionado:""}),[g,y]=_.useState({}),[b,j]=_.useState(!1);_.useEffect(()=>{e&&(n.length===0||s.length===0)&&(c(),d())},[e]);const w=[{value:"vacuna",label:"Vacuna",icon:a.jsx(uu,{className:"h-4 w-4"}),color:"blue"},{value:"desparasitario",label:"Desparasitario",icon:a.jsx(Wo,{className:"h-4 w-4"}),color:"green"},{value:"tratamiento",label:"Tratamiento",icon:a.jsx(wr,{className:"h-4 w-4"}),color:"orange"},{value:"revision",label:"Revisión",icon:a.jsx(fr,{className:"h-4 w-4"}),color:"red"},{value:"medicamento",label:"Medicamento",icon:a.jsx(Wo,{className:"h-4 w-4"}),color:"purple"}],A=()=>{v({tipo:"",descripcion:"",fecha:new Date().toISOString().split("T")[0],aplicacion:"individual",animales_seleccionados:[],lote_seleccionado:""}),x(1),y({}),j(!1)},S=()=>{A(),t()},D=L=>{const P={};return L===1&&(h.tipo||(P.tipo="Selecciona un tipo de evento"),h.descripcion.trim()||(P.descripcion="La descripción es requerida"),h.fecha||(P.fecha="La fecha es requerida")),L===2&&(h.aplicacion==="individual"&&h.animales_seleccionados.length===0&&(P.animales_seleccionados="Selecciona al menos un animal"),h.aplicacion==="lote"&&!h.lote_seleccionado&&(P.lote_seleccionado="Selecciona un lote")),y(P),Object.keys(P).length===0},T=()=>{D(m)&&x(m+1)},k=()=>{x(m-1),y({})},C=L=>{v(P=>({...P,animales_seleccionados:P.animales_seleccionados.includes(L)?P.animales_seleccionados.filter(O=>O!==L):[...P.animales_seleccionados,L]}))},M=L=>{v(P=>({...P,lote_seleccionado:L,animales_seleccionados:[]}))},I=async()=>{if(D(3)){j(!0);try{const{data:{user:L},error:P}=await se.auth.getUser();if(P||!L)throw new Error("Usuario no autenticado");let O=[];if(h.aplicacion==="individual")O=h.animales_seleccionados;else if(h.aplicacion==="lote"){const z=s.find(V=>V.id===h.lote_seleccionado);z?.animales_actuales&&(O=z.animales_actuales.map(V=>V.animal_id))}console.log("Creando eventos para animales:",O);for(const z of O)await l({animal_id:z,tipo:h.tipo,descripcion:h.descripcion,fecha:h.fecha,created_by:L.id});console.log("Eventos creados exitosamente"),S(),r&&r()}catch(L){console.error("Error al crear eventos sanitarios:",L);let P="Error al guardar los eventos sanitarios";L.message.includes("foreign key constraint")?L.message.includes("eventos_sanitarios_created_by_fkey")?P="Usuario no válido para crear eventos":L.message.includes("eventos_sanitarios_animal_id_fkey")&&(P="Uno o más animales seleccionados no son válidos"):L.message.includes("not-null constraint")?P="Faltan campos requeridos":L.message&&(P=L.message),y({submit:P})}finally{j(!1)}}},R=L=>s.find(O=>O.id===L)?.animales_actuales?.length||0;return e?a.jsx(Sa,{children:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-[#67806D] text-white p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(fr,{className:"h-6 w-6"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"Nuevo Evento Sanitario"}),a.jsxs("p",{className:"text-[#67806D]/20",children:["Paso ",m," de 3"]})]})]}),a.jsx("button",{onClick:S,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:a.jsx(Qe,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"bg-gray-200 h-1",children:a.jsx("div",{className:"bg-[#67806D] h-full transition-all duration-300",style:{width:`${m/3*100}%`}})}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[m===1&&a.jsx(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4",children:"Información del Evento"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-3",children:"Tipo de Evento *"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:w.map(L=>a.jsxs("button",{type:"button",onClick:()=>v({...h,tipo:L.value}),className:`p-4 rounded-xl border-2 transition-all flex items-center gap-3 ${h.tipo===L.value?"border-[#67806D] bg-[#67806D]/10 text-[#67806D]":"border-gray-200 hover:border-[#67806D]/50"}`,children:[L.icon,a.jsx("span",{className:"font-medium",children:L.label})]},L.value))}),g.tipo&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(ia,{className:"h-4 w-4"}),g.tipo]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:"Descripción del Evento *"}),a.jsx("input",{type:"text",value:h.descripcion,onChange:L=>v({...h,descripcion:L.target.value}),placeholder:"Ej: Vacuna Triple, Ivermectina, Revisión general...",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent ${g.descripcion?"border-red-500":"border-gray-200"}`}),g.descripcion&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(ia,{className:"h-4 w-4"}),g.descripcion]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-2",children:"Fecha del Evento *"}),a.jsx("input",{type:"date",value:h.fecha,onChange:L=>v({...h,fecha:L.target.value}),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent ${g.fecha?"border-red-500":"border-gray-200"}`}),g.fecha&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(ia,{className:"h-4 w-4"}),g.fecha]})]})]})}),m===2&&a.jsx(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4",children:"Selección de Animales"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-3",children:"¿Cómo aplicar el evento?"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{type:"button",onClick:()=>v({...h,aplicacion:"individual",lote_seleccionado:""}),className:`p-4 rounded-xl border-2 transition-all flex items-center gap-3 ${h.aplicacion==="individual"?"border-[#67806D] bg-[#67806D]/10 text-[#67806D]":"border-gray-200 hover:border-[#67806D]/50"}`,children:[a.jsx(Vt,{className:"h-5 w-5"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"Individual"}),a.jsx("div",{className:"text-sm opacity-70",children:"Seleccionar animales uno por uno"})]})]}),a.jsxs("button",{type:"button",onClick:()=>v({...h,aplicacion:"lote",animales_seleccionados:[]}),className:`p-4 rounded-xl border-2 transition-all flex items-center gap-3 ${h.aplicacion==="lote"?"border-[#67806D] bg-[#67806D]/10 text-[#67806D]":"border-gray-200 hover:border-[#67806D]/50"}`,children:[a.jsx(xr,{className:"h-5 w-5"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"Por Lote"}),a.jsx("div",{className:"text-sm opacity-70",children:"Aplicar a todo un lote"})]})]})]})]}),h.aplicacion==="individual"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-[#3C454A] mb-3",children:["Seleccionar Animales (",h.animales_seleccionados.length," seleccionados)"]}),a.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-xl",children:n.map(L=>a.jsx("div",{className:`p-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 ${h.animales_seleccionados.includes(L.id)?"bg-[#67806D]/10":""}`,onClick:()=>C(L.id),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",checked:h.animales_seleccionados.includes(L.id),onChange:()=>C(L.id),className:"rounded border-gray-300 text-[#67806D] focus:ring-[#67806D]"}),a.jsx("div",{className:`w-3 h-3 rounded-full bg-${L.color_caravana||"gray"}-500`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-[#3C454A]",children:L.numero_caravana||"S/N"}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-70",children:L.categoria})]}),L.lote_nombre&&a.jsx("span",{className:"text-xs bg-[#67806D]/10 text-[#67806D] px-2 py-1 rounded",children:L.lote_nombre})]})},L.id))}),g.animales_seleccionados&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(ia,{className:"h-4 w-4"}),g.animales_seleccionados]})]}),h.aplicacion==="lote"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3C454A] mb-3",children:"Seleccionar Lote"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(L=>a.jsxs("button",{type:"button",onClick:()=>M(L.id),className:`p-4 rounded-xl border-2 transition-all text-left ${h.lote_seleccionado===L.id?"border-[#67806D] bg-[#67806D]/10 text-[#67806D]":"border-gray-200 hover:border-[#67806D]/50"}`,children:[a.jsxs("div",{className:"font-medium",children:[L.nombre," - ",L.numero]}),a.jsxs("div",{className:"text-sm opacity-70 mt-1",children:[R(L.id)," animales en el lote"]})]},L.id))}),g.lote_seleccionado&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(ia,{className:"h-4 w-4"}),g.lote_seleccionado]})]})]})}),m===3&&a.jsx(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4",children:"Confirmar Evento Sanitario"}),a.jsx("div",{className:"bg-[#F5F2E7] rounded-xl p-6 space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[#3C454A] opacity-70",children:"Tipo"}),a.jsx("p",{className:"font-semibold text-[#3C454A] capitalize",children:h.tipo})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[#3C454A] opacity-70",children:"Fecha"}),a.jsx("p",{className:"font-semibold text-[#3C454A]",children:new Date(h.fecha).toLocaleDateString("es-AR")})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-sm font-medium text-[#3C454A] opacity-70",children:"Descripción"}),a.jsx("p",{className:"font-semibold text-[#3C454A]",children:h.descripcion})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-sm font-medium text-[#3C454A] opacity-70",children:"Aplicación"}),a.jsx("p",{className:"font-semibold text-[#3C454A] capitalize",children:h.aplicacion==="individual"?`Individual - ${h.animales_seleccionados.length} animales`:`Por lote - ${s.find(L=>L.id===h.lote_seleccionado)?.nombre||"N/A"}`})]})]})}),g.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:a.jsxs("p",{className:"text-red-800 flex items-center gap-2",children:[a.jsx(ia,{className:"h-5 w-5"}),g.submit]})})]})})]}),a.jsxs("div",{className:"bg-gray-50 p-6 flex items-center justify-between",children:[a.jsx("div",{className:"flex gap-3",children:m>1&&a.jsx("button",{onClick:k,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 transition-colors",children:"Anterior"})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:S,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 transition-colors",children:"Cancelar"}),m<3?a.jsx("button",{onClick:T,className:"px-4 py-2 bg-[#67806D] text-white rounded-xl hover:bg-[#67806D]/90 transition-colors",children:"Siguiente"}):a.jsxs("button",{onClick:I,disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-[#67806D] text-white rounded-xl hover:bg-[#67806D]/90 transition-colors disabled:opacity-50",children:[a.jsx(Na,{className:"h-4 w-4"}),b?"Guardando...":"Guardar Evento"]})]})]})]})})}):null},VB=({evento:e,isOpen:t,onClose:r})=>{if(!t||!e)return null;const n=c=>{switch(c?.toLowerCase()){case"vacuna":return a.jsx(uu,{className:"h-5 w-5"});case"desparasitario":return a.jsx(Wo,{className:"h-5 w-5"});case"tratamiento":return a.jsx(wr,{className:"h-5 w-5"});default:return a.jsx(fr,{className:"h-5 w-5"})}},s=c=>{switch(c?.toLowerCase()){case"vacuna":return"bg-blue-100 text-blue-800 border-blue-200";case"desparasitario":return"bg-green-100 text-green-800 border-green-200";case"tratamiento":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=c=>new Date(c).toLocaleDateString("es-AR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return a.jsx(Sa,{children:a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-black/50"}),a.jsxs(de.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},className:"relative bg-white rounded-2xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-3 rounded-xl border ${s(e.tipo)}`,children:n(e.tipo)}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#3C454A]",children:"Evento Sanitario"}),a.jsxs("p",{className:"text-[#3C454A] opacity-70",children:[e.tipo," - ",l(e.fecha)]})]})]}),a.jsx("button",{onClick:r,className:"p-2 text-[#3C454A] opacity-60 hover:opacity-100 hover:bg-[#F5F2E7] rounded-xl transition-colors",children:a.jsx(Qe,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[a.jsxs("div",{className:"bg-[#F5F2E7] rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Vt,{className:"h-4 w-4 text-[#67806D]"}),a.jsx("h3",{className:"font-semibold text-[#3C454A]",children:"Información del Animal"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Caravana:"}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:e.animales?.color_caravana}}),a.jsxs("span",{className:"font-semibold text-[#3C454A]",children:["#",e.animales?.numero_caravana||"S/N"]})]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Categoría:"}),a.jsx("div",{className:"font-semibold text-[#3C454A] mt-1",children:e.animales?.categoria||"No especificada"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Estado Físico:"}),a.jsx("div",{className:"font-semibold text-[#3C454A] mt-1",children:e.animales?.estado_fisico||"No especificado"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Lote:"}),a.jsx("div",{className:"font-semibold text-[#3C454A] mt-1",children:e.animales?.animal_lote?.[0]?.lotes?.nombre||"Sin lote"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(et,{className:"h-4 w-4 text-[#67806D]"}),a.jsx("h3",{className:"font-semibold text-[#3C454A]",children:"Detalles del Evento"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(We,{className:"h-4 w-4 text-[#67806D]"}),a.jsx("span",{className:"text-sm text-[#3C454A] opacity-70",children:"Fecha"})]}),a.jsx("div",{className:"font-semibold text-[#3C454A]",children:l(e.fecha)})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(fr,{className:"h-4 w-4 text-[#67806D]"}),a.jsx("span",{className:"text-sm text-[#3C454A] opacity-70",children:"Tipo"})]}),a.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${s(e.tipo)}`,children:[n(e.tipo),e.tipo]})]})]}),e.descripcion&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(et,{className:"h-4 w-4 text-[#67806D]"}),a.jsx("span",{className:"text-sm text-[#3C454A] opacity-70",children:"Descripción"})]}),a.jsx("div",{className:"text-[#3C454A]",children:e.descripcion})]}),e.observaciones&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(U0,{className:"h-4 w-4 text-[#67806D]"}),a.jsx("span",{className:"text-sm text-[#3C454A] opacity-70",children:"Observaciones"})]}),a.jsx("div",{className:"text-[#3C454A]",children:e.observaciones})]})]}),a.jsxs("div",{className:"bg-[#F9E9D0] rounded-xl p-4",children:[a.jsx("h4",{className:"font-semibold text-[#3C454A] mb-3",children:"Información del Registro"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Creado:"}),a.jsx("div",{className:"font-semibold text-[#3C454A] mt-1",children:new Date(e.created_at).toLocaleString("es-AR")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[#3C454A] opacity-70",children:"Última actualización:"}),a.jsx("div",{className:"font-semibold text-[#3C454A] mt-1",children:new Date(e.updated_at).toLocaleString("es-AR")})]})]})]})]}),a.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-100",children:a.jsx("button",{onClick:r,className:"px-4 py-2 text-[#3C454A] hover:bg-[#F5F2E7] rounded-lg transition-colors",children:"Cerrar"})})]})]})})},GB=()=>{const{showConfirm:e,ConfirmComponent:t}=$l(),{eventosSanitarios:r,animales:n,lotes:s,loading:l,error:c,fetchEventosSanitarios:d,fetchAnimales:f,fetchLotes:m,deleteEventoSanitario:x}=Ra(),[h,v]=_.useState(""),[g,y]=_.useState({fechaDesde:"",fechaHasta:"",tipo:"",animal:"",lote:"",estado:"todos"}),[b,j]=_.useState("dashboard"),[w,A]=_.useState([]),[S,D]=_.useState(!1),[T,k]=_.useState(!1),[C,M]=_.useState(null),[I,R]=_.useState(!1),[L,P]=_.useState(null);_.useEffect(()=>{d(),f(),m()},[]);const O=r.filter(Z=>{const F=Z.animales?.numero_caravana?.toLowerCase().includes(h.toLowerCase())||Z.descripcion?.toLowerCase().includes(h.toLowerCase())||Z.tipo?.toLowerCase().includes(h.toLowerCase()),U=!g.fechaDesde||Z.fecha>=g.fechaDesde,Y=!g.fechaHasta||Z.fecha<=g.fechaHasta,Q=!g.tipo||Z.tipo===g.tipo,ee=!g.animal||Z.animal_id===g.animal,De=!g.lote||Z.animales?.animal_lote?.some(ke=>ke.lote_id===g.lote&&!ke.fecha_salida);return F&&U&&Y&&Q&&ee&&De}),z={totalEventos:O.length,animalesUnicos:new Set(O.map(Z=>Z.animal_id)).size,eventosUltimoMes:O.filter(Z=>{const F=new Date(Z.fecha),U=new Date;return U.setMonth(U.getMonth()-1),F>=U}).length,animalesSinEventos:n.filter(Z=>!r.some(F=>F.animal_id===Z.id)).length,tiposDistribucion:O.reduce((Z,F)=>(Z[F.tipo]=(Z[F.tipo]||0)+1,Z),{})},V=Z=>{M(Z),k(!0)},G=Z=>{P(Z),R(!0)},K=async Z=>{if(await ic("evento sanitario","Se eliminará permanentemente este registro sanitario. Esta acción no se puede deshacer."))try{await x(Z),await d()}catch(U){console.error("Error al eliminar evento sanitario:",U),await e({type:"danger",title:"Error al eliminar",message:"Hubo un problema al eliminar el evento sanitario. Inténtalo nuevamente.",confirmText:"Entendido"})}},ce=()=>{const Z=O.map(Q=>({Animal:Q.animales?.numero_caravana||"S/N","Color Caravana":Q.animales?.color_caravana||"",Categoría:Q.animales?.categoria||"",Fecha:new Date(Q.fecha).toLocaleDateString("es-AR"),Tipo:Q.tipo,Descripción:Q.descripcion||"",Observaciones:Q.observaciones||"",Lote:Q.animales?.animal_lote?.[0]?.lotes?.nombre||"Sin lote"})),F=_a.json_to_sheet(Z),U=_a.book_new();_a.book_append_sheet(U,F,"Eventos Sanitarios");const Y=new Date().toISOString().split("T")[0];yu(U,`eventos_sanitarios_${Y}.xlsx`)},le=Z=>{switch(Z?.toLowerCase()){case"vacuna":return a.jsx(uu,{className:"h-4 w-4"});case"desparasitario":return a.jsx(Wo,{className:"h-4 w-4"});case"tratamiento":return a.jsx(wr,{className:"h-4 w-4"});default:return a.jsx(fr,{className:"h-4 w-4"})}},ne=Z=>{switch(Z?.toLowerCase()){case"vacuna":return"bg-blue-100 text-blue-800";case"desparasitario":return"bg-green-100 text-green-800";case"tratamiento":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return l?a.jsx("div",{className:"min-h-screen bg-[#F5F2E7] flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#67806D] mx-auto mb-4"}),a.jsx("p",{className:"text-[#3C454A]",children:"Cargando información sanitaria..."})]})}):c?a.jsx("div",{className:"min-h-screen bg-[#F5F2E7] flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:["Error: ",c]})})}):a.jsxs("div",{className:"min-h-screen bg-[#F5F2E7] p-4 lg:p-6",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-[#67806D] bg-opacity-10 rounded-xl",children:a.jsx(fr,{className:"h-5 w-5 sm:h-6 sm:w-6 text-[#67806D]"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#3C454A]",children:"Control Sanitario"}),a.jsx("p",{className:"text-sm sm:text-base text-[#3C454A] opacity-70",children:"Gestión integral de salud animal"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[a.jsxs("div",{className:"flex bg-[#F5F2E7] rounded-lg p-1",children:[a.jsx("button",{onClick:()=>j("dashboard"),className:`flex-1 sm:flex-initial px-3 sm:px-4 py-2 rounded-md text-sm font-medium transition-colors ${b==="dashboard"?"bg-white text-[#67806D] shadow-sm":"text-[#3C454A] hover:text-[#67806D]"}`,children:"Dashboard"}),a.jsx("button",{onClick:()=>j("eventos"),className:`flex-1 sm:flex-initial px-3 sm:px-4 py-2 rounded-md text-sm font-medium transition-colors ${b==="eventos"?"bg-white text-[#67806D] shadow-sm":"text-[#3C454A] hover:text-[#67806D]"}`,children:"Eventos"}),a.jsx("button",{onClick:()=>j("reportes"),className:`flex-1 sm:flex-initial px-3 sm:px-4 py-2 rounded-md text-sm font-medium transition-colors ${b==="reportes"?"bg-white text-[#67806D] shadow-sm":"text-[#3C454A] hover:text-[#67806D]"}`,children:"Reportes"})]}),a.jsxs("button",{onClick:()=>D(!0),className:"flex items-center justify-center gap-2 bg-[#67806D] text-white px-4 py-2 rounded-xl hover:bg-[#67806D]/90 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Nuevo Evento"}),a.jsx("span",{className:"sm:hidden",children:"Nuevo"})]})]})]})}),b==="dashboard"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4",children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Total Eventos"}),a.jsx("p",{className:"text-3xl font-bold text-[#3C454A]",children:z.totalEventos}),a.jsxs("p",{className:"text-sm text-[#67806D]",children:["+",z.eventosUltimoMes," este mes"]})]}),a.jsx(fr,{className:"h-10 w-10 text-[#67806D]"})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Animales en Control"}),a.jsx("p",{className:"text-3xl font-bold text-[#3C454A]",children:z.animalesUnicos}),a.jsxs("p",{className:"text-sm text-[#67806D]",children:["de ",n.length," totales"]})]}),a.jsx(xr,{className:"h-10 w-10 text-[#67806D]"})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Sin Eventos Sanitarios"}),a.jsx("p",{className:`text-3xl font-bold ${z.animalesSinEventos>5?"text-[#F8B36A]":"text-[#67806D]"}`,children:z.animalesSinEventos}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-60",children:"animales sin registro"})]}),a.jsx(hr,{className:`h-10 w-10 ${z.animalesSinEventos>5?"text-[#F8B36A]":"text-[#67806D]"}`})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#3C454A] opacity-70 text-sm",children:"Eventos Último Mes"}),a.jsx("p",{className:"text-3xl font-bold text-[#67806D]",children:z.eventosUltimoMes}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-60",children:"Actividad reciente"})]}),a.jsx(Mt,{className:"h-10 w-10 text-[#67806D]"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[a.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Rv,{className:"h-5 w-5 text-[#F8B36A]"}),a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Sin Eventos Sanitarios"}),a.jsx("span",{className:"bg-[#F8B36A] text-white text-xs px-2 py-1 rounded-full",children:z.animalesSinEventos})]}),a.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:n.filter(Z=>!r.some(F=>F.animal_id===Z.id)).slice(0,5).map(Z=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#F5F2E7] rounded-lg hover:bg-[#F9E9D0] transition-colors cursor-pointer",onClick:()=>G(Z),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:Z.color_caravana}}),a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium text-[#3C454A]",children:["#",Z.numero_caravana]}),a.jsx("p",{className:"text-xs text-[#3C454A] opacity-60",children:Z.categoria})]})]}),a.jsx("div",{className:"text-right",children:a.jsx("span",{className:"text-xs font-medium text-[#F8B36A]",children:"Sin registros"})})]},Z.id))}),z.animalesSinEventos>5&&a.jsxs("button",{className:"w-full mt-4 text-sm text-[#67806D] hover:underline",children:["Ver todos los ",z.animalesSinEventos," animales"]})]}),a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(wr,{className:"h-5 w-5 text-[#67806D]"}),a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Tipos de Eventos"})]}),a.jsx("div",{className:"space-y-3",children:Object.entries(z.tiposDistribucion).sort(([,Z],[,F])=>F-Z).map(([Z,F])=>{const U=Math.round(F/z.totalEventos*100),Y=Z==="vacuna"?"bg-blue-500":Z==="desparasitario"?"bg-green-500":Z==="tratamiento"?"bg-orange-500":"bg-gray-500";return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[le(Z),a.jsx("span",{className:"text-sm font-medium text-[#3C454A] capitalize",children:Z})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-sm font-bold text-[#3C454A]",children:F}),a.jsxs("span",{className:"text-xs text-[#3C454A] opacity-60 ml-1",children:["(",U,"%)"]})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${Y}`,style:{width:`${U}%`}})})]},Z)})})]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(tn,{className:"h-5 w-5 text-[#67806D]"}),a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A]",children:"Eventos Recientes"})]}),a.jsx("button",{onClick:()=>j("eventos"),className:"text-sm text-[#67806D] hover:underline",children:"Ver todos"})]}),a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsx("th",{className:"text-left py-2 text-sm font-medium text-[#3C454A] opacity-70",children:"Animal"}),a.jsx("th",{className:"text-left py-2 text-sm font-medium text-[#3C454A] opacity-70",children:"Tipo"}),a.jsx("th",{className:"text-left py-2 text-sm font-medium text-[#3C454A] opacity-70",children:"Descripción"}),a.jsx("th",{className:"text-left py-2 text-sm font-medium text-[#3C454A] opacity-70",children:"Fecha"}),a.jsx("th",{className:"text-center py-2 text-sm font-medium text-[#3C454A] opacity-70",children:"Acción"})]})}),a.jsx("tbody",{children:r.sort((Z,F)=>new Date(F.fecha)-new Date(Z.fecha)).slice(0,5).map((Z,F)=>a.jsxs("tr",{className:"border-b border-gray-50 hover:bg-[#F5F2E7] transition-colors",children:[a.jsx("td",{className:"py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Z.animales?.color_caravana}}),a.jsxs("span",{className:"text-sm font-medium text-[#3C454A]",children:["#",Z.animales?.numero_caravana||"S/N"]})]})}),a.jsx("td",{className:"py-3",children:a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${ne(Z.tipo)}`,children:[le(Z.tipo),Z.tipo]})}),a.jsx("td",{className:"py-3",children:a.jsx("span",{className:"text-sm text-[#3C454A] truncate max-w-xs",children:Z.descripcion||"-"})}),a.jsx("td",{className:"py-3",children:a.jsx("span",{className:"text-sm text-[#3C454A] opacity-70",children:new Date(Z.fecha).toLocaleDateString("es-AR")})}),a.jsx("td",{className:"py-3 text-center",children:a.jsx("button",{onClick:()=>V(Z),className:"p-1 text-[#67806D] hover:bg-[#67806D] hover:bg-opacity-10 rounded transition-colors",children:a.jsx(Kt,{className:"h-4 w-4"})})})]},Z.id))})]})}),a.jsx("div",{className:"md:hidden space-y-3",children:r.sort((Z,F)=>new Date(F.fecha)-new Date(Z.fecha)).slice(0,5).map((Z,F)=>a.jsxs("div",{className:"bg-[#F5F2E7] rounded-lg p-4 hover:bg-[#F9E9D0] transition-colors cursor-pointer",onClick:()=>V(Z),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Z.animales?.color_caravana}}),a.jsxs("span",{className:"font-medium text-[#3C454A]",children:["#",Z.animales?.numero_caravana||"S/N"]})]}),a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${ne(Z.tipo)}`,children:[le(Z.tipo),Z.tipo]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm text-[#3C454A]",children:Z.descripcion||"Sin descripción"}),a.jsx("p",{className:"text-xs text-[#3C454A] opacity-70",children:new Date(Z.fecha).toLocaleDateString("es-AR")})]})]},Z.id))})]})]}),b==="eventos"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-4",children:[a.jsx("div",{className:"sm:col-span-2 lg:col-span-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-3 h-4 w-4 text-[#3C454A] opacity-50"}),a.jsx("input",{type:"text",placeholder:"Buscar por caravana, tipo o descripción...",value:h,onChange:Z=>v(Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]})}),a.jsx("div",{children:a.jsxs("select",{value:g.tipo,onChange:Z=>y({...g,tipo:Z.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos los tipos"}),a.jsx("option",{value:"vacuna",children:"Vacuna"}),a.jsx("option",{value:"desparasitario",children:"Desparasitario"}),a.jsx("option",{value:"tratamiento",children:"Tratamiento"}),a.jsx("option",{value:"revision",children:"Revisión"}),a.jsx("option",{value:"medicamento",children:"Medicamento"})]})}),a.jsx("div",{children:a.jsxs("select",{value:g.lote,onChange:Z=>y({...g,lote:Z.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos los lotes"}),s.map(Z=>a.jsxs("option",{value:Z.id,children:[Z.nombre," - ",Z.numero]},Z.id))]})}),a.jsx("div",{children:a.jsxs("button",{onClick:ce,className:"w-full bg-[#67806D] text-white px-4 py-2 rounded-xl hover:bg-[#67806D]/90 transition-colors flex items-center justify-center gap-2",children:[a.jsx(G2,{className:"h-4 w-4"}),"Exportar"]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Fecha desde"}),a.jsx("input",{type:"date",value:g.fechaDesde,onChange:Z=>y({...g,fechaDesde:Z.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Fecha hasta"}),a.jsx("input",{type:"date",value:g.fechaHasta,onChange:Z=>y({...g,fechaHasta:Z.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Animal"}),a.jsxs("select",{value:g.animal,onChange:Z=>y({...g,animal:Z.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#67806D] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos los animales"}),n.map(Z=>a.jsxs("option",{value:Z.id,children:[Z.numero_caravana," - ",Z.categoria]},Z.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[#3C454A] opacity-70 mb-1",children:"Limpiar filtros"}),a.jsx("button",{onClick:()=>{y({fechaDesde:"",fechaHasta:"",tipo:"",animal:"",lote:"",estado:"todos"}),v("")},className:"w-full bg-gray-500 text-white px-4 py-2 rounded-xl hover:bg-gray-600 transition-colors",children:"Limpiar"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:O.length>0?O.sort((Z,F)=>new Date(F.fecha)-new Date(Z.fecha)).map((Z,F)=>a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:F*.05},className:"bg-white rounded-xl p-4 shadow-lg hover:shadow-xl transition-all cursor-pointer",onClick:()=>V(Z),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:Z.animales?.color_caravana}}),a.jsxs("span",{className:"font-semibold text-[#3C454A]",children:["#",Z.animales?.numero_caravana||"S/N"]})]}),a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${ne(Z.tipo)}`,children:[le(Z.tipo),Z.tipo]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[#3C454A]",children:Z.descripcion||"Sin descripción"}),a.jsx("p",{className:"text-xs text-[#3C454A] opacity-60",children:Z.animales?.categoria})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[a.jsx("span",{className:"text-xs text-[#3C454A] opacity-70",children:new Date(Z.fecha).toLocaleDateString("es-AR")}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:U=>{U.stopPropagation(),V(Z)},className:"p-1 text-[#67806D] hover:bg-[#67806D] hover:bg-opacity-10 rounded transition-colors",title:"Ver detalle",children:a.jsx(Kt,{className:"h-3 w-3"})}),a.jsx("button",{onClick:U=>{U.stopPropagation(),K(Z.id)},className:"p-1 text-[#F8B36A] hover:bg-[#F8B36A] hover:bg-opacity-10 rounded transition-colors",title:"Eliminar",children:a.jsx(lr,{className:"h-3 w-3"})})]})]})]})]},Z.id)):a.jsxs("div",{className:"col-span-full text-center py-12",children:[a.jsx(fr,{className:"h-12 w-12 text-[#3C454A] opacity-30 mx-auto mb-4"}),a.jsx("p",{className:"text-[#3C454A] opacity-70",children:"No se encontraron eventos sanitarios"}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-50",children:"Ajusta los filtros o registra el primer evento"})]})}),O.length>12&&a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{className:"text-sm text-[#67806D] hover:underline",children:"Cargar más eventos"})})]}),b==="reportes"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4",children:"Reportes Avanzados"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-[#F5F2E7] transition-colors text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(G2,{className:"h-5 w-5 text-[#67806D]"}),a.jsx("span",{className:"font-medium text-[#3C454A]",children:"Reporte Completo"})]}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-70",children:"Todos los eventos sanitarios con detalles completos"})]}),a.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-[#F5F2E7] transition-colors text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Mt,{className:"h-5 w-5 text-[#67806D]"}),a.jsx("span",{className:"font-medium text-[#3C454A]",children:"Análisis Temporal"})]}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-70",children:"Evolución de eventos por período"})]}),a.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-[#F5F2E7] transition-colors text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(hr,{className:"h-5 w-5 text-[#F8B36A]"}),a.jsx("span",{className:"font-medium text-[#3C454A]",children:"Animales Sin Registro"})]}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-70",children:"Listado de animales sin eventos sanitarios"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("h4",{className:"font-semibold text-[#3C454A] mb-4",children:"Distribución por Tipo"}),a.jsx("div",{className:"space-y-3",children:Object.entries(z.tiposDistribucion).sort(([,Z],[,F])=>F-Z).map(([Z,F])=>{const U=Math.round(F/z.totalEventos*100);return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-[#3C454A] capitalize",children:Z}),a.jsxs("span",{className:"text-sm text-[#3C454A]",children:[F," (",U,"%)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-[#67806D] transition-all duration-500",style:{width:`${U}%`}})})]},Z)})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("h4",{className:"font-semibold text-[#3C454A] mb-4",children:"Actividad Mensual"}),a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Mt,{className:"h-12 w-12 text-[#67806D] mx-auto mb-3"}),a.jsx("p",{className:"text-[#3C454A] opacity-70",children:"Gráfico de actividad mensual"}),a.jsx("p",{className:"text-sm text-[#3C454A] opacity-50",children:"Próximamente disponible"})]})]})]})]})]}),a.jsx(HB,{isOpen:S,onClose:()=>D(!1),onEventoCreado:()=>{d()}}),T&&C&&a.jsx(VB,{evento:C,isOpen:T,onClose:()=>k(!1)}),I&&L&&a.jsx(Gb,{animal:L,onClose:()=>{R(!1),P(null)}}),a.jsx(t,{})]})},KB=({isOpen:e,onClose:t,mode:r="crear",proveedor:n=null,onProveedorCreated:s,onProveedorUpdated:l})=>{const[c,d]=_.useState({nombre:"",contacto:"",establecimiento:"",renspa:"",cuit:"",observaciones:"",datos_personales:"",boleto_marca:""}),[f,m]=_.useState(!1),[x,h]=_.useState({}),[v,g]=_.useState(!1);_.useEffect(()=>{n&&d({nombre:n.nombre||"",contacto:n.contacto||"",establecimiento:n.establecimiento||"",renspa:n.renspa||"",cuit:n.cuit||"",observaciones:n.observaciones||"",datos_personales:n.datos_personales||"",boleto_marca:n.boleto_marca||""})},[n]);const y=()=>{d({nombre:"",contacto:"",establecimiento:"",renspa:"",cuit:"",observaciones:"",datos_personales:"",boleto_marca:""}),h({})},b=()=>{const T={};return c.nombre?.trim()||(T.nombre="El nombre es obligatorio"),c.cuit&&!/^\d{2}-\d{8}-\d{1}$/.test(c.cuit)&&(T.cuit="Formato de CUIT inválido (ej: 20-12345678-9)"),h(T),Object.keys(T).length===0},j=async T=>{if(T.preventDefault(),!!b()){m(!0);try{const k={...c,updated_at:new Date().toISOString()};if(r==="crear"){const{data:{user:C}}=await se.auth.getUser(),{data:M,error:I}=await se.from("proveedores").insert([{...k,created_by:C?.id,created_at:new Date().toISOString()}]).select().single();if(I)throw I;s?.(M)}else{const{data:C,error:M}=await se.from("proveedores").update(k).eq("id",n.id).select().single();if(M)throw M;l?.(C)}t(),y()}catch(k){console.error("Error al guardar proveedor:",k),h({submit:"Error al guardar el proveedor. Intenta nuevamente."})}finally{m(!1)}}},w=async T=>{if(T){g(!0);try{const k=T.name.split(".").pop(),M=`boletos-marca/${`${Date.now()}.${k}`}`,{error:I}=await se.storage.from("documentos").upload(M,T);if(I)throw I;const{data:{publicUrl:R}}=se.storage.from("documentos").getPublicUrl(M);d(L=>({...L,boleto_marca:R}))}catch(k){console.error("Error al subir archivo:",k),h({file:"Error al subir el archivo"})}finally{g(!1)}}},A=(T,k)=>{d(C=>({...C,[T]:k})),x[T]&&h(C=>({...C,[T]:""}))};if(!e)return null;const S=r==="ver",D=r==="crear"?"Nuevo Proveedor":r==="editar"?"Editar Proveedor":"Detalles del Proveedor";return a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:a.jsxs(de.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:T=>T.stopPropagation(),className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-rural-alternate/20",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-rural-primary/10 rounded-full flex items-center justify-center",children:a.jsx($b,{className:"w-5 h-5 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-rural-text",children:D}),a.jsx("p",{className:"text-sm text-rural-text/60",children:S?"Información completa":"Completa los datos del proveedor"})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-rural-alternate/10 rounded-lg transition-colors",children:a.jsx(Qe,{className:"w-5 h-5 text-rural-text/60"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsxs("form",{onSubmit:j,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(Vt,{className:"w-5 h-5"}),"Información Básica"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Nombre *"}),a.jsx("input",{type:"text",value:c.nombre,onChange:T=>A("nombre",T.target.value),disabled:S,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${x.nombre?"border-red-500":"border-rural-alternate"} ${S?"bg-rural-alternate/20":"bg-white"}`,placeholder:"Nombre del proveedor"}),x.nombre&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.nombre})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Contacto"}),a.jsx("input",{type:"text",value:c.contacto,onChange:T=>A("contacto",T.target.value),disabled:S,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${S?"bg-rural-alternate/20 border-rural-alternate/50":"bg-white border-rural-alternate"}`,placeholder:"Teléfono o email"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(ua,{className:"w-5 h-5"}),"Establecimiento"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Nombre del Establecimiento"}),a.jsx("input",{type:"text",value:c.establecimiento,onChange:T=>A("establecimiento",T.target.value),disabled:S,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${S?"bg-rural-alternate/20 border-rural-alternate/50":"bg-white border-rural-alternate"}`,placeholder:"Nombre del campo/establecimiento"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"RENSPA"}),a.jsx("input",{type:"text",value:c.renspa,onChange:T=>A("renspa",T.target.value),disabled:S,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${S?"bg-rural-alternate/20 border-rural-alternate/50":"bg-white border-rural-alternate"}`,placeholder:"Número RENSPA"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx($0,{className:"w-5 h-5"}),"Información Fiscal"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"CUIT"}),a.jsx("input",{type:"text",value:c.cuit,onChange:T=>A("cuit",T.target.value),disabled:S,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${x.cuit?"border-red-500":S?"border-rural-alternate/50":"border-rural-alternate"} ${S?"bg-rural-alternate/20":"bg-white"}`,placeholder:"20-12345678-9"}),x.cuit&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.cuit})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(et,{className:"w-5 h-5"}),"Documentos"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Boleto de Marca"}),c.boleto_marca?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-rural-alternate/10 rounded-lg",children:[a.jsx(et,{className:"w-5 h-5 text-rural-primary"}),a.jsx("span",{className:"flex-1 text-sm text-rural-text",children:"Documento cargado"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>window.open(c.boleto_marca,"_blank"),className:"p-2 text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-colors",title:"Ver documento",children:a.jsx(Kt,{className:"w-4 h-4"})}),!S&&a.jsx("button",{type:"button",onClick:()=>A("boleto_marca",""),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar documento",children:a.jsx(lr,{className:"w-4 h-4"})})]})]}):!S&&a.jsxs("div",{children:[a.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:T=>w(T.target.files[0]),className:"hidden",id:"boleto-marca"}),a.jsx("label",{htmlFor:"boleto-marca",className:"flex items-center justify-center gap-2 w-full p-4 border-2 border-dashed border-rural-alternate hover:border-rural-primary rounded-xl cursor-pointer transition-colors",children:v?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-rural-primary"}),a.jsx("span",{className:"text-rural-text",children:"Subiendo archivo..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(fu,{className:"w-5 h-5 text-rural-primary"}),a.jsx("span",{className:"text-rural-text",children:"Subir Boleto de Marca"})]})})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(U0,{className:"w-5 h-5"}),"Información Adicional"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Datos Personales"}),a.jsx("textarea",{value:c.datos_personales,onChange:T=>A("datos_personales",T.target.value),disabled:S,rows:3,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${S?"bg-rural-alternate/20 border-rural-alternate/50":"bg-white border-rural-alternate"}`,placeholder:"Información personal del proveedor"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Observaciones"}),a.jsx("textarea",{value:c.observaciones,onChange:T=>A("observaciones",T.target.value),disabled:S,rows:3,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${S?"bg-rural-alternate/20 border-rural-alternate/50":"bg-white border-rural-alternate"}`,placeholder:"Observaciones generales"})]})]})]}),x.submit&&a.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-600 text-sm",children:x.submit})})]})}),!S&&a.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-rural-alternate/20",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 text-rural-text border border-rural-alternate rounded-xl hover:bg-rural-alternate/10 transition-all duration-200",children:"Cancelar"}),a.jsx("button",{type:"submit",onClick:j,disabled:f,className:"flex items-center gap-2 px-6 py-3 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-all duration-200 disabled:opacity-50",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Guardando..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Na,{className:"w-4 h-4"}),a.jsx("span",{children:r==="crear"?"Crear Proveedor":"Guardar Cambios"})]})})]})]})})},YB=({proveedor:e,onClose:t,onEdit:r})=>{const[n,s]=_.useState([]),[l,c]=_.useState(!0),[d,f]=_.useState({totalCompras:0,montoTotal:0,promedioMensual:0,ultimaCompra:null,animalesComprados:0});_.useEffect(()=>{e?.id&&m()},[e]);const m=async()=>{try{c(!0);const{data:v,error:g}=await se.from("compras").select(`
          *,
          transportador:transportadores(nombre),
          animales:animales(
            id,
            numero_caravana,
            color_caravana,
            categoria,
            peso_ingreso,
            estado_fisico,
            precio_compra
          )
        `).eq("proveedor_id",e.id).order("fecha",{ascending:!1});if(g)throw g;s(v||[]);const y=v?.length||0,b=v?.reduce((D,T)=>D+(T.precio_total||0),0)||0,j=v?.reduce((D,T)=>D+(T.animales?.length||0),0)||0,w=new Date;w.setFullYear(w.getFullYear()-1);const A=v?.filter(D=>new Date(D.fecha)>=w)||[],S=A.length>0?A.reduce((D,T)=>D+(T.precio_total||0),0)/12:0;f({totalCompras:y,montoTotal:b,promedioMensual:S,ultimaCompra:v?.[0]||null,animalesComprados:j})}catch(v){console.error("Error al cargar historial:",v)}finally{c(!1)}},x=v=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(v),h=v=>new Date(v).toLocaleDateString("es-AR",{year:"numeric",month:"long",day:"numeric"});return l?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-2xl p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rural-primary mx-auto mb-4"}),a.jsx("p",{className:"text-rural-text/60",children:"Cargando detalles..."})]})})}):a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:a.jsxs(de.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:v=>v.stopPropagation(),className:"bg-white rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-rural-alternate/20",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:t,className:"p-2 hover:bg-rural-alternate/10 rounded-lg transition-colors",children:a.jsx(Zo,{className:"w-5 h-5 text-rural-text/60"})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-rural-primary/10 rounded-full flex items-center justify-center",children:a.jsx($b,{className:"w-6 h-6 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-rural-text",children:e.nombre||"Sin nombre"}),a.jsx("p",{className:"text-rural-text/60",children:e.establecimiento||"Sin establecimiento"})]})]})]}),a.jsxs("button",{onClick:()=>r(e),className:"flex items-center gap-2 px-4 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors",children:[a.jsx(et,{className:"w-4 h-4"}),"Editar"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 p-6",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs("div",{className:"bg-rural-alternate/10 rounded-2xl p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(Us,{className:"w-5 h-5"}),"Información de Contacto"]}),a.jsxs("div",{className:"space-y-3",children:[e.contacto&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Us,{className:"w-4 h-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text",children:e.contacto})]}),e.establecimiento&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ua,{className:"w-4 h-4 text-rural-primary"}),a.jsx("span",{className:"text-rural-text",children:e.establecimiento})]}),e.cuit&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx($0,{className:"w-4 h-4 text-rural-primary"}),a.jsxs("span",{className:"text-rural-text",children:["CUIT: ",e.cuit]})]}),e.renspa&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(et,{className:"w-4 h-4 text-rural-primary"}),a.jsxs("span",{className:"text-rural-text",children:["RENSPA: ",e.renspa]})]})]})]}),a.jsxs("div",{className:"bg-rural-alternate/10 rounded-2xl p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(Mt,{className:"w-5 h-5"}),"Estadísticas"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-white rounded-xl",children:[a.jsx("p",{className:"text-2xl font-bold text-rural-primary",children:d.totalCompras}),a.jsx("p",{className:"text-sm text-rural-text/60",children:"Total Compras"})]}),a.jsxs("div",{className:"text-center p-3 bg-white rounded-xl",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.animalesComprados}),a.jsx("p",{className:"text-sm text-rural-text/60",children:"Animales"})]}),a.jsxs("div",{className:"col-span-2 text-center p-3 bg-white rounded-xl",children:[a.jsx("p",{className:"text-xl font-bold text-rural-text",children:x(d.montoTotal)}),a.jsx("p",{className:"text-sm text-rural-text/60",children:"Monto Total"})]})]})]}),e.boleto_marca&&a.jsxs("div",{className:"bg-rural-alternate/10 rounded-2xl p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(et,{className:"w-5 h-5"}),"Documentos"]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(et,{className:"w-5 h-5 text-rural-primary"}),a.jsx("span",{className:"text-rural-text",children:"Boleto de Marca"})]}),a.jsx("button",{onClick:()=>window.open(e.boleto_marca,"_blank"),className:"p-2 text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-colors",children:a.jsx(Kt,{className:"w-4 h-4"})})]})]}),(e.observaciones||e.datos_personales)&&a.jsxs("div",{className:"bg-rural-alternate/10 rounded-2xl p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(U0,{className:"w-5 h-5"}),"Observaciones"]}),a.jsxs("div",{className:"space-y-3",children:[e.datos_personales&&a.jsxs("div",{className:"p-3 bg-white rounded-xl",children:[a.jsx("p",{className:"text-sm font-medium text-rural-text mb-1",children:"Datos Personales:"}),a.jsx("p",{className:"text-rural-text/80",children:e.datos_personales})]}),e.observaciones&&a.jsxs("div",{className:"p-3 bg-white rounded-xl",children:[a.jsx("p",{className:"text-sm font-medium text-rural-text mb-1",children:"Observaciones:"}),a.jsx("p",{className:"text-rural-text/80",children:e.observaciones})]})]})]})]}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-rural-card rounded-2xl border border-rural-alternate/50",children:[a.jsx("div",{className:"p-6 border-b border-rural-alternate/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-semibold text-rural-text flex items-center gap-2",children:[a.jsx(Tl,{className:"w-6 h-6"}),"Historial de Compras (",n.length,")"]}),d.ultimaCompra&&a.jsxs("div",{className:"text-sm text-rural-text/60",children:["Última: ",h(d.ultimaCompra.fecha)]})]})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Tl,{className:"h-12 w-12 text-rural-text/40 mx-auto mb-3"}),a.jsx("p",{className:"text-rural-text/60",children:"Sin compras registradas"})]}):a.jsx("div",{className:"divide-y divide-rural-alternate/20",children:n.map((v,g)=>a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:g*.1},className:"p-6 hover:bg-rural-alternate/5 transition-colors",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(We,{className:"w-4 h-4 text-rural-primary"}),a.jsx("span",{className:"font-medium text-rural-text",children:h(v.fecha)})]}),v.lugar_origen&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/60",children:[a.jsx(ua,{className:"w-3 h-3"}),v.lugar_origen]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-lg font-bold text-rural-primary",children:x(v.precio_total||0)}),a.jsxs("div",{className:"text-sm text-rural-text/60",children:[v.animales?.length||0," animales"]})]})]}),v.transportador&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/60 mb-2",children:[a.jsx(Cn,{className:"w-3 h-3"}),"Transporte: ",v.transportador.nombre]}),v.observaciones&&a.jsx("div",{className:"mt-2 p-2 bg-rural-alternate/10 rounded-lg",children:a.jsx("p",{className:"text-sm text-rural-text/80",children:v.observaciones})}),v.animales&&v.animales.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-sm font-medium text-rural-text mb-2",children:"Animales comprados:"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 text-xs",children:[v.animales.slice(0,6).map(y=>a.jsxs("div",{className:"p-2 bg-rural-alternate/10 rounded border",children:[a.jsxs("div",{className:"font-medium",children:[y.numero_caravana||"S/N"," - ",y.color_caravana||"S/C"]}),a.jsxs("div",{className:"text-rural-text/60",children:[y.categoria," - ",y.peso_ingreso,"kg"]})]},y.id)),v.animales.length>6&&a.jsx("div",{className:"p-2 bg-rural-alternate/5 rounded border border-dashed flex items-center justify-center",children:a.jsxs("span",{className:"text-rural-text/60",children:["+",v.animales.length-6," más"]})})]})]})]},v.id))})})]})})]})})]})})},WB=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),[s,l]=_.useState(""),[c,d]=_.useState([]),[f,m]=_.useState({totalProveedores:0,proveedoresActivos:0,comprasEsteAno:0,montoTotalCompras:0}),[x,h]=_.useState("lista"),[v,g]=_.useState(!1),[y,b]=_.useState("crear"),[j,w]=_.useState(null),[A,S]=_.useState(!1);_.useEffect(()=>{D(),T()},[]),_.useEffect(()=>{if(s.trim()==="")d(e);else{const z=e.filter(V=>V.nombre?.toLowerCase().includes(s.toLowerCase())||V.establecimiento?.toLowerCase().includes(s.toLowerCase())||V.cuit?.includes(s)||V.contacto?.toLowerCase().includes(s.toLowerCase()));d(z)}},[s,e]);const D=async()=>{try{n(!0);const{data:z,error:V}=await se.from("proveedores").select(`
          *,
          compras:compras(
            id,
            fecha,
            precio_total,
            observaciones
          )
        `).order("created_at",{ascending:!1});if(V)throw V;const G=z.map(K=>{const ce=K.compras?.filter(F=>new Date(F.fecha).getFullYear()===new Date().getFullYear())||[],le=K.compras?.length||0,ne=K.compras?.reduce((F,U)=>F+(U.precio_total||0),0)||0,Z=K.compras?.[0]?.fecha||null;return{...K,estadisticas:{totalCompras:le,comprasEsteAno:ce.length,montoTotal:ne,ultimaCompra:Z}}});t(G)}catch(z){console.error("Error al cargar proveedores:",z)}finally{n(!1)}},T=async()=>{try{const{count:z}=await se.from("proveedores").select("*",{count:"exact",head:!0}),{data:V}=await se.from("compras").select("proveedor_id, precio_total").gte("fecha",`${new Date().getFullYear()}-01-01`).lte("fecha",`${new Date().getFullYear()}-12-31`),G=new Set(V?.map(ce=>ce.proveedor_id)).size,K=V?.reduce((ce,le)=>ce+(le.precio_total||0),0)||0;m({totalProveedores:z||0,proveedoresActivos:G,comprasEsteAno:V?.length||0,montoTotalCompras:K})}catch(z){console.error("Error al cargar estadísticas:",z)}},k=()=>{const z=c.map(K=>({Nombre:K.nombre||"",Establecimiento:K.establecimiento||"",CUIT:K.cuit||"",Contacto:K.contacto||"",RENSPA:K.renspa||"","Total Compras":K.estadisticas?.totalCompras||0,"Compras Este Año":K.estadisticas?.comprasEsteAno||0,"Monto Total":K.estadisticas?.montoTotal||0,"Última Compra":K.estadisticas?.ultimaCompra||"",Observaciones:K.observaciones||""})),V=_a.json_to_sheet(z),G=_a.book_new();_a.book_append_sheet(G,V,"Proveedores"),yu(G,`proveedores-${new Date().toISOString().split("T")[0]}.xlsx`)},C=(z,V=null)=>{b(z),w(V),g(!0)},M=z=>{w(z),S(!0)},I=z=>{D(),T()},R=z=>{D(),T()},L=z=>{S(!1),C("editar",z)},P=z=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(z),O=z=>z?new Date(z).toLocaleDateString("es-AR"):"N/A";return r?a.jsx("div",{className:"min-h-screen bg-rural-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rural-primary mx-auto mb-4"}),a.jsx("p",{className:"text-rural-text/60",children:"Cargando proveedores..."})]})}):a.jsxs("div",{className:"min-h-screen bg-rural-background p-4",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-rural-text mb-2",children:"Gestión de Proveedores"}),a.jsx("p",{className:"text-rural-text/60",children:"Administra tus proveedores, historiales y documentación"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Total Proveedores"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:f.totalProveedores})]}),a.jsx("div",{className:"w-12 h-12 bg-rural-primary/10 rounded-full flex items-center justify-center",children:a.jsx(xr,{className:"w-6 h-6 text-rural-primary"})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Activos Este Año"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:f.proveedoresActivos})]}),a.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center",children:a.jsx(wr,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Compras Este Año"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:f.comprasEsteAno})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-full flex items-center justify-center",children:a.jsx(Mt,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Monto Total"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:P(f.montoTotalCompras)})]}),a.jsx("div",{className:"w-12 h-12 bg-rural-alert/10 rounded-full flex items-center justify-center",children:a.jsx(rr,{className:"w-6 h-6 text-rural-alert"})})]})})]}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"bg-rural-card rounded-2xl p-6 mb-8 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-rural-text/40 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Buscar por nombre, establecimiento, CUIT...",value:s,onChange:z=>l(z.target.value),className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none bg-white"})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-3 bg-rural-secondary text-white rounded-xl hover:bg-rural-secondary/90 transition-all duration-200",children:[a.jsx(ma,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Exportar"})]}),a.jsxs("button",{onClick:()=>C("crear"),className:"flex items-center gap-2 px-4 py-3 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-all duration-200",children:[a.jsx(gt,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Nuevo Proveedor"})]})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"bg-rural-card rounded-2xl border border-rural-alternate/50 overflow-hidden",children:c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(xr,{className:"h-16 w-16 text-rural-text/40 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-2",children:s?"No se encontraron proveedores":"Sin proveedores registrados"}),a.jsx("p",{className:"text-rural-text/60 mb-6",children:s?"Intenta con otros términos de búsqueda":"Comienza agregando tu primer proveedor"}),!s&&a.jsxs("button",{onClick:()=>C("crear"),className:"inline-flex items-center gap-2 px-6 py-3 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-all duration-200",children:[a.jsx($d,{className:"w-5 h-5"}),"Agregar Primer Proveedor"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-rural-alternate/30",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Proveedor"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Contacto"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Estadísticas"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Última Compra"}),a.jsx("th",{className:"text-center py-4 px-6 font-semibold text-rural-text",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-rural-alternate/20",children:c.map((z,V)=>a.jsxs(de.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:V*.1},className:"hover:bg-rural-alternate/10 transition-colors",children:[a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-rural-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:a.jsx($b,{className:"w-5 h-5 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-rural-text",children:z.nombre||"Sin nombre"}),a.jsx("p",{className:"text-sm text-rural-text/60",children:z.establecimiento||"Sin establecimiento"}),z.cuit&&a.jsxs("p",{className:"text-xs text-rural-text/40",children:["CUIT: ",z.cuit]})]})]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"space-y-1",children:[z.contacto&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/80",children:[a.jsx(Us,{className:"w-4 h-4"}),z.contacto]}),z.renspa&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/60",children:[a.jsx(et,{className:"w-4 h-4"}),"RENSPA: ",z.renspa]})]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"text-sm text-rural-text",children:[a.jsx("span",{className:"font-medium",children:z.estadisticas?.totalCompras||0})," compras"]}),a.jsxs("div",{className:"text-sm text-rural-text/60",children:[z.estadisticas?.comprasEsteAno||0," este año"]}),a.jsx("div",{className:"text-sm font-medium text-rural-primary",children:P(z.estadisticas?.montoTotal||0)})]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/60",children:[a.jsx(We,{className:"w-4 h-4"}),O(z.estadisticas?.ultimaCompra)]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>M(z),className:"p-2 text-rural-text/60 hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-all duration-200",title:"Ver detalles",children:a.jsx(Kt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>C("editar",z),className:"p-2 text-rural-text/60 hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-all duration-200",title:"Editar",children:a.jsx(Ub,{className:"w-4 h-4"})})]})})]},z.id))})]})})}),a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},className:"mt-6 text-center text-sm text-rural-text/60",children:["Mostrando ",c.length," de ",e.length," proveedores"]})]}),a.jsx(KB,{isOpen:v,onClose:()=>g(!1),mode:y,proveedor:j,onProveedorCreated:I,onProveedorUpdated:R}),a.jsx(Sa,{children:A&&j&&a.jsx(YB,{proveedor:j,onClose:()=>S(!1),onEdit:L})})]})},XB=({isOpen:e,onClose:t,mode:r="crear",transportador:n=null,onTransportadorCreated:s,onTransportadorUpdated:l})=>{const[c,d]=_.useState({nombre:"",contacto:"",precio_km:"",observaciones:""}),[f,m]=_.useState(!1),[x,h]=_.useState({});_.useEffect(()=>{n&&d({nombre:n.nombre||"",contacto:n.contacto||"",precio_km:n.precio_km||"",observaciones:n.observaciones||""})},[n]);const v=()=>{d({nombre:"",contacto:"",precio_km:"",observaciones:""}),h({})},g=()=>{const A={};return c.nombre?.trim()||(A.nombre="El nombre es obligatorio"),c.precio_km&&isNaN(c.precio_km)&&(A.precio_km="El precio debe ser un número válido"),h(A),Object.keys(A).length===0},y=async A=>{if(A.preventDefault(),!!g()){m(!0);try{const S={...c,precio_km:c.precio_km?parseFloat(c.precio_km):null,updated_at:new Date().toISOString()};if(r==="crear"){const{data:{user:D}}=await se.auth.getUser(),{data:T,error:k}=await se.from("transportadores").insert([{...S,created_by:D?.id,created_at:new Date().toISOString()}]).select().single();if(k)throw k;s?.(T)}else{const{data:D,error:T}=await se.from("transportadores").update(S).eq("id",n.id).select().single();if(T)throw T;l?.(D)}t(),v()}catch(S){console.error("Error al guardar transportador:",S),h({submit:"Error al guardar el transportador. Intenta nuevamente."})}finally{m(!1)}}},b=(A,S)=>{d(D=>({...D,[A]:S})),x[A]&&h(D=>({...D,[A]:""}))};if(!e)return null;const j=r==="ver",w=r==="crear"?"Nuevo Transportador":r==="editar"?"Editar Transportador":"Detalles del Transportador";return a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:a.jsxs(de.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:A=>A.stopPropagation(),className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-rural-alternate/20",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-rural-primary/10 rounded-full flex items-center justify-center",children:a.jsx(Cn,{className:"w-5 h-5 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-rural-text",children:w}),a.jsx("p",{className:"text-sm text-rural-text/60",children:j?"Información completa":"Completa los datos del transportador"})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-rural-alternate/10 rounded-lg transition-colors",children:a.jsx(Qe,{className:"w-5 h-5 text-rural-text/60"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(Cn,{className:"w-5 h-5"}),"Información del Transportador"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Nombre *"}),a.jsx("input",{type:"text",value:c.nombre,onChange:A=>b("nombre",A.target.value),disabled:j,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${x.nombre?"border-red-500":"border-rural-alternate"} ${j?"bg-rural-alternate/20":"bg-white"}`,placeholder:"Nombre de la empresa de transporte"}),x.nombre&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.nombre})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Contacto"}),a.jsx("input",{type:"text",value:c.contacto,onChange:A=>b("contacto",A.target.value),disabled:j,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${j?"bg-rural-alternate/20 border-rural-alternate/50":"bg-white border-rural-alternate"}`,placeholder:"Teléfono o email"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5"}),"Información Comercial"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Precio por Kilómetro"}),a.jsx("input",{type:"number",step:"0.01",value:c.precio_km,onChange:A=>b("precio_km",A.target.value),disabled:j,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${x.precio_km?"border-red-500":j?"border-rural-alternate/50":"border-rural-alternate"} ${j?"bg-rural-alternate/20":"bg-white"}`,placeholder:"0.00"}),x.precio_km&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.precio_km}),a.jsx("p",{className:"text-xs text-rural-text/60 mt-1",children:"Precio en pesos argentinos por kilómetro recorrido"})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-rural-text mb-4 flex items-center gap-2",children:[a.jsx(U0,{className:"w-5 h-5"}),"Observaciones"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Notas adicionales"}),a.jsx("textarea",{value:c.observaciones,onChange:A=>b("observaciones",A.target.value),disabled:j,rows:4,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none ${j?"bg-rural-alternate/20 border-rural-alternate/50":"bg-white border-rural-alternate"}`,placeholder:"Información adicional sobre el transportador, horarios, especialidades, etc."})]})]}),x.submit&&a.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-600 text-sm",children:x.submit})})]})}),!j&&a.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-rural-alternate/20",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 text-rural-text border border-rural-alternate rounded-xl hover:bg-rural-alternate/10 transition-all duration-200",children:"Cancelar"}),a.jsx("button",{type:"submit",onClick:y,disabled:f,className:"flex items-center gap-2 px-6 py-3 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-all duration-200 disabled:opacity-50",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Guardando..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Na,{className:"w-4 h-4"}),a.jsx("span",{children:r==="crear"?"Crear Transportador":"Guardar Cambios"})]})})]})]})})},ZB=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),[s,l]=_.useState(""),[c,d]=_.useState([]),[f,m]=_.useState({totalTransportadores:0,transportadoresActivos:0,viajesEsteAno:0,costoPromedioKm:0}),[x,h]=_.useState(!1),[v,g]=_.useState("crear"),[y,b]=_.useState(null);_.useEffect(()=>{j(),w()},[]),_.useEffect(()=>{if(s.trim()==="")d(e);else{const M=e.filter(I=>I.nombre?.toLowerCase().includes(s.toLowerCase())||I.contacto?.toLowerCase().includes(s.toLowerCase()));d(M)}},[s,e]);const j=async()=>{try{n(!0);const{data:M,error:I}=await se.from("transportadores").select(`
          *,
          compras:compras(
            id,
            fecha,
            precio_total
          )
        `).order("created_at",{ascending:!1});if(I)throw I;const R=M.map(L=>{const P=L.compras?.filter(V=>new Date(V.fecha).getFullYear()===new Date().getFullYear())||[],O=L.compras?.length||0,z=L.compras?.[0]?.fecha||null;return{...L,estadisticas:{totalViajes:O,viajesEsteAno:P.length,ultimoViaje:z}}});t(R)}catch(M){console.error("Error al cargar transportadores:",M)}finally{n(!1)}},w=async()=>{try{const{count:M}=await se.from("transportadores").select("*",{count:"exact",head:!0}),{data:I}=await se.from("compras").select("transportador_id, precio_total").gte("fecha",`${new Date().getFullYear()}-01-01`).lte("fecha",`${new Date().getFullYear()}-12-31`).not("transportador_id","is",null),{data:R}=await se.from("transportadores").select("precio_km"),L=new Set(I?.map(O=>O.transportador_id)).size,P=R?.reduce((O,z)=>O+(z.precio_km||0),0)/(R?.length||1)||0;m({totalTransportadores:M||0,transportadoresActivos:L,viajesEsteAno:I?.length||0,costoPromedioKm:P})}catch(M){console.error("Error al cargar estadísticas:",M)}},A=()=>{const M=c.map(L=>({Nombre:L.nombre||"",Contacto:L.contacto||"","Precio por KM":L.precio_km||0,"Total Viajes":L.estadisticas?.totalViajes||0,"Viajes Este Año":L.estadisticas?.viajesEsteAno||0,"Último Viaje":L.estadisticas?.ultimoViaje||"",Observaciones:L.observaciones||""})),I=_a.json_to_sheet(M),R=_a.book_new();_a.book_append_sheet(R,I,"Transportadores"),yu(R,`transportadores-${new Date().toISOString().split("T")[0]}.xlsx`)},S=(M,I=null)=>{g(M),b(I),h(!0)},D=M=>{j(),w()},T=M=>{j(),w()},k=M=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(M),C=M=>M?new Date(M).toLocaleDateString("es-AR"):"N/A";return r?a.jsx("div",{className:"min-h-screen bg-rural-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rural-primary mx-auto mb-4"}),a.jsx("p",{className:"text-rural-text/60",children:"Cargando transportes..."})]})}):a.jsxs("div",{className:"min-h-screen bg-rural-background p-4",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-rural-text mb-2",children:"Gestión de Transporte"}),a.jsx("p",{className:"text-rural-text/60",children:"Administra tus transportes y servicios de flete"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Total de Transportes"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:f.totalTransportadores})]}),a.jsx("div",{className:"w-12 h-12 bg-rural-primary/10 rounded-full flex items-center justify-center",children:a.jsx(Cn,{className:"w-6 h-6 text-rural-primary"})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Activos Este Año"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:f.transportadoresActivos})]}),a.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center",children:a.jsx(wr,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Viajes Este Año"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:f.viajesEsteAno})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-full flex items-center justify-center",children:a.jsx(Mt,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Promedio $/KM"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:k(f.costoPromedioKm)})]}),a.jsx("div",{className:"w-12 h-12 bg-rural-alert/10 rounded-full flex items-center justify-center",children:a.jsx(rr,{className:"w-6 h-6 text-rural-alert"})})]})})]}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"bg-rural-card rounded-2xl p-6 mb-8 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-rural-text/40 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Buscar por nombre o contacto...",value:s,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none bg-white"})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-3 bg-rural-secondary text-white rounded-xl hover:bg-rural-secondary/90 transition-all duration-200",children:[a.jsx(ma,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Exportar"})]}),a.jsxs("button",{onClick:()=>S("crear"),className:"flex items-center gap-2 px-4 py-3 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-all duration-200",children:[a.jsx(gt,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Nuevo Transporte"})]})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"bg-rural-card rounded-2xl border border-rural-alternate/50 overflow-hidden",children:c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Cn,{className:"h-16 w-16 text-rural-text/40 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-2",children:s?"No se encontraron transportes":"Sin transportes registrados"}),a.jsx("p",{className:"text-rural-text/60 mb-6",children:s?"Intenta con otros términos de búsqueda":"Comienza agregando tu primer transporte"}),!s&&a.jsxs("button",{onClick:()=>S("crear"),className:"inline-flex items-center gap-2 px-6 py-3 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-all duration-200",children:[a.jsx($d,{className:"w-5 h-5"}),"Agregar Primer Transportador"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-rural-alternate/30",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Transportador"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Contacto"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Precio/KM"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Estadísticas"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Último Viaje"}),a.jsx("th",{className:"text-center py-4 px-6 font-semibold text-rural-text",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-rural-alternate/20",children:c.map((M,I)=>a.jsxs(de.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:I*.1},className:"hover:bg-rural-alternate/10 transition-colors",children:[a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-rural-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:a.jsx(Cn,{className:"w-5 h-5 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-rural-text",children:M.nombre||"Sin nombre"}),M.observaciones&&a.jsx("p",{className:"text-sm text-rural-text/60 line-clamp-1",children:M.observaciones})]})]})}),a.jsx("td",{className:"py-4 px-6",children:M.contacto&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/80",children:[a.jsx(Us,{className:"w-4 h-4"}),M.contacto]})}),a.jsxs("td",{className:"py-4 px-6",children:[a.jsx("div",{className:"text-lg font-medium text-rural-primary",children:k(M.precio_km||0)}),a.jsx("div",{className:"text-xs text-rural-text/60",children:"por kilómetro"})]}),a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"text-sm text-rural-text",children:[a.jsx("span",{className:"font-medium",children:M.estadisticas?.totalViajes||0})," viajes"]}),a.jsxs("div",{className:"text-sm text-rural-text/60",children:[M.estadisticas?.viajesEsteAno||0," este año"]})]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/60",children:[a.jsx(We,{className:"w-4 h-4"}),C(M.estadisticas?.ultimoViaje)]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>S("ver",M),className:"p-2 text-rural-text/60 hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-all duration-200",title:"Ver detalles",children:a.jsx(Kt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>S("editar",M),className:"p-2 text-rural-text/60 hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-all duration-200",title:"Editar",children:a.jsx(Ub,{className:"w-4 h-4"})})]})})]},M.id))})]})})}),a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},className:"mt-6 text-center text-sm text-rural-text/60",children:["Mostrando ",c.length," de ",e.length," transportadores"]})]}),a.jsx(XB,{isOpen:x,onClose:()=>h(!1),mode:v,transportador:y,onTransportadorCreated:D,onTransportadorUpdated:T})]})},QB=({comprador:e,isOpen:t,onClose:r})=>{if(!e)return null;const n=d=>d?new Date(d).toLocaleDateString("es-AR",{year:"numeric",month:"long",day:"numeric"}):"N/A",s=d=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2}).format(d),l=e.estadisticas?.preciosPromedioPorCategoria||{},c=Object.keys(l).length>0;return a.jsx(Sa,{children:t&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-[#67806D] to-[#67806D]/80 text-white p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(Vt,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:e.nombre||"Sin nombre"}),a.jsx("p",{className:"text-white/80",children:"Detalles del comprador"})]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(Qe,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-[#F5F2E7] rounded-xl p-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(Vt,{className:"w-5 h-5"}),"Información Personal"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-[#3C454A]/70 block mb-1",children:"Nombre"}),a.jsx("p",{className:"text-[#3C454A] font-medium",children:e.nombre||"No especificado"})]}),e.contacto&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-[#3C454A]/70 block mb-1",children:"Contacto"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Us,{className:"w-4 h-4 text-[#67806D]"}),a.jsx("p",{className:"text-[#3C454A]",children:e.contacto})]})]}),e.cuit&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-[#3C454A]/70 block mb-1",children:"CUIT"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($0,{className:"w-4 h-4 text-[#67806D]"}),a.jsx("p",{className:"text-[#3C454A]",children:e.cuit})]})]})]})]}),a.jsxs("div",{className:"bg-[#F9E9D0] rounded-xl p-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(Y3,{className:"w-5 h-5"}),"Estadísticas de Compras"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[#3C454A]/70",children:"Total de compras"}),a.jsx("span",{className:"font-bold text-[#67806D] text-xl",children:e.estadisticas?.totalVentas||0})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[#3C454A]/70",children:"Compras este año"}),a.jsx("span",{className:"font-semibold text-[#3C454A]",children:e.estadisticas?.ventasEsteAno||0})]}),a.jsxs("div",{className:"pt-2 border-t border-[#805A36]/20",children:[a.jsx("span",{className:"text-[#3C454A]/70 text-sm",children:"Última compra"}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(We,{className:"w-4 h-4 text-[#67806D]"}),a.jsx("span",{className:"text-[#3C454A]",children:n(e.estadisticas?.ultimaVenta)})]})]})]})]})]}),a.jsxs("div",{className:"bg-white border border-[#67806D]/20 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(Zr,{className:"w-5 h-5 text-[#67806D]"}),"Precios Promedio por Categoría"]}),c?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(l).map(([d,f])=>a.jsx("div",{className:"bg-[#F5F2E7] rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[#3C454A]/70 capitalize",children:d}),a.jsxs("p",{className:"text-xl font-bold text-[#67806D]",children:[s(f),"/kg"]})]}),a.jsx(Mt,{className:"w-8 h-8 text-[#67806D]/30"})]})},d))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Zr,{className:"w-12 h-12 text-[#3C454A]/30 mx-auto mb-3"}),a.jsx("p",{className:"text-[#3C454A]/60",children:"No hay datos de precios disponibles"}),a.jsx("p",{className:"text-sm text-[#3C454A]/40",children:"Los precios se calculan automáticamente cuando se realizan ventas"})]})]}),e.observaciones&&a.jsxs("div",{className:"bg-[#F5F2E7] rounded-xl p-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-3 flex items-center gap-2",children:[a.jsx(et,{className:"w-5 h-5"}),"Observaciones"]}),a.jsx("p",{className:"text-[#3C454A] leading-relaxed",children:e.observaciones})]}),c&&a.jsxs("div",{className:"bg-gradient-to-r from-[#67806D]/5 to-[#F8B36A]/5 rounded-xl p-6 border border-[#67806D]/10",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#3C454A] mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-[#F8B36A]"}),"Análisis de Precios"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-[#3C454A]/70",children:"Precio más alto"}),a.jsxs("p",{className:"text-xl font-bold text-[#67806D]",children:[s(Math.max(...Object.values(l))),"/kg"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-[#3C454A]/70",children:"Precio más bajo"}),a.jsxs("p",{className:"text-xl font-bold text-[#F8B36A]",children:[s(Math.min(...Object.values(l))),"/kg"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-[#3C454A]/70",children:"Promedio general"}),a.jsxs("p",{className:"text-xl font-bold text-[#3C454A]",children:[s(Object.values(l).reduce((d,f)=>d+f,0)/Object.values(l).length),"/kg"]})]})]})]})]}),a.jsx("div",{className:"bg-[#F5F2E7] p-4 rounded-b-2xl",children:a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:r,className:"px-6 py-2 bg-[#67806D] text-white rounded-xl hover:bg-[#67806D]/90 transition-colors",children:"Cerrar"})})})]})})})},JB=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),[s,l]=_.useState(""),[c,d]=_.useState([]),[f,m]=_.useState({totalCompradores:0,compradoresActivos:0,ventasEsteAno:0}),[x,h]=_.useState(!1),[v,g]=_.useState(null);_.useEffect(()=>{y(),b()},[]),_.useEffect(()=>{if(s.trim()==="")d(e);else{const D=e.filter(T=>T.nombre?.toLowerCase().includes(s.toLowerCase())||T.contacto?.toLowerCase().includes(s.toLowerCase())||T.cuit?.includes(s));d(D)}},[s,e]);const y=async()=>{try{n(!0);const{data:D,error:T}=await se.from("compradores").select(`
          *,
          ventas:ventas(
            id,
            fecha,
            precio_kilo,
            detalle_venta:detalle_venta(
              peso_salida,
              precio_final,
              animales:animales(
                categoria
              )
            )
          )
        `).order("nombre",{ascending:!0});if(T)throw T;const k=D.map(C=>{const M=C.ventas?.filter(z=>new Date(z.fecha).getFullYear()===new Date().getFullYear())||[],I=C.ventas?.length||0,R=C.ventas?.[0]?.fecha||null,L={},P={};C.ventas?.forEach(z=>{z.detalle_venta?.forEach(V=>{const G=V.animales?.categoria||"Sin categoría",K=parseFloat(V.peso_salida)||0,ce=parseFloat(V.precio_final)||0;if(K>0&&ce>0){const le=ce/K;L[G]||(L[G]=[],P[G]=0),L[G].push({precio:le,peso:K}),P[G]+=K}})});const O={};return Object.keys(L).forEach(z=>{const V=L[z],G=P[z];if(V.length>0&&G>0){const K=V.reduce((ce,le)=>ce+le.precio*le.peso,0);O[z]=K/G}}),{...C,estadisticas:{totalVentas:I,ventasEsteAno:M.length,ultimaVenta:R,preciosPromedioPorCategoria:O}}});t(k)}catch(D){console.error("Error al cargar compradores:",D)}finally{n(!1)}},b=async()=>{try{const{count:D}=await se.from("compradores").select("*",{count:"exact",head:!0}),{data:T}=await se.from("ventas").select("comprador_id").gte("fecha",`${new Date().getFullYear()}-01-01`).lte("fecha",`${new Date().getFullYear()}-12-31`),k=new Set(T?.map(C=>C.comprador_id)).size;m({totalCompradores:D||0,compradoresActivos:k,ventasEsteAno:T?.length||0})}catch(D){console.error("Error al cargar estadísticas:",D)}},j=()=>{const D=c.map(C=>{const M={Nombre:C.nombre||"",Contacto:C.contacto||"",CUIT:C.cuit||"","Total Compras":C.estadisticas?.totalVentas||0,"Compras Este Año":C.estadisticas?.ventasEsteAno||0,"Última Compra":C.estadisticas?.ultimaVenta||"",Observaciones:C.observaciones||""},I=C.estadisticas?.preciosPromedioPorCategoria||{};return Object.keys(I).forEach(R=>{M[`Precio Promedio ${R} ($/kg)`]=I[R].toFixed(2)}),M}),T=_a.json_to_sheet(D),k=_a.book_new();_a.book_append_sheet(k,T,"Compradores"),yu(k,`compradores-${new Date().toISOString().split("T")[0]}.xlsx`)},w=D=>D?new Date(D).toLocaleDateString("es-AR"):"N/A",A=D=>{g(D),h(!0)},S=()=>{h(!1),g(null)};return r?a.jsx("div",{className:"min-h-screen bg-rural-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rural-primary mx-auto mb-4"}),a.jsx("p",{className:"text-rural-text/60",children:"Cargando compradores..."})]})}):a.jsxs("div",{className:"min-h-screen bg-rural-background p-4",children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-rural-text mb-2",children:"Gestión de Compradores"}),a.jsx("p",{className:"text-rural-text/60",children:"Registro automático de compradores y análisis de precios por categoría"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Total Compradores"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:f.totalCompradores})]}),a.jsx("div",{className:"w-12 h-12 bg-rural-primary/10 rounded-full flex items-center justify-center",children:a.jsx(xr,{className:"w-6 h-6 text-rural-primary"})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Activos Este Año"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:f.compradoresActivos})]}),a.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center",children:a.jsx(wr,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-rural-card rounded-2xl p-6 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:"Ventas Este Año"}),a.jsx("p",{className:"text-2xl font-bold text-rural-text mt-1",children:f.ventasEsteAno})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-full flex items-center justify-center",children:a.jsx(Y3,{className:"w-6 h-6 text-blue-600"})})]})})]}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"bg-rural-card rounded-2xl p-6 mb-8 border border-rural-alternate/50",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-rural-text/40 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Buscar por nombre, contacto o CUIT...",value:s,onChange:D=>l(D.target.value),className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent outline-none bg-white"})]})}),a.jsx("div",{className:"flex gap-3",children:a.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-3 bg-rural-secondary text-white rounded-xl hover:bg-rural-secondary/90 transition-all duration-200",children:[a.jsx(ma,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Exportar"})]})})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"bg-rural-card rounded-2xl border border-rural-alternate/50 overflow-hidden",children:c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(xr,{className:"h-16 w-16 text-rural-text/40 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-2",children:s?"No se encontraron compradores":"Sin compradores registrados"}),a.jsx("p",{className:"text-rural-text/60 mb-6",children:s?"Intenta con otros términos de búsqueda":"Los compradores se agregan automáticamente al realizar ventas"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-rural-alternate/30",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Comprador"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Contacto"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"CUIT"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Estadísticas"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Precios Promedio"}),a.jsx("th",{className:"text-left py-4 px-6 font-semibold text-rural-text",children:"Última Compra"}),a.jsx("th",{className:"text-center py-4 px-6 font-semibold text-rural-text",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-rural-alternate/20",children:c.map((D,T)=>a.jsxs(de.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:T*.1},className:"hover:bg-rural-alternate/10 transition-colors",children:[a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-rural-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:a.jsx(xr,{className:"w-5 h-5 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-rural-text",children:D.nombre||"Sin nombre"}),D.observaciones&&a.jsx("p",{className:"text-sm text-rural-text/60 line-clamp-1",children:D.observaciones})]})]})}),a.jsx("td",{className:"py-4 px-6",children:D.contacto&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/80",children:[a.jsx(Us,{className:"w-4 h-4"}),D.contacto]})}),a.jsx("td",{className:"py-4 px-6",children:D.cuit&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/80",children:[a.jsx($0,{className:"w-4 h-4"}),D.cuit]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"text-sm text-rural-text",children:[a.jsx("span",{className:"font-medium",children:D.estadisticas?.totalVentas||0})," compras"]}),a.jsxs("div",{className:"text-sm text-rural-text/60",children:[D.estadisticas?.ventasEsteAno||0," este año"]})]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsx("div",{className:"space-y-1",children:D.estadisticas?.preciosPromedioPorCategoria&&Object.keys(D.estadisticas.preciosPromedioPorCategoria).length>0?Object.entries(D.estadisticas.preciosPromedioPorCategoria).map(([k,C])=>a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Zr,{className:"w-3 h-3 text-rural-primary"}),a.jsxs("span",{className:"text-rural-text/60 capitalize",children:[k,":"]}),a.jsxs("span",{className:"font-medium text-rural-text",children:["$",C.toFixed(2),"/kg"]})]},k)):a.jsx("div",{className:"text-sm text-rural-text/40",children:"Sin datos"})})}),a.jsx("td",{className:"py-4 px-6",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-rural-text/60",children:[a.jsx(We,{className:"w-4 h-4"}),w(D.estadisticas?.ultimaVenta)]})}),a.jsx("td",{className:"py-4 px-6",children:a.jsx("div",{className:"flex items-center justify-center gap-2",children:a.jsx("button",{onClick:()=>A(D),className:"p-2 text-rural-text/60 hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-all duration-200",title:"Ver detalles",children:a.jsx(Kt,{className:"w-4 h-4"})})})})]},D.id))})]})})}),a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},className:"mt-6 text-center text-sm text-rural-text/60",children:["Mostrando ",c.length," de ",e.length," compradores"]})]}),a.jsx(QB,{comprador:v,isOpen:x,onClose:S})]})},ez=()=>{const{userProfile:e,isAdmin:t}=ln(),{showConfirm:r,ConfirmComponent:n}=$l(),[s,l]=_.useState("general"),[c,d]=_.useState(""),[f,m]=_.useState(!1),[x,h]=_.useState(null),[v,g]=_.useState(null),[y,b]=_.useState({animales:0,compras:0,ventas:0,eventos:0,pesadas:0,lotes:0,transportes:0,proveedores:0,compradores:0}),j=[{id:"general",label:"General",icon:zs},{id:"empresa",label:"Empresa",icon:K2},{id:"valores",label:"Valores por Defecto",icon:et},...t()?[{id:"mantenimiento",label:"Mantenimiento",icon:ia}]:[]],[w,A]=_.useState({nombre:"Gutiérrez Hnos",direccion:"San Martín, Chaco",telefono:"+54 9 362 123-4567",email:"contacto@gutierrezhnos.com",cuit:"20-12345678-9",descripcion:"Empresa familiar dedicada a la gestión ganadera"}),[S,D]=_.useState({moneda:"ARS",idioma:"es",timezone:"America/Argentina/Buenos_Aires",formatoFecha:"dd/MM/yyyy",decimalesPeso:2,decimalesMoneda:2}),[T,k]=_.useState({categoriaAnimal:"ternero",estadoFisico:"bueno",tipoVenta:"particular",pesoPromedio:250,diasAlertas:30}),C=async(O,z,V)=>{m(!0);try{await new Promise(G=>setTimeout(G,1e3)),d(`Configuración ${V} guardada correctamente`),setTimeout(()=>d(""),3e3)}catch{d("Error al guardar la configuración")}finally{m(!1)}},M=(O,z)=>{O(z),d("Configuración restaurada a valores por defecto"),setTimeout(()=>d(""),3e3)},I=async()=>{try{const[O,z,V,G,K,ce,le,ne,Z]=await Promise.all([se.from("animales").select("id",{count:"exact",head:!0}),se.from("compras").select("id",{count:"exact",head:!0}),se.from("ventas").select("id",{count:"exact",head:!0}),se.from("eventos_sanitarios").select("id",{count:"exact",head:!0}),se.from("pesadas").select("id",{count:"exact",head:!0}),se.from("lotes").select("id",{count:"exact",head:!0}),se.from("transportadores").select("id",{count:"exact",head:!0}),se.from("proveedores").select("id",{count:"exact",head:!0}),se.from("compradores").select("id",{count:"exact",head:!0})]);b({animales:O.count||0,compras:z.count||0,ventas:V.count||0,eventos:G.count||0,pesadas:K.count||0,lotes:ce.count||0,transportes:le.count||0,proveedores:ne.count||0,compradores:Z.count||0})}catch(O){console.error("Error al cargar estadísticas:",O)}};_.useEffect(()=>{s==="mantenimiento"&&t()&&I()},[s]);const R=async(O,z)=>{if(!t()){await r({type:"danger",title:"Acceso denegado",message:"Solo los administradores pueden realizar operaciones de mantenimiento.",confirmText:"Entendido"});return}g(z);try{let V;switch(z){case"animales":console.log("Eliminando pesadas antes de eliminar animales...");const G=await se.from("pesadas").delete().gt("created_at","1900-01-01");console.log("Pesadas eliminadas:",G),G.error&&console.error("Error al eliminar pesadas:",G.error),V=await se.rpc("delete_all_animales"),!V.data&&!V.error&&(V=await se.from("animales").delete().gt("created_at","1900-01-01"));break;case"compras":V=await se.from("compras").delete().gt("created_at","1900-01-01");break;case"ventas":await se.from("detalle_venta").delete().gt("created_at","1900-01-01"),V=await se.from("ventas").delete().gt("created_at","1900-01-01");break;case"sanidad":V=await se.from("eventos_sanitarios").delete().gt("created_at","1900-01-01");break;case"lotes":await se.from("animal_lote").delete().gt("fecha_asignacion","1900-01-01"),V=await se.from("lotes").delete().gt("created_at","1900-01-01");break;case"pesadas":V=await se.from("pesadas").delete().gt("created_at","1900-01-01");break;case"transportes":V=await se.from("transportadores").delete().gt("created_at","1900-01-01");break;case"proveedores":V=await se.from("proveedores").delete().gt("created_at","1900-01-01");break;case"compradores":V=await se.from("compradores").delete().gt("created_at","1900-01-01");break;case"todo":console.log("Iniciando eliminación completa de datos...");try{console.log("Eliminando detalle_venta...");const K=await se.from("detalle_venta").delete().gt("created_at","1900-01-01");console.log("Detalle venta eliminado:",K),console.log("Eliminando eventos_sanitarios...");const ce=await se.from("eventos_sanitarios").delete().gt("created_at","1900-01-01");console.log("Eventos sanitarios eliminados:",ce),console.log("Eliminando animal_lote...");const le=await se.from("animal_lote").delete().gt("fecha_asignacion","1900-01-01");console.log("Animal lote eliminado:",le),console.log("Eliminando pesadas...");const ne=await se.from("pesadas").delete().gt("created_at","1900-01-01");console.log("Pesadas eliminadas:",ne),ne.error&&console.error("Error específico al eliminar pesadas:",ne.error),console.log("Eliminando ventas...");const Z=await se.from("ventas").delete().gt("created_at","1900-01-01");console.log("Ventas eliminadas:",Z),console.log("Eliminando lotes...");const F=await se.from("lotes").delete().gt("created_at","1900-01-01");console.log("Lotes eliminados:",F),console.log("Eliminando animales...");const{data:U,error:Y}=await se.from("animales").select("id").limit(1e3);if(Y)throw console.error("Error obteniendo IDs de animales:",Y),new Error(`Error obteniendo animales: ${Y.message}`);if(U&&U.length>0){console.log(`Eliminando ${U.length} animales en lotes...`);for(let fe=0;fe<U.length;fe+=50){const Ie=U.slice(fe,fe+50).map(Je=>Je.id),Ne=await se.from("animales").delete().in("id",Ie);if(console.log(`Lote ${Math.floor(fe/50)+1} eliminado:`,Ne),Ne.error)throw console.error("Error en lote:",Ne.error),new Error(`Error eliminando lote de animales: ${Ne.error.message}`);await new Promise(Je=>setTimeout(Je,100))}console.log("Todos los animales eliminados exitosamente")}else console.log("No hay animales para eliminar");console.log("Eliminando transportes...");const Q=await se.from("transportadores").delete().gt("created_at","1900-01-01");console.log("Transportes eliminados:",Q),Q.error&&console.error("Error específico al eliminar transportes:",Q.error),console.log("Eliminando proveedores...");const ee=await se.from("proveedores").delete().gt("created_at","1900-01-01");console.log("Proveedores eliminados:",ee),ee.error&&console.error("Error específico al eliminar proveedores:",ee.error),console.log("Eliminando compradores...");const De=await se.from("compradores").delete().gt("created_at","1900-01-01");console.log("Compradores eliminados:",De),De.error&&console.error("Error específico al eliminar compradores:",De.error),console.log("Eliminando compras...");const ke=await se.from("compras").delete().gt("created_at","1900-01-01");if(console.log("Compras eliminadas:",ke),ke.error)throw console.error("Error específico al eliminar compras:",ke.error),new Error(`Error eliminando compras: ${ke.error.message}`);console.log("Eliminación completa finalizada exitosamente"),V={error:null}}catch(K){throw console.error("Error en eliminación completa:",K),K}break;default:throw new Error("Tipo de datos no válido")}if(V&&V.error)throw console.error("Error en resultado:",V.error),V.error;d(`${O} eliminados correctamente`),setTimeout(()=>d(""),3e3),await I()}catch(V){console.error("Error al eliminar datos:",V),d(`Error al eliminar ${O}: ${V.message}`),setTimeout(()=>d(""),5e3)}finally{g(null),h(null)}},L=async()=>{if(!t()){await r({type:"danger",title:"Acceso denegado",message:"Solo los administradores pueden exportar datos del sistema.",confirmText:"Entendido"});return}g("export");try{const[O,z,V,G,K,ce,le,ne,Z,F]=await Promise.all([se.from("animales").select("*"),se.from("compras").select("*"),se.from("ventas").select("*"),se.from("detalle_venta").select("*"),se.from("eventos_sanitarios").select("*"),se.from("lotes").select("*"),se.from("animal_lote").select("*"),se.from("proveedores").select("*"),se.from("compradores").select("*"),se.from("transportadores").select("*")]),U={fecha_exportacion:new Date().toISOString(),version:"1.0",datos:{animales:O.data||[],compras:z.data||[],ventas:V.data||[],detalle_venta:G.data||[],eventos_sanitarios:K.data||[],lotes:ce.data||[],animal_lote:le.data||[],proveedores:ne.data||[],compradores:Z.data||[],transportadores:F.data||[]}},Y=new Blob([JSON.stringify(U,null,2)],{type:"application/json"}),Q=URL.createObjectURL(Y),ee=document.createElement("a");ee.href=Q,ee.download=`gutierrez_hnos_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(Q),d("Datos exportados correctamente"),setTimeout(()=>d(""),3e3)}catch(O){console.error("Error al exportar datos:",O),d(`Error al exportar datos: ${O.message}`),setTimeout(()=>d(""),5e3)}finally{g(null)}},P=async()=>{if(!t()){await r({type:"danger",title:"Acceso denegado",message:"Solo los administradores pueden importar datos al sistema.",confirmText:"Entendido"});return}const O=document.createElement("input");O.type="file",O.accept=".json",O.onchange=async z=>{const V=z.target.files[0];if(!(!V||!await r(wP("Importar datos","¿Estás seguro de que quieres importar estos datos? Esto puede sobrescribir datos existentes.")))){g("import");try{const K=await V.text(),ce=JSON.parse(K);if(!ce.datos)throw new Error("Formato de archivo no válido");const{datos:le}=ce;le.proveedores?.length&&await se.from("proveedores").upsert(le.proveedores),le.compradores?.length&&await se.from("compradores").upsert(le.compradores),le.transportadores?.length&&await se.from("transportadores").upsert(le.transportadores),le.compras?.length&&await se.from("compras").upsert(le.compras),le.lotes?.length&&await se.from("lotes").upsert(le.lotes),le.animales?.length&&await se.from("animales").upsert(le.animales),le.animal_lote?.length&&await se.from("animal_lote").upsert(le.animal_lote),le.eventos_sanitarios?.length&&await se.from("eventos_sanitarios").upsert(le.eventos_sanitarios),le.ventas?.length&&await se.from("ventas").upsert(le.ventas),le.detalle_venta?.length&&await se.from("detalle_venta").upsert(le.detalle_venta),d("Datos importados correctamente"),setTimeout(()=>d(""),3e3)}catch(K){console.error("Error al importar datos:",K),d(`Error al importar datos: ${K.message}`),setTimeout(()=>d(""),5e3)}finally{g(null)}}},O.click()};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-rural-primary/10 rounded-xl",children:a.jsx(zs,{className:"h-6 w-6 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-rural-text",children:"Configuración"}),a.jsx("p",{className:"text-rural-text/60",children:"Ajustes y preferencias del sistema"})]})]})}),c&&a.jsxs(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`p-4 rounded-xl flex items-center space-x-2 ${c.includes("Error")?"bg-red-50 border border-red-200 text-red-600":"bg-green-50 border border-green-200 text-green-600"}`,children:[c.includes("Error")?a.jsx(ia,{className:"h-5 w-5"}):a.jsx(cs,{className:"h-5 w-5"}),a.jsx("span",{children:c})]}),a.jsxs("div",{className:"bg-rural-card rounded-2xl shadow-sm border border-rural-alternate/50",children:[a.jsx("div",{className:"border-b border-rural-alternate/20",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:j.map(O=>{const z=O.icon;return a.jsxs("button",{onClick:()=>l(O.id),className:`flex items-center space-x-2 py-4 border-b-2 font-medium text-sm transition-colors ${s===O.id?"border-rural-primary text-rural-primary":"border-transparent text-rural-text/60 hover:text-rural-text"}`,children:[a.jsx(z,{className:"h-4 w-4"}),a.jsx("span",{children:O.label})]},O.id)})})}),a.jsxs("div",{className:"p-6",children:[s==="general"&&a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Configuración General"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Moneda"}),a.jsxs("select",{value:S.moneda,onChange:O=>D({...S,moneda:O.target.value}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",children:[a.jsx("option",{value:"ARS",children:"Peso Argentino (ARS)"}),a.jsx("option",{value:"USD",children:"Dólar Americano (USD)"}),a.jsx("option",{value:"EUR",children:"Euro (EUR)"}),a.jsx("option",{value:"PLN",children:"Zloty Polaco (PLN)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Idioma"}),a.jsxs("select",{value:S.idioma,onChange:O=>D({...S,idioma:O.target.value}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",children:[a.jsx("option",{value:"es",children:"Español"}),a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"pl",children:"Polski"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Formato de Fecha"}),a.jsxs("select",{value:S.formatoFecha,onChange:O=>D({...S,formatoFecha:O.target.value}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",children:[a.jsx("option",{value:"dd/MM/yyyy",children:"DD/MM/AAAA"}),a.jsx("option",{value:"MM/dd/yyyy",children:"MM/DD/AAAA"}),a.jsx("option",{value:"yyyy-MM-dd",children:"AAAA-MM-DD"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Zona Horaria"}),a.jsxs("select",{value:S.timezone,onChange:O=>D({...S,timezone:O.target.value}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",children:[a.jsx("option",{value:"America/Argentina/Buenos_Aires",children:"Buenos Aires"}),a.jsx("option",{value:"America/Argentina/Cordoba",children:"Córdoba"}),a.jsx("option",{value:"America/Argentina/Mendoza",children:"Mendoza"}),a.jsx("option",{value:"Europe/Warsaw",children:"Varsovia"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsxs("button",{onClick:()=>M(D,{moneda:"ARS",idioma:"es",timezone:"America/Argentina/Buenos_Aires",formatoFecha:"dd/MM/yyyy",decimalesPeso:2,decimalesMoneda:2}),className:"px-4 py-2 text-rural-text hover:bg-rural-alternate rounded-xl transition-colors flex items-center space-x-2",children:[a.jsx(Vp,{className:"h-4 w-4"}),a.jsx("span",{children:"Restaurar"})]}),a.jsxs("button",{onClick:()=>C(S,D,"general"),disabled:f,className:"px-6 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[f?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(Na,{className:"h-4 w-4"}),a.jsx("span",{children:"Guardar"})]})]})]}),s==="empresa"&&t()&&a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Información de la Empresa"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Nombre de la Empresa"}),a.jsxs("div",{className:"relative",children:[a.jsx(K2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:"text",value:w.nombre,onChange:O=>A({...w,nombre:O.target.value}),className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"CUIT"}),a.jsxs("div",{className:"relative",children:[a.jsx(et,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:"text",value:w.cuit,onChange:O=>A({...w,cuit:O.target.value}),className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Dirección"}),a.jsxs("div",{className:"relative",children:[a.jsx(ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:"text",value:w.direccion,onChange:O=>A({...w,direccion:O.target.value}),className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Teléfono"}),a.jsxs("div",{className:"relative",children:[a.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:"text",value:w.telefono,onChange:O=>A({...w,telefono:O.target.value}),className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:"email",value:w.email,onChange:O=>A({...w,email:O.target.value}),className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Descripción"}),a.jsx("textarea",{value:w.descripcion,onChange:O=>A({...w,descripcion:O.target.value}),rows:3,className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background resize-none"})]})]}),a.jsx("div",{className:"flex justify-end space-x-3",children:a.jsxs("button",{onClick:()=>C(w,A,"empresa"),disabled:f,className:"px-6 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[f?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(Na,{className:"h-4 w-4"}),a.jsx("span",{children:"Guardar"})]})})]}),s==="valores"&&t()&&a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Valores por Defecto"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Categoría de Animal"}),a.jsxs("select",{value:T.categoriaAnimal,onChange:O=>k({...T,categoriaAnimal:O.target.value}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",children:[a.jsx("option",{value:"Ternero",children:"Ternero"}),a.jsx("option",{value:"Novillo",children:"Novillo"}),a.jsx("option",{value:"Vaca",children:"Vaca"}),a.jsx("option",{value:"Toro",children:"Toro"}),a.jsx("option",{value:"Vaquilla",children:"Vaquilla"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Estado Físico"}),a.jsxs("select",{value:T.estadoFisico,onChange:O=>k({...T,estadoFisico:O.target.value}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",children:[a.jsx("option",{value:"critico",children:"Crítico"}),a.jsx("option",{value:"malo",children:"Malo"}),a.jsx("option",{value:"bueno",children:"Bueno"}),a.jsx("option",{value:"excelente",children:"Excelente"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Tipo de Venta"}),a.jsxs("select",{value:T.tipoVenta,onChange:O=>k({...T,tipoVenta:O.target.value}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",children:[a.jsx("option",{value:"jaula",children:"Jaula"}),a.jsx("option",{value:"remate",children:"Remate"}),a.jsx("option",{value:"particular",children:"Particular"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Peso Promedio (kg)"}),a.jsx("input",{type:"number",value:T.pesoPromedio,onChange:O=>k({...T,pesoPromedio:parseInt(O.target.value)}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Días para Alertas"}),a.jsx("input",{type:"number",value:T.diasAlertas,onChange:O=>k({...T,diasAlertas:parseInt(O.target.value)}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsxs("button",{onClick:()=>M(k,{categoriaAnimal:"ternero",estadoFisico:"bueno",tipoVenta:"particular",pesoPromedio:250,diasAlertas:30}),className:"px-4 py-2 text-rural-text hover:bg-rural-alternate rounded-xl transition-colors flex items-center space-x-2",children:[a.jsx(Vp,{className:"h-4 w-4"}),a.jsx("span",{children:"Restaurar"})]}),a.jsxs("button",{onClick:()=>C(T,k,"valores por defecto"),disabled:f,className:"px-6 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[f?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(Na,{className:"h-4 w-4"}),a.jsx("span",{children:"Guardar"})]})]})]}),s==="mantenimiento"&&t()&&a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-2",children:"Mantenimiento de Base de Datos"}),a.jsxs("p",{className:"text-rural-text/60",children:["Herramientas avanzadas para gestión de datos. ",a.jsx("span",{className:"text-red-600 font-medium",children:"¡Usar con precaución!"})]})]}),a.jsxs("div",{className:"bg-rural-alternate/10 rounded-xl p-6",children:[a.jsxs("h4",{className:"font-semibold text-rural-text mb-4 flex items-center space-x-2",children:[a.jsx(Y2,{className:"h-5 w-5 text-rural-primary"}),a.jsx("span",{children:"Respaldo y Restauración"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:L,disabled:v==="export",className:"flex items-center justify-center space-x-2 p-4 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors disabled:opacity-50",children:[v==="export"?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(ma,{className:"h-4 w-4"}),a.jsx("span",{children:"Exportar Todos los Datos"})]}),a.jsxs("button",{onClick:P,disabled:v==="import",className:"flex items-center justify-center space-x-2 p-4 bg-rural-secondary text-white rounded-xl hover:bg-rural-secondary/90 transition-colors disabled:opacity-50",children:[v==="import"?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(fu,{className:"h-4 w-4"}),a.jsx("span",{children:"Importar Datos"})]})]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(ia,{className:"h-5 w-5 text-red-600"}),a.jsx("h4",{className:"font-semibold text-red-800",children:"Zona de Peligro - Eliminación de Datos"})]}),a.jsx("p",{className:"text-red-700 text-sm mb-6",children:"Estas acciones eliminan datos permanentemente y no se pueden deshacer. Asegúrate de tener un respaldo antes de continuar."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"animales",label:"Todos los Animales",icon:"🐄"},{key:"compras",label:"Todas las Compras",icon:"🛒"},{key:"ventas",label:"Todas las Ventas",icon:"💰"},{key:"sanidad",label:"Eventos Sanitarios",icon:"💉"},{key:"pesadas",label:"Todas las Pesadas",icon:"⚖️"},{key:"lotes",label:"Todos los Lotes",icon:"📦"},{key:"transportes",label:"Todos los Transportes",icon:"🚛"},{key:"proveedores",label:"Todos los Proveedores",icon:"🏢"},{key:"compradores",label:"Todos los Compradores",icon:"👥"},{key:"todo",label:"TODOS LOS DATOS",icon:"⚠️"}].map(O=>a.jsxs("div",{className:"bg-white rounded-lg border border-red-200 p-4",children:[a.jsxs("div",{className:"text-center mb-3",children:[a.jsx("div",{className:"text-2xl mb-2",children:O.icon}),a.jsx("div",{className:"font-medium text-gray-800",children:O.label})]}),x===O.key?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-red-600 text-center",children:"¿Estás seguro?"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:async()=>{await r(ic(O.label.toLowerCase(),`Esta acción eliminará permanentemente ${O.label.toLowerCase()} y no se puede deshacer. ¿Estás completamente seguro?`))?R(O.label,O.key):h(null)},disabled:v===O.key,className:"flex-1 bg-red-600 text-white py-2 px-3 rounded text-xs hover:bg-red-700 transition-colors disabled:opacity-50",children:v===O.key?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mx-auto"}):"SÍ, ELIMINAR"}),a.jsx("button",{onClick:()=>h(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-3 rounded text-xs hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):a.jsxs("button",{onClick:()=>h(O.key),className:`w-full py-2 px-3 rounded text-xs font-medium transition-colors ${O.key==="todo"?"bg-red-600 text-white hover:bg-red-700":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[a.jsx(lr,{className:"h-3 w-3 inline mr-1"}),"Eliminar"]})]},O.key))})]}),a.jsxs("div",{className:"bg-rural-card rounded-xl border border-rural-alternate/50 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-semibold text-rural-text flex items-center space-x-2",children:[a.jsx(Y2,{className:"h-5 w-5 text-rural-primary"}),a.jsx("span",{children:"Estadísticas de Base de Datos"})]}),a.jsxs("button",{onClick:I,className:"flex items-center space-x-2 px-3 py-1 bg-rural-primary/10 text-rural-primary rounded-lg hover:bg-rural-primary/20 transition-colors text-sm",children:[a.jsx(Vp,{className:"h-4 w-4"}),a.jsx("span",{children:"Actualizar"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{className:"bg-rural-background rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-rural-primary",children:y.animales}),a.jsx("div",{className:"text-sm text-rural-text/60",children:"Animales"})]}),a.jsxs("div",{className:"bg-rural-background rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-rural-primary",children:y.compras}),a.jsx("div",{className:"text-sm text-rural-text/60",children:"Compras"})]}),a.jsxs("div",{className:"bg-rural-background rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-rural-primary",children:y.ventas}),a.jsx("div",{className:"text-sm text-rural-text/60",children:"Ventas"})]}),a.jsxs("div",{className:"bg-rural-background rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-rural-primary",children:y.eventos}),a.jsx("div",{className:"text-sm text-rural-text/60",children:"Eventos"})]}),a.jsxs("div",{className:"bg-rural-background rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-rural-primary",children:y.pesadas}),a.jsx("div",{className:"text-sm text-rural-text/60",children:"Pesadas"})]}),a.jsxs("div",{className:"bg-rural-background rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-rural-primary",children:y.lotes}),a.jsx("div",{className:"text-sm text-rural-text/60",children:"Lotes"})]}),a.jsxs("div",{className:"bg-rural-background rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-rural-primary",children:y.transportes}),a.jsx("div",{className:"text-sm text-rural-text/60",children:"Transportes"})]}),a.jsxs("div",{className:"bg-rural-background rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-rural-primary",children:y.proveedores}),a.jsx("div",{className:"text-sm text-rural-text/60",children:"Proveedores"})]}),a.jsxs("div",{className:"bg-rural-background rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-rural-primary",children:y.compradores}),a.jsx("div",{className:"text-sm text-rural-text/60",children:"Compradores"})]})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(ia,{className:"h-6 w-6 text-red-600 mt-1"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Importante"}),a.jsxs("ul",{className:"text-red-700 text-sm space-y-1",children:[a.jsx("li",{children:"• Siempre realiza un respaldo antes de eliminar datos"}),a.jsx("li",{children:"• Las eliminaciones son permanentes e irreversibles"}),a.jsx("li",{children:"• Coordina con tu equipo antes de realizar mantenimiento"}),a.jsx("li",{children:"• En caso de duda, contacta al soporte técnico"})]})]})]})})]}),(s==="empresa"||s==="valores"||s==="mantenimiento")&&!t()&&a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"text-center py-12",children:[a.jsx(qd,{className:"h-16 w-16 text-rural-primary/40 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-2",children:"Acceso Restringido"}),a.jsx("p",{className:"text-rural-text/60",children:"Solo los administradores pueden acceder a esta configuración"})]})]})]}),a.jsx(n,{})]})},tz=()=>{const[e,t]=_.useState("faq"),[r,n]=_.useState(""),[s,l]=_.useState(null),c=[{id:1,categoria:"Animales",pregunta:"¿Cómo registro un nuevo animal en el sistema?",respuesta:'Para registrar un nuevo animal, ve a la sección "Animales" y haz clic en "Nuevo Animal". Completa los datos requeridos: número de caravana, color, categoría, peso de ingreso y estado físico. Si el animal viene de una compra, se registrará automáticamente durante el proceso de compra.',icon:et},{id:2,categoria:"Animales",pregunta:"¿Qué significa cada estado físico del animal?",respuesta:"Los estados físicos son: CRÍTICO (animal enfermo que requiere atención inmediata), MALO (animal con problemas de salud menores), BUENO (animal sano sin problemas), EXCELENTE (animal en condiciones óptimas para venta).",icon:fr},{id:3,categoria:"Compras",pregunta:"¿Cómo funciona el peso promedio en las compras?",respuesta:'Cuando marcas "Usar peso promedio", puedes ingresar un peso que se aplicará a todos los animales de esa compra. Esto es útil cuando compras un lote grande y no puedes pesar cada animal individualmente.',icon:Tl},{id:4,categoria:"Ventas",pregunta:"¿Cómo se calculan los precios en las ventas?",respuesta:"El precio final se calcula multiplicando el peso de salida del animal por el precio por kilogramo establecido en la venta. El sistema muestra automáticamente el total por animal y el total general de la venta.",icon:Mt},{id:5,categoria:"Sanidad",pregunta:"¿Cómo registro eventos sanitarios para múltiples animales?",respuesta:'En la sección "Sanidad", puedes seleccionar múltiples animales y aplicar el mismo evento sanitario (vacuna, desparasitario, etc.) a todos. Esto ahorra tiempo cuando aplicás el mismo tratamiento a un grupo.',icon:fr},{id:6,categoria:"Lotes",pregunta:"¿Para qué sirven los lotes?",respuesta:"Los lotes te permiten agrupar animales para facilitar el manejo. Puedes crear lotes por origen, edad, categoría o cualquier criterio que uses en tu campo. Un animal puede estar en un solo lote activo a la vez.",icon:xr},{id:7,categoria:"Sistema",pregunta:"¿Puedo exportar mis datos?",respuesta:"Sí, en todas las secciones principales tienes botones para exportar a Excel. Esto incluye listas de animales, compras, ventas, eventos sanitarios y más. Los archivos se descargan con la fecha actual.",icon:ma},{id:8,categoria:"Sistema",pregunta:"¿Qué diferencia hay entre administrador y operador?",respuesta:"Los ADMINISTRADORES pueden gestionar usuarios, acceder a configuraciones avanzadas y eliminar registros. Los OPERADORES pueden usar todas las funciones principales pero no pueden gestionar otros usuarios ni acceder a configuraciones críticas.",icon:zs},{id:9,categoria:"Proveedores",pregunta:"¿Cómo gestiono la información de mis proveedores?",respuesta:'En la sección "Proveedores" puedes registrar toda la información: nombre, contacto, CUIT, establecimiento, RENSPA y subir documentos como el boleto de marca. Esta información se vincula automáticamente con las compras.',icon:xr},{id:11,categoria:"Sistema",pregunta:"¿Cómo funcionan las confirmaciones del sistema?",respuesta:"El sistema usa confirmaciones personalizadas en lugar de los popups del navegador. Cada acción destructiva (eliminar, borrar datos) muestra un modal custom con colores específicos: ROJO para acciones peligrosas, AMARILLO para advertencias, AZUL para información. Puedes cerrar con ESC, click fuera del modal, o usando los botones.",icon:zs},{id:12,categoria:"Producción Lechera",pregunta:"¿Cómo registro la producción diaria de leche?",respuesta:'Ve a la sección "Producción Lechera" y haz clic en "Nueva Producción". Selecciona los animales lecheros, ingresa la cantidad de leche en litros y los parámetros de calidad (grasa, proteína, células somáticas). El sistema calculará automáticamente los promedios y totales.',icon:ja},{id:13,categoria:"Producción Lechera",pregunta:"¿Qué significan los parámetros de calidad de la leche?",respuesta:"Los parámetros incluyen: GRASA (% de grasa butirosa, ideal 3.5-4.5%), PROTEÍNA (% de proteína, ideal 3.0-3.5%), CÉLULAS SOMÁTICAS (indicador de salud mamaria, ideal <200,000 células/ml). Estos valores determinan la calidad y precio de la leche.",icon:wr},{id:14,categoria:"Producción Lechera",pregunta:"¿Cómo funciona el cálculo automático de promedios?",respuesta:"El sistema calcula automáticamente promedios diarios, semanales y mensuales de producción por animal y total del tambo. También promedia los parámetros de calidad y muestra tendencias de producción para facilitar la toma de decisiones.",icon:wl},{id:15,categoria:"Producción Lechera",pregunta:"¿Cómo controlo el período de antibióticos?",respuesta:'Cuando registras un tratamiento con antibióticos en la sección "Sanidad", el animal se marca automáticamente en período de antibióticos. Durante este tiempo, su leche no se incluye en los totales comercializables. El período se levanta automáticamente según los días de retiro configurados.',icon:fr},{id:16,categoria:"Estados Reproductivos",pregunta:"¿Qué significan los diferentes estados reproductivos?",respuesta:"Los estados son: VACÍA (no preñada, lista para servicio), SERVIDA (inseminada, esperando confirmación), PREÑADA (gestación confirmada), SECA (período de descanso pre-parto), LACTANDO (produciendo leche post-parto). Cada estado tiene implicaciones para el manejo reproductivo.",icon:We},{id:17,categoria:"Estados Reproductivos",pregunta:"¿Cómo cambio el estado reproductivo de un animal?",respuesta:'En la lista de animales, haz clic en el estado reproductivo actual del animal o usa el botón "Cambiar Estado". Selecciona el nuevo estado y, si corresponde, ingresa la fecha del evento (servicio, confirmación de preñez, parto, etc.).',icon:We},{id:18,categoria:"Estados Reproductivos",pregunta:"¿Cómo se calculan los días de lactancia?",respuesta:"Los días de lactancia se calculan automáticamente desde la fecha del último parto hasta la fecha actual. Esta información es crucial para evaluar la curva de lactancia, planificar el secado y optimizar la producción lechera.",icon:wr},{id:19,categoria:"Tareas",pregunta:"¿Cómo creo y asigno tareas?",respuesta:'Ve a la sección "Tareas" y haz clic en "Nueva Tarea". Completa el título, descripción, fecha de vencimiento, prioridad y asigna a un usuario. Puedes vincular la tarea con animales específicos para un mejor seguimiento.',icon:ks},{id:20,categoria:"Tareas",pregunta:"¿Qué tipos de prioridad existen?",respuesta:"Las prioridades son: BAJA (tareas rutinarias, color gris), MEDIA (tareas importantes, color amarillo), ALTA (tareas urgentes, color naranja), CRÍTICA (emergencias, color rojo). Esto ayuda a organizar el trabajo diario del campo.",icon:ks},{id:21,categoria:"Tareas",pregunta:"¿Cómo marco una tarea como completada?",respuesta:'En la lista de tareas, haz clic en el checkbox junto a la tarea o abre la tarea y marca "Completada". Puedes agregar notas sobre la ejecución y adjuntar fotos como evidencia del trabajo realizado.',icon:ks},{id:22,categoria:"Tareas",pregunta:"¿Cómo veo las estadísticas de tareas?",respuesta:"El dashboard muestra estadísticas en tiempo real: total de tareas, pendientes, en progreso, completadas, vencidas y de alta prioridad. También puedes filtrar por usuario, fecha y estado para análisis detallados.",icon:wl},{id:23,categoria:"Dashboard",pregunta:"¿Qué métricas muestra el dashboard lechero?",respuesta:"El dashboard muestra: producción diaria/mensual de leche, animales en lactancia, promedio de producción por animal, calidad promedio de leche, animales en período de antibióticos, próximos partos y servicios programados.",icon:wl},{id:24,categoria:"Dashboard",pregunta:"¿Cómo interpretar los gráficos de producción?",respuesta:"Los gráficos muestran tendencias de producción en el tiempo, comparaciones entre períodos, distribución de calidad de leche y rendimiento por animal. Las líneas de tendencia ayudan a identificar patrones estacionales y problemas de producción.",icon:Mt},{id:25,categoria:"Dashboard",pregunta:"¿Qué son los animales en período de antibióticos?",respuesta:"Son animales que recibieron tratamiento con antibióticos y cuya leche no puede comercializarse durante el período de retiro. El dashboard los identifica claramente para evitar contaminar la leche comercial y cumplir con las regulaciones sanitarias.",icon:fr}],d={telefono:"+54 9 362 123-4567",email:"soporte@gutierrezhnos.com",direccion:"San Martín, Chaco, Argentina",horarios:"Lunes a Viernes 8:00 - 18:00"},f=c.filter(h=>h.pregunta.toLowerCase().includes(r.toLowerCase())||h.respuesta.toLowerCase().includes(r.toLowerCase())||h.categoria.toLowerCase().includes(r.toLowerCase())),m=h=>{l(s===h?null:h)},x=[{id:"faq",label:"Preguntas Frecuentes",icon:Om},{id:"contacto",label:"Contacto",icon:Us}];return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-rural-primary/10 rounded-xl",children:a.jsx(Om,{className:"h-6 w-6 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-rural-text",children:"Centro de Ayuda"}),a.jsx("p",{className:"text-rural-text/60",children:"Guías, tutoriales y soporte para Gutiérrez Hnos App"})]})]})}),a.jsxs("div",{className:"bg-rural-card rounded-2xl shadow-sm border border-rural-alternate/50",children:[a.jsx("div",{className:"border-b border-rural-alternate/20",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:x.map(h=>{const v=h.icon;return a.jsxs("button",{onClick:()=>t(h.id),className:`flex items-center space-x-2 py-4 border-b-2 font-medium text-sm transition-colors ${e===h.id?"border-rural-primary text-rural-primary":"border-transparent text-rural-text/60 hover:text-rural-text"}`,children:[a.jsx(v,{className:"h-4 w-4"}),a.jsx("span",{children:h.label})]},h.id)})})}),a.jsxs("div",{className:"p-6",children:[e==="faq"&&a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:"text",placeholder:"Buscar en preguntas frecuentes...",value:r,onChange:h=>n(h.target.value),className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["Todos","Animales","Compras","Ventas","Sanidad","Sistema","Producción Lechera","Estados Reproductivos","Tareas","Dashboard","Configuración"].map(h=>a.jsx("button",{onClick:()=>n(h==="Todos"?"":h),className:`px-3 py-1 rounded-full text-sm transition-colors ${h==="Todos"&&r===""||r===h?"bg-rural-primary text-white":"bg-rural-alternate/20 text-rural-text hover:bg-rural-alternate/40"}`,children:h},h))}),a.jsx("div",{className:"space-y-3",children:f.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Om,{className:"h-16 w-16 text-rural-primary/40 mx-auto mb-4"}),a.jsx("p",{className:"text-rural-text/60",children:"No se encontraron preguntas que coincidan con tu búsqueda"})]}):f.map(h=>{const v=h.icon,g=s===h.id;return a.jsxs(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-rural-background rounded-xl border border-rural-alternate/30",children:[a.jsxs("button",{onClick:()=>m(h.id),className:"w-full p-4 text-left flex items-center justify-between hover:bg-rural-alternate/10 transition-colors rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-rural-primary/10 rounded-lg",children:a.jsx(v,{className:"h-4 w-4 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("span",{className:"inline-block px-2 py-1 bg-rural-primary/10 text-rural-primary text-xs font-medium rounded-full mr-3",children:h.categoria}),a.jsx("span",{className:"text-rural-text font-medium",children:h.pregunta})]})]}),g?a.jsx(Iv,{className:"h-5 w-5 text-rural-text/60"}):a.jsx(W3,{className:"h-5 w-5 text-rural-text/60"})]}),a.jsx(Sa,{children:g&&a.jsx(de.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:a.jsx("div",{className:"px-4 pb-4 pt-0",children:a.jsx("div",{className:"pl-12 pr-8",children:a.jsx("p",{className:"text-rural-text/80 leading-relaxed",children:h.respuesta})})})})})]},h.id)})})]}),e==="contacto"&&a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-xl font-semibold text-rural-text mb-2",children:"Contacto y Soporte"}),a.jsx("p",{className:"text-rural-text/60",children:"Estamos aquí para ayudarte. Contactanos por cualquier consulta o problema técnico"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-rural-background rounded-xl p-6 border border-rural-alternate/30",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Us,{className:"h-6 w-6 text-rural-primary"}),a.jsx("h4",{className:"font-semibold text-rural-text",children:"Teléfono"})]}),a.jsx("p",{className:"text-rural-text text-lg font-medium mb-2",children:d.telefono}),a.jsx("p",{className:"text-rural-text/60 text-sm",children:"WhatsApp disponible"})]}),a.jsxs("div",{className:"bg-rural-background rounded-xl p-6 border border-rural-alternate/30",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(B0,{className:"h-6 w-6 text-rural-primary"}),a.jsx("h4",{className:"font-semibold text-rural-text",children:"Email"})]}),a.jsx("p",{className:"text-rural-text text-lg font-medium mb-2",children:d.email}),a.jsx("p",{className:"text-rural-text/60 text-sm",children:"Respuesta en 24 horas"})]}),a.jsxs("div",{className:"bg-rural-background rounded-xl p-6 border border-rural-alternate/30",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(ua,{className:"h-6 w-6 text-rural-primary"}),a.jsx("h4",{className:"font-semibold text-rural-text",children:"Ubicación"})]}),a.jsx("p",{className:"text-rural-text text-lg font-medium mb-2",children:d.direccion}),a.jsx("p",{className:"text-rural-text/60 text-sm",children:"Visitas con cita previa"})]}),a.jsxs("div",{className:"bg-rural-background rounded-xl p-6 border border-rural-alternate/30",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(tn,{className:"h-6 w-6 text-rural-primary"}),a.jsx("h4",{className:"font-semibold text-rural-text",children:"Horarios"})]}),a.jsx("p",{className:"text-rural-text text-lg font-medium mb-2",children:d.horarios}),a.jsx("p",{className:"text-rural-text/60 text-sm",children:"Emergencias 24/7"})]})]}),a.jsxs("div",{className:"bg-rural-alternate/10 rounded-xl p-6",children:[a.jsxs("h4",{className:"font-semibold text-rural-text mb-4 flex items-center space-x-2",children:[a.jsx(W2,{className:"h-5 w-5 text-rural-primary"}),a.jsx("span",{children:"Enviar Consulta"})]}),a.jsxs("form",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Nombre"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-white",placeholder:"Tu nombre completo"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Email"}),a.jsx("input",{type:"email",className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-white",placeholder:"tu@email.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Asunto"}),a.jsxs("select",{className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-white",children:[a.jsx("option",{value:"",children:"Selecciona el tipo de consulta"}),a.jsx("option",{value:"tecnico",children:"Problema técnico"}),a.jsx("option",{value:"uso",children:"Ayuda con el uso"}),a.jsx("option",{value:"sugerencia",children:"Sugerencia"}),a.jsx("option",{value:"otro",children:"Otro"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Mensaje"}),a.jsx("textarea",{rows:4,className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-white resize-none",placeholder:"Describe tu consulta o problema..."})]}),a.jsxs("button",{type:"submit",className:"bg-rural-primary text-white px-6 py-3 rounded-xl hover:bg-rural-primary/90 transition-colors flex items-center space-x-2",children:[a.jsx(W2,{className:"h-5 w-5"}),a.jsx("span",{children:"Enviar Consulta"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-rural-primary/5 to-rural-secondary/5 rounded-xl p-6 border border-rural-primary/10",children:[a.jsxs("h4",{className:"font-semibold text-rural-text mb-4 flex items-center space-x-2",children:[a.jsx(I8,{className:"h-5 w-5 text-rural-primary"}),a.jsx("span",{children:"Tips para un Soporte Más Rápido"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-rural-primary rounded-full mt-2"}),a.jsx("span",{className:"text-rural-text/80",children:"Describe el problema paso a paso"})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-rural-primary rounded-full mt-2"}),a.jsx("span",{className:"text-rural-text/80",children:"Incluye capturas de pantalla si es posible"})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-rural-primary rounded-full mt-2"}),a.jsx("span",{className:"text-rural-text/80",children:"Menciona qué navegador estás usando"})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-rural-primary rounded-full mt-2"}),a.jsx("span",{className:"text-rural-text/80",children:"Indica si es urgente o puede esperar"})]})]})]})]})]})]})]})},rz=()=>{const{isAdmin:e,signUp:t,userProfile:r}=ln(),{showConfirm:n,ConfirmComponent:s}=$l();if(!e())return a.jsx("div",{className:"min-h-screen bg-rural-background flex items-center justify-center",children:a.jsx("div",{className:"text-center max-w-md mx-auto p-8",children:a.jsxs("div",{className:"bg-rural-card rounded-xl p-8 shadow-lg",children:[a.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"🚫"}),a.jsx("h2",{className:"text-2xl font-bold text-rural-text mb-4",children:"Acceso Restringido"}),a.jsx("p",{className:"text-rural-text/70 mb-6",children:"Solo los administradores pueden gestionar usuarios del sistema."})]})})});const[l,c]=_.useState(!1),[d,f]=_.useState(!1),[m,x]=_.useState(!1),[h,v]=_.useState(""),[g,y]=_.useState(""),[b,j]=_.useState([]),[w,A]=_.useState(!0),[S,D]=_.useState(""),[T,k]=_.useState(null),[C,M]=_.useState(!1),[I,R]=_.useState({nombre:"",email:"",password:"",confirmPassword:"",rol:"operador"});_.useEffect(()=>{e()&&L()},[]);const L=async()=>{try{A(!0);const{data:le,error:ne}=await se.from("usuarios").select("*").order("created_at",{ascending:!1});if(ne)throw ne;j(le||[])}catch(le){console.error("Error al cargar usuarios:",le)}finally{A(!1)}},P=async(le,ne)=>{try{const{error:Z}=await se.from("usuarios").update({activo:!ne}).eq("id",le);if(Z)throw Z;await L()}catch(Z){console.error("Error al cambiar estado del usuario:",Z)}},O=async le=>{const Z=b.find(U=>U.id===le)?.nombre||"usuario";if(await n(ic("usuario",`¿Estás seguro que deseas eliminar al usuario "${Z}"? Esta acción no se puede deshacer y el usuario perderá acceso al sistema.`)))try{const U=await fetch("/api/deleteUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:le})});if(!U.ok){const ee=await U.text();try{const De=JSON.parse(ee);throw new Error(De.error||"Error en el servidor")}catch{throw new Error(ee||"Error en el servidor")}}const Y=await U.text();let Q={};if(Y)try{Q=JSON.parse(Y)}catch{console.warn("La respuesta del servidor no es un JSON válido, pero la operación fue exitosa.")}Q.warning&&console.warn("⚠️ Advertencia:",Q.warning),console.log("✅ Usuario eliminado exitosamente"),await L()}catch(U){console.error("❌ Error al eliminar usuario:",U),alert(`Error al eliminar usuario: ${U.message}`)}},z=async le=>{try{const{error:ne}=await se.from("usuarios").update({nombre:le.nombre,rol:le.rol}).eq("id",le.id);if(ne)throw ne;await L(),M(!1),k(null)}catch(ne){console.error("Error al actualizar usuario:",ne)}},V=le=>{const{name:ne,value:Z}=le.target;R(F=>({...F,[ne]:Z})),v("")},G=async le=>{if(le.preventDefault(),I.password!==I.confirmPassword){v("Las contraseñas no coinciden");return}if(I.password.length<6){v("La contraseña debe tener al menos 6 caracteres");return}x(!0),v("");try{const ne=await t(I.email,I.password,I.nombre,I.rol);ne.success?(y(`Usuario ${I.nombre} creado exitosamente`),R({nombre:"",email:"",password:"",confirmPassword:"",rol:"operador"}),await L(),setTimeout(()=>{c(!1),y("")},2e3)):v(ne.error||"Error al crear el usuario")}catch{v("Error al crear el usuario")}finally{x(!1)}},K=e()&&a.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 px-4 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),a.jsx("span",{children:"Nuevo Usuario"})]}),ce=[{title:"Administradores",count:b.filter(le=>le.rol==="administrador").length,icon:qd,color:"text-red-600",bg:"bg-red-100"},{title:"Operadores",count:b.filter(le=>le.rol==="operador").length,icon:Dd,color:"text-rural-primary",bg:"bg-rural-primary/10"},{title:"Usuarios Activos",count:b.filter(le=>le.activo).length,icon:Vt,color:"text-green-600",bg:"bg-green-100"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-rural-primary/10 rounded-xl",children:a.jsx(Dd,{className:"h-6 w-6 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-rural-text",children:"Usuarios"}),a.jsx("p",{className:"text-rural-text/60",children:"Gestión de usuarios y permisos del sistema"})]})]}),K]})}),l&&e()&&a.jsxs(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-4",children:"Crear Nuevo Usuario"}),h&&a.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl flex items-center space-x-2 text-red-600",children:[a.jsx(ia,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:h})]}),g&&a.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-xl flex items-center space-x-2 text-green-600",children:[a.jsx(cs,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:g})]}),a.jsxs("form",{onSubmit:G,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Nombre completo"}),a.jsxs("div",{className:"relative",children:[a.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:"text",name:"nombre",value:I.nombre,onChange:V,className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",placeholder:"Juan Pérez",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:"email",name:"email",value:I.email,onChange:V,className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",placeholder:"juan@empresa.com",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Contraseña"}),a.jsxs("div",{className:"relative",children:[a.jsx(Lv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:d?"text":"password",name:"password",value:I.password,onChange:V,className:"w-full pl-10 pr-12 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",placeholder:"••••••••",required:!0}),a.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-rural-text/40 hover:text-rural-primary transition-colors",children:d?a.jsx(z0,{className:"h-5 w-5"}):a.jsx(Kt,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Confirmar contraseña"}),a.jsxs("div",{className:"relative",children:[a.jsx(Lv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-rural-text/40"}),a.jsx("input",{type:d?"text":"password",name:"confirmPassword",value:I.confirmPassword,onChange:V,className:"w-full pl-10 pr-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",placeholder:"••••••••",required:!0})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Rol del usuario"}),a.jsxs("select",{name:"rol",value:I.rol,onChange:V,className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",children:[a.jsx("option",{value:"operador",children:"Operador"}),a.jsx("option",{value:"administrador",children:"Administrador"})]})]}),a.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-rural-text hover:bg-rural-alternate rounded-xl transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:m?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Creando..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(gt,{className:"h-4 w-4"}),a.jsx("span",{children:"Crear Usuario"})]})})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:ce.map((le,ne)=>{const Z=le.icon;return a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:ne*.1},whileHover:{y:-4,transition:{duration:.2}},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50 hover:shadow-md transition-all",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-rural-text/60 text-sm font-medium",children:le.title}),a.jsx("p",{className:"text-3xl font-bold text-rural-text mt-1",children:le.count})]}),a.jsx("div",{className:`p-3 rounded-xl ${le.bg}`,children:a.jsx(Z,{className:`h-6 w-6 ${le.color}`})})]})},le.title)})}),e()&&a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text",children:"Lista de Usuarios"}),a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-rural-text/40"}),a.jsx("input",{type:"text",placeholder:"Buscar usuarios...",value:S,onChange:le=>D(le.target.value),className:"pl-10 pr-4 py-2 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background w-64"})]})]}),w?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-rural-primary mx-auto"}),a.jsx("p",{className:"text-rural-text/60 mt-2",children:"Cargando usuarios..."})]}):b.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Dd,{className:"h-16 w-16 text-rural-primary/40 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-2",children:"Sin usuarios"}),a.jsx("p",{className:"text-rural-text/60",children:"No hay usuarios registrados en el sistema"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-rural-alternate/20",children:[a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-rural-text",children:"Usuario"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-rural-text",children:"Rol"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-rural-text",children:"Estado"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-rural-text",children:"Creado"}),a.jsx("th",{className:"text-center py-3 px-4 font-semibold text-rural-text",children:"Acciones"})]})}),a.jsx("tbody",{children:b.filter(le=>le.nombre?.toLowerCase().includes(S.toLowerCase())||le.rol?.toLowerCase().includes(S.toLowerCase())).map((le,ne)=>a.jsxs("tr",{className:"border-b border-rural-alternate/10 hover:bg-rural-alternate/5",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${le.rol==="administrador"?"bg-red-100":"bg-rural-primary/10"}`,children:le.rol==="administrador"?a.jsx(qd,{className:"h-5 w-5 text-red-600"}):a.jsx(Vt,{className:"h-5 w-5 text-rural-primary"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-rural-text",children:le.nombre}),a.jsx("div",{className:"text-sm text-rural-text/60",children:le.id})]})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${le.rol==="administrador"?"bg-red-100 text-red-800":"bg-rural-primary/10 text-rural-primary"}`,children:le.rol==="administrador"?"Administrador":"Operador"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${le.activo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:le.activo?"Activo":"Inactivo"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center text-sm text-rural-text/60",children:[a.jsx(We,{className:"h-4 w-4 mr-1"}),new Date(le.created_at).toLocaleDateString("es-AR")]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("button",{onClick:()=>{k(le),M(!0)},className:"p-2 text-rural-text/60 hover:text-rural-primary hover:bg-rural-primary/10 rounded-lg transition-colors",title:"Editar usuario",children:a.jsx(Dn,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>P(le.id,le.activo),className:`p-2 rounded-lg transition-colors ${le.activo?"text-orange-600 hover:text-orange-700 hover:bg-orange-50":"text-green-600 hover:text-green-700 hover:bg-green-50"}`,title:le.activo?"Desactivar usuario":"Activar usuario",children:le.activo?a.jsx(B8,{className:"h-4 w-4"}):a.jsx(Dd,{className:"h-4 w-4"})}),le.id!==r?.id&&a.jsx("button",{onClick:()=>O(le.id),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar usuario",children:a.jsx(lr,{className:"h-4 w-4"})})]})})]},le.id))})]})})]}),C&&T&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-rural-card rounded-2xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-4",children:"Editar Usuario"}),a.jsxs("form",{onSubmit:le=>{le.preventDefault(),z(T)},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Nombre"}),a.jsx("input",{type:"text",value:T.nombre,onChange:le=>k({...T,nombre:le.target.value}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Rol"}),a.jsxs("select",{value:T.rol,onChange:le=>k({...T,rol:le.target.value}),className:"w-full px-4 py-3 border border-rural-alternate rounded-xl focus:ring-2 focus:ring-rural-primary focus:border-transparent transition-colors bg-rural-background",children:[a.jsx("option",{value:"operador",children:"Operador"}),a.jsx("option",{value:"administrador",children:"Administrador"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{M(!1),k(null)},className:"px-4 py-2 text-rural-text hover:bg-rural-alternate rounded-xl transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-rural-primary text-white rounded-xl hover:bg-rural-primary/90 transition-colors",children:"Guardar"})]})]})]})}),!e()&&a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-rural-card rounded-2xl p-6 shadow-sm border border-rural-alternate/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-rural-text mb-4",children:"Mi Perfil"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Nombre"}),a.jsx("div",{className:"text-rural-text",children:r?.nombre})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rural-text mb-2",children:"Rol"}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-rural-primary/10 text-rural-primary",children:r?.rol==="administrador"?"Administrador":"Operador"})]})]})]}),a.jsx(s,{})]})},az=()=>{const{produccionLeche:e,loading:t,error:r,fetchProduccionLeche:n,crearProduccionLeche:s,actualizarProduccionLeche:l,eliminarProduccionLeche:c,obtenerResumenDiario:d,verificarRegistroExistente:f}=Q3(),{animales:m,fetchAnimales:x}=mu(),[h,v]=_.useState(!1),[g,y]=_.useState(null),[b,j]=_.useState(new Date().toISOString().split("T")[0]),[w,A]=_.useState(""),[S,D]=_.useState(""),[T,k]=_.useState(null),[C,M]=_.useState({animal_id:"",fecha:new Date().toISOString().split("T")[0],litros_am:0,litros_pm:0,calidad:"buena",observaciones:""});_.useEffect(()=>{x(),n(),I()},[]),_.useEffect(()=>{I()},[b]);const I=async()=>{const K=await d(b);k(K)},R=m.filter(K=>K.estado_reproductivo==="lactancia"),L=e.filter(K=>{const ce=K.fecha===b,le=!S||K.animal_id===S,ne=!w||K.animales?.numero_caravana?.toLowerCase().includes(w.toLowerCase());return ce&&le&&ne}),P=async K=>{K.preventDefault();try{if(await f(C.animal_id,C.fecha)&&!g){alert("Ya existe un registro de producción para este animal en la fecha seleccionada");return}g?await l(g.id,C):await s(C),O(),v(!1),I()}catch(ce){console.error("Error al guardar producción:",ce)}},O=()=>{M({animal_id:"",fecha:b,litros_am:0,litros_pm:0,calidad:"buena",observaciones:""}),y(null)},z=K=>{M({animal_id:K.animal_id,fecha:K.fecha,litros_am:K.litros_am,litros_pm:K.litros_pm,calidad:K.calidad,observaciones:K.observaciones||""}),y(K),v(!0)},V=async K=>{if(window.confirm("¿Está seguro de eliminar este registro de producción?"))try{await c(K),I()}catch(ce){console.error("Error al eliminar producción:",ce)}},G=K=>{switch(K){case"excelente":return"text-green-600 bg-green-100";case"buena":return"text-blue-600 bg-blue-100";case"regular":return"text-yellow-600 bg-yellow-100";case"mala":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(ja,{className:"text-blue-600"}),"Producción Lechera"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Registro y seguimiento de la producción diaria de leche"})]}),a.jsxs("button",{onClick:()=>{O(),v(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[a.jsx(gt,{size:20}),"Registrar Producción"]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:a.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(We,{size:20,className:"text-gray-500"}),a.jsx("input",{type:"date",value:b,onChange:K=>j(K.target.value),className:"border rounded-lg px-3 py-2"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ft,{size:20,className:"text-gray-500"}),a.jsx("input",{type:"text",placeholder:"Buscar por caravana...",value:w,onChange:K=>A(K.target.value),className:"border rounded-lg px-3 py-2 w-48"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{size:20,className:"text-gray-500"}),a.jsxs("select",{value:S,onChange:K=>D(K.target.value),className:"border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Todos los animales"}),R.map(K=>a.jsxs("option",{value:K.id,children:[K.numero_caravana," - ",K.categoria]},K.id))]})]})]})}),T&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Animales Ordeñados"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.animales_ordeñados})]}),a.jsx(ja,{className:"text-blue-600",size:24})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Producción Total"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[T.produccion_total.toFixed(1),"L"]})]}),a.jsx(Mt,{className:"text-green-600",size:24})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Promedio por Animal"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[T.promedio_por_animal.toFixed(1),"L"]})]}),a.jsx(Mt,{className:"text-purple-600",size:24})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"AM / PM"}),a.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[T.total_am.toFixed(1),"L / ",T.total_pm.toFixed(1),"L"]})]}),a.jsx(We,{className:"text-orange-600",size:24})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Registros del ",new Date(b).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})}),t?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Cargando registros..."})]}):L.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(ja,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"No hay registros de producción para esta fecha"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Animal"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mañana (L)"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarde (L)"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total (L)"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Calidad"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Observaciones"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(K=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.animales?.numero_caravana}),a.jsx("div",{className:"text-sm text-gray-500",children:K.animales?.estado_reproductivo})]})})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:K.litros_am.toFixed(1)}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:K.litros_pm.toFixed(1)}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:K.total_litros.toFixed(1)}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G(K.calidad)}`,children:K.calidad})}),a.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 max-w-xs truncate",children:K.observaciones||"-"}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>z(K),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),a.jsx("button",{onClick:()=>V(K.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},K.id))})]})})]}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:g?"Editar Producción":"Registrar Producción"}),a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Animal"}),a.jsxs("select",{value:C.animal_id,onChange:K=>M({...C,animal_id:K.target.value}),required:!0,className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Seleccionar animal"}),R.map(K=>a.jsxs("option",{value:K.id,children:[K.numero_caravana," - ",K.categoria]},K.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),a.jsx("input",{type:"date",value:C.fecha,onChange:K=>M({...C,fecha:K.target.value}),required:!0,className:"w-full border rounded-lg px-3 py-2"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Litros AM"}),a.jsx("input",{type:"number",step:"0.1",min:"0",value:C.litros_am,onChange:K=>M({...C,litros_am:parseFloat(K.target.value)||0}),required:!0,className:"w-full border rounded-lg px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Litros PM"}),a.jsx("input",{type:"number",step:"0.1",min:"0",value:C.litros_pm,onChange:K=>M({...C,litros_pm:parseFloat(K.target.value)||0}),required:!0,className:"w-full border rounded-lg px-3 py-2"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calidad"}),a.jsxs("select",{value:C.calidad,onChange:K=>M({...C,calidad:K.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"excelente",children:"Excelente"}),a.jsx("option",{value:"buena",children:"Buena"}),a.jsx("option",{value:"regular",children:"Regular"}),a.jsx("option",{value:"mala",children:"Mala"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),a.jsx("textarea",{value:C.observaciones,onChange:K=>M({...C,observaciones:K.target.value}),rows:3,className:"w-full border rounded-lg px-3 py-2",placeholder:"Observaciones adicionales..."})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{v(!1),O()},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:g?"Actualizar":"Registrar"})]})]})]})}),r&&a.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[a.jsx(hr,{size:20}),r]})]})},nz=()=>{const{tareas:e,loading:t,error:r,fetchTareas:n,crearTarea:s,actualizarTarea:l,completarTarea:c,iniciarTarea:d,eliminarTarea:f,obtenerEstadisticasTareas:m,fetchTareasVencidas:x,fetchTareasHoy:h}=J3(),{animales:v,fetchAnimales:g}=mu(),[y,b]=_.useState(!1),[j,w]=_.useState(null),[A,S]=_.useState(null),[D,T]=_.useState({}),[k,C]=_.useState(null),[M,I]=_.useState([]),[R,L]=_.useState([]),[P,O]=_.useState({titulo:"",descripcion:"",tipo:"general",animal_id:"",fecha_vencimiento:new Date().toISOString().split("T")[0],prioridad:"media",estado:"pendiente"});_.useEffect(()=>{g(),n(),z(),V()},[]),_.useEffect(()=>{n(D)},[D]);const z=async()=>{const ee=await m();C(ee)},V=async()=>{const ee=await x(),De=await h();I(ee),L(De)},G=async ee=>{ee.preventDefault();try{j?await l(j.id,P):await s(P),K(),b(!1),z(),V()}catch(De){console.error("Error al guardar tarea:",De)}},K=()=>{O({titulo:"",descripcion:"",tipo:"general",animal_id:"",fecha_vencimiento:new Date().toISOString().split("T")[0],prioridad:"media",estado:"pendiente"}),w(null)},ce=ee=>{O({titulo:ee.titulo,descripcion:ee.descripcion,tipo:ee.tipo,animal_id:ee.animal_id||"",fecha_vencimiento:ee.fecha_vencimiento,prioridad:ee.prioridad,estado:ee.estado,notas:ee.notas||""}),w(ee),b(!0)},le=async ee=>{if(window.confirm("¿Está seguro de eliminar esta tarea?"))try{await f(ee),z(),V()}catch(De){console.error("Error al eliminar tarea:",De)}},ne=async ee=>{const De=prompt("Notas de finalización (opcional):");try{await c(ee,De||void 0),z(),V()}catch(ke){console.error("Error al completar tarea:",ke)}},Z=async ee=>{try{await d(ee),z()}catch(De){console.error("Error al iniciar tarea:",De)}},F=ee=>{switch(ee){case"alta":return"text-red-600 bg-red-100";case"media":return"text-yellow-600 bg-yellow-100";case"baja":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},U=ee=>{switch(ee){case"pendiente":return"text-gray-600 bg-gray-100";case"en_progreso":return"text-blue-600 bg-blue-100";case"completada":return"text-green-600 bg-green-100";case"cancelada":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},Y=ee=>{switch(ee){case"pendiente":return a.jsx(tn,{size:16});case"en_progreso":return a.jsx(hr,{size:16});case"completada":return a.jsx(en,{size:16});case"cancelada":return a.jsx(lr,{size:16});default:return a.jsx(tn,{size:16})}},Q=(ee,De)=>{const ke=new Date().toISOString().split("T")[0];return ee<ke&&De==="pendiente"};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(en,{className:"text-blue-600"}),"Gestión de Tareas"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Organización y seguimiento de actividades ganaderas"})]}),a.jsxs("button",{onClick:()=>{K(),b(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[a.jsx(gt,{size:20}),"Nueva Tarea"]})]}),k&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.total}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-600",children:k.pendientes}),a.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:k.en_progreso}),a.jsx("p",{className:"text-sm text-gray-600",children:"En Progreso"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:k.completadas}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completadas"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-red-600",children:k.vencidas}),a.jsx("p",{className:"text-sm text-gray-600",children:"Vencidas"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:k.hoy}),a.jsx("p",{className:"text-sm text-gray-600",children:"Hoy"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:k.alta_prioridad}),a.jsx("p",{className:"text-sm text-gray-600",children:"Alta Prioridad"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-400",children:k.canceladas}),a.jsx("p",{className:"text-sm text-gray-600",children:"Canceladas"})]})})]}),(M.length>0||R.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[M.length>0&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-2 flex items-center gap-2",children:[a.jsx(hr,{size:20}),"Tareas Vencidas (",M.length,")"]}),a.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[M.slice(0,3).map(ee=>a.jsxs("div",{className:"text-sm text-red-700",children:[a.jsx("span",{className:"font-medium",children:ee.titulo}),ee.animales&&a.jsxs("span",{className:"text-red-600",children:[" - ",ee.animales.numero_caravana]}),a.jsxs("span",{className:"text-red-500",children:[" (",ee.fecha_vencimiento,")"]})]},ee.id)),M.length>3&&a.jsxs("p",{className:"text-sm text-red-600",children:["y ",M.length-3," más..."]})]})]}),R.length>0&&a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-2 flex items-center gap-2",children:[a.jsx(We,{size:20}),"Tareas de Hoy (",R.length,")"]}),a.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[R.slice(0,3).map(ee=>a.jsxs("div",{className:"text-sm text-orange-700",children:[a.jsx("span",{className:"font-medium",children:ee.titulo}),ee.animales&&a.jsxs("span",{className:"text-orange-600",children:[" - ",ee.animales.numero_caravana]}),a.jsx("span",{className:`ml-2 px-2 py-0.5 rounded text-xs ${F(ee.prioridad)}`,children:ee.prioridad})]},ee.id)),R.length>3&&a.jsxs("p",{className:"text-sm text-orange-600",children:["y ",R.length-3," más..."]})]})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:a.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ft,{size:20,className:"text-gray-500"}),a.jsx("input",{type:"text",placeholder:"Buscar tareas...",className:"border rounded-lg px-3 py-2 w-48"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{size:20,className:"text-gray-500"}),a.jsxs("select",{value:D.estado||"",onChange:ee=>T({...D,estado:ee.target.value||void 0}),className:"border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Todos los estados"}),a.jsx("option",{value:"pendiente",children:"Pendiente"}),a.jsx("option",{value:"en_progreso",children:"En Progreso"}),a.jsx("option",{value:"completada",children:"Completada"}),a.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("select",{value:D.prioridad||"",onChange:ee=>T({...D,prioridad:ee.target.value||void 0}),className:"border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Todas las prioridades"}),a.jsx("option",{value:"alta",children:"Alta"}),a.jsx("option",{value:"media",children:"Media"}),a.jsx("option",{value:"baja",children:"Baja"})]})}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("select",{value:D.animal_id||"",onChange:ee=>T({...D,animal_id:ee.target.value||void 0}),className:"border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Todos los animales"}),v.map(ee=>a.jsxs("option",{value:ee.id,children:[ee.numero_caravana," - ",ee.categoria]},ee.id))]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",value:D.fecha_inicio||"",onChange:ee=>T({...D,fecha_inicio:ee.target.value||void 0}),className:"border rounded-lg px-3 py-2",placeholder:"Fecha inicio"}),a.jsx("input",{type:"date",value:D.fecha_fin||"",onChange:ee=>T({...D,fecha_fin:ee.target.value||void 0}),className:"border rounded-lg px-3 py-2",placeholder:"Fecha fin"})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Lista de Tareas"})}),t?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Cargando tareas..."})]}):e.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(en,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"No hay tareas que coincidan con los filtros"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarea"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Animal"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimiento"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridad"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(ee=>a.jsxs("tr",{className:`hover:bg-gray-50 ${Q(ee.fecha_vencimiento,ee.estado)?"bg-red-50":""}`,children:[a.jsx("td",{className:"px-4 py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:ee.titulo}),a.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:ee.descripcion})]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:ee.animales?.numero_caravana||"-"}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:ee.tipo}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsxs("div",{className:Q(ee.fecha_vencimiento,ee.estado)?"text-red-600 font-medium":"",children:[new Date(ee.fecha_vencimiento).toLocaleDateString("es-ES"),Q(ee.fecha_vencimiento,ee.estado)&&a.jsx("span",{className:"ml-1 text-red-500",children:"⚠️"})]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F(ee.prioridad)}`,children:ee.prioridad})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:a.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${U(ee.estado)}`,children:[Y(ee.estado),ee.estado.replace("_"," ")]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>S(ee),className:"text-blue-600 hover:text-blue-900",title:"Ver detalles",children:a.jsx(Kt,{size:16})}),ee.estado==="pendiente"&&a.jsx("button",{onClick:()=>Z(ee.id),className:"text-yellow-600 hover:text-yellow-900",title:"Iniciar tarea",children:a.jsx(tn,{size:16})}),(ee.estado==="pendiente"||ee.estado==="en_progreso")&&a.jsx("button",{onClick:()=>ne(ee.id),className:"text-green-600 hover:text-green-900",title:"Completar tarea",children:a.jsx(en,{size:16})}),a.jsx("button",{onClick:()=>ce(ee),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:a.jsx(Dn,{size:16})}),a.jsx("button",{onClick:()=>le(ee.id),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:a.jsx(lr,{size:16})})]})})]},ee.id))})]})})]}),y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:j?"Editar Tarea":"Nueva Tarea"}),a.jsxs("form",{onSubmit:G,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),a.jsx("input",{type:"text",value:P.titulo,onChange:ee=>O({...P,titulo:ee.target.value}),required:!0,className:"w-full border rounded-lg px-3 py-2",placeholder:"Título de la tarea"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción *"}),a.jsx("textarea",{value:P.descripcion,onChange:ee=>O({...P,descripcion:ee.target.value}),required:!0,rows:3,className:"w-full border rounded-lg px-3 py-2",placeholder:"Descripción detallada de la tarea"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),a.jsxs("select",{value:P.tipo,onChange:ee=>O({...P,tipo:ee.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"general",children:"General"}),a.jsx("option",{value:"veterinaria",children:"Veterinaria"}),a.jsx("option",{value:"reproductiva",children:"Reproductiva"}),a.jsx("option",{value:"alimentacion",children:"Alimentación"}),a.jsx("option",{value:"mantenimiento",children:"Mantenimiento"}),a.jsx("option",{value:"sanitaria",children:"Sanitaria"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),a.jsxs("select",{value:P.prioridad,onChange:ee=>O({...P,prioridad:ee.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"baja",children:"Baja"}),a.jsx("option",{value:"media",children:"Media"}),a.jsx("option",{value:"alta",children:"Alta"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Animal (opcional)"}),a.jsxs("select",{value:P.animal_id,onChange:ee=>O({...P,animal_id:ee.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Sin animal específico"}),v.map(ee=>a.jsxs("option",{value:ee.id,children:[ee.numero_caravana," - ",ee.categoria]},ee.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Vencimiento *"}),a.jsx("input",{type:"date",value:P.fecha_vencimiento,onChange:ee=>O({...P,fecha_vencimiento:ee.target.value}),required:!0,className:"w-full border rounded-lg px-3 py-2"})]}),j&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),a.jsxs("select",{value:P.estado,onChange:ee=>O({...P,estado:ee.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"pendiente",children:"Pendiente"}),a.jsx("option",{value:"en_progreso",children:"En Progreso"}),a.jsx("option",{value:"completada",children:"Completada"}),a.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas adicionales"}),a.jsx("textarea",{value:P.notas||"",onChange:ee=>O({...P,notas:ee.target.value}),rows:2,className:"w-full border rounded-lg px-3 py-2",placeholder:"Notas adicionales..."})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{b(!1),K()},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:j?"Actualizar":"Crear Tarea"})]})]})]})}),A&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Detalles de la Tarea"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-700",children:"Título"}),a.jsx("p",{className:"text-gray-900",children:A.titulo})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-700",children:"Descripción"}),a.jsx("p",{className:"text-gray-900",children:A.descripcion})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-700",children:"Tipo"}),a.jsx("p",{className:"text-gray-900",children:A.tipo})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-700",children:"Prioridad"}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F(A.prioridad)}`,children:A.prioridad})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-700",children:"Estado"}),a.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${U(A.estado)}`,children:[Y(A.estado),A.estado.replace("_"," ")]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-700",children:"Vencimiento"}),a.jsx("p",{className:`text-gray-900 ${Q(A.fecha_vencimiento,A.estado)?"text-red-600 font-medium":""}`,children:new Date(A.fecha_vencimiento).toLocaleDateString("es-ES")})]})]}),A.animales&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-700",children:"Animal"}),a.jsxs("p",{className:"text-gray-900",children:[A.animales.numero_caravana," - ",A.animales.categoria]})]}),A.notas&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-700",children:"Notas"}),a.jsx("p",{className:"text-gray-900",children:A.notas})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-500",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Creada"}),a.jsx("p",{children:new Date(A.created_at).toLocaleString("es-ES")})]}),A.fecha_completada&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Completada"}),a.jsx("p",{children:new Date(A.fecha_completada).toLocaleString("es-ES")})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cerrar"})})]})}),r&&a.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[a.jsx(hr,{size:20}),r]})]})},sz=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(null),[s,l]=_.useState(!0),[c,d]=_.useState(null),[f,m]=_.useState(new Date),[x,h]=_.useState("mes"),{showSuccess:v,showError:g}=ms(),y=async()=>{try{const{data:{user:L}}=await se.auth.getUser();if(!L)return;const{data:P,error:O}=await se.from("configuracion_calendario").select("*").eq("usuario_id",L.id).single();if(O&&O.code!=="PGRST116")throw O;if(P)n(P),h(P.vista_predeterminada);else{const z={usuario_id:L.id,vista_predeterminada:"mes",alertas_activas:!0,dias_anticipacion_alerta:7,colores_eventos:{celo:"#EF4444",parto:"#F59E0B",servicio:"#8B5CF6",vacuna:"#10B981",tratamiento:"#06B6D4",tarea:"#6B7280"},notificaciones_email:!1},{data:V,error:G}=await se.from("configuracion_calendario").insert(z).select().single();if(G)throw G;n(V)}}catch(L){console.error("Error al cargar configuración:",L),d("Error al cargar configuración del calendario")}},b=async(L,P)=>{try{l(!0);const{data:{user:O}}=await se.auth.getUser();if(!O)return;let z=se.from("eventos_calendario").select(`
          *,
          animal:animales(id, caravana, nombre)
        `).eq("usuario_id",O.id).order("fecha_evento",{ascending:!0});L&&P&&(z=z.gte("fecha_evento",L.toISOString().split("T")[0]).lte("fecha_evento",P.toISOString().split("T")[0]));const{data:V,error:G}=await z;if(G)throw G;t(V||[])}catch(O){console.error("Error al cargar eventos:",O),d("Error al cargar eventos del calendario")}finally{l(!1)}},j=async L=>{try{const{data:{user:P}}=await se.auth.getUser();if(!P)throw new Error("Usuario no autenticado");const O={...L,usuario_id:P.id},{data:z,error:V}=await se.from("eventos_calendario").insert(O).select(`
          *,
          animal:animales(id, caravana, nombre)
        `).single();if(V)throw V;return t(G=>[...G,z]),v("Evento creado exitosamente"),z}catch(P){throw console.error("Error al crear evento:",P),g("Error al crear evento"),P}},w=async(L,P)=>{try{const{data:O,error:z}=await se.from("eventos_calendario").update(P).eq("id",L).select(`
          *,
          animal:animales(id, caravana, nombre)
        `).single();if(z)throw z;return t(V=>V.map(G=>G.id===L?O:G)),v("Evento actualizado exitosamente"),O}catch(O){throw console.error("Error al actualizar evento:",O),g("Error al actualizar evento"),O}},A=async L=>{try{const{error:P}=await se.from("eventos_calendario").delete().eq("id",L);if(P)throw P;t(O=>O.filter(z=>z.id!==L)),v("Evento eliminado exitosamente")}catch(P){throw console.error("Error al eliminar evento:",P),g("Error al eliminar evento"),P}},S=async L=>w(L,{completado:!0}),D=L=>{const P=L.toISOString().split("T")[0];return e.filter(O=>O.fecha_evento===P)},T=(L=7)=>{const P=new Date,O=new Date;return O.setDate(P.getDate()+L),e.filter(z=>{const V=new Date(z.fecha_evento);return V>=P&&V<=O&&!z.completado})},k=async L=>{try{if(!r)return;const{data:P,error:O}=await se.from("configuracion_calendario").update(L).eq("id",r.id).select().single();if(O)throw O;n(P),v("Configuración actualizada")}catch(P){console.error("Error al actualizar configuración:",P),g("Error al actualizar configuración")}},C=(L,P)=>{const O=new Date(L),z=new Date(L);switch(P){case"dia":break;case"semana":const V=O.getDay(),G=V===0?6:V-1;O.setDate(O.getDate()-G),z.setDate(O.getDate()+6);break;case"mes":O.setDate(1),z.setMonth(z.getMonth()+1,0);break}return{inicio:O,fin:z}},M=L=>{const P=new Date(f);switch(x){case"dia":P.setDate(P.getDate()+(L==="siguiente"?1:-1));break;case"semana":P.setDate(P.getDate()+(L==="siguiente"?7:-7));break;case"mes":P.setMonth(P.getMonth()+(L==="siguiente"?1:-1));break}m(P)},I=()=>{m(new Date)},R=L=>{h(L),r&&k({vista_predeterminada:L})};return _.useEffect(()=>{y()},[]),_.useEffect(()=>{if(r){const{inicio:L,fin:P}=C(f,x);b(L,P)}},[r,f,x]),{eventos:e,configuracion:r,loading:s,error:c,fechaSeleccionada:f,vistaActual:x,crearEvento:j,actualizarEvento:w,eliminarEvento:A,completarEvento:S,actualizarConfiguracion:k,navegarCalendario:M,irAHoy:I,cambiarVista:R,setFechaSeleccionada:m,obtenerEventosPorFecha:D,obtenerEventosProximos:T,obtenerRangoFechas:C,cargarEventos:b}},iz=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),[s,l]=_.useState(null),[c,d]=_.useState(new Date),{showSuccess:f,showError:m}=ms(),x=async M=>{try{n(!0);const{data:{user:I}}=await se.auth.getUser();if(!I)return;const L=(M||c).toISOString().split("T")[0],{data:P,error:O}=await se.from("trabajo_diario").select(`
          *,
          animal:animales(id, caravana, nombre),
          lote:lotes(id, nombre)
        `).eq("fecha_programada",L).order("prioridad",{ascending:!1}).order("tiempo_estimado",{ascending:!1});if(O)throw O;t(P||[])}catch(I){console.error("Error al cargar tareas diarias:",I),l("Error al cargar tareas del día")}finally{n(!1)}},h=async()=>{try{n(!0);const{data:{user:M}}=await se.auth.getUser();if(!M)return;const I=new Date().toISOString().split("T")[0],{data:R,error:L}=await se.from("trabajo_diario").select(`
          *,
          animal:animales(id, caravana, nombre),
          lote:lotes(id, nombre)
        `).eq("completado",!1).lte("fecha_programada",I).order("fecha_programada",{ascending:!0}).order("prioridad",{ascending:!1});if(L)throw L;t(R||[])}catch(M){console.error("Error al cargar tareas pendientes:",M),l("Error al cargar tareas pendientes")}finally{n(!1)}},v=async M=>{try{const{data:{user:I}}=await se.auth.getUser();if(!I)throw new Error("Usuario no autenticado");const R={...M,usuario_creador:I.id,completado:!1},{data:L,error:P}=await se.from("trabajo_diario").insert(R).select(`
          *,
          animal:animales(id, caravana, nombre),
          lote:lotes(id, nombre)
        `).single();if(P)throw P;return t(O=>[...O,L]),f("Tarea creada exitosamente"),L}catch(I){throw console.error("Error al crear tarea:",I),m("Error al crear tarea"),I}},g=async(M,I)=>{try{const{data:R,error:L}=await se.from("trabajo_diario").update(I).eq("id",M).select(`
          *,
          animal:animales(id, caravana, nombre),
          lote:lotes(id, nombre)
        `).single();if(L)throw L;return t(P=>P.map(O=>O.id===M?R:O)),f("Tarea actualizada exitosamente"),R}catch(R){throw console.error("Error al actualizar tarea:",R),m("Error al actualizar tarea"),R}},y=async(M,I)=>{try{const R={completado:!0,fecha_completado:new Date().toISOString().split("T")[0]};return I&&(R.notas=I),await g(M,R)}catch(R){throw console.error("Error al completar tarea:",R),R}},b=async M=>{try{const{error:I}=await se.from("trabajo_diario").delete().eq("id",M);if(I)throw I;t(R=>R.filter(L=>L.id!==M)),f("Tarea eliminada exitosamente")}catch(I){throw console.error("Error al eliminar tarea:",I),m("Error al eliminar tarea"),I}},j=()=>{const M=e.length,I=e.filter(G=>G.completado).length,R=M-I,L=M>0?Math.round(I/M*100):0,P=e.reduce((G,K)=>G+(K.tiempo_estimado||0),0),O=e.filter(G=>G.completado).reduce((G,K)=>G+(K.tiempo_estimado||0),0),z={alta:e.filter(G=>G.prioridad==="alta").length,media:e.filter(G=>G.prioridad==="media").length,baja:e.filter(G=>G.prioridad==="baja").length},V=e.reduce((G,K)=>(G[K.categoria]=(G[K.categoria]||0)+1,G),{});return{total:M,completadas:I,pendientes:R,porcentajeCompletado:L,tiempoTotal:P,tiempoCompletado:O,tareasPorPrioridad:z,tareasPorCategoria:V}},w=M=>e.filter(I=>I.categoria===M),A=M=>e.filter(I=>I.prioridad===M),S=async(M,I)=>{try{const R=e.find(ce=>ce.id===M);if(!R)throw new Error("Tarea no encontrada");const{id:L,created_at:P,updated_at:O,completado:z,fecha_completado:V,...G}=R,K={...G,fecha_programada:I,completado:!1,fecha_completado:void 0,notas:void 0};return await v(K)}catch(R){throw console.error("Error al duplicar tarea:",R),m("Error al duplicar tarea"),R}},D=async(M,I,R)=>{try{const L=[],P=new Date(M.fecha_programada);for(let O=0;O<R;O++){const z=new Date(P);switch(I){case"diaria":z.setDate(P.getDate()+O);break;case"semanal":z.setDate(P.getDate()+O*7);break;case"mensual":z.setMonth(P.getMonth()+O);break}const V={...M,fecha_programada:z.toISOString().split("T")[0]},G=await v(V);L.push(G)}return f(`${R} tareas programadas exitosamente`),L}catch(L){throw console.error("Error al programar tareas recurrentes:",L),m("Error al programar tareas recurrentes"),L}},T=M=>{d(M)},k=M=>{const I=new Date(c);I.setDate(I.getDate()+(M==="siguiente"?1:-1)),d(I)},C=()=>{d(new Date)};return _.useEffect(()=>{x()},[c]),{tareas:e,loading:r,error:s,fechaSeleccionada:c,crearTarea:v,actualizarTarea:g,completarTarea:y,eliminarTarea:b,duplicarTarea:S,programarTareaRecurrente:D,cambiarFecha:T,navegarDia:k,irAHoy:C,cargarTareasDiarias:x,cargarTareasPendientes:h,obtenerEstadisticasDia:j,obtenerTareasPorCategoria:w,obtenerTareasPorPrioridad:A}},lz=({fecha:e,eventos:t,configuracion:r,onEventoClick:n,onFechaClick:s})=>{const l=()=>{const v=e.getFullYear(),g=e.getMonth(),y=new Date(v,g,1),b=new Date(v,g+1,0),j=[],w=y.getDay();for(let S=w-1;S>=0;S--)j.push(new Date(v,g,-S));for(let S=1;S<=b.getDate();S++)j.push(new Date(v,g,S));const A=42-j.length;for(let S=1;S<=A;S++)j.push(new Date(v,g+1,S));return j},c=v=>{const g=v.toISOString().split("T")[0];return t.filter(y=>new Date(y.fecha_evento).toISOString().split("T")[0]===g)},d=v=>{const g=new Date;return v.toDateString()===g.toDateString()},f=v=>v.getMonth()===e.getMonth()&&v.getFullYear()===e.getFullYear(),m=v=>{const g={reproduccion:"bg-pink-500",salud:"bg-red-500",nutricion:"bg-green-500",manejo:"bg-blue-500",vacunacion:"bg-purple-500",revision:"bg-yellow-500",otro:"bg-gray-500"};return g[v]||g.otro},x=l(),h=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"];return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:h.map(v=>a.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500",children:v},v))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((v,g)=>{const y=c(v),b=d(v),j=f(v);return a.jsxs("div",{onClick:()=>s(v),className:`
                min-h-[120px] p-2 border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors
                ${b?"bg-blue-50 border-blue-200":""}
                ${j?"":"bg-gray-50 text-gray-400"}
              `,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:`
                  text-sm font-medium
                  ${b?"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center":""}
                  ${j?"text-gray-900":"text-gray-400"}
                `,children:v.getDate()}),y.length>0&&a.jsx("span",{className:"text-xs text-gray-500",children:y.length})]}),a.jsxs("div",{className:"space-y-1",children:[y.slice(0,3).map(w=>a.jsx("div",{onClick:A=>{A.stopPropagation(),n(w)},className:`
                      text-xs p-1 rounded text-white cursor-pointer hover:opacity-80 transition-opacity
                      ${m(w.tipo)}
                    `,title:w.titulo,children:a.jsxs("div",{className:"flex items-center gap-1",children:[w.prioridad==="alta"&&a.jsx(hr,{className:"h-3 w-3"}),w.fecha_evento.includes("T")&&a.jsx(tn,{className:"h-3 w-3"}),a.jsx("span",{className:"truncate flex-1",children:w.titulo})]})},w.id)),y.length>3&&a.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",y.length-3," más"]})]})]},g)})}),a.jsxs("div",{className:"mt-6 flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded"}),a.jsx("span",{children:"Reproducción"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),a.jsx("span",{children:"Salud"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),a.jsx("span",{children:"Nutrición"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),a.jsx("span",{children:"Manejo"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded"}),a.jsx("span",{children:"Vacunación"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded"}),a.jsx("span",{children:"Revisión"})]})]})]})},oz=({tareasDelDia:e,tareasPendientes:t,fechaSeleccionada:r,loading:n,onCrearTarea:s,onCompletarTarea:l,onEliminarTarea:c,onSeleccionarFecha:d})=>{const[f,m]=_.useState(!1),[x,h]=_.useState(""),[v,g]=_.useState(""),[y,b]=_.useState({titulo:"",descripcion:"",categoria:"mantenimiento",prioridad:"media",fecha_programada:r.toISOString().split("T")[0],animal_id:"",lote_id:"",usuario_asignado:"",usuario_creador:"",completado:!1,notas:"",tiempo_estimado:0}),j=[{value:"ordeño",label:"Ordeño",color:"bg-blue-500"},{value:"alimentacion",label:"Alimentación",color:"bg-green-500"},{value:"sanidad",label:"Sanidad",color:"bg-red-500"},{value:"reproduccion",label:"Reproducción",color:"bg-pink-500"},{value:"mantenimiento",label:"Mantenimiento",color:"bg-yellow-500"},{value:"general",label:"General",color:"bg-gray-500"}],w=[{value:"baja",label:"Baja",color:"text-green-600"},{value:"media",label:"Media",color:"text-yellow-600"},{value:"alta",label:"Alta",color:"text-red-600"}],A=async C=>{C.preventDefault();try{await s(y),b({titulo:"",descripcion:"",categoria:"mantenimiento",prioridad:"media",fecha_programada:r.toISOString().split("T")[0],animal_id:"",lote_id:"",usuario_asignado:"",usuario_creador:"",completado:!1,notas:"",tiempo_estimado:0}),m(!1)}catch(M){console.error("Error al crear tarea:",M)}},S=C=>j.find(I=>I.value===C)?.color||"bg-gray-500",D=C=>w.find(I=>I.value===C)?.color||"text-gray-600",T=e.filter(C=>!(x&&C.categoria!==x||v&&C.prioridad!==v)),k=t.filter(C=>!(x&&C.categoria!==x||v&&C.prioridad!==v));return n?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Trabajo del ",r.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),a.jsxs("p",{className:"text-gray-600",children:[T.length," tareas programadas"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",value:r.toISOString().split("T")[0],onChange:C=>d(new Date(C.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),"Nueva Tarea"]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtros:"})]}),a.jsxs("select",{value:x,onChange:C=>h(C.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todas las categorías"}),j.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))]}),a.jsxs("select",{value:v,onChange:C=>g(C.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todas las prioridades"}),w.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))]}),(x||v)&&a.jsx("button",{onClick:()=>{h(""),g("")},className:"px-3 py-1 text-sm text-blue-600 hover:text-blue-800",children:"Limpiar filtros"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tareas del Día"}),T.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(We,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No hay tareas programadas para este día"})]}):a.jsx("div",{className:"space-y-3",children:T.map(C=>a.jsx("div",{className:`p-4 border rounded-lg transition-colors ${C.completado?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${S(C.categoria)}`}),a.jsx("h4",{className:`font-medium ${C.completado?"line-through text-gray-500":"text-gray-900"}`,children:C.titulo}),a.jsx("span",{className:`text-xs font-medium ${D(C.prioridad)}`,children:w.find(M=>M.value===C.prioridad)?.label})]}),C.descripcion&&a.jsx("p",{className:`text-sm mb-2 ${C.completado?"text-gray-400":"text-gray-600"}`,children:C.descripcion}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[C.fecha_programada&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(tn,{className:"h-3 w-3"}),new Date(C.fecha_programada).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})]}),a.jsx("span",{className:"capitalize",children:j.find(M=>M.value===C.categoria)?.label})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[!C.completado&&a.jsx("button",{onClick:()=>l(C.id),className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-100 rounded",title:"Marcar como completada",children:a.jsx(en,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>c(C.id),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"Eliminar tarea",children:"×"})]})]})},C.id))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:["Tareas Pendientes",k.length>0&&a.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:k.length})]}),k.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(en,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"¡Todas las tareas están al día!"})]}):a.jsx("div",{className:"space-y-3",children:k.map(C=>a.jsx("div",{className:"p-4 border border-red-200 bg-red-50 rounded-lg",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(hr,{className:"h-4 w-4 text-red-500"}),a.jsx("h4",{className:"font-medium text-gray-900",children:C.titulo}),a.jsx("span",{className:`text-xs font-medium ${D(C.prioridad)}`,children:w.find(M=>M.value===C.prioridad)?.label})]}),C.descripcion&&a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:C.descripcion}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("span",{children:["Programada: ",new Date(C.fecha_programada).toLocaleDateString("es-ES")]}),C.fecha_programada&&a.jsx("span",{children:new Date(C.fecha_programada).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a.jsx("button",{onClick:()=>l(C.id),className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-100 rounded",title:"Marcar como completada",children:a.jsx(en,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>c(C.id),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"Eliminar tarea",children:"×"})]})]})},C.id))})]})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Nueva Tarea"}),a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),a.jsx("input",{type:"text",required:!0,value:y.titulo,onChange:C=>b(M=>({...M,titulo:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Revisar vacas preñadas"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),a.jsx("textarea",{value:y.descripcion,onChange:C=>b(M=>({...M,descripcion:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Detalles adicionales..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría"}),a.jsx("select",{value:y.categoria,onChange:C=>b(M=>({...M,categoria:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:j.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),a.jsx("select",{value:y.prioridad,onChange:C=>b(M=>({...M,prioridad:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:w.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),a.jsx("input",{type:"date",value:y.fecha_programada,onChange:C=>b(M=>({...M,fecha_programada:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiempo estimado (minutos)"}),a.jsx("input",{type:"number",value:y.tiempo_estimado,onChange:C=>b(M=>({...M,tiempo_estimado:parseInt(C.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),a.jsx("textarea",{value:y.notas,onChange:C=>b(M=>({...M,notas:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Notas adicionales sobre la tarea..."})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Crear Tarea"})]})]})]})})})]})},cz=({configuracion:e})=>{const{showNotification:t}=ms(),[r,n]=_.useState({vista_predeterminada:e?.vista_predeterminada||"mensual",hora_inicio_jornada:e?.hora_inicio_jornada||"08:00",hora_fin_jornada:e?.hora_fin_jornada||"18:00",dias_laborables:e?.dias_laborables||["lunes","martes","miercoles","jueves","viernes"],alertas_activas:e?.alertas_activas||!0,tiempo_anticipacion_alertas:e?.tiempo_anticipacion_alertas||24,mostrar_eventos_reproductivos:e?.mostrar_eventos_reproductivos||!0,mostrar_eventos_salud:e?.mostrar_eventos_salud||!0,mostrar_eventos_nutricion:e?.mostrar_eventos_nutricion||!0,mostrar_eventos_manejo:e?.mostrar_eventos_manejo||!0,color_eventos_reproductivos:e?.color_eventos_reproductivos||"#ec4899",color_eventos_salud:e?.color_eventos_salud||"#ef4444",color_eventos_nutricion:e?.color_eventos_nutricion||"#22c55e",color_eventos_manejo:e?.color_eventos_manejo||"#3b82f6",notificaciones_email:e?.notificaciones_email||!1,notificaciones_push:e?.notificaciones_push||!0,formato_fecha:e?.formato_fecha||"DD/MM/YYYY",formato_hora:e?.formato_hora||"24h"}),s=[{value:"lunes",label:"Lunes"},{value:"martes",label:"Martes"},{value:"miercoles",label:"Miércoles"},{value:"jueves",label:"Jueves"},{value:"viernes",label:"Viernes"},{value:"sabado",label:"Sábado"},{value:"domingo",label:"Domingo"}],l=(d,f)=>{n(m=>({...m,dias_laborables:f?[...m.dias_laborables,d]:m.dias_laborables.filter(x=>x!==d)}))},c=async()=>{try{t("Configuración guardada exitosamente","success")}catch{t("Error al guardar configuración","error")}};return a.jsxs("div",{className:"p-6 space-y-8",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b",children:[a.jsx(zs,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Configuración del Calendario"}),a.jsx("p",{className:"text-gray-600",children:"Personaliza la visualización y comportamiento del calendario"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(We,{className:"h-5 w-5"}),"Vista y Horarios"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vista predeterminada"}),a.jsxs("select",{value:r.vista_predeterminada,onChange:d=>n(f=>({...f,vista_predeterminada:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"mensual",children:"Vista Mensual"}),a.jsx("option",{value:"semanal",children:"Vista Semanal"}),a.jsx("option",{value:"diaria",children:"Vista Diaria"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora inicio jornada"}),a.jsx("input",{type:"time",value:r.hora_inicio_jornada,onChange:d=>n(f=>({...f,hora_inicio_jornada:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora fin jornada"}),a.jsx("input",{type:"time",value:r.hora_fin_jornada,onChange:d=>n(f=>({...f,hora_fin_jornada:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Días laborables"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(d=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:r.dias_laborables.includes(d.value),onChange:f=>l(d.value,f.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:d.label})]},d.value))})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(tn,{className:"h-5 w-5"}),"Formatos"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formato de fecha"}),a.jsxs("select",{value:r.formato_fecha,onChange:d=>n(f=>({...f,formato_fecha:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),a.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),a.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formato de hora"}),a.jsxs("select",{value:r.formato_hora,onChange:d=>n(f=>({...f,formato_hora:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"24h",children:"24 horas (14:30)"}),a.jsx("option",{value:"12h",children:"12 horas (2:30 PM)"})]})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(H3,{className:"h-5 w-5"}),"Alertas y Notificaciones"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Alertas activas"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Recibir alertas de eventos próximos"})]}),a.jsx("input",{type:"checkbox",checked:r.alertas_activas,onChange:d=>n(f=>({...f,alertas_activas:d.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),r.alertas_activas&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiempo de anticipación (horas)"}),a.jsx("input",{type:"number",min:"1",max:"168",value:r.tiempo_anticipacion_alertas,onChange:d=>n(f=>({...f,tiempo_anticipacion_alertas:parseInt(d.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notificaciones por email"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Enviar recordatorios por correo"})]}),a.jsx("input",{type:"checkbox",checked:r.notificaciones_email,onChange:d=>n(f=>({...f,notificaciones_email:d.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notificaciones push"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Mostrar notificaciones en el navegador"})]}),a.jsx("input",{type:"checkbox",checked:r.notificaciones_push,onChange:d=>n(f=>({...f,notificaciones_push:d.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tipos de Eventos"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:r.color_eventos_reproductivos}}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Eventos reproductivos"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:r.color_eventos_reproductivos,onChange:d=>n(f=>({...f,color_eventos_reproductivos:d.target.value})),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),a.jsx("input",{type:"checkbox",checked:r.mostrar_eventos_reproductivos,onChange:d=>n(f=>({...f,mostrar_eventos_reproductivos:d.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:r.color_eventos_salud}}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Eventos de salud"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:r.color_eventos_salud,onChange:d=>n(f=>({...f,color_eventos_salud:d.target.value})),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),a.jsx("input",{type:"checkbox",checked:r.mostrar_eventos_salud,onChange:d=>n(f=>({...f,mostrar_eventos_salud:d.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:r.color_eventos_nutricion}}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Eventos de nutrición"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:r.color_eventos_nutricion,onChange:d=>n(f=>({...f,color_eventos_nutricion:d.target.value})),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),a.jsx("input",{type:"checkbox",checked:r.mostrar_eventos_nutricion,onChange:d=>n(f=>({...f,mostrar_eventos_nutricion:d.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:r.color_eventos_manejo}}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Eventos de manejo"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:r.color_eventos_manejo,onChange:d=>n(f=>({...f,color_eventos_manejo:d.target.value})),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),a.jsx("input",{type:"checkbox",checked:r.mostrar_eventos_manejo,onChange:d=>n(f=>({...f,mostrar_eventos_manejo:d.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]})]})]})]})]}),a.jsx("div",{className:"flex justify-end pt-6 border-t",children:a.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Na,{className:"h-4 w-4"}),"Guardar Configuración"]})})]})},dz=({evento:e,onGuardar:t,onCancelar:r,onEliminar:n})=>{const[s,l]=_.useState({titulo:"",descripcion:"",fecha_evento:new Date().toISOString().split("T")[0],hora_evento:"",tipo_evento:"manejo",prioridad:"media",animal_id:"",lote_id:"",completado:!1,recordatorio_activo:!0,tiempo_recordatorio:24}),[c,d]=_.useState(!1),[f,m]=_.useState(!1),x=[{value:"reproduccion",label:"Reproducción",color:"bg-pink-500"},{value:"salud",label:"Salud",color:"bg-red-500"},{value:"nutricion",label:"Nutrición",color:"bg-green-500"},{value:"manejo",label:"Manejo",color:"bg-blue-500"},{value:"vacunacion",label:"Vacunación",color:"bg-purple-500"},{value:"revision",label:"Revisión",color:"bg-yellow-500"},{value:"otro",label:"Otro",color:"bg-gray-500"}],h=[{value:"baja",label:"Baja",color:"text-green-600"},{value:"media",label:"Media",color:"text-yellow-600"},{value:"alta",label:"Alta",color:"text-red-600"}];_.useEffect(()=>{e&&l({titulo:e.titulo,descripcion:e.descripcion||"",fecha_evento:e.fecha_evento.split("T")[0],hora_evento:e.hora_evento||"",tipo_evento:e.tipo_evento,prioridad:e.prioridad,animal_id:e.animal_id||"",lote_id:e.lote_id||"",completado:e.completado,recordatorio_activo:e.recordatorio_activo,tiempo_recordatorio:e.tiempo_recordatorio||24})},[e]);const v=async b=>{b.preventDefault(),d(!0);try{await t(s)}catch(j){console.error("Error al guardar evento:",j)}finally{d(!1)}},g=async()=>{if(n){d(!0);try{await n(),r()}catch(b){console.error("Error al eliminar evento:",b)}finally{d(!1)}}},y=b=>x.find(w=>w.value===b)?.color||"bg-gray-500";return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(We,{className:"h-6 w-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e?"Editar Evento":"Nuevo Evento"})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Qe,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Título del evento *"}),a.jsx("input",{type:"text",required:!0,value:s.titulo,onChange:b=>l(j=>({...j,titulo:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Inseminación artificial - Vaca 123"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),a.jsx("textarea",{value:s.descripcion,onChange:b=>l(j=>({...j,descripcion:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Detalles adicionales del evento..."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha *"}),a.jsx("input",{type:"date",required:!0,value:s.fecha_evento,onChange:b=>l(j=>({...j,fecha_evento:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora (opcional)"}),a.jsx("input",{type:"time",value:s.hora_evento,onChange:b=>l(j=>({...j,hora_evento:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de evento"}),a.jsx("select",{value:s.tipo_evento,onChange:b=>l(j=>({...j,tipo_evento:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:x.map(b=>a.jsx("option",{value:b.value,children:b.label},b.value))}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx("div",{className:`w-3 h-3 rounded ${y(s.tipo_evento)}`}),a.jsx("span",{className:"text-xs text-gray-500",children:"Color del evento en el calendario"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),a.jsx("select",{value:s.prioridad,onChange:b=>l(j=>({...j,prioridad:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:h.map(b=>a.jsx("option",{value:b.value,children:b.label},b.value))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Animal (opcional)"}),a.jsx("input",{type:"text",value:s.animal_id,onChange:b=>l(j=>({...j,animal_id:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ID o caravana del animal"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lote (opcional)"}),a.jsx("input",{type:"text",value:s.lote_id,onChange:b=>l(j=>({...j,lote_id:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ID del lote"})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hr,{className:"h-5 w-5 text-yellow-500"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Recordatorio"})]}),a.jsx("input",{type:"checkbox",checked:s.recordatorio_activo,onChange:b=>l(j=>({...j,recordatorio_activo:b.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),s.recordatorio_activo&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recordar con anticipación (horas)"}),a.jsx("input",{type:"number",min:"1",max:"168",value:s.tiempo_recordatorio,onChange:b=>l(j=>({...j,tiempo_recordatorio:parseInt(b.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"completado",checked:s.completado,onChange:b=>l(j=>({...j,completado:b.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"completado",className:"text-sm text-gray-700",children:"Marcar como completado"})]}),a.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[a.jsx("div",{children:e&&n&&a.jsxs("button",{type:"button",onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors",children:[a.jsx(lr,{className:"h-4 w-4"}),"Eliminar"]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[a.jsx(Na,{className:"h-4 w-4"}),c?"Guardando...":"Guardar"]})]})]})]})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-60",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(hr,{className:"h-6 w-6 text-red-500"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirmar eliminación"})]}),a.jsx("p",{className:"text-gray-600 mb-6",children:"¿Estás seguro de que deseas eliminar este evento? Esta acción no se puede deshacer."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:g,disabled:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:c?"Eliminando...":"Eliminar"})]})]})})]})},uz=({onClose:e,onAplicarFiltros:t,filtrosActivos:r={}})=>{const[n,s]=_.useState({fechaInicio:"",fechaFin:"",tipoEvento:[],prioridad:[],completado:null,animalId:"",loteId:"",busqueda:"",...r}),[l,c]=_.useState([]),[d,f]=_.useState([]),m=[{value:"celo",label:"Celo",color:"bg-pink-100 text-pink-800"},{value:"parto",label:"Parto",color:"bg-blue-100 text-blue-800"},{value:"servicio",label:"Servicio",color:"bg-purple-100 text-purple-800"},{value:"vacuna",label:"Vacuna",color:"bg-green-100 text-green-800"},{value:"tratamiento",label:"Tratamiento",color:"bg-red-100 text-red-800"},{value:"tarea",label:"Tarea",color:"bg-yellow-100 text-yellow-800"}],x=[{value:"alta",label:"Alta",color:"bg-red-100 text-red-800"},{value:"media",label:"Media",color:"bg-yellow-100 text-yellow-800"},{value:"baja",label:"Baja",color:"bg-green-100 text-green-800"}];_.useEffect(()=>{h()},[]);const h=async()=>{c([{id:"1",caravana:"A001",nombre:"Vaca 1"},{id:"2",caravana:"A002",nombre:"Vaca 2"},{id:"3",caravana:"T001",nombre:"Toro 1"}]),f([{id:"1",nombre:"Lote Principal"},{id:"2",nombre:"Lote Secundario"},{id:"3",nombre:"Lote de Engorde"}])},v=(w,A)=>{s(S=>({...S,[w]:A}))},g=w=>{const A=n.tipoEvento||[],S=A.includes(w)?A.filter(D=>D!==w):[...A,w];v("tipoEvento",S)},y=w=>{const A=n.prioridad||[],S=A.includes(w)?A.filter(D=>D!==w):[...A,w];v("prioridad",S)},b=()=>{t&&t(n),e()},j=()=>{const w={fechaInicio:"",fechaFin:"",tipoEvento:[],prioridad:[],completado:null,animalId:"",loteId:"",busqueda:""};s(w),t&&t(w)};return a.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{className:"h-5 w-5 text-blue-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros de Calendario"})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Qe,{className:"h-4 w-4 text-gray-500"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Búsqueda"}),a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",value:n.busqueda||"",onChange:w=>v("busqueda",w.target.value),placeholder:"Buscar en título o descripción...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha inicio"}),a.jsxs("div",{className:"relative",children:[a.jsx(We,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"date",value:n.fechaInicio||"",onChange:w=>v("fechaInicio",w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha fin"}),a.jsxs("div",{className:"relative",children:[a.jsx(We,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"date",value:n.fechaFin||"",onChange:w=>v("fechaFin",w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tipo de evento"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(w=>a.jsx("button",{onClick:()=>g(w.value),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${n.tipoEvento?.includes(w.value)?w.color:"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:w.label},w.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Prioridad"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(w=>a.jsxs("button",{onClick:()=>y(w.value),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${n.prioridad?.includes(w.value)?w.color:"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(hr,{className:"inline h-3 w-3 mr-1"}),w.label]},w.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Estado"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>v("completado",null),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n.completado===null?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Todos"}),a.jsx("button",{onClick:()=>v("completado",!1),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n.completado===!1?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Pendientes"}),a.jsx("button",{onClick:()=>v("completado",!0),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n.completado===!0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Completados"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Animal"}),a.jsxs("div",{className:"relative",children:[a.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsxs("select",{value:n.animalId||"",onChange:w=>v("animalId",w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos los animales"}),l.map(w=>a.jsxs("option",{value:w.id,children:[w.caravana," ",w.nombre&&`- ${w.nombre}`]},w.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lote"}),a.jsxs("div",{className:"relative",children:[a.jsx(ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsxs("select",{value:n.loteId||"",onChange:w=>v("loteId",w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos los lotes"}),d.map(w=>a.jsx("option",{value:w.id,children:w.nombre},w.id))]})]})]})]}),a.jsxs("div",{className:"flex justify-between pt-6 mt-6 border-t border-gray-200",children:[a.jsx("button",{onClick:j,className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Limpiar filtros"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Aplicar filtros"})]})]})]})},fz=()=>{const[e,t]=_.useState("calendario"),[r,n]=_.useState(!1),[s,l]=_.useState(!1),[c,d]=_.useState(null),{fechaActual:f,eventos:m,configuracion:x,loading:h,navegarMes:v,navegarHoy:g,crearEvento:y,actualizarEvento:b,eliminarEvento:j}=sz(),{tareasDelDia:w,tareasPendientes:A,fechaSeleccionada:S,loading:D,seleccionarFecha:T,crearTarea:k,completarTarea:C,eliminarTarea:M}=iz(),I=()=>{d(null),n(!0)},R=O=>{d(O),n(!0)},L=async O=>{try{c?await b(c.id,O):await y(O),n(!1),d(null)}catch(z){console.error("Error al guardar evento:",z)}},P=()=>{console.log("Exportando calendario...")};return h?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(We,{className:"h-8 w-8 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Calendario"}),a.jsx("p",{className:"text-gray-600",children:"Gestión de eventos y trabajo diario"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>l(!s),className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[a.jsx(Jr,{className:"h-4 w-4"}),"Filtros"]}),a.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[a.jsx(ma,{className:"h-4 w-4"}),"Exportar"]}),a.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),"Nuevo Evento"]})]})]}),s&&a.jsx(uz,{onClose:()=>l(!1)}),a.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-lg w-fit",children:[a.jsx("button",{onClick:()=>t("calendario"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="calendario"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Calendario"}),a.jsx("button",{onClick:()=>t("trabajo"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="trabajo"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Trabajo Diario"}),a.jsxs("button",{onClick:()=>t("configuracion"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="configuracion"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(zs,{className:"h-4 w-4 inline mr-1"}),"Configuración"]})]}),e==="calendario"&&a.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>v(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(z8,{className:"h-5 w-5"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:f.toLocaleDateString("es-ES",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>v(1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(W3,{className:"h-5 w-5"})})]}),a.jsx("button",{onClick:g,className:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Hoy"})]}),a.jsxs("div",{className:"bg-white rounded-lg border",children:[e==="calendario"&&a.jsx(lz,{fecha:f,eventos:m,configuracion:x,onEventoClick:R,onFechaClick:T}),e==="trabajo"&&a.jsx(oz,{tareasDelDia:w,tareasPendientes:A,fechaSeleccionada:S,loading:D,onCrearTarea:k,onCompletarTarea:C,onEliminarTarea:M,onSeleccionarFecha:T}),e==="configuracion"&&a.jsx(cz,{configuracion:x})]}),r&&a.jsx(dz,{evento:c,onGuardar:L,onCancelar:()=>{n(!1),d(null)},onEliminar:c?()=>j(c.id):void 0})]})},mz=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[s,l]=_.useState([]),[c,d]=_.useState([]),[f,m]=_.useState([]),[x,h]=_.useState(!0),[v,g]=_.useState(null),[y,b]=_.useState(""),[j,w]=_.useState(null),{showNotification:A}=ms(),S=async()=>{try{h(!0);const{data:ne,error:Z}=await se.from("animales").select(`
          *,
          lote:lotes(id, nombre),
          etiquetas:etiquetas_animales(*)
        `).eq("activo",!0).order("caravana",{ascending:!0});if(Z)throw Z;t(ne||[]),n(ne||[])}catch(ne){console.error("Error al cargar animales:",ne),g("Error al cargar animales")}finally{h(!1)}},D=async()=>{try{const{data:{user:ne}}=await se.auth.getUser();if(!ne)return;const{data:Z,error:F}=await se.from("filtros_personalizados").select("*").or(`usuario_id.eq.${ne.id},publico.eq.true`).order("favorito",{ascending:!1}).order("nombre",{ascending:!0});if(F)throw F;d(Z||[])}catch(ne){console.error("Error al cargar filtros personalizados:",ne)}},T=async()=>{try{const{data:{user:ne}}=await se.auth.getUser();if(!ne)return;const{data:Z,error:F}=await se.from("listas_personalizadas").select("*").or(`usuario_id.eq.${ne.id},publico.eq.true`).order("nombre",{ascending:!0});if(F)throw F;m(Z||[])}catch(ne){console.error("Error al cargar listas personalizadas:",ne)}},k=ne=>{if(b(ne),!ne.trim()){n(e);return}const Z=ne.toLowerCase(),F=e.filter(U=>U.caravana.toLowerCase().includes(Z)||U.nombre?.toLowerCase().includes(Z)||U.categoria.toLowerCase().includes(Z)||U.raza?.toLowerCase().includes(Z)||U.lote?.nombre.toLowerCase().includes(Z)||U.etiquetas?.some(Y=>Y.etiqueta.toLowerCase().includes(Z)));n(F)},C=ne=>{w(ne);let Z=[...e];const F=ne.criterios;F.categoria&&F.categoria.length>0&&(Z=Z.filter(U=>F.categoria.includes(U.categoria))),F.sexo&&F.sexo.length>0&&(Z=Z.filter(U=>F.sexo.includes(U.sexo))),F.raza&&F.raza.length>0&&(Z=Z.filter(U=>U.raza&&F.raza.includes(U.raza))),F.estado_reproductivo&&F.estado_reproductivo.length>0&&(Z=Z.filter(U=>U.estado_reproductivo&&F.estado_reproductivo.includes(U.estado_reproductivo))),F.lote_id&&F.lote_id.length>0&&(Z=Z.filter(U=>U.lote_id&&F.lote_id.includes(U.lote_id))),F.etiquetas&&F.etiquetas.length>0&&(Z=Z.filter(U=>U.etiquetas?.some(Y=>F.etiquetas.includes(Y.etiqueta)))),(F.edad_min!==void 0||F.edad_max!==void 0)&&(Z=Z.filter(U=>{if(!U.fecha_nacimiento)return!1;const Y=new Date,Q=new Date(U.fecha_nacimiento),ee=(Y.getTime()-Q.getTime())/(1e3*60*60*24*30.44);return!(F.edad_min!==void 0&&ee<F.edad_min||F.edad_max!==void 0&&ee>F.edad_max)})),(F.peso_min!==void 0||F.peso_max!==void 0)&&(Z=Z.filter(U=>!(!U.peso_actual||F.peso_min!==void 0&&U.peso_actual<F.peso_min||F.peso_max!==void 0&&U.peso_actual>F.peso_max))),(F.fecha_nacimiento_desde||F.fecha_nacimiento_hasta)&&(Z=Z.filter(U=>{if(!U.fecha_nacimiento)return!1;const Y=new Date(U.fecha_nacimiento);if(F.fecha_nacimiento_desde){const Q=new Date(F.fecha_nacimiento_desde);if(Y<Q)return!1}if(F.fecha_nacimiento_hasta){const Q=new Date(F.fecha_nacimiento_hasta);if(Y>Q)return!1}return!0})),n(Z)},M=()=>{w(null),b(""),n(e)},I=async ne=>{try{const{data:{user:Z}}=await se.auth.getUser();if(!Z)throw new Error("Usuario no autenticado");const F={...ne,usuario_id:Z.id},{data:U,error:Y}=await se.from("filtros_personalizados").insert(F).select().single();if(Y)throw Y;return d(Q=>[...Q,U]),A("Filtro guardado exitosamente","success"),U}catch(Z){throw console.error("Error al crear filtro:",Z),A("Error al guardar filtro","error"),Z}},R=async(ne,Z)=>{try{const{data:F,error:U}=await se.from("filtros_personalizados").update(Z).eq("id",ne).select().single();if(U)throw U;return d(Y=>Y.map(Q=>Q.id===ne?F:Q)),A("Filtro actualizado exitosamente","success"),F}catch(F){throw console.error("Error al actualizar filtro:",F),A("Error al actualizar filtro","error"),F}},L=async ne=>{try{const{error:Z}=await se.from("filtros_personalizados").delete().eq("id",ne);if(Z)throw Z;d(F=>F.filter(U=>U.id!==ne)),A("Filtro eliminado exitosamente","success")}catch(Z){throw console.error("Error al eliminar filtro:",Z),A("Error al eliminar filtro","error"),Z}},P=async ne=>{try{const{data:{user:Z}}=await se.auth.getUser();if(!Z)throw new Error("Usuario no autenticado");const F={...ne,usuario_id:Z.id},{data:U,error:Y}=await se.from("listas_personalizadas").insert(F).select().single();if(Y)throw Y;return m(Q=>[...Q,U]),A("Lista creada exitosamente","success"),U}catch(Z){throw console.error("Error al crear lista:",Z),A("Error al crear lista","error"),Z}},O=async(ne,Z)=>{try{const{data:F,error:U}=await se.from("listas_personalizadas").update(Z).eq("id",ne).select().single();if(U)throw U;return m(Y=>Y.map(Q=>Q.id===ne?F:Q)),A("Lista actualizada exitosamente","success"),F}catch(F){throw console.error("Error al actualizar lista:",F),A("Error al actualizar lista","error"),F}},z=ne=>{l(Z=>Z.includes(ne)?Z.filter(F=>F!==ne):[...Z,ne])},V=()=>{const ne=r.map(Z=>Z.id);l(ne)},G=()=>{l([])},K=()=>e.filter(ne=>s.includes(ne.id)),ce=async(ne,Z)=>{if(s.length===0){A("No hay animales seleccionados","warning");return}return await P({nombre:ne,descripcion:Z,animales_ids:s,es_dinamica:!1,publico:!1})},le=ne=>{if(ne.es_dinamica&&ne.criterios_automaticos)A("Listas dinámicas en desarrollo","info");else{const Z=e.filter(F=>ne.animales_ids.includes(F.id));n(Z)}};return _.useEffect(()=>{S(),D(),T()},[]),_.useEffect(()=>{y&&k(y)},[e,y]),{animales:e,animalesFiltrados:r,animalesSeleccionados:s,filtrosPersonalizados:c,listasPersonalizadas:f,loading:x,error:v,terminoBusqueda:y,filtroActivo:j,buscarAnimales:k,aplicarFiltro:C,limpiarFiltros:M,setTerminoBusqueda:b,crearFiltroPersonalizado:I,actualizarFiltroPersonalizado:R,eliminarFiltroPersonalizado:L,crearListaPersonalizada:P,actualizarListaPersonalizada:O,cargarAnimalesDeLista:le,toggleSeleccionAnimal:z,seleccionarTodos:V,limpiarSeleccion:G,obtenerAnimalesSeleccionados:K,crearListaDesdeSeleccion:ce,cargarAnimales:S,cargarFiltrosPersonalizados:D,cargarListasPersonalizadas:T}},xz=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[s,l]=_.useState(!0),[c,d]=_.useState(null),{showNotification:f}=ms(),m=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899","#64748b","#78716c"],x=async()=>{try{l(!0);const{data:T,error:k}=await se.from("etiquetas_animales").select("*").order("etiqueta",{ascending:!0});if(k)throw k;t(T||[])}catch(T){console.error("Error al cargar etiquetas:",T),d("Error al cargar etiquetas")}finally{l(!1)}},h=async()=>{try{const{data:T,error:k}=await se.from("etiquetas_animales").select("etiqueta, color, descripcion").order("etiqueta",{ascending:!0});if(k)throw k;const C=new Map;T?.forEach(I=>{const R=`${I.etiqueta}-${I.color}`;C.has(R)?C.get(R).count++:C.set(R,{etiqueta:I.etiqueta,color:I.color,descripcion:I.descripcion,count:1})});const M=Array.from(C.values()).sort((I,R)=>R.count-I.count);n(M)}catch(T){console.error("Error al cargar etiquetas disponibles:",T)}},v=T=>e.filter(k=>k.animal_id===T),g=async(T,k,C,M)=>{try{const{data:{user:I}}=await se.auth.getUser();if(!I)throw new Error("Usuario no autenticado");if(e.find(V=>V.animal_id===T&&V.etiqueta===k)){f("Esta etiqueta ya existe para el animal","warning");return}const L=C||m[Math.floor(Math.random()*m.length)],P={animal_id:T,etiqueta:k.trim(),color:L,descripcion:M?.trim(),usuario_id:I.id},{data:O,error:z}=await se.from("etiquetas_animales").insert(P).select().single();if(z)throw z;return t(V=>[...V,O]),await h(),f("Etiqueta agregada exitosamente","success"),O}catch(I){throw console.error("Error al agregar etiqueta:",I),f("Error al agregar etiqueta","error"),I}},y=async T=>{try{const{error:k}=await se.from("etiquetas_animales").delete().eq("id",T);if(k)throw k;t(C=>C.filter(M=>M.id!==T)),await h(),f("Etiqueta eliminada exitosamente","success")}catch(k){throw console.error("Error al eliminar etiqueta:",k),f("Error al eliminar etiqueta","error"),k}},b=async(T,k)=>{try{const{data:C,error:M}=await se.from("etiquetas_animales").update(k).eq("id",T).select().single();if(M)throw M;return t(I=>I.map(R=>R.id===T?C:R)),await h(),f("Etiqueta actualizada exitosamente","success"),C}catch(C){throw console.error("Error al actualizar etiqueta:",C),f("Error al actualizar etiqueta","error"),C}},j=async(T,k)=>{try{const{data:{user:C}}=await se.auth.getUser();if(!C)throw new Error("Usuario no autenticado");const M=v(T),I=k.filter(O=>!M.some(z=>z.etiqueta===O.etiqueta));if(I.length===0){f("Todas las etiquetas ya existen para este animal","warning");return}const R=I.map((O,z)=>({animal_id:T,etiqueta:O.etiqueta.trim(),color:O.color||m[z%m.length],descripcion:O.descripcion?.trim(),usuario_id:C.id})),{data:L,error:P}=await se.from("etiquetas_animales").insert(R).select();if(P)throw P;return t(O=>[...O,...L||[]]),await h(),f(`${L?.length||0} etiquetas agregadas exitosamente`,"success"),L}catch(C){throw console.error("Error al agregar múltiples etiquetas:",C),f("Error al agregar etiquetas","error"),C}},w=async(T,k)=>{try{const C=v(T);if(C.length===0){f("El animal origen no tiene etiquetas","warning");return}const M=C.map(I=>({etiqueta:I.etiqueta,color:I.color,descripcion:I.descripcion}));await j(k,M)}catch(C){throw console.error("Error al copiar etiquetas:",C),f("Error al copiar etiquetas","error"),C}},A=async T=>{try{const{error:k}=await se.from("etiquetas_animales").delete().eq("animal_id",T);if(k)throw k;t(C=>C.filter(M=>M.animal_id!==T)),await h(),f("Todas las etiquetas eliminadas exitosamente","success")}catch(k){throw console.error("Error al eliminar todas las etiquetas:",k),f("Error al eliminar etiquetas","error"),k}},S=T=>e.filter(k=>k.etiqueta.toLowerCase().includes(T.toLowerCase())).map(k=>k.animal_id),D=()=>{const T=e.length,k=new Set(e.map(I=>I.etiqueta)).size,C=new Set(e.map(I=>I.animal_id)).size,M=C>0?(T/C).toFixed(1):"0";return{totalEtiquetas:T,etiquetasUnicas:k,animalesConEtiquetas:C,promedioEtiquetasPorAnimal:M}};return _.useEffect(()=>{x(),h()},[]),{etiquetas:e,etiquetasDisponibles:r,loading:s,error:c,coloresPredefinidos:m,agregarEtiqueta:g,eliminarEtiqueta:y,actualizarEtiqueta:b,obtenerEtiquetasAnimal:v,agregarMultiplesEtiquetas:j,copiarEtiquetas:w,eliminarTodasEtiquetasAnimal:A,buscarAnimalesPorEtiqueta:S,obtenerEstadisticasEtiquetas:D,cargarEtiquetas:x,cargarEtiquetasDisponibles:h}},hz=({onBuscar:e,terminoActual:t})=>{const[r,n]=_.useState(t),[s,l]=_.useState([]),[c,d]=_.useState(!1),[f,m]=_.useState([]),x=[{key:"caravana",label:"Caravana",ejemplo:"A001, B123"},{key:"raza",label:"Raza",ejemplo:"Holstein, Angus"},{key:"sexo",label:"Sexo",ejemplo:"Macho, Hembra"},{key:"edad",label:"Edad",ejemplo:"2-5 años"},{key:"peso",label:"Peso",ejemplo:"400-600 kg"},{key:"lote",label:"Lote",ejemplo:"Lote A, Potrero 1"},{key:"estado",label:"Estado",ejemplo:"Activo, Vendido"},{key:"fecha_nacimiento",label:"Fecha Nacimiento",ejemplo:"2020-2022"}];_.useEffect(()=>{h(),v()},[]),_.useEffect(()=>{n(t)},[t]);const h=()=>{const D=localStorage.getItem("historial_busqueda_animales");if(D){const T=JSON.parse(D);l(T.map(k=>({...k,fecha:new Date(k.fecha)})))}},v=()=>{const D=localStorage.getItem("busquedas_frecuentes_animales");D&&m(JSON.parse(D))},g=(D,T=0)=>{const C=[{id:Date.now().toString(),termino:D,fecha:new Date,resultados:T},...s.slice(0,9)];l(C),localStorage.setItem("historial_busqueda_animales",JSON.stringify(C)),y(D)},y=D=>{const T=JSON.parse(localStorage.getItem("frecuencia_busquedas_animales")||"{}");T[D]=(T[D]||0)+1;const k=Object.entries(T).sort(([,C],[,M])=>M-C).slice(0,5).map(([C])=>C);m(k),localStorage.setItem("frecuencia_busquedas_animales",JSON.stringify(T)),localStorage.setItem("busquedas_frecuentes_animales",JSON.stringify(k))},b=()=>{r.trim()&&(e(r.trim()),g(r.trim()),d(!1))},j=D=>{D.key==="Enter"&&b()},w=D=>{n(D),e(D),d(!1)},A=()=>{l([]),localStorage.removeItem("historial_busqueda_animales")},S=D=>{const T=s.filter(k=>k.id!==D);l(T),localStorage.setItem("historial_busqueda_animales",JSON.stringify(T))};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ft,{className:"h-5 w-5 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Buscador Global"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por caravana, raza, lote...",value:r,onChange:D=>n(D.target.value),onKeyPress:j,onFocus:()=>d(!0),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r&&a.jsx("button",{onClick:()=>{n(""),e("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Qe,{className:"h-4 w-4"})})]}),a.jsx("button",{onClick:b,className:"mt-2 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Buscar"}),c&&(s.length>0||f.length>0)&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-80 overflow-y-auto",children:[f.length>0&&a.jsxs("div",{className:"p-3 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(U8,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Búsquedas frecuentes"})]}),a.jsx("div",{className:"space-y-1",children:f.map((D,T)=>a.jsx("button",{onClick:()=>w(D),className:"block w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-50 rounded",children:D},T))})]}),s.length>0&&a.jsxs("div",{className:"p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tn,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Búsquedas recientes"})]}),a.jsx("button",{onClick:A,className:"text-xs text-gray-500 hover:text-gray-700",children:"Limpiar"})]}),a.jsx("div",{className:"space-y-1",children:s.map(D=>a.jsxs("div",{className:"flex items-center justify-between group hover:bg-gray-50 rounded px-2 py-1",children:[a.jsxs("button",{onClick:()=>w(D.termino),className:"flex-1 text-left text-sm text-gray-600",children:[a.jsx("div",{children:D.termino}),a.jsxs("div",{className:"text-xs text-gray-400",children:[D.fecha.toLocaleDateString()," - ",D.resultados," resultados"]})]}),a.jsx("button",{onClick:()=>S(D.id),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-gray-600",children:a.jsx(Qe,{className:"h-3 w-3"})})]},D.id))})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Criterios de búsqueda"}),a.jsx("div",{className:"space-y-2",children:x.map(D=>a.jsxs("div",{className:"text-xs",children:[a.jsxs("span",{className:"font-medium text-gray-600",children:[D.label,":"]}),a.jsx("span",{className:"text-gray-500 ml-1",children:D.ejemplo})]},D.key))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Búsquedas rápidas"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Vacas preñadas","Toros activos","Terneros destete","Animales vendidos","Próximos partos","Vacunación pendiente"].map(D=>a.jsx("button",{onClick:()=>{n(D),e(D)},className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors",children:D},D))})]}),a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"💡 Consejos de búsqueda"}),a.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[a.jsx("li",{children:'• Usa comillas para búsquedas exactas: "Holstein Friesian"'}),a.jsx("li",{children:'• Combina criterios: "Lote A" + "Hembra"'}),a.jsx("li",{children:"• Usa rangos para números: peso:400-600"}),a.jsx("li",{children:"• Busca por fechas: nacimiento:2022"})]})]})]})},pz=({onCrearFiltro:e,onEditarFiltro:t,onAplicarFiltros:r})=>{const[n,s]=_.useState([]),[l,c]=_.useState([]),[d,f]=_.useState(!1),m=[{id:"vacas-produccion",nombre:"Vacas en Producción",descripcion:"Vacas hembras en edad productiva",criterios:{sexo:"Hembra",edad_min:24,estado:"Activo",categoria:"Vaca"},activo:!1,predefinido:!0},{id:"toros-reproductores",nombre:"Toros Reproductores",descripcion:"Toros machos aptos para reproducción",criterios:{sexo:"Macho",edad_min:18,estado:"Activo",categoria:"Toro"},activo:!1,predefinido:!0},{id:"terneros-destete",nombre:"Terneros para Destete",descripcion:"Terneros próximos al destete",criterios:{edad_min:6,edad_max:10,categoria:"Ternero"},activo:!1,predefinido:!0},{id:"animales-vendidos",nombre:"Animales Vendidos",descripcion:"Animales con estado vendido",criterios:{estado:"Vendido"},activo:!1,predefinido:!0}];_.useEffect(()=>{x()},[]);const x=async()=>{f(!0);try{const b=localStorage.getItem("filtros_personalizados"),j=b?JSON.parse(b):[];s([...m,...j])}catch(b){console.error("Error al cargar filtros:",b)}finally{f(!1)}},h=b=>{const j=l.includes(b)?l.filter(A=>A!==b):[...l,b];c(j);const w=n.filter(A=>j.includes(A.id));r(w)},v=async b=>{if(window.confirm("¿Estás seguro de que deseas eliminar este filtro?"))try{const j=n.filter(w=>w.id!==b&&!w.predefinido);localStorage.setItem("filtros_personalizados",JSON.stringify(j)),s(n.filter(w=>w.id!==b)),c(l.filter(w=>w!==b))}catch(j){console.error("Error al eliminar filtro:",j)}},g=()=>{c([]),r([])},y=b=>{const j=[];if(b.sexo&&j.push(`Sexo: ${b.sexo}`),b.raza&&j.push(`Raza: ${b.raza}`),b.edad_min||b.edad_max){const w=[];b.edad_min&&w.push(`≥${b.edad_min}m`),b.edad_max&&w.push(`≤${b.edad_max}m`),j.push(`Edad: ${w.join(" y ")}`)}if(b.peso_min||b.peso_max){const w=[];b.peso_min&&w.push(`≥${b.peso_min}kg`),b.peso_max&&w.push(`≤${b.peso_max}kg`),j.push(`Peso: ${w.join(" y ")}`)}return b.estado&&j.push(`Estado: ${b.estado}`),b.lote&&j.push(`Lote: ${b.lote}`),b.categoria&&j.push(`Categoría: ${b.categoria}`),j.join(", ")};return d?a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"animate-pulse space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})}):a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{className:"h-5 w-5 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Filtros Personalizados"})]}),a.jsxs("button",{onClick:e,className:"flex items-center gap-1 px-2 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[a.jsx(gt,{className:"h-3 w-3"}),"Nuevo"]})]}),l.length>0&&a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[l.length," filtro(s) activo(s)"]}),a.jsx("button",{onClick:g,className:"text-xs text-blue-600 hover:text-blue-700",children:"Limpiar todos"})]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:l.map(b=>{const j=n.find(w=>w.id===b);return j?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[j.nombre,a.jsx("button",{onClick:()=>h(b),className:"hover:bg-blue-200 rounded-full p-0.5",children:a.jsx(Qe,{className:"h-3 w-3"})})]},b):null})})]}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.map(b=>a.jsx("div",{className:`border rounded-lg p-3 transition-colors ${l.includes(b.id)?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:l.includes(b.id),onChange:()=>h(b.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("h4",{className:"font-medium text-gray-900",children:b.nombre}),b.predefinido&&a.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:"Predefinido"})]}),b.descripcion&&a.jsx("p",{className:"text-sm text-gray-600 mt-1 ml-6",children:b.descripcion}),a.jsx("div",{className:"text-xs text-gray-500 mt-1 ml-6",children:y(b.criterios)})]}),!b.predefinido&&a.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[a.jsx("button",{onClick:()=>t(b),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar filtro",children:a.jsx(Dn,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>v(b.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Eliminar filtro",children:a.jsx(lr,{className:"h-3 w-3"})})]})]})},b.id))}),n.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Jr,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{className:"text-sm",children:"No hay filtros disponibles"}),a.jsx("button",{onClick:e,className:"mt-2 text-sm text-blue-600 hover:text-blue-700",children:"Crear tu primer filtro"})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"💡 Cómo usar los filtros"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[a.jsx("li",{children:"• Selecciona uno o más filtros para combinar criterios"}),a.jsx("li",{children:"• Los filtros predefinidos cubren casos comunes"}),a.jsx("li",{children:"• Crea filtros personalizados para tus necesidades específicas"}),a.jsx("li",{children:"• Los filtros activos se aplican automáticamente a la búsqueda"})]})]})]})},gz=({animales:e,animalesSeleccionados:t,loading:r,onSeleccionar:n,onDeseleccionar:s})=>{const[l,c]=_.useState(null),[d,f]=_.useState("caravana"),[m,x]=_.useState(!0),h=A=>{t.includes(A)?s(A):n(A)},v=A=>[...A].sort((S,D)=>{let T,k;switch(d){case"caravana":T=S.caravana,k=D.caravana;break;case"raza":T=S.raza,k=D.raza;break;case"edad":T=S.edad_meses,k=D.edad_meses;break;case"peso":T=S.peso_actual||0,k=D.peso_actual||0;break;default:return 0}return typeof T=="string"&&(T=T.toLowerCase(),k=k.toLowerCase()),T<k?m?-1:1:T>k?m?1:-1:0}),g=A=>{d===A?x(!m):(f(A),x(!0))},y=A=>{switch(A.toLowerCase()){case"activo":return"bg-green-100 text-green-800";case"vendido":return"bg-red-100 text-red-800";case"muerto":return"bg-gray-100 text-gray-800";case"transferido":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},b=A=>A.toLowerCase()==="macho"?"text-blue-600":"text-pink-600",j=A=>{const S=Math.floor(A/12),D=A%12;return S===0?`${A}m`:D===0?`${S}a`:`${S}a ${D}m`};if(r)return a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((A,S)=>a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},S))})});const w=v(e);return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Animales (",e.length,")"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Ordenar por:"}),a.jsxs("select",{value:d,onChange:A=>g(A.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"caravana",children:"Caravana"}),a.jsx("option",{value:"raza",children:"Raza"}),a.jsx("option",{value:"edad",children:"Edad"}),a.jsx("option",{value:"peso",children:"Peso"})]}),a.jsx("button",{onClick:()=>x(!m),className:"text-sm text-blue-600 hover:text-blue-700",children:m?"↑ Asc":"↓ Desc"})]})]})}),a.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:w.map(A=>a.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex items-center pt-1",children:a.jsx("input",{type:"checkbox",checked:t.includes(A.id),onChange:()=>h(A.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:A.caravana}),a.jsx("span",{className:`text-sm font-medium ${b(A.sexo)}`,children:A.sexo}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y(A.estado)}`,children:A.estado})]}),a.jsx("button",{onClick:()=>c(l===A.id?null:A.id),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Kt,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(xr,{className:"h-3 w-3"}),a.jsx("span",{children:A.raza})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(We,{className:"h-3 w-3"}),a.jsx("span",{children:j(A.edad_meses)})]}),A.peso_actual&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Wn,{className:"h-3 w-3"}),a.jsxs("span",{children:[A.peso_actual," kg"]})]}),A.lote_actual&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ua,{className:"h-3 w-3"}),a.jsx("span",{children:A.lote_actual})]})]}),A.etiquetas&&A.etiquetas.length>0&&a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx(Tn,{className:"h-3 w-3 text-gray-400"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:A.etiquetas.map((S,D)=>a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-800 text-xs rounded",children:S},D))})]}),l===A.id&&a.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Información General"}),a.jsxs("div",{className:"space-y-1 text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"ID:"})," ",A.id]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Fecha Nacimiento:"})," ",A.fecha_nacimiento]}),A.padre_id&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Padre:"})," ",A.padre_id]}),A.madre_id&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Madre:"})," ",A.madre_id]})]})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Estado Actual"}),a.jsxs("div",{className:"space-y-1 text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Categoría:"})," ",A.categoria]}),A.peso_nacimiento&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Peso Nacimiento:"})," ",A.peso_nacimiento," kg"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Creado:"})," ",new Date(A.created_at).toLocaleDateString()]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Actualizado:"})," ",new Date(A.updated_at).toLocaleDateString()]})]})]})]})})]})]})},A.id))}),e.length===0&&a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx(xr,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{className:"text-sm",children:"No se encontraron animales"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ajusta los filtros de búsqueda o criterios de selección"})]}),e.length>0&&a.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:["Mostrando ",e.length," animales"]}),a.jsxs("span",{children:[t.length," seleccionados"]})]})})]})},vz=({etiquetas:e,etiquetasDisponibles:t,onActualizar:r})=>{const[n,s]=_.useState(!1),[l,c]=_.useState(null),[d,f]=_.useState(""),[m,x]=_.useState({nombre:"",color:"#3B82F6",descripcion:""}),h=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6B7280"],v=t.filter(S=>S.nombre.toLowerCase().includes(d.toLowerCase())),g=async()=>{if(m.nombre.trim())try{const S={id:Date.now().toString(),nombre:m.nombre.trim(),color:m.color,descripcion:m.descripcion.trim()||void 0,uso_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},D=localStorage.getItem("etiquetas_disponibles"),T=D?JSON.parse(D):[];T.push(S),localStorage.setItem("etiquetas_disponibles",JSON.stringify(T)),x({nombre:"",color:"#3B82F6",descripcion:""}),s(!1),r()}catch(S){console.error("Error al crear etiqueta:",S)}},y=async()=>{if(!(!l||!m.nombre.trim()))try{const S=localStorage.getItem("etiquetas_disponibles"),D=S?JSON.parse(S):[],T=D.findIndex(k=>k.id===l.id);T!==-1&&(D[T]={...D[T],nombre:m.nombre.trim(),color:m.color,descripcion:m.descripcion.trim()||void 0,updated_at:new Date().toISOString()},localStorage.setItem("etiquetas_disponibles",JSON.stringify(D))),x({nombre:"",color:"#3B82F6",descripcion:""}),c(null),s(!1),r()}catch(S){console.error("Error al editar etiqueta:",S)}},b=async S=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta etiqueta?"))try{const D=localStorage.getItem("etiquetas_disponibles"),k=(D?JSON.parse(D):[]).filter(C=>C.id!==S);localStorage.setItem("etiquetas_disponibles",JSON.stringify(k)),r()}catch(D){console.error("Error al eliminar etiqueta:",D)}},j=S=>{c(S),x({nombre:S.nombre,color:S.color,descripcion:S.descripcion||""}),s(!0)},w=()=>{s(!1),c(null),x({nombre:"",color:"#3B82F6",descripcion:""})},A=S=>e.filter(D=>D.etiqueta_id===S).length;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Tn,{className:"h-5 w-5 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Gestor de Etiquetas"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-1 px-2 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[a.jsx(gt,{className:"h-3 w-3"}),"Nueva"]})]}),n&&a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:l?"Editar Etiqueta":"Nueva Etiqueta"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",value:m.nombre,onChange:S=>x(D=>({...D,nombre:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Preñada, Enfermo, Destete..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:m.color,onChange:S=>x(D=>({...D,color:S.target.value})),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:h.map(S=>a.jsx("button",{onClick:()=>x(D=>({...D,color:S})),className:`w-6 h-6 rounded border-2 ${m.color===S?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:S}},S))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción (opcional)"}),a.jsx("textarea",{value:m.descripcion,onChange:S=>x(D=>({...D,descripcion:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Descripción de la etiqueta..."})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:w,className:"px-3 py-1 text-sm text-gray-600 border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:l?y:g,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:l?"Actualizar":"Crear"})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar etiquetas...",value:d,onChange:S=>f(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:v.map(S=>a.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:S.color}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-gray-900",children:S.nombre}),a.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:[A(S.id)," usos"]})]}),S.descripcion&&a.jsx("p",{className:"text-sm text-gray-500 truncate",children:S.descripcion})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>j(S),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar etiqueta",children:a.jsx(Dn,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>b(S.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Eliminar etiqueta",children:a.jsx(Qe,{className:"h-3 w-3"})})]})]},S.id))}),v.length===0&&a.jsxs("div",{className:"text-center py-6 text-gray-500",children:[a.jsx(Tn,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),a.jsx("p",{className:"text-sm",children:d?"No se encontraron etiquetas":"No hay etiquetas disponibles"}),!d&&a.jsx("button",{onClick:()=>s(!0),className:"mt-2 text-sm text-blue-600 hover:text-blue-700",children:"Crear tu primera etiqueta"})]}),t.length>0&&a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"📊 Estadísticas"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-blue-700",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Total etiquetas:"})," ",t.length]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"En uso:"})," ",e.length]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"💡 Consejos para etiquetas"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[a.jsx("li",{children:"• Usa nombres descriptivos y concisos"}),a.jsx("li",{children:"• Asigna colores distintivos para fácil identificación"}),a.jsx("li",{children:"• Las etiquetas ayudan a filtrar y organizar animales"}),a.jsx("li",{children:"• Puedes aplicar múltiples etiquetas a un mismo animal"})]})]})]})},bz=({onSeleccionarLista:e})=>{const[t,r]=_.useState([]),[n,s]=_.useState(!1),[l,c]=_.useState(null);_.useEffect(()=>{d()},[]);const d=async()=>{s(!0);try{const g=localStorage.getItem("listas_personalizadas"),y=g?JSON.parse(g):[];if(y.length===0){const b=[{id:"1",nombre:"Vacas en Producción",descripcion:"Vacas hembras en edad productiva activa",animales_ids:["1","2","3","4","5"],usuario_id:"user1",publica:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",nombre:"Próximos Destetes",descripcion:"Terneros que están próximos al destete",animales_ids:["6","7","8"],usuario_id:"user1",publica:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",nombre:"Toros Reproductores",descripcion:"Toros machos aptos para reproducción",animales_ids:["9","10"],usuario_id:"user1",publica:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];localStorage.setItem("listas_personalizadas",JSON.stringify(b)),r(b)}else r(y)}catch(g){console.error("Error al cargar listas:",g)}finally{s(!1)}},f=async g=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta lista?"))try{const y=t.filter(b=>b.id!==g);r(y),localStorage.setItem("listas_personalizadas",JSON.stringify(y))}catch(y){console.error("Error al eliminar lista:",y)}},m=async g=>{try{const y={...g,id:Date.now().toString(),nombre:`${g.nombre} (Copia)`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},b=[...t,y];r(b),localStorage.setItem("listas_personalizadas",JSON.stringify(b))}catch(y){console.error("Error al duplicar lista:",y)}},x=async g=>{try{const y=t.map(b=>b.id===g?{...b,publica:!b.publica,updated_at:new Date().toISOString()}:b);r(y),localStorage.setItem("listas_personalizadas",JSON.stringify(y))}catch(y){console.error("Error al cambiar visibilidad:",y)}},h=g=>{const y=`Lista: ${g.nombre}
Descripción: ${g.descripcion||"Sin descripción"}
Animales: ${g.animales_ids.length}
Creada: ${new Date(g.created_at).toLocaleDateString()}

IDs de animales:
${g.animales_ids.join(`
`)}`,b=new Blob([y],{type:"text/plain;charset=utf-8"}),j=URL.createObjectURL(b),w=document.createElement("a");w.href=j,w.download=`lista_${g.nombre.replace(/\s+/g,"_").toLowerCase()}.txt`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(j)},v=async g=>{try{const y=g.animales_ids.map(b=>({id:b,caravana:`A${b.padStart(3,"0")}`,raza:"Holstein",sexo:Math.random()>.5?"Hembra":"Macho",fecha_nacimiento:"2020-01-01",edad_meses:36,peso_actual:450,estado:"Activo",categoria:"Vaca",lote_actual:"Lote A",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));e(y)}catch(y){console.error("Error al seleccionar lista:",y)}};return n?a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"animate-pulse space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})}):a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Bv,{className:"h-5 w-5 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Listas Personalizadas"})]}),a.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.map(g=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-gray-300 transition-colors",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-gray-900 truncate",children:g.nombre}),g.publica&&a.jsx("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-800 text-xs rounded",children:"Pública"})]}),g.descripcion&&a.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:g.descripcion}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(xr,{className:"h-3 w-3"}),a.jsxs("span",{children:[g.animales_ids.length," animales"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(We,{className:"h-3 w-3"}),a.jsx("span",{children:new Date(g.created_at).toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[a.jsx("button",{onClick:()=>c(l===g.id?null:g.id),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Ver detalles",children:a.jsx(Dn,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>x(g.id),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:g.publica?"Hacer privada":"Hacer pública",children:a.jsx($8,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>h(g),className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Exportar lista",children:a.jsx(ma,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>f(g.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Eliminar lista",children:a.jsx(lr,{className:"h-3 w-3"})})]})]}),l===g.id&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Creada:"}),a.jsx("p",{className:"text-gray-600",children:new Date(g.created_at).toLocaleString()})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Actualizada:"}),a.jsx("p",{className:"text-gray-600",children:new Date(g.updated_at).toLocaleString()})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Animales en la lista:"}),a.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[g.animales_ids.slice(0,10).map(y=>a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-800 text-xs rounded",children:y},y)),g.animales_ids.length>10&&a.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:["+",g.animales_ids.length-10," más"]})]})]})]}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsx("button",{onClick:()=>v(g),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Seleccionar Animales"}),a.jsx("button",{onClick:()=>m(g),className:"px-3 py-1 border border-gray-300 text-gray-700 text-sm rounded hover:bg-gray-50 transition-colors",children:"Duplicar"})]})]},g.id))}),t.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Bv,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{className:"text-sm",children:"No hay listas guardadas"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Selecciona animales y crea tu primera lista personalizada"})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"💡 Gestión de listas"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[a.jsx("li",{children:"• Las listas te permiten guardar selecciones de animales"}),a.jsx("li",{children:"• Puedes hacer listas públicas para compartir con el equipo"}),a.jsx("li",{children:"• Duplica listas para crear variaciones rápidamente"}),a.jsx("li",{children:"• Exporta listas para usar en otras aplicaciones"})]})]}),t.length>0&&a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"📊 Estadísticas"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-blue-700",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Total listas:"})," ",t.length]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Públicas:"})," ",t.filter(g=>g.publica).length]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Total animales:"})," ",t.reduce((g,y)=>g+y.animales_ids.length,0)]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Promedio por lista:"})," ",Math.round(t.reduce((g,y)=>g+y.animales_ids.length,0)/t.length)]})]})]})]})},yz=({isOpen:e,onClose:t,onGuardar:r,filtroEditar:n})=>{const[s,l]=_.useState(""),[c,d]=_.useState(""),[f,m]=_.useState([]),[x,h]=_.useState(!1),v=[{valor:"caravana",etiqueta:"Caravana",tipo:"texto"},{valor:"raza",etiqueta:"Raza",tipo:"lista"},{valor:"sexo",etiqueta:"Sexo",tipo:"lista"},{valor:"categoria",etiqueta:"Categoría",tipo:"lista"},{valor:"estado",etiqueta:"Estado",tipo:"lista"},{valor:"lote_actual",etiqueta:"Lote Actual",tipo:"texto"},{valor:"peso_actual",etiqueta:"Peso Actual",tipo:"numero"},{valor:"edad_meses",etiqueta:"Edad (meses)",tipo:"numero"},{valor:"fecha_nacimiento",etiqueta:"Fecha de Nacimiento",tipo:"fecha"},{valor:"created_at",etiqueta:"Fecha de Registro",tipo:"fecha"}],g={texto:[{valor:"contiene",etiqueta:"Contiene"},{valor:"igual",etiqueta:"Igual a"},{valor:"comienza",etiqueta:"Comienza con"},{valor:"termina",etiqueta:"Termina con"}],numero:[{valor:"igual",etiqueta:"Igual a"},{valor:"mayor",etiqueta:"Mayor que"},{valor:"menor",etiqueta:"Menor que"},{valor:"mayor_igual",etiqueta:"Mayor o igual"},{valor:"menor_igual",etiqueta:"Menor o igual"},{valor:"entre",etiqueta:"Entre"}],fecha:[{valor:"igual",etiqueta:"Igual a"},{valor:"despues",etiqueta:"Después de"},{valor:"antes",etiqueta:"Antes de"},{valor:"entre",etiqueta:"Entre"},{valor:"ultimos_dias",etiqueta:"Últimos X días"}],lista:[{valor:"igual",etiqueta:"Igual a"},{valor:"en",etiqueta:"En lista"},{valor:"no_en",etiqueta:"No en lista"}],booleano:[{valor:"es",etiqueta:"Es"}]},y={raza:["Holstein","Angus","Hereford","Brahman","Charolais","Simmental"],sexo:["Macho","Hembra"],categoria:["Ternero","Ternera","Novillo","Vaquillona","Toro","Vaca"],estado:["Activo","Vendido","Muerto","Transferido"],lote_actual:["Lote A","Lote B","Lote C","Potrero 1","Potrero 2"]};_.useEffect(()=>{if(e)if(n){l(n.nombre),d(n.descripcion||""),h(n.publico);try{const D=typeof n.criterios=="string"?JSON.parse(n.criterios):n.criterios;m(D||[])}catch(D){console.error("Error al parsear criterios:",D),m([])}}else l(""),d(""),m([]),h(!1)},[e,n]);const b=()=>{const D={campo:"caravana",operador:"contiene",valor:"",tipo:"texto"};m([...f,D])},j=(D,T,k)=>{const C=[...f];if(C[D]={...C[D],[T]:k},T==="campo"){const M=v.find(I=>I.valor===k);M&&(C[D].tipo=M.tipo,C[D].operador=g[M.tipo][0].valor,C[D].valor="")}m(C)},w=D=>{m(f.filter((T,k)=>k!==D))},A=()=>{if(!s.trim()){alert("El nombre del filtro es obligatorio");return}if(f.length===0){alert("Debe agregar al menos un criterio");return}if(f.some(k=>!k.valor.trim())){alert("Todos los criterios deben tener un valor");return}const T={nombre:s.trim(),descripcion:c.trim(),criterios:JSON.stringify(f),publico:x,usuario_id:"user1"};r(T),t()},S=(D,T)=>{const k=D.campo;switch(D.tipo){case"lista":if(y[k])return a.jsxs("select",{value:D.valor,onChange:C=>j(T,"valor",C.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Seleccionar..."}),y[k].map(C=>a.jsx("option",{value:C,children:C},C))]});break;case"numero":return a.jsx("input",{type:"number",value:D.valor,onChange:C=>j(T,"valor",C.target.value),placeholder:"Ingrese número",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"});case"fecha":return a.jsx("input",{type:"date",value:D.valor,onChange:C=>j(T,"valor",C.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"});case"booleano":return a.jsxs("select",{value:D.valor,onChange:C=>j(T,"valor",C.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Seleccionar..."}),a.jsx("option",{value:"true",children:"Sí"}),a.jsx("option",{value:"false",children:"No"})]});default:return a.jsx("input",{type:"text",value:D.valor,onChange:C=>j(T,"valor",C.target.value),placeholder:"Ingrese valor",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n?"Editar Filtro":"Crear Nuevo Filtro"}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Qe,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del filtro *"}),a.jsx("input",{type:"text",value:s,onChange:D=>l(D.target.value),placeholder:"Ej: Vacas en producción",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),a.jsx("textarea",{value:c,onChange:D=>d(D.target.value),placeholder:"Descripción opcional del filtro",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"publico",checked:x,onChange:D=>h(D.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"publico",className:"ml-2 text-sm text-gray-700",children:"Hacer público (visible para todo el equipo)"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Criterios de Filtrado"}),a.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),"Agregar Criterio"]})]}),f.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("p",{children:"No hay criterios definidos"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Agrega criterios para definir qué animales incluir en el filtro"})]}):a.jsx("div",{className:"space-y-3",children:f.map((D,T)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Campo"}),a.jsx("select",{value:D.campo,onChange:k=>j(T,"campo",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:v.map(k=>a.jsx("option",{value:k.valor,children:k.etiqueta},k.valor))})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Operador"}),a.jsx("select",{value:D.operador,onChange:k=>j(T,"operador",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:g[D.tipo].map(k=>a.jsx("option",{value:k.valor,children:k.etiqueta},k.valor))})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Valor"}),S(D,T)]}),a.jsx("button",{onClick:()=>w(T),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Eliminar criterio",children:a.jsx(lr,{className:"h-4 w-4"})})]},T))})]}),a.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"💡 Consejos para crear filtros"}),a.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[a.jsx("li",{children:"• Combina múltiples criterios para filtros más específicos"}),a.jsx("li",{children:"• Los filtros públicos pueden ser usados por todo el equipo"}),a.jsx("li",{children:"• Usa nombres descriptivos para identificar fácilmente tus filtros"}),a.jsx("li",{children:"• Los criterios se aplican con lógica AND (todos deben cumplirse)"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[a.jsx(Na,{className:"h-4 w-4"}),n?"Actualizar":"Guardar"," Filtro"]})]})]})}):null},jz=({isOpen:e,onClose:t,onGuardar:r,animalesSeleccionados:n})=>{const[s,l]=_.useState(""),[c,d]=_.useState(""),[f,m]=_.useState(!1),[x,h]=_.useState(!1);_.useEffect(()=>{e&&(l(""),d(""),m(!1),h(!1))},[e]);const v=()=>{if(!s.trim()){alert("El nombre de la lista es obligatorio");return}if(n.length===0){alert("No hay animales seleccionados para guardar en la lista");return}const w={nombre:s.trim(),descripcion:c.trim(),animales_ids:n.map(A=>A.id),publica:f};r(w),t()},g=()=>{const w=new Date().toLocaleDateString();return`Lista ${n.length} animales - ${w}`},y=()=>{l(g())},b=()=>{const w=n.reduce((D,T)=>(D[T.sexo]=(D[T.sexo]||0)+1,D),{}),A=n.reduce((D,T)=>(D[T.raza]=(D[T.raza]||0)+1,D),{}),S=n.reduce((D,T)=>(D[T.categoria]=(D[T.categoria]||0)+1,D),{});return{porSexo:w,porRaza:A,porCategoria:S}};if(!e)return null;const j=b();return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Crear Lista Personalizada"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[n.length," animales seleccionados"]})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Qe,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la lista *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:s,onChange:w=>l(w.target.value),placeholder:"Ej: Vacas para inseminación",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("button",{onClick:y,className:"px-3 py-2 text-sm text-blue-600 border border-blue-300 rounded-md hover:bg-blue-50 transition-colors",children:"Sugerir"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),a.jsx("textarea",{value:c,onChange:w=>d(w.target.value),placeholder:"Descripción opcional de la lista y su propósito",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"publica",checked:f,onChange:w=>m(w.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"publica",className:"ml-2 text-sm text-gray-700",children:"Lista pública (visible para todo el equipo)"})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(xr,{className:"h-4 w-4"}),"Resumen de Animales (",n.length,")"]}),a.jsxs("button",{onClick:()=>h(!x),className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[x?a.jsx(z0,{className:"h-4 w-4"}):a.jsx(Kt,{className:"h-4 w-4"}),x?"Ocultar":"Ver"," detalles"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-medium text-gray-600 mb-2",children:"Por Sexo"}),a.jsx("div",{className:"space-y-1",children:Object.entries(j.porSexo).map(([w,A])=>a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-700",children:[w,":"]}),a.jsx("span",{className:"font-medium",children:A})]},w))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-medium text-gray-600 mb-2",children:"Por Raza"}),a.jsxs("div",{className:"space-y-1",children:[Object.entries(j.porRaza).slice(0,3).map(([w,A])=>a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-700",children:[w,":"]}),a.jsx("span",{className:"font-medium",children:A})]},w)),Object.keys(j.porRaza).length>3&&a.jsxs("div",{className:"text-xs text-gray-500",children:["+",Object.keys(j.porRaza).length-3," más"]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-medium text-gray-600 mb-2",children:"Por Categoría"}),a.jsxs("div",{className:"space-y-1",children:[Object.entries(j.porCategoria).slice(0,3).map(([w,A])=>a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-700",children:[w,":"]}),a.jsx("span",{className:"font-medium",children:A})]},w)),Object.keys(j.porCategoria).length>3&&a.jsxs("div",{className:"text-xs text-gray-500",children:["+",Object.keys(j.porCategoria).length-3," más"]})]})]})]}),x&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Animales incluidos:"}),a.jsx("div",{className:"max-h-40 overflow-y-auto",children:a.jsx("div",{className:"grid grid-cols-1 gap-2",children:n.map(w=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"font-medium text-gray-900",children:w.caravana}),a.jsx("span",{className:"text-sm text-gray-600",children:w.raza}),a.jsx("span",{className:"text-sm text-gray-600",children:w.sexo})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600",children:w.categoria}),a.jsx("div",{className:"text-xs text-gray-500",children:w.lote_actual})]})]},w.id))})})]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"💡 Sobre las listas personalizadas"}),a.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[a.jsx("li",{children:"• Las listas te permiten guardar selecciones de animales para uso futuro"}),a.jsx("li",{children:"• Puedes hacer listas públicas para compartir con tu equipo"}),a.jsx("li",{children:"• Las listas se pueden exportar y usar en otras aplicaciones"}),a.jsx("li",{children:"• Usa nombres descriptivos para identificar fácilmente el propósito de cada lista"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:v,disabled:!s.trim()||n.length===0,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Na,{className:"h-4 w-4"}),"Guardar Lista"]})]})]})})},Nz=()=>{const{animalesFiltrados:e,animalesSeleccionados:t,filtrosActivos:r,loading:n,buscarAnimales:s,aplicarFiltros:l,seleccionarAnimal:c,deseleccionarAnimal:d,seleccionarTodos:f,deseleccionarTodos:m,crearListaDesdeSeleccion:x,exportarSeleccion:h}=mz(),{etiquetas:v,etiquetasDisponibles:g,cargarEtiquetas:y}=xz(),[b,j]=_.useState("busqueda"),[w,A]=_.useState(""),[S,D]=_.useState(!1),[T,k]=_.useState(!1),[C,M]=_.useState(null);_.useEffect(()=>{y()},[]),_.useEffect(()=>{w.trim()&&s(w)},[w]);const I=V=>{A(V)},R=()=>{M(null),D(!0)},L=V=>{M(V),D(!0)},P=()=>{if(t.length===0){alert("Selecciona al menos un animal para crear una lista");return}k(!0)},O=()=>{if(t.length===0){alert("Selecciona al menos un animal para exportar");return}h()},z=[{key:"busqueda",label:"Búsqueda",icon:ft},{key:"filtros",label:"Filtros",icon:Jr},{key:"etiquetas",label:"Etiquetas",icon:Tn},{key:"listas",label:"Listas",icon:Bv}];return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Selección Avanzada de Animales"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Busca, filtra y gestiona tus animales con herramientas avanzadas"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," seleccionados de ",e.length]}),a.jsxs("button",{onClick:P,disabled:t.length===0,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(gt,{className:"h-4 w-4"}),"Crear Lista"]}),a.jsxs("button",{onClick:O,disabled:t.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(ma,{className:"h-4 w-4"}),"Exportar"]})]})]}),a.jsx("div",{className:"flex border-b border-gray-200",children:z.map(({key:V,label:G,icon:K})=>a.jsxs("button",{onClick:()=>j(V),className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${b===V?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(K,{className:"h-4 w-4"}),G]},V))}),a.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar animales...",value:w,onChange:V=>I(V.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})]}),r.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Filtros activos:"}),r.map((V,G)=>a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:V.nombre},G))]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:f,className:"text-sm text-blue-600 hover:text-blue-700",children:"Seleccionar todos"}),a.jsx("span",{className:"text-gray-300",children:"|"}),a.jsx("button",{onClick:m,className:"text-sm text-blue-600 hover:text-blue-700",children:"Deseleccionar todos"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1",children:[b==="busqueda"&&a.jsx(hz,{onBuscar:I,terminoActual:w}),b==="filtros"&&a.jsx(pz,{onCrearFiltro:R,onEditarFiltro:L,onAplicarFiltros:l}),b==="etiquetas"&&a.jsx(vz,{etiquetas:v,etiquetasDisponibles:g,onActualizar:y}),b==="listas"&&a.jsx(bz,{onSeleccionarLista:V=>{m(),V.forEach(G=>c(G.id))}})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(gz,{animales:e,animalesSeleccionados:t,loading:n,onSeleccionar:c,onDeseleccionar:d})})]}),S&&a.jsx(yz,{filtro:C,onGuardar:V=>{D(!1)},onCancelar:()=>D(!1)}),T&&a.jsx(jz,{animalesSeleccionados:t,onGuardar:async(V,G)=>{await x(V,G),k(!1)},onCancelar:()=>k(!1)})]})},Yl=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[s,l]=_.useState(!0),[c,d]=_.useState(null),[f,m]=_.useState({}),{showNotification:x}=ms(),h=async()=>{try{l(!0);const{data:R,error:L}=await se.from("movimientos_animales").select(`
          *,
          animal:animales(id, caravana, nombre, categoria),
          lote_origen:lotes!movimientos_animales_lote_origen_id_fkey(id, nombre),
          lote_destino:lotes!movimientos_animales_lote_destino_id_fkey(id, nombre)
        `).order("fecha_movimiento",{ascending:!1});if(L)throw L;t(R||[]),n(R||[])}catch(R){console.error("Error al cargar movimientos:",R),d("Error al cargar movimientos")}finally{l(!1)}},v=async R=>{try{const{data:{user:L}}=await se.auth.getUser();if(!L)throw new Error("Usuario no autenticado");const P={...R,usuario_id:L.id},{data:O,error:z}=await se.from("movimientos_animales").insert(P).select(`
          *,
          animal:animales(id, caravana, nombre, categoria),
          lote_origen:lotes!movimientos_animales_lote_origen_id_fkey(id, nombre),
          lote_destino:lotes!movimientos_animales_lote_destino_id_fkey(id, nombre)
        `).single();if(z)throw z;return t(V=>[O,...V]),b(f,[O,...e]),x("Movimiento registrado exitosamente","success"),O}catch(L){throw console.error("Error al crear movimiento:",L),x("Error al registrar movimiento","error"),L}},g=async(R,L)=>{try{const{data:P,error:O}=await se.from("movimientos_animales").update(L).eq("id",R).select(`
          *,
          animal:animales(id, caravana, nombre, categoria),
          lote_origen:lotes!movimientos_animales_lote_origen_id_fkey(id, nombre),
          lote_destino:lotes!movimientos_animales_lote_destino_id_fkey(id, nombre)
        `).single();if(O)throw O;return t(z=>z.map(V=>V.id===R?P:V)),b(f,e.map(z=>z.id===R?P:z)),x("Movimiento actualizado exitosamente","success"),P}catch(P){throw console.error("Error al actualizar movimiento:",P),x("Error al actualizar movimiento","error"),P}},y=async R=>{try{const{error:L}=await se.from("movimientos_animales").delete().eq("id",R);if(L)throw L;t(P=>P.filter(O=>O.id!==R)),n(P=>P.filter(O=>O.id!==R)),x("Movimiento eliminado exitosamente","success")}catch(L){throw console.error("Error al eliminar movimiento:",L),x("Error al eliminar movimiento","error"),L}},b=(R,L)=>{m(R);let P=L||e;if(R.fechaDesde&&(P=P.filter(O=>new Date(O.fecha_movimiento)>=new Date(R.fechaDesde))),R.fechaHasta&&(P=P.filter(O=>new Date(O.fecha_movimiento)<=new Date(R.fechaHasta))),R.tipoMovimiento&&R.tipoMovimiento.length>0&&(P=P.filter(O=>R.tipoMovimiento.includes(O.tipo_movimiento))),R.loteOrigen&&R.loteOrigen.length>0&&(P=P.filter(O=>O.lote_origen_id&&R.loteOrigen.includes(O.lote_origen_id))),R.loteDestino&&R.loteDestino.length>0&&(P=P.filter(O=>O.lote_destino_id&&R.loteDestino.includes(O.lote_destino_id))),R.animalId&&(P=P.filter(O=>O.animal_id===R.animalId)),R.compradorVendedor){const O=R.compradorVendedor.toLowerCase();P=P.filter(z=>z.comprador_vendedor?.toLowerCase().includes(O))}n(P)},j=()=>{m({}),n(e)},w=R=>e.filter(L=>L.animal_id===R),A=R=>{const L=w(R);return L.length>0?L[0]:null},S=async R=>await v({...R,tipo_movimiento:"llegada",motivo:"Ingreso de nuevo animal al establecimiento"}),D=async R=>await v({...R,tipo_movimiento:"venta",motivo:"Venta de animal"}),T=async R=>await v({...R,tipo_movimiento:"transferencia",motivo:R.motivo||"Transferencia entre lotes"}),k=()=>{const R=new Date,L=new Date(R.getTime()-720*60*60*1e3);return e.reduce((O,z)=>{switch(O.totalMovimientos++,z.tipo_movimiento){case"llegada":O.llegadas++;break;case"venta":O.ventas++,z.precio&&(O.valorTotalVentas+=z.precio),z.peso&&(O.pesoTotalVentas+=z.peso);break;case"transferencia":O.transferencias++;break;default:O.otros++}return new Date(z.fecha_movimiento)>=L&&O.movimientosUltimoMes++,O},{totalMovimientos:0,llegadas:0,ventas:0,transferencias:0,otros:0,valorTotalVentas:0,pesoTotalVentas:0,movimientosUltimoMes:0})},C=(R,L)=>e.filter(P=>{const O=new Date(P.fecha_movimiento);return O>=new Date(R)&&O<=new Date(L)}),M=()=>e.reduce((L,P)=>(L[P.tipo_movimiento]||(L[P.tipo_movimiento]={cantidad:0,valorTotal:0,pesoTotal:0}),L[P.tipo_movimiento].cantidad++,P.precio&&(L[P.tipo_movimiento].valorTotal+=P.precio),P.peso&&(L[P.tipo_movimiento].pesoTotal+=P.peso),L),{}),I=R=>{const L=R||r,P=["Fecha","Tipo","Animal (Caravana)","Lote Origen","Lote Destino","Precio","Peso","Comprador/Vendedor","Documento","Motivo","Observaciones"],O=L.map(ce=>[ce.fecha_movimiento,ce.tipo_movimiento,ce.animal?.caravana||"",ce.lote_origen?.nombre||"",ce.lote_destino?.nombre||"",ce.precio?.toString()||"",ce.peso?.toString()||"",ce.comprador_vendedor||"",ce.documento_referencia||"",ce.motivo||"",ce.observaciones||""]),z=[P,...O].map(ce=>ce.map(le=>`"${le}"`).join(",")).join(`
`),V=new Blob([z],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a"),K=URL.createObjectURL(V);G.setAttribute("href",K),G.setAttribute("download",`movimientos_animales_${new Date().toISOString().split("T")[0]}.csv`),G.style.visibility="hidden",document.body.appendChild(G),G.click(),document.body.removeChild(G)};return _.useEffect(()=>{h()},[]),_.useEffect(()=>{b(f)},[e]),{movimientos:e,movimientosFiltrados:r,loading:s,error:c,filtros:f,crearMovimiento:v,actualizarMovimiento:g,eliminarMovimiento:y,registrarLlegada:S,registrarVenta:D,registrarTransferencia:T,aplicarFiltros:b,limpiarFiltros:j,obtenerMovimientosAnimal:w,obtenerUltimoMovimientoAnimal:A,obtenerMovimientosPorPeriodo:C,obtenerEstadisticas:k,obtenerResumenPorTipo:M,exportarMovimientos:I,cargarMovimientos:h}},H4=()=>{const{registrarLlegada:e}=Yl(),[t,r]=_.useState([]),[n,s]=_.useState(!1),[l,c]=_.useState(!1),[d,f]=_.useState(new Date().toISOString().split("T")[0]),[m,x]=_.useState(""),[h,v]=_.useState(""),[g,y]=_.useState(""),[b,j]=_.useState(""),[w,A]=_.useState([]),[S,D]=_.useState({caravana:"",raza:"",sexo:"",fecha_nacimiento:"",peso:0,categoria:"",observaciones:""}),T=["Holstein","Angus","Hereford","Brahman","Charolais","Simmental","Criollo"],k=["Ternero","Ternera","Novillo","Vaquillona","Toro","Vaca"],C=["Lote A","Lote B","Lote C","Potrero 1","Potrero 2","Corral 1"],M=()=>{if(!S.caravana||!S.raza||!S.sexo){alert("Complete los campos obligatorios del animal");return}if(t.some(O=>O.caravana===S.caravana)){alert("Ya existe un animal con esa caravana en la lista");return}r([...t,{...S}]),D({caravana:"",raza:"",sexo:"",fecha_nacimiento:"",peso:0,categoria:"",observaciones:""}),s(!1)},I=O=>{r(t.filter((z,V)=>V!==O))},R=O=>{const z=Array.from(O.target.files||[]);A([...w,...z])},L=O=>{A(w.filter((z,V)=>V!==O))},P=async()=>{if(!d||!m||t.length===0){alert("Complete todos los campos obligatorios");return}c(!0);try{await e({fecha:d,lote_destino:m,origen:h,responsable:g,observaciones:b,animales:t,documentos:w}),r([]),f(new Date().toISOString().split("T")[0]),x(""),v(""),y(""),j(""),A([]),alert("Llegada registrada exitosamente")}catch(O){console.error("Error al registrar llegada:",O),alert("Error al registrar la llegada")}finally{c(!1)}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Registro de Llegadas"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Registra la llegada de nuevos animales al establecimiento"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(gt,{className:"h-4 w-4"}),"Agregar Animal"]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(We,{className:"h-4 w-4"}),"Información del Movimiento"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Llegada *"}),a.jsx("input",{type:"date",value:d,onChange:O=>f(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lote de Destino *"}),a.jsxs("select",{value:m,onChange:O=>x(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"Seleccionar lote..."}),C.map(O=>a.jsx("option",{value:O,children:O},O))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Origen"}),a.jsx("input",{type:"text",value:h,onChange:O=>v(O.target.value),placeholder:"Ej: Establecimiento San Juan",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsable"}),a.jsx("input",{type:"text",value:g,onChange:O=>y(O.target.value),placeholder:"Nombre del responsable",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),a.jsx("textarea",{value:b,onChange:O=>j(O.target.value),placeholder:"Observaciones adicionales sobre la llegada",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(et,{className:"h-4 w-4"}),"Documentos Adjuntos"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",multiple:!0,onChange:R,className:"hidden",id:"file-upload",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"}),a.jsxs("label",{htmlFor:"file-upload",className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50 transition-colors",children:[a.jsx(fu,{className:"h-4 w-4"}),"Subir Documentos"]})]}),w.length>0&&a.jsx("div",{className:"space-y-2",children:w.map((O,z)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[a.jsx("span",{className:"text-sm text-gray-700",children:O.name}),a.jsx("button",{onClick:()=>L(z),className:"text-red-600 hover:text-red-800",children:a.jsx(Qe,{className:"h-4 w-4"})})]},z))})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4",children:["Animales a Registrar (",t.length,")"]}),t.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx("p",{children:"No hay animales agregados"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Haz clic en "Agregar Animal" para comenzar'})]}):a.jsx("div",{className:"space-y-3",children:t.map((O,z)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 flex-1",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Caravana"}),a.jsx("p",{className:"font-medium",children:O.caravana})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Raza"}),a.jsx("p",{children:O.raza})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Sexo"}),a.jsx("p",{children:O.sexo})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Categoría"}),a.jsx("p",{children:O.categoria})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Peso (kg)"}),a.jsx("p",{children:O.peso||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"F. Nacimiento"}),a.jsx("p",{children:O.fecha_nacimiento||"N/A"})]})]}),a.jsx("button",{onClick:()=>I(z),className:"ml-4 p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:a.jsx(Qe,{className:"h-4 w-4"})})]},z))})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:P,disabled:l||t.length===0,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Na,{className:"h-4 w-4"}),l?"Registrando...":"Registrar Llegada"]})}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Agregar Animal"}),a.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(Qe,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caravana *"}),a.jsx("input",{type:"text",value:S.caravana,onChange:O=>D({...S,caravana:O.target.value}),placeholder:"Ej: A001",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Raza *"}),a.jsxs("select",{value:S.raza,onChange:O=>D({...S,raza:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"Seleccionar raza..."}),T.map(O=>a.jsx("option",{value:O,children:O},O))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sexo *"}),a.jsxs("select",{value:S.sexo,onChange:O=>D({...S,sexo:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"Seleccionar sexo..."}),a.jsx("option",{value:"Macho",children:"Macho"}),a.jsx("option",{value:"Hembra",children:"Hembra"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría"}),a.jsxs("select",{value:S.categoria,onChange:O=>D({...S,categoria:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"Seleccionar categoría..."}),k.map(O=>a.jsx("option",{value:O,children:O},O))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Nacimiento"}),a.jsx("input",{type:"date",value:S.fecha_nacimiento,onChange:O=>D({...S,fecha_nacimiento:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso (kg)"}),a.jsx("input",{type:"number",value:S.peso||"",onChange:O=>D({...S,peso:Number(O.target.value)}),placeholder:"Peso en kilogramos",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),a.jsx("textarea",{value:S.observaciones,onChange:O=>D({...S,observaciones:O.target.value}),placeholder:"Observaciones adicionales del animal",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[a.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:M,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Agregar Animal"})]})]})})]})},wz=()=>{const{registrarVenta:e}=Yl(),[t,r]=_.useState([]),[n,s]=_.useState(!1),[l,c]=_.useState(""),[d,f]=_.useState([]),[m,x]=_.useState(new Date().toISOString().split("T")[0]),[h,v]=_.useState(""),[g,y]=_.useState(""),[b,j]=_.useState(0),[w,A]=_.useState(""),[S,D]=_.useState(""),[T,k]=_.useState(""),[C,M]=_.useState(""),[I,R]=_.useState([]),L=["Efectivo","Transferencia","Cheque","Crédito","Consignación"];_.useEffect(()=>{P()},[]),_.useEffect(()=>{const ne=t.reduce((Z,F)=>Z+F.precio_venta,0);j(ne)},[t]);const P=async()=>{try{const ne=[{id:"1",caravana:"A001",raza:"Holstein",sexo:"Hembra",fecha_nacimiento:"2020-01-15",edad_meses:48,peso_actual:520,estado:"Activo",categoria:"Vaca",lote_actual:"Lote A",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",caravana:"B002",raza:"Angus",sexo:"Macho",fecha_nacimiento:"2021-03-10",edad_meses:33,peso_actual:480,estado:"Activo",categoria:"Novillo",lote_actual:"Lote B",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",caravana:"C003",raza:"Hereford",sexo:"Hembra",fecha_nacimiento:"2021-05-20",edad_meses:31,peso_actual:380,estado:"Activo",categoria:"Vaquillona",lote_actual:"Lote C",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];f(ne)}catch(ne){console.error("Error al cargar animales:",ne)}},O=()=>l?d.filter(ne=>ne.caravana.toLowerCase().includes(l.toLowerCase())||ne.raza.toLowerCase().includes(l.toLowerCase())||ne.lote_actual.toLowerCase().includes(l.toLowerCase())):d,z=ne=>{if(t.some(F=>F.id===ne.id)){alert("Este animal ya está seleccionado para la venta");return}const Z={...ne,precio_venta:0,peso_venta:ne.peso_actual,observaciones_venta:""};r([...t,Z]),c("")},V=ne=>{r(t.filter(Z=>Z.id!==ne))},G=(ne,Z,F)=>{r(U=>U.map(Y=>Y.id===ne?{...Y,[Z]:F}:Y))},K=ne=>{const Z=Array.from(ne.target.files||[]);R([...I,...Z])},ce=ne=>{R(I.filter((Z,F)=>F!==ne))},le=async()=>{if(!m||!h||t.length===0){alert("Complete todos los campos obligatorios");return}if(t.filter(Z=>Z.precio_venta<=0).length>0){alert("Todos los animales deben tener un precio de venta");return}s(!0);try{await e({fecha:m,comprador:h,contacto_comprador:g,precio_total:b,forma_pago:w,transportista:S,destino:T,observaciones:C,animales:t,documentos:I}),r([]),x(new Date().toISOString().split("T")[0]),v(""),y(""),j(0),A(""),D(""),k(""),M(""),R([]),alert("Venta registrada exitosamente"),P()}catch(Z){console.error("Error al registrar venta:",Z),alert("Error al registrar la venta")}finally{s(!1)}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Registro de Ventas"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Registra la venta de animales del establecimiento"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"h-4 w-4"}),"Información de la Venta"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Venta *"}),a.jsx("input",{type:"date",value:m,onChange:ne=>x(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comprador *"}),a.jsx("input",{type:"text",value:h,onChange:ne=>v(ne.target.value),placeholder:"Nombre del comprador",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contacto del Comprador"}),a.jsx("input",{type:"text",value:g,onChange:ne=>y(ne.target.value),placeholder:"Teléfono o email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma de Pago"}),a.jsxs("select",{value:w,onChange:ne=>A(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[a.jsx("option",{value:"",children:"Seleccionar..."}),L.map(ne=>a.jsx("option",{value:ne,children:ne},ne))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transportista"}),a.jsx("input",{type:"text",value:S,onChange:ne=>D(ne.target.value),placeholder:"Empresa o persona",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destino"}),a.jsx("input",{type:"text",value:T,onChange:ne=>k(ne.target.value),placeholder:"Lugar de destino",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),a.jsx("textarea",{value:C,onChange:ne=>M(ne.target.value),placeholder:"Observaciones adicionales sobre la venta",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(ft,{className:"h-4 w-4"}),"Seleccionar Animales para Venta"]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por caravana, raza o lote...",value:l,onChange:ne=>c(ne.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),l&&a.jsx("div",{className:"mb-4 max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:O().map(ne=>a.jsx("div",{onClick:()=>z(ne),className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:ne.caravana}),a.jsx("span",{className:"ml-2 text-gray-600",children:ne.raza}),a.jsx("span",{className:"ml-2 text-gray-600",children:ne.sexo})]}),a.jsxs("div",{className:"text-right text-sm text-gray-600",children:[a.jsx("div",{children:ne.categoria}),a.jsxs("div",{children:[ne.peso_actual," kg"]})]})]})},ne.id))})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4",children:["Animales Seleccionados (",t.length,")"]}),t.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx("p",{children:"No hay animales seleccionados"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Busca y selecciona animales para la venta"})]}):a.jsxs("div",{className:"space-y-3",children:[t.map(ne=>a.jsx("div",{className:"p-4 bg-white border border-gray-200 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Caravana"}),a.jsx("p",{className:"font-medium",children:ne.caravana})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Raza/Sexo"}),a.jsxs("p",{children:[ne.raza," - ",ne.sexo]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500",children:"Peso Venta (kg)"}),a.jsx("input",{type:"number",value:ne.peso_venta,onChange:Z=>G(ne.id,"peso_venta",Number(Z.target.value)),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-red-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500",children:"Precio ($)"}),a.jsx("input",{type:"number",value:ne.precio_venta,onChange:Z=>G(ne.id,"precio_venta",Number(Z.target.value)),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-red-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500",children:"Observaciones"}),a.jsx("input",{type:"text",value:ne.observaciones_venta,onChange:Z=>G(ne.id,"observaciones_venta",Z.target.value),placeholder:"Opcional",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-red-500"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>V(ne.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:a.jsx(Qe,{className:"h-4 w-4"})})})]})},ne.id)),a.jsx("div",{className:"bg-red-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["Total de animales: ",t.length]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Peso total: ",t.reduce((ne,Z)=>ne+Z.peso_venta,0)," kg"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Precio Total"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",b.toLocaleString()]})]})]})})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(et,{className:"h-4 w-4"}),"Documentos de la Venta"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",multiple:!0,onChange:K,className:"hidden",id:"file-upload-venta",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"}),a.jsxs("label",{htmlFor:"file-upload-venta",className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50 transition-colors",children:[a.jsx(et,{className:"h-4 w-4"}),"Subir Documentos"]})]}),I.length>0&&a.jsx("div",{className:"space-y-2",children:I.map((ne,Z)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[a.jsx("span",{className:"text-sm text-gray-700",children:ne.name}),a.jsx("button",{onClick:()=>ce(Z),className:"text-red-600 hover:text-red-800",children:a.jsx(Qe,{className:"h-4 w-4"})})]},Z))})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:le,disabled:n||t.length===0,className:"flex items-center gap-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Na,{className:"h-4 w-4"}),n?"Registrando...":"Registrar Venta"]})})]})},_z=()=>{const{registrarTransferencia:e}=Yl(),[t,r]=_.useState([]),[n,s]=_.useState(!1),[l,c]=_.useState(""),[d,f]=_.useState([]),[m,x]=_.useState(new Date().toISOString().split("T")[0]),[h,v]=_.useState(""),[g,y]=_.useState(""),[b,j]=_.useState(""),[w,A]=_.useState(""),[S,D]=_.useState(""),T=["Lote A","Lote B","Lote C","Potrero 1","Potrero 2","Corral 1","Corral 2"],k=["Cambio de categoría","Manejo reproductivo","Tratamiento sanitario","Mejora de pasturas","Separación por peso","Preparación para venta","Otro"];_.useEffect(()=>{C()},[h]);const C=async()=>{try{const z=[{id:"1",caravana:"A001",raza:"Holstein",sexo:"Hembra",fecha_nacimiento:"2020-01-15",edad_meses:48,peso_actual:520,estado:"Activo",categoria:"Vaca",lote_actual:"Lote A",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",caravana:"A002",raza:"Holstein",sexo:"Hembra",fecha_nacimiento:"2020-02-20",edad_meses:47,peso_actual:510,estado:"Activo",categoria:"Vaca",lote_actual:"Lote A",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",caravana:"B001",raza:"Angus",sexo:"Macho",fecha_nacimiento:"2021-03-10",edad_meses:33,peso_actual:480,estado:"Activo",categoria:"Novillo",lote_actual:"Lote B",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"4",caravana:"B002",raza:"Angus",sexo:"Hembra",fecha_nacimiento:"2021-04-15",edad_meses:32,peso_actual:420,estado:"Activo",categoria:"Vaquillona",lote_actual:"Lote B",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],V=h?z.filter(G=>G.lote_actual===h):z;f(V)}catch(z){console.error("Error al cargar animales:",z)}},M=()=>l?d.filter(z=>z.caravana.toLowerCase().includes(l.toLowerCase())||z.raza.toLowerCase().includes(l.toLowerCase())||z.categoria.toLowerCase().includes(l.toLowerCase())):d,I=z=>{if(t.some(G=>G.id===z.id)){alert("Este animal ya está seleccionado para la transferencia");return}const V={...z,observaciones_transferencia:""};r([...t,V])},R=z=>{r(t.filter(V=>V.id!==z))},L=()=>{if(!h){alert("Selecciona primero un lote de origen");return}const V=d.filter(G=>!t.some(K=>K.id===G.id)).map(G=>({...G,observaciones_transferencia:""}));r([...t,...V])},P=(z,V)=>{r(G=>G.map(K=>K.id===z?{...K,observaciones_transferencia:V}:K))},O=async()=>{if(!m||!h||!g||t.length===0){alert("Complete todos los campos obligatorios");return}if(h===g){alert("El lote de origen y destino no pueden ser el mismo");return}s(!0);try{await e({fecha:m,lote_origen:h,lote_destino:g,motivo:b,responsable:w,observaciones:S,animales:t}),r([]),x(new Date().toISOString().split("T")[0]),v(""),y(""),j(""),A(""),D(""),c(""),alert("Transferencia registrada exitosamente"),C()}catch(z){console.error("Error al registrar transferencia:",z),alert("Error al registrar la transferencia")}finally{s(!1)}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Registro de Transferencias"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Transfiere animales entre lotes del establecimiento"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Hd,{className:"h-4 w-4"}),"Información de la Transferencia"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Transferencia *"}),a.jsx("input",{type:"date",value:m,onChange:z=>x(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lote de Origen *"}),a.jsxs("select",{value:h,onChange:z=>v(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Seleccionar lote origen..."}),T.map(z=>a.jsx("option",{value:z,children:z},z))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lote de Destino *"}),a.jsxs("select",{value:g,onChange:z=>y(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Seleccionar lote destino..."}),T.filter(z=>z!==h).map(z=>a.jsx("option",{value:z,children:z},z))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo de Transferencia"}),a.jsxs("select",{value:b,onChange:z=>j(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Seleccionar motivo..."}),k.map(z=>a.jsx("option",{value:z,children:z},z))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsable"}),a.jsx("input",{type:"text",value:w,onChange:z=>A(z.target.value),placeholder:"Nombre del responsable",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),a.jsx("textarea",{value:S,onChange:z=>D(z.target.value),placeholder:"Observaciones adicionales sobre la transferencia",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(ft,{className:"h-4 w-4"}),"Seleccionar Animales para Transferir"]}),h&&a.jsx("button",{onClick:L,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Seleccionar Todo el Lote"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por caravana, raza o categoría...",value:l,onChange:z=>c(z.target.value),disabled:!h,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),!h&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Selecciona un lote de origen para ver los animales disponibles"})]}),h&&l&&a.jsxs("div",{className:"mb-4 max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:[M().map(z=>a.jsx("div",{onClick:()=>I(z),className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:z.caravana}),a.jsx("span",{className:"ml-2 text-gray-600",children:z.raza}),a.jsx("span",{className:"ml-2 text-gray-600",children:z.sexo})]}),a.jsxs("div",{className:"text-right text-sm text-gray-600",children:[a.jsx("div",{children:z.categoria}),a.jsxs("div",{children:[z.peso_actual," kg"]})]})]})},z.id)),M().length===0&&a.jsx("div",{className:"p-3 text-center text-gray-500",children:"No se encontraron animales"})]}),h&&a.jsx("div",{className:"bg-blue-50 p-3 rounded-md",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx(ua,{className:"inline h-4 w-4 mr-1"}),"Animales disponibles en ",h,": ",d.length]})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4",children:["Animales Seleccionados (",t.length,")"]}),t.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx("p",{children:"No hay animales seleccionados"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Selecciona un lote de origen y busca animales para transferir"})]}):a.jsxs("div",{className:"space-y-3",children:[t.map(z=>a.jsx("div",{className:"p-4 bg-white border border-gray-200 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Caravana"}),a.jsx("p",{className:"font-medium",children:z.caravana})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Raza/Sexo"}),a.jsxs("p",{children:[z.raza," - ",z.sexo]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Categoría"}),a.jsx("p",{children:z.categoria})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500",children:"Observaciones"}),a.jsx("input",{type:"text",value:z.observaciones_transferencia,onChange:V=>P(z.id,V.target.value),placeholder:"Observaciones específicas",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>R(z.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:a.jsx(Qe,{className:"h-4 w-4"})})})]})},z.id)),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Animales a transferir"}),a.jsx("p",{className:"text-xl font-bold text-blue-600",children:t.length})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Desde"}),a.jsx("p",{className:"font-medium text-gray-900",children:h})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Hacia"}),a.jsx("p",{className:"font-medium text-gray-900",children:g||"No seleccionado"})]})]})})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:O,disabled:n||t.length===0||!h||!g,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Na,{className:"h-4 w-4"}),n?"Registrando...":"Registrar Transferencia"]})})]})},Ez=()=>{Yl();const[e,t]=_.useState([]),[r,n]=_.useState(!0),[s,l]=_.useState({busqueda:"",tipo:"",fecha_desde:"",fecha_hasta:"",responsable:""}),[c,d]=_.useState(1),[f]=_.useState(10),[m,x]=_.useState(!1),[h,v]=_.useState(null);_.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{t([{id:"1",fecha:"2024-01-15",tipo:"llegada",animal_caravana:"A001",animal_raza:"Holstein",animal_sexo:"Hembra",origen:"Establecimiento San José",destino:"Lote A",responsable:"Juan Pérez",observaciones:"Animal en buen estado, vacunado",documentos:["certificado_sanitario.pdf","guia_transporte.pdf"],created_at:"2024-01-15T10:30:00Z"},{id:"2",fecha:"2024-01-20",tipo:"venta",animal_caravana:"B002",animal_raza:"Angus",animal_sexo:"Macho",comprador:"Frigorífico Central",precio:85e4,responsable:"María García",observaciones:"Venta por peso vivo",documentos:["factura_venta.pdf"],created_at:"2024-01-20T14:15:00Z"},{id:"3",fecha:"2024-01-25",tipo:"transferencia",animal_caravana:"C003",animal_raza:"Hereford",animal_sexo:"Hembra",lote_origen:"Lote B",lote_destino:"Potrero 1",responsable:"Carlos López",observaciones:"Transferencia por cambio de categoría",created_at:"2024-01-25T09:00:00Z"},{id:"4",fecha:"2024-02-01",tipo:"llegada",animal_caravana:"D004",animal_raza:"Braford",animal_sexo:"Macho",origen:"Cabaña El Progreso",destino:"Corral 1",responsable:"Ana Rodríguez",observaciones:"Toro reproductor, excelente genealogía",documentos:["certificado_genealogico.pdf"],created_at:"2024-02-01T11:45:00Z"},{id:"5",fecha:"2024-02-05",tipo:"transferencia",animal_caravana:"A001",animal_raza:"Holstein",animal_sexo:"Hembra",lote_origen:"Lote A",lote_destino:"Lote C",responsable:"Juan Pérez",observaciones:"Transferencia para servicio",created_at:"2024-02-05T16:20:00Z"}])}catch(M){console.error("Error al cargar movimientos:",M)}finally{n(!1)}},b=e.filter(M=>{const I=!s.busqueda||M.animal_caravana.toLowerCase().includes(s.busqueda.toLowerCase())||M.animal_raza.toLowerCase().includes(s.busqueda.toLowerCase())||M.responsable.toLowerCase().includes(s.busqueda.toLowerCase()),R=!s.tipo||M.tipo===s.tipo,L=!s.fecha_desde||M.fecha>=s.fecha_desde,P=!s.fecha_hasta||M.fecha<=s.fecha_hasta,O=!s.responsable||M.responsable.toLowerCase().includes(s.responsable.toLowerCase());return I&&R&&L&&P&&O}),j=Math.ceil(b.length/f),w=(c-1)*f,A=b.slice(w,w+f),S=()=>{l({busqueda:"",tipo:"",fecha_desde:"",fecha_hasta:"",responsable:""}),d(1)},D=()=>{const M=[["Fecha","Tipo","Caravana","Raza","Sexo","Origen/Destino","Responsable","Observaciones"].join(","),...b.map(P=>[P.fecha,P.tipo,P.animal_caravana,P.animal_raza,P.animal_sexo,P.tipo==="llegada"?`${P.origen} → ${P.destino}`:P.tipo==="venta"?P.comprador:`${P.lote_origen} → ${P.lote_destino}`,P.responsable,P.observaciones||""].join(","))].join(`
`),I=new Blob([M],{type:"text/csv"}),R=window.URL.createObjectURL(I),L=document.createElement("a");L.href=R,L.download=`historial_movimientos_${new Date().toISOString().split("T")[0]}.csv`,L.click(),window.URL.revokeObjectURL(R)},T=M=>{switch(M){case"llegada":return"bg-green-100 text-green-800";case"venta":return"bg-red-100 text-red-800";case"transferencia":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},k=M=>{switch(M){case"llegada":return"Llegada";case"venta":return"Venta";case"transferencia":return"Transferencia";default:return M}},C=M=>M?new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(M):"-";return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Historial de Movimientos"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Registro completo de todos los movimientos de animales"})]}),a.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(ma,{className:"h-4 w-4"}),"Exportar"]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por caravana, raza o responsable...",value:s.busqueda,onChange:M=>l({...s,busqueda:M.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("button",{onClick:()=>x(!m),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[a.jsx(Jr,{className:"h-4 w-4"}),"Filtros"]}),(s.busqueda||s.tipo||s.fecha_desde||s.fecha_hasta||s.responsable)&&a.jsx("button",{onClick:S,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Limpiar"})]}),m&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),a.jsxs("select",{value:s.tipo,onChange:M=>l({...s,tipo:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Todos los tipos"}),a.jsx("option",{value:"llegada",children:"Llegadas"}),a.jsx("option",{value:"venta",children:"Ventas"}),a.jsx("option",{value:"transferencia",children:"Transferencias"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),a.jsx("input",{type:"date",value:s.fecha_desde,onChange:M=>l({...s,fecha_desde:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),a.jsx("input",{type:"date",value:s.fecha_hasta,onChange:M=>l({...s,fecha_hasta:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsable"}),a.jsx("input",{type:"text",placeholder:"Filtrar por responsable",value:s.responsable,onChange:M=>l({...s,responsable:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600",children:"Llegadas"}),a.jsx("p",{className:"text-2xl font-bold text-green-700",children:e.filter(M=>M.tipo==="llegada").length})]}),a.jsx(ua,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-red-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-600",children:"Ventas"}),a.jsx("p",{className:"text-2xl font-bold text-red-700",children:e.filter(M=>M.tipo==="venta").length})]}),a.jsx(et,{className:"h-8 w-8 text-red-600"})]})}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600",children:"Transferencias"}),a.jsx("p",{className:"text-2xl font-bold text-blue-700",children:e.filter(M=>M.tipo==="transferencia").length})]}),a.jsx(We,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-700",children:e.length})]}),a.jsx(Vt,{className:"h-8 w-8 text-gray-600"})]})})]}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:A.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(et,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No se encontraron movimientos"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Ajusta los filtros o verifica que existan registros"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Animal"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Detalles"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Responsable"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(M=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(M.fecha).toLocaleDateString("es-AR")}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T(M.tipo)}`,children:k(M.tipo)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.animal_caravana}),a.jsxs("div",{className:"text-sm text-gray-500",children:[M.animal_raza," - ",M.animal_sexo]})]})}),a.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[M.tipo==="llegada"&&a.jsx("div",{children:a.jsxs("div",{children:[M.origen," → ",M.destino]})}),M.tipo==="venta"&&a.jsxs("div",{children:[a.jsx("div",{children:M.comprador}),a.jsx("div",{className:"text-green-600 font-medium",children:C(M.precio)})]}),M.tipo==="transferencia"&&a.jsx("div",{children:a.jsxs("div",{children:[M.lote_origen," → ",M.lote_destino]})})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.responsable}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("button",{onClick:()=>v(M),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1",children:[a.jsx(Kt,{className:"h-4 w-4"}),"Ver"]})})]},M.id))})]})}),j>1&&a.jsxs("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[a.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",w+1," a ",Math.min(w+f,b.length)," de ",b.length," movimientos"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Anterior"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Página ",c," de ",j]}),a.jsx("button",{onClick:()=>d(Math.min(j,c+1)),disabled:c===j,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Siguiente"})]})]})]})}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Detalle del Movimiento"}),a.jsx("button",{onClick:()=>v(null),className:"text-gray-400 hover:text-gray-600",children:a.jsx(X,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha"}),a.jsx("p",{className:"text-sm text-gray-900",children:new Date(h.fecha).toLocaleDateString("es-AR")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T(h.tipo)}`,children:k(h.tipo)})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Caravana"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.animal_caravana})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Raza"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.animal_raza})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sexo"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.animal_sexo})]})]}),h.tipo==="llegada"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Origen"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.origen})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Destino"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.destino})]})]}),h.tipo==="venta"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comprador"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.comprador})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Precio"}),a.jsx("p",{className:"text-sm text-green-600 font-medium",children:C(h.precio)})]})]}),h.tipo==="transferencia"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lote Origen"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.lote_origen})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lote Destino"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.lote_destino})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Responsable"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.responsable})]}),h.observaciones&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaciones"}),a.jsx("p",{className:"text-sm text-gray-900",children:h.observaciones})]}),h.documentos&&h.documentos.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Documentos"}),a.jsx("div",{className:"space-y-2",children:h.documentos.map((M,I)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[a.jsx(et,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:M}),a.jsx("button",{className:"ml-auto text-blue-600 hover:text-blue-800 text-sm",children:"Descargar"})]},I))})]})]})]})})})]})};function MC(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=MC(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function pt(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=MC(e))&&(n&&(n+=" "),n+=t);return n}var Sz=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function py(e){if(typeof e!="string")return!1;var t=Sz;return t.includes(e)}var Az=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function FC(e){if(typeof e!="string")return!1;var t=Az;return t.includes(e)}function LC(e){return typeof e=="string"&&e.startsWith("data-")}function nn(e){var t=Object.entries(e).filter(r=>{var[n]=r;return FC(n)||LC(n)});return Object.fromEntries(t)}function Pl(e){if(e==null)return null;if(_.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return nn(t)}return typeof e=="object"&&!Array.isArray(e)?nn(e):null}function Ea(e){var t=Object.entries(e).filter(r=>{var[n]=r;return FC(n)||LC(n)||py(n)});return Object.fromEntries(t)}function Cz(e){return e==null?null:_.isValidElement(e)?Ea(e.props):typeof e=="object"&&!Array.isArray(e)?Ea(e):null}var Tz=["children","width","height","viewBox","className","style","title","desc"];function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vv.apply(null,arguments)}function Dz(e,t){if(e==null)return{};var r,n,s=Oz(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Oz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RC=_.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:l,className:c,style:d,title:f,desc:m}=e,x=Dz(e,Tz),h=l||{width:n,height:s,x:0,y:0},v=pt("recharts-surface",c);return _.createElement("svg",Vv({},Ea(x),{className:v,width:n,height:s,style:d,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),_.createElement("title",null,f),_.createElement("desc",null,m),r)}),kz=["children","className"];function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}function Pz(e,t){if(e==null)return{};var r,n,s=Mz(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Mz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ta=_.forwardRef((e,t)=>{var{children:r,className:n}=e,s=Pz(e,kz),l=pt("recharts-layer",n);return _.createElement("g",Gv({className:l},Ea(s),{ref:t}),r)}),Fz=_.createContext(null);function Rt(e){return function(){return e}}const IC=Math.cos,Jm=Math.sin,Xn=Math.sqrt,e0=Math.PI,J0=2*e0,Kv=Math.PI,Yv=2*Kv,pl=1e-6,Lz=Yv-pl;function BC(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Rz(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BC;const r=10**t;return function(n){this._+=n[0];for(let s=1,l=n.length;s<l;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Iz{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BC:Rz(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,l,c){this._append`C${+t},${+r},${+n},${+s},${this._x1=+l},${this._y1=+c}`}arcTo(t,r,n,s,l){if(t=+t,r=+r,n=+n,s=+s,l=+l,l<0)throw new Error(`negative radius: ${l}`);let c=this._x1,d=this._y1,f=n-t,m=s-r,x=c-t,h=d-r,v=x*x+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(v>pl)if(!(Math.abs(h*f-m*x)>pl)||!l)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-c,y=s-d,b=f*f+m*m,j=g*g+y*y,w=Math.sqrt(b),A=Math.sqrt(v),S=l*Math.tan((Kv-Math.acos((b+v-j)/(2*w*A)))/2),D=S/A,T=S/w;Math.abs(D-1)>pl&&this._append`L${t+D*x},${r+D*h}`,this._append`A${l},${l},0,0,${+(h*g>x*y)},${this._x1=t+T*f},${this._y1=r+T*m}`}}arc(t,r,n,s,l,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let d=n*Math.cos(s),f=n*Math.sin(s),m=t+d,x=r+f,h=1^c,v=c?s-l:l-s;this._x1===null?this._append`M${m},${x}`:(Math.abs(this._x1-m)>pl||Math.abs(this._y1-x)>pl)&&this._append`L${m},${x}`,n&&(v<0&&(v=v%Yv+Yv),v>Lz?this._append`A${n},${n},0,1,${h},${t-d},${r-f}A${n},${n},0,1,${h},${this._x1=m},${this._y1=x}`:v>pl&&this._append`A${n},${n},0,${+(v>=Kv)},${h},${this._x1=t+n*Math.cos(l)},${this._y1=r+n*Math.sin(l)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function gy(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Iz(t)}function vy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zC(e){this._context=e}zC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ex(e){return new zC(e)}function UC(e){return e[0]}function $C(e){return e[1]}function qC(e,t){var r=Rt(!0),n=null,s=ex,l=null,c=gy(d);e=typeof e=="function"?e:e===void 0?UC:Rt(e),t=typeof t=="function"?t:t===void 0?$C:Rt(t);function d(f){var m,x=(f=vy(f)).length,h,v=!1,g;for(n==null&&(l=s(g=c())),m=0;m<=x;++m)!(m<x&&r(h=f[m],m,f))===v&&((v=!v)?l.lineStart():l.lineEnd()),v&&l.point(+e(h,m,f),+t(h,m,f));if(g)return l=null,g+""||null}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Rt(+f),d):e},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Rt(+f),d):t},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:Rt(!!f),d):r},d.curve=function(f){return arguments.length?(s=f,n!=null&&(l=s(n)),d):s},d.context=function(f){return arguments.length?(f==null?n=l=null:l=s(n=f),d):n},d}function hm(e,t,r){var n=null,s=Rt(!0),l=null,c=ex,d=null,f=gy(m);e=typeof e=="function"?e:e===void 0?UC:Rt(+e),t=typeof t=="function"?t:Rt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?$C:Rt(+r);function m(h){var v,g,y,b=(h=vy(h)).length,j,w=!1,A,S=new Array(b),D=new Array(b);for(l==null&&(d=c(A=f())),v=0;v<=b;++v){if(!(v<b&&s(j=h[v],v,h))===w)if(w=!w)g=v,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),y=v-1;y>=g;--y)d.point(S[y],D[y]);d.lineEnd(),d.areaEnd()}w&&(S[v]=+e(j,v,h),D[v]=+t(j,v,h),d.point(n?+n(j,v,h):S[v],r?+r(j,v,h):D[v]))}if(A)return d=null,A+""||null}function x(){return qC().defined(s).curve(c).context(l)}return m.x=function(h){return arguments.length?(e=typeof h=="function"?h:Rt(+h),n=null,m):e},m.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Rt(+h),m):e},m.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Rt(+h),m):n},m.y=function(h){return arguments.length?(t=typeof h=="function"?h:Rt(+h),r=null,m):t},m.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Rt(+h),m):t},m.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Rt(+h),m):r},m.lineX0=m.lineY0=function(){return x().x(e).y(t)},m.lineY1=function(){return x().x(e).y(r)},m.lineX1=function(){return x().x(n).y(t)},m.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Rt(!!h),m):s},m.curve=function(h){return arguments.length?(c=h,l!=null&&(d=c(l)),m):c},m.context=function(h){return arguments.length?(h==null?l=d=null:d=c(l=h),m):l},m}class HC{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Bz(e){return new HC(e,!0)}function zz(e){return new HC(e,!1)}const by={draw(e,t){const r=Xn(t/e0);e.moveTo(r,0),e.arc(0,0,r,0,J0)}},Uz={draw(e,t){const r=Xn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},VC=Xn(1/3),$z=VC*2,qz={draw(e,t){const r=Xn(t/$z),n=r*VC;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Hz={draw(e,t){const r=Xn(t),n=-r/2;e.rect(n,n,r,r)}},Vz=.8908130915292852,GC=Jm(e0/10)/Jm(7*e0/10),Gz=Jm(J0/10)*GC,Kz=-IC(J0/10)*GC,Yz={draw(e,t){const r=Xn(t*Vz),n=Gz*r,s=Kz*r;e.moveTo(0,-r),e.lineTo(n,s);for(let l=1;l<5;++l){const c=J0*l/5,d=IC(c),f=Jm(c);e.lineTo(f*r,-d*r),e.lineTo(d*n-f*s,f*n+d*s)}e.closePath()}},ng=Xn(3),Wz={draw(e,t){const r=-Xn(t/(ng*3));e.moveTo(0,r*2),e.lineTo(-ng*r,-r),e.lineTo(ng*r,-r),e.closePath()}},jn=-.5,Nn=Xn(3)/2,Wv=1/Xn(12),Xz=(Wv/2+1)*3,Zz={draw(e,t){const r=Xn(t/Xz),n=r/2,s=r*Wv,l=n,c=r*Wv+r,d=-l,f=c;e.moveTo(n,s),e.lineTo(l,c),e.lineTo(d,f),e.lineTo(jn*n-Nn*s,Nn*n+jn*s),e.lineTo(jn*l-Nn*c,Nn*l+jn*c),e.lineTo(jn*d-Nn*f,Nn*d+jn*f),e.lineTo(jn*n+Nn*s,jn*s-Nn*n),e.lineTo(jn*l+Nn*c,jn*c-Nn*l),e.lineTo(jn*d+Nn*f,jn*f-Nn*d),e.closePath()}};function Qz(e,t){let r=null,n=gy(s);e=typeof e=="function"?e:Rt(e||by),t=typeof t=="function"?t:Rt(t===void 0?64:+t);function s(){let l;if(r||(r=l=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),l)return r=null,l+""||null}return s.type=function(l){return arguments.length?(e=typeof l=="function"?l:Rt(l),s):e},s.size=function(l){return arguments.length?(t=typeof l=="function"?l:Rt(+l),s):t},s.context=function(l){return arguments.length?(r=l??null,s):r},s}function t0(){}function r0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function KC(e){this._context=e}KC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jz(e){return new KC(e)}function YC(e){this._context=e}YC.prototype={areaStart:t0,areaEnd:t0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:r0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eU(e){return new YC(e)}function WC(e){this._context=e}WC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:r0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tU(e){return new WC(e)}function XC(e){this._context=e}XC.prototype={areaStart:t0,areaEnd:t0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function rU(e){return new XC(e)}function V4(e){return e<0?-1:1}function G4(e,t,r){var n=e._x1-e._x0,s=t-e._x1,l=(e._y1-e._y0)/(n||s<0&&-0),c=(r-e._y1)/(s||n<0&&-0),d=(l*s+c*n)/(n+s);return(V4(l)+V4(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(d))||0}function K4(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function sg(e,t,r){var n=e._x0,s=e._y0,l=e._x1,c=e._y1,d=(l-n)/3;e._context.bezierCurveTo(n+d,s+d*t,l-d,c-d*r,l,c)}function a0(e){this._context=e}a0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sg(this,this._t0,K4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,sg(this,K4(this,r=G4(this,e,t)),r);break;default:sg(this,this._t0,r=G4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function ZC(e){this._context=new QC(e)}(ZC.prototype=Object.create(a0.prototype)).point=function(e,t){a0.prototype.point.call(this,t,e)};function QC(e){this._context=e}QC.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,l){this._context.bezierCurveTo(t,e,n,r,l,s)}};function aU(e){return new a0(e)}function nU(e){return new ZC(e)}function JC(e){this._context=e}JC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Y4(e),s=Y4(t),l=0,c=1;c<r;++l,++c)this._context.bezierCurveTo(n[0][l],s[0][l],n[1][l],s[1][l],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Y4(e){var t,r=e.length-1,n,s=new Array(r),l=new Array(r),c=new Array(r);for(s[0]=0,l[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,l[t]=4,c[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,l[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/l[t-1],l[t]-=n,c[t]-=n*c[t-1];for(s[r-1]=c[r-1]/l[r-1],t=r-2;t>=0;--t)s[t]=(c[t]-s[t+1])/l[t];for(l[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)l[t]=2*e[t+1]-s[t+1];return[s,l]}function sU(e){return new JC(e)}function tx(e,t){this._context=e,this._t=t}tx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function iU(e){return new tx(e,.5)}function lU(e){return new tx(e,0)}function oU(e){return new tx(e,1)}function Jo(e,t){if((c=e.length)>1)for(var r=1,n,s,l=e[t[0]],c,d=l.length;r<c;++r)for(s=l,l=e[t[r]],n=0;n<d;++n)l[n][1]+=l[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Xv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function cU(e,t){return e[t]}function dU(e){const t=[];return t.key=e,t}function uU(){var e=Rt([]),t=Xv,r=Jo,n=cU;function s(l){var c=Array.from(e.apply(this,arguments),dU),d,f=c.length,m=-1,x;for(const h of l)for(d=0,++m;d<f;++d)(c[d][m]=[0,+n(h,c[d].key,m,l)]).data=h;for(d=0,x=vy(t(c));d<f;++d)c[x[d]].index=d;return r(c,x),c}return s.keys=function(l){return arguments.length?(e=typeof l=="function"?l:Rt(Array.from(l)),s):e},s.value=function(l){return arguments.length?(n=typeof l=="function"?l:Rt(+l),s):n},s.order=function(l){return arguments.length?(t=l==null?Xv:typeof l=="function"?l:Rt(Array.from(l)),s):t},s.offset=function(l){return arguments.length?(r=l??Jo,s):r},s}function fU(e,t){if((n=e.length)>0){for(var r,n,s=0,l=e[0].length,c;s<l;++s){for(c=r=0;r<n;++r)c+=e[r][s][1]||0;if(c)for(r=0;r<n;++r)e[r][s][1]/=c}Jo(e,t)}}function mU(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,l=n.length;r<l;++r){for(var c=0,d=0;c<s;++c)d+=e[c][r][1]||0;n[r][1]+=n[r][0]=-d/2}Jo(e,t)}}function xU(e,t){if(!(!((c=e.length)>0)||!((l=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,l,c;n<l;++n){for(var d=0,f=0,m=0;d<c;++d){for(var x=e[t[d]],h=x[n][1]||0,v=x[n-1][1]||0,g=(h-v)/2,y=0;y<d;++y){var b=e[t[y]],j=b[n][1]||0,w=b[n-1][1]||0;g+=j-w}f+=h,m+=g*h}s[n-1][1]+=s[n-1][0]=r,f&&(r-=m/f)}s[n-1][1]+=s[n-1][0]=r,Jo(e,t)}}var ig={},lg={},W4;function hU(){return W4||(W4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(lg)),lg}var og={},X4;function e6(){return X4||(X4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(og)),og}var cg={},Z4;function yy(){return Z4||(Z4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t}(cg)),cg}var dg={},ug={},Q4;function pU(){return Q4||(Q4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t}(ug)),ug}var J4;function jy(){return J4||(J4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pU(),r=yy();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const l=[],c=s.length;if(c===0)return l;let d=0,f="",m="",x=!1;for(s.charCodeAt(0)===46&&(l.push(""),d++);d<c;){const h=s[d];m?h==="\\"&&d+1<c?(d++,f+=s[d]):h===m?m="":f+=h:x?h==='"'||h==="'"?m=h:h==="]"?(x=!1,l.push(f),f=""):f+=h:h==="["?(x=!0,f&&(l.push(f),f="")):h==="."?f&&(l.push(f),f=""):f+=h,d++}return f&&l.push(f),l}e.toPath=n}(dg)),dg}var e_;function Ny(){return e_||(e_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hU(),r=e6(),n=yy(),s=jy();function l(d,f,m){if(d==null)return m;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return m;const x=d[f];return x===void 0?r.isDeepKey(f)?l(d,s.toPath(f),m):m:x}case"number":case"symbol":{typeof f=="number"&&(f=n.toKey(f));const x=d[f];return x===void 0?m:x}default:{if(Array.isArray(f))return c(d,f,m);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return m;const x=d[f];return x===void 0?m:x}}}function c(d,f,m){if(f.length===0)return m;let x=d;for(let h=0;h<f.length;h++){if(x==null||t.isUnsafeProperty(f[h]))return m;x=x[f[h]]}return x===void 0?m:x}e.get=l}(ig)),ig}var fg,t_;function gU(){return t_||(t_=1,fg=Ny().get),fg}var vU=gU();const Ml=Ws(vU);var Rr=e=>e===0?0:e>0?1:-1,On=e=>typeof e=="number"&&e!=+e,Hs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ge=e=>(typeof e=="number"||e instanceof Number)&&!On(e),us=e=>Ge(e)||typeof e=="string",bU=0,eu=e=>{var t=++bU;return"".concat(e||"").concat(t)},da=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ge(t)&&typeof t!="string")return n;var l;if(Hs(t)){if(r==null)return n;var c=t.indexOf("%");l=r*parseFloat(t.slice(0,c))/100}else l=+t;return On(l)&&(l=n),s&&r!=null&&l>r&&(l=r),l},t6=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function er(e,t,r){return Ge(e)&&Ge(t)?e+r*(t-e):t}function r6(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ml(n,t))===r)}var Gt=e=>e===null||typeof e>"u",ju=e=>Gt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),yU=["type","size","sizeType"];function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zv.apply(null,arguments)}function r_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function a_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r_(Object(r),!0).forEach(function(n){jU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jU(e,t,r){return(t=NU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NU(e){var t=wU(e,"string");return typeof t=="symbol"?t:t+""}function wU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _U(e,t){if(e==null)return{};var r,n,s=EU(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function EU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var a6={symbolCircle:by,symbolCross:Uz,symbolDiamond:qz,symbolSquare:Hz,symbolStar:Yz,symbolTriangle:Wz,symbolWye:Zz},SU=Math.PI/180,AU=e=>{var t="symbol".concat(ju(e));return a6[t]||by},CU=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*SU;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},TU=(e,t)=>{a6["symbol".concat(ju(e))]=t},n6=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=_U(e,yU),l=a_(a_({},s),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var d=()=>{var v=AU(c),g=Qz().type(v).size(CU(r,n,c)),y=g();if(y!==null)return y},{className:f,cx:m,cy:x}=l,h=Ea(l);return m===+m&&x===+x&&r===+r?_.createElement("path",Zv({},h,{className:pt("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(x,")"),d:d()})):null};n6.registerSymbol=TU;var wy=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{py(s)&&(n[s]=l=>r[s](r,l))}),n},DU=(e,t,r)=>n=>(e(t,r,n),null),rx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var l=e[s];py(s)&&typeof l=="function"&&(n||(n={}),n[s]=DU(l,t,r))}),n},mg={},xg={},n_;function OU(){return n_||(n_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let l=0;l<r.length;l++){const c=r[l],d=n(c);s.has(d)||s.set(d,c)}return Array.from(s.values())}e.uniqBy=t}(xg)),xg}var hg={},s_;function s6(){return s_||(s_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(hg)),hg}var pg={},gg={},vg={},i_;function kU(){return i_||(i_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(vg)),vg}var l_;function _y(){return l_||(l_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kU();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(gg)),gg}var bg={},o_;function PU(){return o_||(o_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(bg)),bg}var c_;function MU(){return c_||(c_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_y(),r=PU();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n}(pg)),pg}var yg={},jg={},d_;function FU(){return d_||(d_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ny();function r(n){return function(s){return t.get(s,n)}}e.property=r}(jg)),jg}var Ng={},wg={},_g={},Eg={},u_;function i6(){return u_||(u_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(Eg)),Eg}var Sg={},f_;function l6(){return f_||(f_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(Sg)),Sg}var Ag={},m_;function o6(){return m_||(m_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(Ag)),Ag}var x_;function LU(){return x_||(x_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ey(),r=i6(),n=l6(),s=o6();function l(h,v,g){return typeof g!="function"?t.isMatch(h,v):c(h,v,function y(b,j,w,A,S,D){const T=g(b,j,w,A,S,D);return T!==void 0?!!T:c(b,j,y,D)},new Map)}function c(h,v,g,y){if(v===h)return!0;switch(typeof v){case"object":return d(h,v,g,y);case"function":return Object.keys(v).length>0?c(h,{...v},g,y):s.eq(h,v);default:return r.isObject(h)?typeof v=="string"?v==="":!0:s.eq(h,v)}}function d(h,v,g,y){if(v==null)return!0;if(Array.isArray(v))return m(h,v,g,y);if(v instanceof Map)return f(h,v,g,y);if(v instanceof Set)return x(h,v,g,y);const b=Object.keys(v);if(h==null)return b.length===0;if(b.length===0)return!0;if(y&&y.has(v))return y.get(v)===h;y&&y.set(v,h);try{for(let j=0;j<b.length;j++){const w=b[j];if(!n.isPrimitive(h)&&!(w in h)||v[w]===void 0&&h[w]!==void 0||v[w]===null&&h[w]!==null||!g(h[w],v[w],w,h,v,y))return!1}return!0}finally{y&&y.delete(v)}}function f(h,v,g,y){if(v.size===0)return!0;if(!(h instanceof Map))return!1;for(const[b,j]of v.entries()){const w=h.get(b);if(g(w,j,b,h,v,y)===!1)return!1}return!0}function m(h,v,g,y){if(v.length===0)return!0;if(!Array.isArray(h))return!1;const b=new Set;for(let j=0;j<v.length;j++){const w=v[j];let A=!1;for(let S=0;S<h.length;S++){if(b.has(S))continue;const D=h[S];let T=!1;if(g(D,w,j,h,v,y)&&(T=!0),T){b.add(S),A=!0;break}}if(!A)return!1}return!0}function x(h,v,g,y){return v.size===0?!0:h instanceof Set?m([...h],[...v],g,y):!1}e.isMatchWith=l,e.isSetMatch=x}(_g)),_g}var h_;function Ey(){return h_||(h_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LU();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(wg)),wg}var Cg={},Tg={},Dg={},p_;function RU(){return p_||(p_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(Dg)),Dg}var Og={},g_;function c6(){return g_||(g_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(Og)),Og}var kg={},v_;function d6(){return v_||(v_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",l="[object Arguments]",c="[object Symbol]",d="[object Date]",f="[object Map]",m="[object Set]",x="[object Array]",h="[object Function]",v="[object ArrayBuffer]",g="[object Object]",y="[object Error]",b="[object DataView]",j="[object Uint8Array]",w="[object Uint8ClampedArray]",A="[object Uint16Array]",S="[object Uint32Array]",D="[object BigUint64Array]",T="[object Int8Array]",k="[object Int16Array]",C="[object Int32Array]",M="[object BigInt64Array]",I="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=l,e.arrayBufferTag=v,e.arrayTag=x,e.bigInt64ArrayTag=M,e.bigUint64ArrayTag=D,e.booleanTag=s,e.dataViewTag=b,e.dateTag=d,e.errorTag=y,e.float32ArrayTag=I,e.float64ArrayTag=R,e.functionTag=h,e.int16ArrayTag=k,e.int32ArrayTag=C,e.int8ArrayTag=T,e.mapTag=f,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=A,e.uint32ArrayTag=S,e.uint8ArrayTag=j,e.uint8ClampedArrayTag=w}(kg)),kg}var Pg={},b_;function IU(){return b_||(b_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(Pg)),Pg}var y_;function u6(){return y_||(y_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RU(),r=c6(),n=d6(),s=l6(),l=IU();function c(x,h){return d(x,void 0,x,new Map,h)}function d(x,h,v,g=new Map,y=void 0){const b=y?.(x,h,v,g);if(b!==void 0)return b;if(s.isPrimitive(x))return x;if(g.has(x))return g.get(x);if(Array.isArray(x)){const j=new Array(x.length);g.set(x,j);for(let w=0;w<x.length;w++)j[w]=d(x[w],w,v,g,y);return Object.hasOwn(x,"index")&&(j.index=x.index),Object.hasOwn(x,"input")&&(j.input=x.input),j}if(x instanceof Date)return new Date(x.getTime());if(x instanceof RegExp){const j=new RegExp(x.source,x.flags);return j.lastIndex=x.lastIndex,j}if(x instanceof Map){const j=new Map;g.set(x,j);for(const[w,A]of x)j.set(w,d(A,w,v,g,y));return j}if(x instanceof Set){const j=new Set;g.set(x,j);for(const w of x)j.add(d(w,void 0,v,g,y));return j}if(typeof Buffer<"u"&&Buffer.isBuffer(x))return x.subarray();if(l.isTypedArray(x)){const j=new(Object.getPrototypeOf(x)).constructor(x.length);g.set(x,j);for(let w=0;w<x.length;w++)j[w]=d(x[w],w,v,g,y);return j}if(x instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&x instanceof SharedArrayBuffer)return x.slice(0);if(x instanceof DataView){const j=new DataView(x.buffer.slice(0),x.byteOffset,x.byteLength);return g.set(x,j),f(j,x,v,g,y),j}if(typeof File<"u"&&x instanceof File){const j=new File([x],x.name,{type:x.type});return g.set(x,j),f(j,x,v,g,y),j}if(typeof Blob<"u"&&x instanceof Blob){const j=new Blob([x],{type:x.type});return g.set(x,j),f(j,x,v,g,y),j}if(x instanceof Error){const j=new x.constructor;return g.set(x,j),j.message=x.message,j.name=x.name,j.stack=x.stack,j.cause=x.cause,f(j,x,v,g,y),j}if(x instanceof Boolean){const j=new Boolean(x.valueOf());return g.set(x,j),f(j,x,v,g,y),j}if(x instanceof Number){const j=new Number(x.valueOf());return g.set(x,j),f(j,x,v,g,y),j}if(x instanceof String){const j=new String(x.valueOf());return g.set(x,j),f(j,x,v,g,y),j}if(typeof x=="object"&&m(x)){const j=Object.create(Object.getPrototypeOf(x));return g.set(x,j),f(j,x,v,g,y),j}return x}function f(x,h,v=x,g,y){const b=[...Object.keys(h),...t.getSymbols(h)];for(let j=0;j<b.length;j++){const w=b[j],A=Object.getOwnPropertyDescriptor(x,w);(A==null||A.writable)&&(x[w]=d(h[w],w,v,g,y))}}function m(x){switch(r.getTag(x)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=d,e.copyProperties=f}(Tg)),Tg}var j_;function BU(){return j_||(j_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u6();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(Cg)),Cg}var N_;function zU(){return N_||(N_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ey(),r=BU();function n(s){return s=r.cloneDeep(s),l=>t.isMatch(l,s)}e.matches=n}(Ng)),Ng}var Mg={},Fg={},Lg={},w_;function UU(){return w_||(w_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u6(),r=d6();function n(s,l){return t.cloneDeepWith(s,(c,d,f,m)=>{const x=l?.(c,d,f,m);if(x!==void 0)return x;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s?.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n}(Lg)),Lg}var __;function $U(){return __||(__=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UU();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(Fg)),Fg}var Rg={},Ig={},E_;function f6(){return E_||(E_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(Ig)),Ig}var Bg={},S_;function qU(){return S_||(S_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c6();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(Bg)),Bg}var A_;function HU(){return A_||(A_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e6(),r=f6(),n=qU(),s=jy();function l(c,d){let f;if(Array.isArray(d)?f=d:typeof d=="string"&&t.isDeepKey(d)&&c?.[d]==null?f=s.toPath(d):f=[d],f.length===0)return!1;let m=c;for(let x=0;x<f.length;x++){const h=f[x];if((m==null||!Object.hasOwn(m,h))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(h)&&h<m.length))return!1;m=m[h]}return!0}e.has=l}(Rg)),Rg}var C_;function VU(){return C_||(C_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ey(),r=yy(),n=$U(),s=Ny(),l=HU();function c(d,f){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=r.toKey(d);break}}return f=n.cloneDeep(f),function(m){const x=s.get(m,d);return x===void 0?l.has(m,d):f===void 0?x===void 0:t.isMatch(x,f)}}e.matchesProperty=c}(Mg)),Mg}var T_;function GU(){return T_||(T_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s6(),r=FU(),n=zU(),s=VU();function l(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?s.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=l}(yg)),yg}var D_;function KU(){return D_||(D_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OU(),r=s6(),n=MU(),s=GU();function l(c,d=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),s.iteratee(d)):[]}e.uniqBy=l}(mg)),mg}var zg,O_;function YU(){return O_||(O_=1,zg=KU().uniqBy),zg}var WU=YU();const k_=Ws(WU);function XU(e,t,r){return t===!0?k_(e,r):typeof t=="function"?k_(e,t):e}var Ug={exports:{}},$g={},qg={exports:{}},Hg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function ZU(){if(P_)return Hg;P_=1;var e=q0();function t(h,v){return h===v&&(h!==0||1/h===1/v)||h!==h&&v!==v}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(h,v){var g=v(),y=n({inst:{value:g,getSnapshot:v}}),b=y[0].inst,j=y[1];return l(function(){b.value=g,b.getSnapshot=v,f(b)&&j({inst:b})},[h,g,v]),s(function(){return f(b)&&j({inst:b}),h(function(){f(b)&&j({inst:b})})},[h]),c(g),g}function f(h){var v=h.getSnapshot;h=h.value;try{var g=v();return!r(h,g)}catch{return!0}}function m(h,v){return v()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Hg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x,Hg}var M_;function QU(){return M_||(M_=1,qg.exports=ZU()),qg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function JU(){if(F_)return $g;F_=1;var e=q0(),t=QU();function r(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,f=e.useDebugValue;return $g.useSyncExternalStoreWithSelector=function(m,x,h,v,g){var y=l(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=d(function(){function w(k){if(!A){if(A=!0,S=k,k=v(k),g!==void 0&&b.hasValue){var C=b.value;if(g(C,k))return D=C}return D=k}if(C=D,n(S,k))return C;var M=v(k);return g!==void 0&&g(C,M)?(S=k,C):(S=k,D=M)}var A=!1,S,D,T=h===void 0?null:h;return[function(){return w(x())},T===null?void 0:function(){return w(T())}]},[x,h,v,g]);var j=s(m,y[0],y[1]);return c(function(){b.hasValue=!0,b.value=j},[j]),f(j),j},$g}var L_;function e$(){return L_||(L_=1,Ug.exports=JU()),Ug.exports}var t$=e$(),Sy=_.createContext(null),r$=e=>e,ar=()=>{var e=_.useContext(Sy);return e?e.store.dispatch:r$},km=()=>{},a$=()=>km,n$=(e,t)=>e===t;function He(e){var t=_.useContext(Sy);return t$.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:a$,t?t.store.getState:km,t?t.store.getState:km,t?e:km,n$)}function s$(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function i$(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function l$(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var R_=e=>Array.isArray(e)?e:[e];function o$(e){const t=Array.isArray(e[0])?e[0]:e;return l$(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function c$(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var d$=class{constructor(e){this.value=e}deref(){return this.value}},u$=typeof WeakRef<"u"?WeakRef:d$,f$=0,I_=1;function pm(){return{s:f$,v:void 0,o:null,p:null}}function m6(e,t={}){let r=pm();const{resultEqualityCheck:n}=t;let s,l=0;function c(){let d=r;const{length:f}=arguments;for(let h=0,v=f;h<v;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=d.o;y===null&&(d.o=y=new WeakMap);const b=y.get(g);b===void 0?(d=pm(),y.set(g,d)):d=b}else{let y=d.p;y===null&&(d.p=y=new Map);const b=y.get(g);b===void 0?(d=pm(),y.set(g,d)):d=b}}const m=d;let x;if(d.s===I_)x=d.v;else if(x=e.apply(null,arguments),l++,n){const h=s?.deref?.()??s;h!=null&&n(h,x)&&(x=h,l!==0&&l--),s=typeof x=="object"&&x!==null||typeof x=="function"?new u$(x):x}return m.s=I_,m.v=x,x}return c.clearCache=()=>{r=pm(),c.resetResultsCount()},c.resultsCount=()=>l,c.resetResultsCount=()=>{l=0},c}function m$(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let l=0,c=0,d,f={},m=s.pop();typeof m=="object"&&(f=m,m=s.pop()),s$(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const x={...r,...f},{memoize:h,memoizeOptions:v=[],argsMemoize:g=m6,argsMemoizeOptions:y=[]}=x,b=R_(v),j=R_(y),w=o$(s),A=h(function(){return l++,m.apply(null,arguments)},...b),S=g(function(){c++;const T=c$(w,arguments);return d=A.apply(null,T),d},...j);return Object.assign(S,{resultFunc:m,memoizedResultFunc:A,dependencies:w,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>d,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:h,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var ge=m$(m6),x$=Object.assign((e,t=ge)=>{i$(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(l=>e[l]);return t(n,(...l)=>l.reduce((c,d,f)=>(c[r[f]]=d,c),{}))},{withTypes:()=>x$}),Vg={},Gg={},Kg={},B_;function h$(){return B_||(B_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,l)=>{if(n!==s){const c=t(n),d=t(s);if(c===d&&c===0){if(n<s)return l==="desc"?1:-1;if(n>s)return l==="desc"?-1:1}return l==="desc"?d-c:c-d}return 0};e.compareValues=r}(Kg)),Kg}var Yg={},Wg={},z_;function x6(){return z_||(z_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(Wg)),Wg}var U_;function p$(){return U_||(U_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x6(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(l,c){return Array.isArray(l)?!1:typeof l=="number"||typeof l=="boolean"||l==null||t.isSymbol(l)?!0:typeof l=="string"&&(n.test(l)||!r.test(l))||c!=null&&Object.hasOwn(c,l)}e.isKey=s}(Yg)),Yg}var $_;function g$(){return $_||($_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h$(),r=p$(),n=jy();function s(l,c,d,f){if(l==null)return[];d=f?void 0:d,Array.isArray(l)||(l=Object.values(l)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(g=>String(g));const m=(g,y)=>{let b=g;for(let j=0;j<y.length&&b!=null;++j)b=b[y[j]];return b},x=(g,y)=>y==null||g==null?y:typeof g=="object"&&"key"in g?Object.hasOwn(y,g.key)?y[g.key]:m(y,g.path):typeof g=="function"?g(y):Array.isArray(g)?m(y,g):typeof y=="object"?y[g]:y,h=c.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return l.map(g=>({original:g,criteria:h.map(y=>x(y,g))})).slice().sort((g,y)=>{for(let b=0;b<h.length;b++){const j=t.compareValues(g.criteria[b],y.criteria[b],d[b]);if(j!==0)return j}return 0}).map(g=>g.original)}e.orderBy=s}(Gg)),Gg}var Xg={},q_;function v$(){return q_||(q_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],l=Math.floor(n),c=(d,f)=>{for(let m=0;m<d.length;m++){const x=d[m];Array.isArray(x)&&f<l?c(x,f+1):s.push(x)}};return c(r,0),s}e.flatten=t}(Xg)),Xg}var Zg={},H_;function h6(){return H_||(H_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f6(),r=_y(),n=i6(),s=o6();function l(c,d,f){return n.isObject(f)&&(typeof d=="number"&&r.isArrayLike(f)&&t.isIndex(d)&&d<f.length||typeof d=="string"&&d in f)?s.eq(f[d],c):!1}e.isIterateeCall=l}(Zg)),Zg}var V_;function b$(){return V_||(V_=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g$(),r=v$(),n=h6();function s(l,...c){const d=c.length;return d>1&&n.isIterateeCall(l,c[0],c[1])?c=[]:d>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(l,r.flatten(c),["asc"])}e.sortBy=s}(Vg)),Vg}var Qg,G_;function y$(){return G_||(G_=1,Qg=b$().sortBy),Qg}var j$=y$();const ax=Ws(j$);var p6=e=>e.legend.settings,N$=e=>e.legend.size,w$=e=>e.legend.payload;ge([w$,p6],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?ax(n,r):n});var gm=1;function _$(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),n=_.useCallback(s=>{if(s!=null){var l=s.getBoundingClientRect(),c={height:l.height,left:l.left,top:l.top,width:l.width};(Math.abs(c.height-t.height)>gm||Math.abs(c.left-t.left)>gm||Math.abs(c.top-t.top)>gm||Math.abs(c.width-t.width)>gm)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Gr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var E$=typeof Symbol=="function"&&Symbol.observable||"@@observable",K_=E$,Jg=()=>Math.random().toString(36).substring(7).split("").join("."),S$={INIT:`@@redux/INIT${Jg()}`,REPLACE:`@@redux/REPLACE${Jg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Jg()}`},n0=S$;function Ay(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function g6(e,t,r){if(typeof e!="function")throw new Error(Gr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Gr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Gr(1));return r(g6)(e,t)}let n=e,s=t,l=new Map,c=l,d=0,f=!1;function m(){c===l&&(c=new Map,l.forEach((j,w)=>{c.set(w,j)}))}function x(){if(f)throw new Error(Gr(3));return s}function h(j){if(typeof j!="function")throw new Error(Gr(4));if(f)throw new Error(Gr(5));let w=!0;m();const A=d++;return c.set(A,j),function(){if(w){if(f)throw new Error(Gr(6));w=!1,m(),c.delete(A),l=null}}}function v(j){if(!Ay(j))throw new Error(Gr(7));if(typeof j.type>"u")throw new Error(Gr(8));if(typeof j.type!="string")throw new Error(Gr(17));if(f)throw new Error(Gr(9));try{f=!0,s=n(s,j)}finally{f=!1}return(l=c).forEach(A=>{A()}),j}function g(j){if(typeof j!="function")throw new Error(Gr(10));n=j,v({type:n0.REPLACE})}function y(){const j=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Gr(11));function A(){const D=w;D.next&&D.next(x())}return A(),{unsubscribe:j(A)}},[K_](){return this}}}return v({type:n0.INIT}),{dispatch:v,subscribe:h,getState:x,replaceReducer:g,[K_]:y}}function A$(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:n0.INIT})>"u")throw new Error(Gr(12));if(typeof r(void 0,{type:n0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Gr(13))})}function v6(e){const t=Object.keys(e),r={};for(let l=0;l<t.length;l++){const c=t[l];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let s;try{A$(r)}catch(l){s=l}return function(c={},d){if(s)throw s;let f=!1;const m={};for(let x=0;x<n.length;x++){const h=n[x],v=r[h],g=c[h],y=v(g,d);if(typeof y>"u")throw d&&d.type,new Error(Gr(14));m[h]=y,f=f||y!==g}return f=f||n.length!==Object.keys(c).length,f?m:c}}function s0(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function C$(...e){return t=>(r,n)=>{const s=t(r,n);let l=()=>{throw new Error(Gr(15))};const c={getState:s.getState,dispatch:(f,...m)=>l(f,...m)},d=e.map(f=>f(c));return l=s0(...d)(s.dispatch),{...s,dispatch:l}}}function b6(e){return Ay(e)&&"type"in e&&typeof e.type=="string"}var y6=Symbol.for("immer-nothing"),Y_=Symbol.for("immer-draftable"),sn=Symbol.for("immer-state");function Vn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ec=Object.getPrototypeOf;function Fl(e){return!!e&&!!e[sn]}function Vs(e){return e?j6(e)||Array.isArray(e)||!!e[Y_]||!!e.constructor?.[Y_]||Nu(e)||sx(e):!1}var T$=Object.prototype.constructor.toString();function j6(e){if(!e||typeof e!="object")return!1;const t=ec(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===T$}function i0(e,t){nx(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function nx(e){const t=e[sn];return t?t.type_:Array.isArray(e)?1:Nu(e)?2:sx(e)?3:0}function Qv(e,t){return nx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function N6(e,t,r){const n=nx(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function D$(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Nu(e){return e instanceof Map}function sx(e){return e instanceof Set}function gl(e){return e.copy_||e.base_}function Jv(e,t){if(Nu(e))return new Map(e);if(sx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=j6(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[sn];let s=Reflect.ownKeys(n);for(let l=0;l<s.length;l++){const c=s[l],d=n[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(n[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[c]})}return Object.create(ec(e),n)}else{const n=ec(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function Cy(e,t=!1){return ix(e)||Fl(e)||!Vs(e)||(nx(e)>1&&Object.defineProperties(e,{set:{value:vm},add:{value:vm},clear:{value:vm},delete:{value:vm}}),Object.freeze(e),t&&Object.values(e).forEach(r=>Cy(r,!0))),e}function vm(){Vn(2)}function ix(e){return Object.isFrozen(e)}var O$={};function Ll(e){const t=O$[e];return t||Vn(0,e),t}var tu;function w6(){return tu}function k$(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function W_(e,t){t&&(Ll("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function eb(e){tb(e),e.drafts_.forEach(P$),e.drafts_=null}function tb(e){e===tu&&(tu=e.parent_)}function X_(e){return tu=k$(tu,e)}function P$(e){const t=e[sn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Z_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[sn].modified_&&(eb(t),Vn(4)),Vs(e)&&(e=l0(t,e),t.parent_||o0(t,e)),t.patches_&&Ll("Patches").generateReplacementPatches_(r[sn].base_,e,t.patches_,t.inversePatches_)):e=l0(t,r,[]),eb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==y6?e:void 0}function l0(e,t,r){if(ix(t))return t;const n=t[sn];if(!n)return i0(t,(s,l)=>Q_(e,n,t,s,l,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return o0(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let l=s,c=!1;n.type_===3&&(l=new Set(s),s.clear(),c=!0),i0(l,(d,f)=>Q_(e,n,s,d,f,r,c)),o0(e,s,!1),r&&e.patches_&&Ll("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Q_(e,t,r,n,s,l,c){if(Fl(s)){const d=l&&t&&t.type_!==3&&!Qv(t.assigned_,n)?l.concat(n):void 0,f=l0(e,s,d);if(N6(r,n,f),Fl(f))e.canAutoFreeze_=!1;else return}else c&&r.add(s);if(Vs(s)&&!ix(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;l0(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Nu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&o0(e,s)}}function o0(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Cy(t,r)}function M$(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:w6(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,l=Ty;r&&(s=[n],l=ru);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return n.draft_=d,n.revoke_=c,d}var Ty={get(e,t){if(t===sn)return e;const r=gl(e);if(!Qv(r,t))return F$(e,r,t);const n=r[t];return e.finalized_||!Vs(n)?n:n===ev(e.base_,t)?(tv(e),e.copy_[t]=ab(n,e)):n},has(e,t){return t in gl(e)},ownKeys(e){return Reflect.ownKeys(gl(e))},set(e,t,r){const n=_6(gl(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=ev(gl(e),t),l=s?.[sn];if(l&&l.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(D$(r,s)&&(r!==void 0||Qv(e.base_,t)))return!0;tv(e),rb(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ev(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,tv(e),rb(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=gl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Vn(11)},getPrototypeOf(e){return ec(e.base_)},setPrototypeOf(){Vn(12)}},ru={};i0(Ty,(e,t)=>{ru[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ru.deleteProperty=function(e,t){return ru.set.call(this,e,t,void 0)};ru.set=function(e,t,r){return Ty.set.call(this,e[0],t,r,e[0])};function ev(e,t){const r=e[sn];return(r?gl(r):e)[t]}function F$(e,t,r){const n=_6(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function _6(e,t){if(!(t in e))return;let r=ec(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ec(r)}}function rb(e){e.modified_||(e.modified_=!0,e.parent_&&rb(e.parent_))}function tv(e){e.copy_||(e.copy_=Jv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var L$=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const l=r;r=t;const c=this;return function(f=l,...m){return c.produce(f,x=>r.call(this,x,...m))}}typeof r!="function"&&Vn(6),n!==void 0&&typeof n!="function"&&Vn(7);let s;if(Vs(t)){const l=X_(this),c=ab(t,void 0);let d=!0;try{s=r(c),d=!1}finally{d?eb(l):tb(l)}return W_(l,n),Z_(s,l)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===y6&&(s=void 0),this.autoFreeze_&&Cy(s,!0),n){const l=[],c=[];Ll("Patches").generateReplacementPatches_(t,s,l,c),n(l,c)}return s}else Vn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...d)=>this.produceWithPatches(c,f=>t(f,...d));let n,s;return[this.produce(t,r,(c,d)=>{n=c,s=d}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Vs(e)||Vn(8),Fl(e)&&(e=Is(e));const t=X_(this),r=ab(e,void 0);return r[sn].isManual_=!0,tb(t),r}finishDraft(e,t){const r=e&&e[sn];(!r||!r.isManual_)&&Vn(9);const{scope_:n}=r;return W_(n,t),Z_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Ll("Patches").applyPatches_;return Fl(e)?n(e,t):this.produce(e,s=>n(s,t))}};function ab(e,t){const r=Nu(e)?Ll("MapSet").proxyMap_(e,t):sx(e)?Ll("MapSet").proxySet_(e,t):M$(e,t);return(t?t.scope_:w6()).drafts_.push(r),r}function Is(e){return Fl(e)||Vn(10,e),E6(e)}function E6(e){if(!Vs(e)||ix(e))return e;const t=e[sn];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Jv(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Jv(e,!0);return i0(r,(n,s)=>{N6(r,n,E6(s))}),t&&(t.finalized_=!1),r}var R$=new L$,S6=R$.produce;function A6(e){return({dispatch:r,getState:n})=>s=>l=>typeof l=="function"?l(r,n,e):s(l)}var I$=A6(),B$=A6,z$=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?s0:s0.apply(null,arguments)};function kn(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(rn(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>b6(n)&&n.type===e,r}var C6=class Pd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Pd.prototype)}static get[Symbol.species](){return Pd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Pd(...t[0].concat(this)):new Pd(...t.concat(this))}};function J_(e){return Vs(e)?S6(e,()=>{}):e}function bm(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function U$(e){return typeof e=="boolean"}var $$=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=t??{};let c=new C6;return r&&(U$(r)?c.push(I$):c.push(B$(r.extraArgument))),c},T6="RTK_autoBatch",va=()=>e=>({payload:e,meta:{[T6]:!0}}),eE=e=>t=>{setTimeout(t,e)},D6=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,l=!1,c=!1;const d=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:eE(10):e.type==="callback"?e.queueNotification:eE(e.timeout),m=()=>{c=!1,l&&(l=!1,d.forEach(x=>x()))};return Object.assign({},n,{subscribe(x){const h=()=>s&&x(),v=n.subscribe(h);return d.add(x),()=>{v(),d.delete(x)}},dispatch(x){try{return s=!x?.meta?.[T6],l=!s,l&&(c||(c=!0,f(m))),n.dispatch(x)}finally{s=!0}}})},q$=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new C6(e);return n&&s.push(D6(typeof n=="object"?n:void 0)),s};function H$(e){const t=$$(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=e||{};let d;if(typeof r=="function")d=r;else if(Ay(r))d=v6(r);else throw new Error(rn(1));let f;typeof n=="function"?f=n(t):f=t();let m=s0;s&&(m=z$({trace:!1,...typeof s=="object"&&s}));const x=C$(...f),h=q$(x);let v=typeof c=="function"?c(h):h();const g=m(...v);return g6(d,l,g)}function O6(e){const t={},r=[];let n;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(rn(28));if(d in t)throw new Error(rn(29));return t[d]=c,s},addAsyncThunk(l,c){return c.pending&&(t[l.pending.type]=c.pending),c.rejected&&(t[l.rejected.type]=c.rejected),c.fulfilled&&(t[l.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return r.push({matcher:l,reducer:c}),s},addDefaultCase(l){return n=l,s}};return e(s),[t,r,n]}function V$(e){return typeof e=="function"}function G$(e,t){let[r,n,s]=O6(t),l;if(V$(e))l=()=>J_(e());else{const d=J_(e);l=()=>d}function c(d=l(),f){let m=[r[f.type],...n.filter(({matcher:x})=>x(f)).map(({reducer:x})=>x)];return m.filter(x=>!!x).length===0&&(m=[s]),m.reduce((x,h)=>{if(h)if(Fl(x)){const g=h(x,f);return g===void 0?x:g}else{if(Vs(x))return S6(x,v=>h(v,f));{const v=h(x,f);if(v===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return x},d)}return c.getInitialState=l,c}var K$="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Y$=(e=21)=>{let t="",r=e;for(;r--;)t+=K$[Math.random()*64|0];return t},W$=Symbol.for("rtk-slice-createasyncthunk");function X$(e,t){return`${e}/${t}`}function Z$({creators:e}={}){const t=e?.asyncThunk?.[W$];return function(n){const{name:s,reducerPath:l=s}=n;if(!s)throw new Error(rn(11));const c=(typeof n.reducers=="function"?n.reducers(J$()):n.reducers)||{},d=Object.keys(c),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(S,D){const T=typeof S=="string"?S:S.type;if(!T)throw new Error(rn(12));if(T in f.sliceCaseReducersByType)throw new Error(rn(13));return f.sliceCaseReducersByType[T]=D,m},addMatcher(S,D){return f.sliceMatchers.push({matcher:S,reducer:D}),m},exposeAction(S,D){return f.actionCreators[S]=D,m},exposeCaseReducer(S,D){return f.sliceCaseReducersByName[S]=D,m}};d.forEach(S=>{const D=c[S],T={reducerName:S,type:X$(s,S),createNotation:typeof n.reducers=="function"};tq(D)?aq(T,D,m,t):eq(T,D,m)});function x(){const[S={},D=[],T=void 0]=typeof n.extraReducers=="function"?O6(n.extraReducers):[n.extraReducers],k={...S,...f.sliceCaseReducersByType};return G$(n.initialState,C=>{for(let M in k)C.addCase(M,k[M]);for(let M of f.sliceMatchers)C.addMatcher(M.matcher,M.reducer);for(let M of D)C.addMatcher(M.matcher,M.reducer);T&&C.addDefaultCase(T)})}const h=S=>S,v=new Map,g=new WeakMap;let y;function b(S,D){return y||(y=x()),y(S,D)}function j(){return y||(y=x()),y.getInitialState()}function w(S,D=!1){function T(C){let M=C[S];return typeof M>"u"&&D&&(M=bm(g,T,j)),M}function k(C=h){const M=bm(v,D,()=>new WeakMap);return bm(M,C,()=>{const I={};for(const[R,L]of Object.entries(n.selectors??{}))I[R]=Q$(L,C,()=>bm(g,C,j),D);return I})}return{reducerPath:S,getSelectors:k,get selectors(){return k(T)},selectSlice:T}}const A={name:s,reducer:b,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:j,...w(l),injectInto(S,{reducerPath:D,...T}={}){const k=D??l;return S.inject({reducerPath:k,reducer:b},T),{...A,...w(k,!0)}}};return A}}function Q$(e,t,r,n){function s(l,...c){let d=t(l);return typeof d>"u"&&n&&(d=r()),e(d,...c)}return s.unwrapped=e,s}var on=Z$();function J$(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function eq({type:e,reducerName:t,createNotation:r},n,s){let l,c;if("reducer"in n){if(r&&!rq(n))throw new Error(rn(17));l=n.reducer,c=n.prepare}else l=n;s.addCase(e,l).exposeCaseReducer(t,l).exposeAction(t,c?kn(e,c):kn(e))}function tq(e){return e._reducerDefinitionType==="asyncThunk"}function rq(e){return e._reducerDefinitionType==="reducerWithPrepare"}function aq({type:e,reducerName:t},r,n,s){if(!s)throw new Error(rn(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:f,settled:m,options:x}=r,h=s(e,l,x);n.exposeAction(t,h),c&&n.addCase(h.fulfilled,c),d&&n.addCase(h.pending,d),f&&n.addCase(h.rejected,f),m&&n.addMatcher(h.settled,m),n.exposeCaseReducer(t,{fulfilled:c||ym,pending:d||ym,rejected:f||ym,settled:m||ym})}function ym(){}var nq="task",k6="listener",P6="completed",Dy="cancelled",sq=`task-${Dy}`,iq=`task-${P6}`,nb=`${k6}-${Dy}`,lq=`${k6}-${P6}`,lx=class{constructor(e){this.code=e,this.message=`${nq} ${Dy} (reason: ${e})`}name="TaskAbortError";message},Oy=(e,t)=>{if(typeof e!="function")throw new TypeError(rn(32))},c0=()=>{},M6=(e,t=c0)=>(e.catch(t),e),F6=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),El=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Sl=e=>{if(e.aborted){const{reason:t}=e;throw new lx(t)}};function L6(e,t){let r=c0;return new Promise((n,s)=>{const l=()=>s(new lx(e.reason));if(e.aborted){l();return}r=F6(e,l),t.finally(()=>r()).then(n,s)}).finally(()=>{r=c0})}var oq=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof lx?"cancelled":"rejected",error:r}}finally{t?.()}},d0=e=>t=>M6(L6(e,t).then(r=>(Sl(e),r))),R6=e=>{const t=d0(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ko}=Object,tE={},ox="listenerMiddleware",cq=(e,t)=>{const r=n=>F6(e,()=>El(n,e.reason));return(n,s)=>{Oy(n);const l=new AbortController;r(l);const c=oq(async()=>{Sl(e),Sl(l.signal);const d=await n({pause:d0(l.signal),delay:R6(l.signal),signal:l.signal});return Sl(l.signal),d},()=>El(l,iq));return s?.autoJoin&&t.push(c.catch(c0)),{result:d0(e)(c),cancel(){El(l,sq)}}}},dq=(e,t)=>{const r=async(n,s)=>{Sl(t);let l=()=>{};const d=[new Promise((f,m)=>{let x=e({predicate:n,effect:(h,v)=>{v.unsubscribe(),f([h,v.getState(),v.getOriginalState()])}});l=()=>{x(),m()}})];s!=null&&d.push(new Promise(f=>setTimeout(f,s,null)));try{const f=await L6(t,Promise.race(d));return Sl(t),f}finally{l()}};return(n,s)=>M6(r(n,s))},I6=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:l}=e;if(t)s=kn(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(rn(21));return Oy(l),{predicate:s,type:t,effect:l}},B6=Ko(e=>{const{type:t,predicate:r,effect:n}=I6(e);return{id:Y$(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(rn(22))}}},{withTypes:()=>B6}),rE=(e,t)=>{const{type:r,effect:n,predicate:s}=I6(t);return Array.from(e.values()).find(l=>(typeof r=="string"?l.type===r:l.predicate===s)&&l.effect===n)},sb=e=>{e.pending.forEach(t=>{El(t,nb)})},uq=(e,t)=>()=>{for(const r of t.keys())sb(r);e.clear()},aE=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},z6=Ko(kn(`${ox}/add`),{withTypes:()=>z6}),fq=kn(`${ox}/removeAll`),U6=Ko(kn(`${ox}/remove`),{withTypes:()=>U6}),mq=(...e)=>{console.error(`${ox}/error`,...e)},wu=(e={})=>{const t=new Map,r=new Map,n=g=>{const y=r.get(g)??0;r.set(g,y+1)},s=g=>{const y=r.get(g)??1;y===1?r.delete(g):r.set(g,y-1)},{extra:l,onError:c=mq}=e;Oy(c);const d=g=>(g.unsubscribe=()=>t.delete(g.id),t.set(g.id,g),y=>{g.unsubscribe(),y?.cancelActive&&sb(g)}),f=g=>{const y=rE(t,g)??B6(g);return d(y)};Ko(f,{withTypes:()=>f});const m=g=>{const y=rE(t,g);return y&&(y.unsubscribe(),g.cancelActive&&sb(y)),!!y};Ko(m,{withTypes:()=>m});const x=async(g,y,b,j)=>{const w=new AbortController,A=dq(f,w.signal),S=[];try{g.pending.add(w),n(g),await Promise.resolve(g.effect(y,Ko({},b,{getOriginalState:j,condition:(D,T)=>A(D,T).then(Boolean),take:A,delay:R6(w.signal),pause:d0(w.signal),extra:l,signal:w.signal,fork:cq(w.signal,S),unsubscribe:g.unsubscribe,subscribe:()=>{t.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((D,T,k)=>{D!==w&&(El(D,nb),k.delete(D))})},cancel:()=>{El(w,nb),g.pending.delete(w)},throwIfCancelled:()=>{Sl(w.signal)}})))}catch(D){D instanceof lx||aE(c,D,{raisedBy:"effect"})}finally{await Promise.all(S),El(w,lq),s(g),g.pending.delete(w)}},h=uq(t,r);return{middleware:g=>y=>b=>{if(!b6(b))return y(b);if(z6.match(b))return f(b.payload);if(fq.match(b)){h();return}if(U6.match(b))return m(b.payload);let j=g.getState();const w=()=>{if(j===tE)throw new Error(rn(23));return j};let A;try{if(A=y(b),t.size>0){const S=g.getState(),D=Array.from(t.values());for(const T of D){let k=!1;try{k=T.predicate(b,S,j)}catch(C){k=!1,aE(c,C,{raisedBy:"predicate"})}k&&x(T,b,g,w)}}}finally{j=tE}return A},startListening:f,stopListening:m,clearListeners:h}};function rn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var xq={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},$6=on({name:"chartLayout",initialState:xq,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,l;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(l=t.payload.left)!==null&&l!==void 0?l:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:hq,setLayout:pq,setChartSize:gq,setScale:vq}=$6.actions,bq=$6.reducer;function nE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nE(Object(r),!0).forEach(function(n){yq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yq(e,t,r){return(t=jq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jq(e){var t=Nq(e,"string");return typeof t=="symbol"?t:t+""}function Nq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u0=Math.PI/180,wq=e=>e*180/Math.PI,mr=(e,t,r,n)=>({x:e+Math.cos(-u0*n)*r,y:t+Math.sin(-u0*n)*r}),q6=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},_q=(e,t)=>{var{x:r,y:n}=e,{x:s,y:l}=t;return Math.sqrt((r-s)**2+(n-l)**2)},Eq=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:l}=t,c=_q({x:r,y:n},{x:s,y:l});if(c<=0)return{radius:c,angle:0};var d=(r-s)/c,f=Math.acos(d);return n>l&&(f=2*Math.PI-f),{radius:c,angle:wq(f),angleInRadian:f}},Sq=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),l=Math.min(n,s);return{startAngle:t-l*360,endAngle:r-l*360}},Aq=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),l=Math.floor(n/360),c=Math.min(s,l);return e+c*360},Cq=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:l}=Eq({x:r,y:n},t),{innerRadius:c,outerRadius:d}=t;if(s<c||s>d||s===0)return null;var{startAngle:f,endAngle:m}=Sq(t),x=l,h;if(f<=m){for(;x>m;)x-=360;for(;x<f;)x+=360;h=x>=f&&x<=m}else{for(;x>f;)x-=360;for(;x<m;)x+=360;h=x>=m&&x<=f}return h?sE(sE({},t),{},{radius:s,angle:Aq(x,t)}):null};function H6(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function iE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(r),!0).forEach(function(n){Tq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tq(e,t,r){return(t=Dq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dq(e){var t=Oq(e,"string");return typeof t=="symbol"?t:t+""}function Oq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function It(e,t,r){return Gt(e)||Gt(t)?r:us(t)?Ml(e,t,r):typeof t=="function"?t(e):r}var kq=(e,t,r,n,s)=>{var l,c=-1,d=(l=t?.length)!==null&&l!==void 0?l:0;if(d<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var f=0;f<d;f++){var m=f>0?r[f-1].coordinate:r[d-1].coordinate,x=r[f].coordinate,h=f>=d-1?r[0].coordinate:r[f+1].coordinate,v=void 0;if(Rr(x-m)!==Rr(h-x)){var g=[];if(Rr(h-x)===Rr(s[1]-s[0])){v=h;var y=x+s[1]-s[0];g[0]=Math.min(y,(y+m)/2),g[1]=Math.max(y,(y+m)/2)}else{v=m;var b=h+s[1]-s[0];g[0]=Math.min(x,(b+x)/2),g[1]=Math.max(x,(b+x)/2)}var j=[Math.min(x,(v+x)/2),Math.max(x,(v+x)/2)];if(e>j[0]&&e<=j[1]||e>=g[0]&&e<=g[1]){({index:c}=r[f]);break}}else{var w=Math.min(m,h),A=Math.max(m,h);if(e>(w+x)/2&&e<=(A+x)/2){({index:c}=r[f]);break}}}else if(t){for(var S=0;S<d;S++)if(S===0&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S>0&&S<d-1&&e>(t[S].coordinate+t[S-1].coordinate)/2&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S===d-1&&e>(t[S].coordinate+t[S-1].coordinate)/2){({index:c}=t[S]);break}}return c},Pq=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:l,verticalAlign:c,layout:d}=t;if((d==="vertical"||d==="horizontal"&&c==="middle")&&l!=="center"&&Ge(e[l]))return Sn(Sn({},e),{},{[l]:e[l]+(n||0)});if((d==="horizontal"||d==="vertical"&&l==="center")&&c!=="middle"&&Ge(e[c]))return Sn(Sn({},e),{},{[c]:e[c]+(s||0)})}return e},qi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",V6=(e,t,r,n)=>{if(n)return e.map(d=>d.coordinate);var s,l,c=e.map(d=>(d.coordinate===t&&(s=!0),d.coordinate===r&&(l=!0),d.coordinate));return s||c.push(t),l||c.push(r),c},G6=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:l,scale:c,realScaleType:d,isCategorical:f,categoricalDomain:m,tickCount:x,ticks:h,niceTicks:v,axisType:g}=e;if(!c)return null;var y=d==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,b=s==="category"&&c.bandwidth?c.bandwidth()/y:0;if(b=g==="angleAxis"&&l&&l.length>=2?Rr(l[0]-l[1])*2*b:b,h||v){var j=(h||v||[]).map((w,A)=>{var S=n?n.indexOf(w):w;return{coordinate:c(S)+b,value:w,offset:b,index:A}});return j.filter(w=>!On(w.coordinate))}return f&&m?m.map((w,A)=>({coordinate:c(w)+b,value:w,index:A,offset:b})):c.ticks&&x!=null?c.ticks(x).map((w,A)=>({coordinate:c(w)+b,value:w,offset:b,index:A})):c.domain().map((w,A)=>({coordinate:c(w)+b,value:n?n[w]:w,index:A,offset:b}))},lE=1e-4,Mq=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-lE,l=Math.max(n[0],n[1])+lE,c=e(t[0]),d=e(t[r-1]);(c<s||c>l||d<s||d>l)&&e.domain([t[0],t[r-1]])}},Fq=(e,t)=>{if(!t||t.length!==2||!Ge(t[0])||!Ge(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Ge(e[0])||e[0]<r)&&(s[0]=r),(!Ge(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},Lq=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,l=0,c=0;c<t;++c){var d=On(e[c][r][1])?e[c][r][0]:e[c][r][1];d>=0?(e[c][r][0]=s,e[c][r][1]=s+d,s=e[c][r][1]):(e[c][r][0]=l,e[c][r][1]=l+d,l=e[c][r][1])}},Rq=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,l=0;l<t;++l){var c=On(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=s,e[l][r][1]=s+c,s=e[l][r][1]):(e[l][r][0]=0,e[l][r][1]=0)}},Iq={sign:Lq,expand:fU,none:Jo,silhouette:mU,wiggle:xU,positive:Rq},Bq=(e,t,r)=>{var n=Iq[r],s=uU().keys(t).value((l,c)=>+It(l,c,0)).order(Xv).offset(n);return s(e)};function zq(e){return e==null?void 0:String(e)}function oE(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:l,dataKey:c}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Gt(s[t.dataKey])){var d=r6(r,"value",s[t.dataKey]);if(d)return d.coordinate+n/2}return r[l]?r[l].coordinate+n/2:null}var f=It(s,Gt(c)?t.dataKey:c);return Gt(f)?null:t.scale(f)}var cE=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:l,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var d=It(l,t.dataKey,t.scale.domain()[c]);return Gt(d)?null:t.scale(d)-s/2+n},Uq=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},$q=e=>{var t=e.flat(2).filter(Ge);return[Math.min(...t),Math.max(...t)]},qq=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Hq=(e,t,r)=>{if(e!=null)return qq(Object.keys(e).reduce((n,s)=>{var l=e[s],{stackedData:c}=l,d=c.reduce((f,m)=>{var x=H6(m,t,r),h=$q(x);return[Math.min(f[0],h[0]),Math.max(f[1],h[1])]},[1/0,-1/0]);return[Math.min(d[0],n[0]),Math.max(d[1],n[1])]},[1/0,-1/0]))},dE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,au=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=ax(t,x=>x.coordinate),l=1/0,c=1,d=s.length;c<d;c++){var f=s[c],m=s[c-1];l=Math.min((f.coordinate||0)-(m.coordinate||0),l)}return l===1/0?0:l}return r?void 0:0};function fE(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:l}=e;return Sn(Sn({},t),{},{dataKey:r,payload:n,value:s,name:l})}function uc(e,t){if(e)return String(e);if(typeof t=="string")return t}function Vq(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var l=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return l?{x:e,y:t}:null}return n?Cq({x:e,y:t},n):null}var Gq=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var l=s.coordinate,{radius:c}=n;return Sn(Sn(Sn({},n),mr(n.cx,n.cy,c,l)),{},{angle:l,radius:c})}var d=s.coordinate,{angle:f}=n;return Sn(Sn(Sn({},n),mr(n.cx,n.cy,d,f)),{},{angle:f,radius:d})}return{x:0,y:0}},Kq=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Zs=e=>e.layout.width,Qs=e=>e.layout.height,Yq=e=>e.layout.scale,K6=e=>e.layout.margin,cx=ge(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),dx=ge(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Y6="data-recharts-item-index",W6="data-recharts-item-data-key",_u=60;function mE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(r),!0).forEach(function(n){Wq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wq(e,t,r){return(t=Xq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xq(e){var t=Zq(e,"string");return typeof t=="symbol"?t:t+""}function Zq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qq=e=>e.brush.height;function Jq(e){var t=dx(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:_u;return r+s}return r},0)}function eH(e){var t=dx(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:_u;return r+s}return r},0)}function tH(e){var t=cx(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function rH(e){var t=cx(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var _r=ge([Zs,Qs,K6,Qq,Jq,eH,tH,rH,p6,N$],(e,t,r,n,s,l,c,d,f,m)=>{var x={left:(r.left||0)+s,right:(r.right||0)+l},h={top:(r.top||0)+c,bottom:(r.bottom||0)+d},v=jm(jm({},h),x),g=v.bottom;v.bottom+=n,v=Pq(v,f,m);var y=e-v.left-v.right,b=t-v.top-v.bottom;return jm(jm({brushBottom:g},v),{},{width:Math.max(y,0),height:Math.max(b,0)})}),aH=ge(_r,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ky=ge(Zs,Qs,(e,t)=>({x:0,y:0,width:e,height:t})),nH=_.createContext(null),Aa=()=>_.useContext(nH)!=null,ux=e=>e.brush,fx=ge([ux,_r,K6],(e,t,r)=>({height:e.height,x:Ge(e.x)?e.x:t.left,y:Ge(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Ge(e.width)?e.width:t.width})),rv={},av={},nv={},xE;function sH(){return xE||(xE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:l}={}){let c,d=null;const f=l!=null&&l.includes("leading"),m=l==null||l.includes("trailing"),x=()=>{d!==null&&(r.apply(c,d),c=void 0,d=null)},h=()=>{m&&x(),b()};let v=null;const g=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,h()},n)},y=()=>{v!==null&&(clearTimeout(v),v=null)},b=()=>{y(),c=void 0,d=null},j=()=>{x()},w=function(...A){if(s?.aborted)return;c=this,d=A;const S=v==null;g(),f&&S&&x()};return w.schedule=g,w.cancel=b,w.flush=j,s?.addEventListener("abort",b,{once:!0}),w}e.debounce=t}(nv)),nv}var hE;function iH(){return hE||(hE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sH();function r(n,s=0,l={}){typeof l!="object"&&(l={});const{leading:c=!1,trailing:d=!0,maxWait:f}=l,m=Array(2);c&&(m[0]="leading"),d&&(m[1]="trailing");let x,h=null;const v=t.debounce(function(...b){x=n.apply(this,b),h=null},s,{edges:m}),g=function(...b){return f!=null&&(h===null&&(h=Date.now()),Date.now()-h>=f)?(x=n.apply(this,b),h=Date.now(),v.cancel(),v.schedule(),x):(v.apply(this,b),x)},y=()=>(v.flush(),x);return g.cancel=v.cancel,g.flush=y,g}e.debounce=r}(av)),av}var pE;function lH(){return pE||(pE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iH();function r(n,s=0,l={}){const{leading:c=!0,trailing:d=!0}=l;return t.debounce(n,s,{leading:c,maxWait:s,trailing:d})}e.throttle=r}(rv)),rv}var sv,gE;function oH(){return gE||(gE=1,sv=lH().throttle),sv}var cH=oH();const dH=Ws(cH);var f0=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),l=2;l<n;l++)s[l-2]=arguments[l]},X6=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:l,maxHeight:c}=r,d=Hs(n)?e:Number(n),f=Hs(s)?t:Number(s);return l&&l>0&&(d?f=d/l:f&&(d=f*l),c&&f>c&&(f=c)),{calculatedWidth:d,calculatedHeight:f}},uH={width:0,height:0,overflow:"visible"},fH={width:0,overflowX:"visible"},mH={height:0,overflowY:"visible"},xH={},hH=e=>{var{width:t,height:r}=e,n=Hs(t),s=Hs(r);return n&&s?uH:n?fH:s?mH:xH};function pH(e){var{width:t,height:r,aspect:n}=e,s=t,l=r;return s===void 0&&l===void 0?(s="100%",l="100%"):s===void 0?s=n&&n>0?void 0:"100%":l===void 0&&(l=n&&n>0?void 0:"100%"),{width:s,height:l}}function fa(e){return Number.isFinite(e)}function tc(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ib(){return ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ib.apply(null,arguments)}function vE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vE(Object(r),!0).forEach(function(n){gH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gH(e,t,r){return(t=vH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vH(e){var t=bH(e,"string");return typeof t=="symbol"?t:t+""}function bH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z6=_.createContext({width:-1,height:-1});function Q6(e){var{children:t,width:r,height:n}=e,s=_.useMemo(()=>({width:r,height:n}),[r,n]);return r<=0||n<=0?null:_.createElement(Z6.Provider,{value:s},t)}var Py=()=>_.useContext(Z6),yH=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:l,minWidth:c=0,minHeight:d,maxHeight:f,children:m,debounce:x=0,id:h,className:v,onResize:g,style:y={}}=e,b=_.useRef(null),j=_.useRef();j.current=g,_.useImperativeHandle(t,()=>b.current);var[w,A]=_.useState({containerWidth:n.width,containerHeight:n.height}),S=_.useCallback((M,I)=>{A(R=>{var L=Math.round(M),P=Math.round(I);return R.containerWidth===L&&R.containerHeight===P?R:{containerWidth:L,containerHeight:P}})},[]);_.useEffect(()=>{var M=P=>{var O,{width:z,height:V}=P[0].contentRect;S(z,V),(O=j.current)===null||O===void 0||O.call(j,z,V)};x>0&&(M=dH(M,x,{trailing:!0,leading:!1}));var I=new ResizeObserver(M),{width:R,height:L}=b.current.getBoundingClientRect();return S(R,L),I.observe(b.current),()=>{I.disconnect()}},[S,x]);var{containerWidth:D,containerHeight:T}=w;f0(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:k,calculatedHeight:C}=X6(D,T,{width:s,height:l,aspect:r,maxHeight:f});return f0(k>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,C,s,l,c,d,r),_.createElement("div",{id:h?"".concat(h):void 0,className:pt("recharts-responsive-container",v),style:bE(bE({},y),{},{width:s,height:l,minWidth:c,minHeight:d,maxHeight:f}),ref:b},_.createElement("div",{style:hH({width:s,height:l})},_.createElement(Q6,{width:k,height:C},m)))}),iv=_.forwardRef((e,t)=>{var r=Py();if(tc(r.width)&&tc(r.height))return e.children;var{width:n,height:s}=pH({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:l,calculatedHeight:c}=X6(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return Ge(l)&&Ge(c)?_.createElement(Q6,{width:l,height:c},e.children):_.createElement(yH,ib({},e,{width:n,height:s,ref:t}))}),mx=()=>{var e,t=Aa(),r=He(aH),n=He(fx),s=(e=He(ux))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},jH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},J6=()=>{var e;return(e=He(_r))!==null&&e!==void 0?e:jH},eT=()=>He(Zs),tT=()=>He(Qs),ct=e=>e.layout.layoutType,xx=()=>He(ct),hx=e=>{var t=ar(),r=Aa(),{width:n,height:s}=e,l=Py(),c=n,d=s;return l&&(c=l.width>0?l.width:n,d=l.height>0?l.height:s),_.useEffect(()=>{!r&&tc(c)&&tc(d)&&t(gq({width:c,height:d}))},[t,r,c,d]),null},NH={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},rT=on({name:"legend",initialState:NH,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:va()},removeLegendPayload:{reducer(e,t){var r=Is(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:va()}}}),{setLegendSize:vne,setLegendSettings:bne,addLegendPayload:aT,removeLegendPayload:nT}=rT.actions,wH=rT.reducer;function lb(){return lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lb.apply(null,arguments)}function yE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(r),!0).forEach(function(n){_H(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _H(e,t,r){return(t=EH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EH(e){var t=SH(e,"string");return typeof t=="symbol"?t:t+""}function SH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AH(e){return Array.isArray(e)&&us(e[0])&&us(e[1])?e.join(" ~ "):e}var CH=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:l,formatter:c,itemSorter:d,wrapperClassName:f,labelClassName:m,label:x,labelFormatter:h,accessibilityLayer:v=!1}=e,g=()=>{if(l&&l.length){var T={padding:0,margin:0},k=(d?ax(l,d):l).map((C,M)=>{if(C.type==="none")return null;var I=C.formatter||c||AH,{value:R,name:L}=C,P=R,O=L;if(I){var z=I(R,L,C,M,l);if(Array.isArray(z))[P,O]=z;else if(z!=null)P=z;else return null}var V=lv({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:V},us(O)?_.createElement("span",{className:"recharts-tooltip-item-name"},O):null,us(O)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},P),_.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:T},k)}return null},y=lv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),b=lv({margin:0},s),j=!Gt(x),w=j?x:"",A=pt("recharts-default-tooltip",f),S=pt("recharts-tooltip-label",m);j&&h&&l!==void 0&&l!==null&&(w=h(x,l));var D=v?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",lb({className:A,style:y},D),_.createElement("p",{className:S,style:b},_.isValidElement(w)?w:"".concat(w)),g())},Nd="recharts-tooltip-wrapper",TH={visibility:"hidden"};function DH(e){var{coordinate:t,translateX:r,translateY:n}=e;return pt(Nd,{["".concat(Nd,"-right")]:Ge(r)&&t&&Ge(t.x)&&r>=t.x,["".concat(Nd,"-left")]:Ge(r)&&t&&Ge(t.x)&&r<t.x,["".concat(Nd,"-bottom")]:Ge(n)&&t&&Ge(t.y)&&n>=t.y,["".concat(Nd,"-top")]:Ge(n)&&t&&Ge(t.y)&&n<t.y})}function jE(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:l,reverseDirection:c,tooltipDimension:d,viewBox:f,viewBoxDimension:m}=e;if(l&&Ge(l[n]))return l[n];var x=r[n]-d-(s>0?s:0),h=r[n]+s;if(t[n])return c[n]?x:h;var v=f[n];if(v==null)return 0;if(c[n]){var g=x,y=v;return g<y?Math.max(h,v):Math.max(x,v)}if(m==null)return 0;var b=h+d,j=v+m;return b>j?Math.max(x,v):Math.max(h,v)}function OH(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function kH(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:l,tooltipBox:c,useTranslate3d:d,viewBox:f}=e,m,x,h;return c.height>0&&c.width>0&&r?(x=jE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:l,tooltipDimension:c.width,viewBox:f,viewBoxDimension:f.width}),h=jE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:l,tooltipDimension:c.height,viewBox:f,viewBoxDimension:f.height}),m=OH({translateX:x,translateY:h,useTranslate3d:d})):m=TH,{cssProperties:m,cssClasses:DH({translateX:x,translateY:h,coordinate:r})}}function NE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(r),!0).forEach(function(n){ob(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ob(e,t,r){return(t=PH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PH(e){var t=MH(e,"string");return typeof t=="symbol"?t:t+""}function MH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class FH extends _.PureComponent{constructor(){super(...arguments),ob(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ob(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,l;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(l=this.props.coordinate)===null||l===void 0?void 0:l.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:l,coordinate:c,hasPayload:d,isAnimationActive:f,offset:m,position:x,reverseDirection:h,useTranslate3d:v,viewBox:g,wrapperStyle:y,lastBoundingBox:b,innerRef:j,hasPortalFromProps:w}=this.props,{cssClasses:A,cssProperties:S}=kH({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:m,position:x,reverseDirection:h,tooltipBox:{height:b.height,width:b.width},useTranslate3d:v,viewBox:g}),D=w?{}:Nm(Nm({transition:f&&t?"transform ".concat(n,"ms ").concat(s):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),T=Nm(Nm({},D),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},y);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:A,style:T,ref:j},l)}}var LH=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Hi={devToolsEnabled:!1,isSsr:LH()},sT=()=>He(e=>e.rootProps.accessibilityLayer);function cb(){return cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cb.apply(null,arguments)}function wE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _E(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(r),!0).forEach(function(n){RH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RH(e,t,r){return(t=IH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IH(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EE={curveBasisClosed:eU,curveBasisOpen:tU,curveBasis:Jz,curveBumpX:Bz,curveBumpY:zz,curveLinearClosed:rU,curveLinear:ex,curveMonotoneX:aU,curveMonotoneY:nU,curveNatural:sU,curveStep:iU,curveStepAfter:oU,curveStepBefore:lU},wm=e=>fa(e.x)&&fa(e.y),wd=e=>e.x,_d=e=>e.y,zH=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(ju(e));return(r==="curveMonotone"||r==="curveBump")&&t?EE["".concat(r).concat(t==="vertical"?"Y":"X")]:EE[r]||ex},UH=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:l=!1}=e,c=zH(t,s),d=l?r.filter(wm):r,f;if(Array.isArray(n)){var m=l?n.filter(h=>wm(h)):n,x=d.map((h,v)=>_E(_E({},h),{},{base:m[v]}));return s==="vertical"?f=hm().y(_d).x1(wd).x0(h=>h.base.x):f=hm().x(wd).y1(_d).y0(h=>h.base.y),f.defined(wm).curve(c),f(x)}return s==="vertical"&&Ge(n)?f=hm().y(_d).x1(wd).x0(n):Ge(n)?f=hm().x(wd).y1(_d).y0(n):f=qC().x(wd).y(_d),f.defined(wm).curve(c),f(d)},My=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var l=r&&r.length?UH(e):n;return _.createElement("path",cb({},nn(e),wy(e),{className:pt("recharts-curve",t),d:l===null?void 0:l,ref:s}))},$H=["x","y","top","left","width","height","className"];function db(){return db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},db.apply(null,arguments)}function SE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(r),!0).forEach(function(n){HH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HH(e,t,r){return(t=VH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VH(e){var t=GH(e,"string");return typeof t=="symbol"?t:t+""}function GH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KH(e,t){if(e==null)return{};var r,n,s=YH(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WH=(e,t,r,n,s,l)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(l,",").concat(t,"h").concat(r),XH=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:l=0,height:c=0,className:d}=e,f=KH(e,$H),m=qH({x:t,y:r,top:n,left:s,width:l,height:c},f);return!Ge(t)||!Ge(r)||!Ge(l)||!Ge(c)||!Ge(n)||!Ge(s)?null:_.createElement("path",db({},Ea(m),{className:pt("recharts-cross",d),d:WH(t,r,l,c,n,s)}))};function ZH(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function AE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(r),!0).forEach(function(n){JH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JH(e,t,r){return(t=eV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eV(e){var t=tV(e,"string");return typeof t=="symbol"?t:t+""}function tV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ra(e,t){var r=QH({},e),n=t,s=Object.keys(t),l=s.reduce((c,d)=>(c[d]===void 0&&n[d]!==void 0&&(c[d]=n[d]),c),r);return l}function rV(){}function aV(e){return e!=null}function CE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(r),!0).forEach(function(n){nV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nV(e,t,r){return(t=sV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sV(e){var t=iV(e,"string");return typeof t=="symbol"?t:t+""}function iV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lV=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),iT=(e,t,r)=>e.map(n=>"".concat(lV(n)," ").concat(t,"ms ").concat(r)).join(","),oV=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),nu=(e,t)=>Object.keys(t).reduce((r,n)=>TE(TE({},r),{},{[n]:e(n,t[n])}),{});function DE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(r),!0).forEach(function(n){cV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cV(e,t,r){return(t=dV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dV(e){var t=uV(e,"string");return typeof t=="symbol"?t:t+""}function uV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m0=(e,t,r)=>e+(t-e)*r,ub=e=>{var{from:t,to:r}=e;return t!==r},lT=(e,t,r)=>{var n=nu((s,l)=>{if(ub(l)){var[c,d]=e(l.from,l.to,l.velocity);return Yr(Yr({},l),{},{from:c,velocity:d})}return l},t);return r<1?nu((s,l)=>ub(l)?Yr(Yr({},l),{},{velocity:m0(l.velocity,n[s].velocity,r),from:m0(l.from,n[s].from,r)}):l,t):lT(e,n,r-1)};function fV(e,t,r,n,s,l){var c,d=n.reduce((v,g)=>Yr(Yr({},v),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),f=()=>nu((v,g)=>g.from,d),m=()=>!Object.values(d).filter(ub).length,x=null,h=v=>{c||(c=v);var g=v-c,y=g/r.dt;d=lT(r,d,y),s(Yr(Yr(Yr({},e),t),f())),c=v,m()||(x=l.setTimeout(h))};return()=>(x=l.setTimeout(h),()=>{x()})}function mV(e,t,r,n,s,l,c){var d=null,f=s.reduce((h,v)=>Yr(Yr({},h),{},{[v]:[e[v],t[v]]}),{}),m,x=h=>{m||(m=h);var v=(h-m)/n,g=nu((b,j)=>m0(...j,r(v)),f);if(l(Yr(Yr(Yr({},e),t),g)),v<1)d=c.setTimeout(x);else{var y=nu((b,j)=>m0(...j,r(1)),f);l(Yr(Yr(Yr({},e),t),y))}};return()=>(d=c.setTimeout(x),()=>{d()})}const xV=(e,t,r,n,s,l)=>{var c=oV(e,t);return r.isStepper===!0?fV(e,t,r,c,s,l):mV(e,t,r,n,c,s,l)};var x0=1e-4,oT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],cT=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),OE=(e,t)=>r=>{var n=oT(e,t);return cT(n,r)},hV=(e,t)=>r=>{var n=oT(e,t),s=[...n.map((l,c)=>l*c).slice(1),0];return cT(s,r)},kE=function(){for(var t,r,n,s,l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];if(c.length===1)switch(c[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var f=c[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([t,n,r,s]=f[1].split(")")[0].split(",").map(y=>parseFloat(y)))}}else c.length===4&&([t,n,r,s]=c);var m=OE(t,r),x=OE(n,s),h=hV(t,r),v=y=>y>1?1:y<0?0:y,g=y=>{for(var b=y>1?1:y,j=b,w=0;w<8;++w){var A=m(j)-b,S=h(j);if(Math.abs(A-b)<x0||S<x0)return x(j);j=v(j-A/S)}return x(j)};return g.isStepper=!1,g},pV=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,l=(c,d,f)=>{var m=-(c-d)*r,x=f*n,h=f+(m-x)*s/1e3,v=f*s/1e3+c;return Math.abs(v-d)<x0&&Math.abs(h)<x0?[d,0]:[v,h]};return l.isStepper=!0,l.dt=s,l},gV=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return kE(e);case"spring":return pV();default:if(e.split("(")[0]==="cubic-bezier")return kE(e)}return typeof e=="function"?e:null};function vV(e){var t,r=()=>null,n=!1,s=null,l=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var d=c,[f,...m]=d;if(typeof f=="number"){s=e.setTimeout(l.bind(null,m),f);return}l(f),s=e.setTimeout(l.bind(null,m));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,s&&(s(),s=null),l(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class bV{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,l=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(l))};return s=requestAnimationFrame(l),()=>{cancelAnimationFrame(s)}}}function yV(){return vV(new bV)}var jV=_.createContext(yV);function NV(e,t){var r=_.useContext(jV);return _.useMemo(()=>t??r(e),[e,t,r])}var wV={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},PE={t:0},ov={t:1};function Eu(e){var t=ra(e,wV),{isActive:r,canBegin:n,duration:s,easing:l,begin:c,onAnimationEnd:d,onAnimationStart:f,children:m}=t,x=NV(t.animationId,t.animationManager),[h,v]=_.useState(r?PE:ov),g=_.useRef(null);return _.useEffect(()=>{r||v(ov)},[r]),_.useEffect(()=>{if(!r||!n)return rV;var y=xV(PE,ov,gV(l),s,v,x.getTimeoutController()),b=()=>{g.current=y()};return x.start([f,c,b,s,d]),()=>{x.stop(),g.current&&g.current(),d()}},[r,n,s,l,c,f,d,x]),m(h.t)}function Su(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef(eu(t)),n=_.useRef(e);return n.current!==e&&(r.current=eu(t),n.current=e),r.current}var _V=["radius"],EV=["radius"];function ME(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(r),!0).forEach(function(n){SV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ME(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SV(e,t,r){return(t=AV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AV(e){var t=CV(e,"string");return typeof t=="symbol"?t:t+""}function CV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h0.apply(null,arguments)}function LE(e,t){if(e==null)return{};var r,n,s=TV(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function TV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RE=(e,t,r,n,s)=>{var l=Math.min(Math.abs(r)/2,Math.abs(n)/2),c=n>=0?1:-1,d=r>=0?1:-1,f=n>=0&&r>=0||n<0&&r<0?1:0,m;if(l>0&&s instanceof Array){for(var x=[0,0,0,0],h=0,v=4;h<v;h++)x[h]=s[h]>l?l:s[h];m="M".concat(e,",").concat(t+c*x[0]),x[0]>0&&(m+="A ".concat(x[0],",").concat(x[0],",0,0,").concat(f,",").concat(e+d*x[0],",").concat(t)),m+="L ".concat(e+r-d*x[1],",").concat(t),x[1]>0&&(m+="A ".concat(x[1],",").concat(x[1],",0,0,").concat(f,`,
        `).concat(e+r,",").concat(t+c*x[1])),m+="L ".concat(e+r,",").concat(t+n-c*x[2]),x[2]>0&&(m+="A ".concat(x[2],",").concat(x[2],",0,0,").concat(f,`,
        `).concat(e+r-d*x[2],",").concat(t+n)),m+="L ".concat(e+d*x[3],",").concat(t+n),x[3]>0&&(m+="A ".concat(x[3],",").concat(x[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(t+n-c*x[3])),m+="Z"}else if(l>0&&s===+s&&s>0){var g=Math.min(l,s);m="M ".concat(e,",").concat(t+c*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(f,",").concat(e+d*g,",").concat(t,`
            L `).concat(e+r-d*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(f,",").concat(e+r,",").concat(t+c*g,`
            L `).concat(e+r,",").concat(t+n-c*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(f,",").concat(e+r-d*g,",").concat(t+n,`
            L `).concat(e+d*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(f,",").concat(e,",").concat(t+n-c*g," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},DV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dT=e=>{var t=ra(e,DV),r=_.useRef(null),[n,s]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var K=r.current.getTotalLength();K&&s(K)}catch{}},[]);var{x:l,y:c,width:d,height:f,radius:m,className:x}=t,{animationEasing:h,animationDuration:v,animationBegin:g,isAnimationActive:y,isUpdateAnimationActive:b}=t,j=_.useRef(d),w=_.useRef(f),A=_.useRef(l),S=_.useRef(c),D=_.useMemo(()=>({x:l,y:c,width:d,height:f,radius:m}),[l,c,d,f,m]),T=Su(D,"rectangle-");if(l!==+l||c!==+c||d!==+d||f!==+f||d===0||f===0)return null;var k=pt("recharts-rectangle",x);if(!b){var C=Ea(t),{radius:M}=C,I=LE(C,_V);return _.createElement("path",h0({},I,{radius:typeof m=="number"?m:void 0,className:k,d:RE(l,c,d,f,m)}))}var R=j.current,L=w.current,P=A.current,O=S.current,z="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),G=iT(["strokeDasharray"],v,typeof h=="string"?h:void 0);return _.createElement(Eu,{animationId:T,key:T,canBegin:n>0,duration:v,easing:h,isActive:b,begin:g},K=>{var ce=er(R,d,K),le=er(L,f,K),ne=er(P,l,K),Z=er(O,c,K);r.current&&(j.current=ce,w.current=le,A.current=ne,S.current=Z);var F;y?K>0?F={transition:G,strokeDasharray:V}:F={strokeDasharray:z}:F={strokeDasharray:V};var U=Ea(t),{radius:Y}=U,Q=LE(U,EV);return _.createElement("path",h0({},Q,{radius:typeof m=="number"?m:void 0,className:k,d:RE(ne,Z,ce,le,m),ref:r,style:FE(FE({},F),t.style)}))})};function uT(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:l}=e,c=mr(t,r,n,s),d=mr(t,r,n,l);return{points:[c,d],cx:t,cy:r,radius:n,startAngle:s,endAngle:l}}function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fb.apply(null,arguments)}var OV=(e,t)=>{var r=Rr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},_m=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:l,isExternal:c,cornerRadius:d,cornerIsExternal:f}=e,m=d*(c?1:-1)+n,x=Math.asin(d/m)/u0,h=f?s:s+l*x,v=mr(t,r,m,h),g=mr(t,r,n,h),y=f?s-l*x:s,b=mr(t,r,m*Math.cos(x*u0),y);return{center:v,circleTangency:g,lineTangency:b,theta:x}},fT=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:c}=e,d=OV(l,c),f=l+d,m=mr(t,r,s,l),x=mr(t,r,s,f),h="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(l>f),`,
    `).concat(x.x,",").concat(x.y,`
  `);if(n>0){var v=mr(t,r,n,l),g=mr(t,r,n,f);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(l<=f),`,
            `).concat(v.x,",").concat(v.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},kV=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:l,forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:m}=e,x=Rr(m-f),{circleTangency:h,lineTangency:v,theta:g}=_m({cx:t,cy:r,radius:s,angle:f,sign:x,cornerRadius:l,cornerIsExternal:d}),{circleTangency:y,lineTangency:b,theta:j}=_m({cx:t,cy:r,radius:s,angle:m,sign:-x,cornerRadius:l,cornerIsExternal:d}),w=d?Math.abs(f-m):Math.abs(f-m)-g-j;if(w<0)return c?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):fT({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:f,endAngle:m});var A="M ".concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(w>180),",").concat(+(x<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(b.x,",").concat(b.y,`
  `);if(n>0){var{circleTangency:S,lineTangency:D,theta:T}=_m({cx:t,cy:r,radius:n,angle:f,sign:x,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),{circleTangency:k,lineTangency:C,theta:M}=_m({cx:t,cy:r,radius:n,angle:m,sign:-x,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),I=d?Math.abs(f-m):Math.abs(f-m)-T-M;if(I<0&&l===0)return"".concat(A,"L").concat(t,",").concat(r,"Z");A+="L".concat(C.x,",").concat(C.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(I>180),",").concat(+(x>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(D.x,",").concat(D.y,"Z")}else A+="L".concat(t,",").concat(r,"Z");return A},PV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},mT=e=>{var t=ra(e,PV),{cx:r,cy:n,innerRadius:s,outerRadius:l,cornerRadius:c,forceCornerRadius:d,cornerIsExternal:f,startAngle:m,endAngle:x,className:h}=t;if(l<s||m===x)return null;var v=pt("recharts-sector",h),g=l-s,y=da(c,g,0,!0),b;return y>0&&Math.abs(m-x)<360?b=kV({cx:r,cy:n,innerRadius:s,outerRadius:l,cornerRadius:Math.min(y,g/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:m,endAngle:x}):b=fT({cx:r,cy:n,innerRadius:s,outerRadius:l,startAngle:m,endAngle:x}),_.createElement("path",fb({},Ea(t),{className:v,d:b}))};function MV(e,t,r){var n,s,l,c;if(e==="horizontal")n=t.x,l=n,s=r.top,c=r.top+r.height;else if(e==="vertical")s=t.y,c=s,n=r.left,l=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:d,cy:f,innerRadius:m,outerRadius:x,angle:h}=t,v=mr(d,f,m,h),g=mr(d,f,x,h);n=v.x,s=v.y,l=g.x,c=g.y}else return uT(t);return[{x:n,y:s},{x:l,y:c}]}var cv={},dv={},uv={},IE;function FV(){return IE||(IE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x6();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(uv)),uv}var BE;function LV(){return BE||(BE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FV();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(dv)),dv}var zE;function RV(){return zE||(zE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h6(),r=LV();function n(s,l,c){c&&typeof c!="number"&&t.isIterateeCall(s,l,c)&&(l=c=void 0),s=r.toFinite(s),l===void 0?(l=s,s=0):l=r.toFinite(l),c=c===void 0?s<l?1:-1:r.toFinite(c);const d=Math.max(Math.ceil((l-s)/(c||1)),0),f=new Array(d);for(let m=0;m<d;m++)f[m]=s,s+=c;return f}e.range=n}(cv)),cv}var fv,UE;function IV(){return UE||(UE=1,fv=RV().range),fv}var BV=IV();const xT=Ws(BV);function Pi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zV(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fy(e){let t,r,n;e.length!==2?(t=Pi,r=(d,f)=>Pi(e(d),f),n=(d,f)=>e(d)-f):(t=e===Pi||e===zV?e:UV,r=e,n=e);function s(d,f,m=0,x=d.length){if(m<x){if(t(f,f)!==0)return x;do{const h=m+x>>>1;r(d[h],f)<0?m=h+1:x=h}while(m<x)}return m}function l(d,f,m=0,x=d.length){if(m<x){if(t(f,f)!==0)return x;do{const h=m+x>>>1;r(d[h],f)<=0?m=h+1:x=h}while(m<x)}return m}function c(d,f,m=0,x=d.length){const h=s(d,f,m,x-1);return h>m&&n(d[h-1],f)>-n(d[h],f)?h-1:h}return{left:s,center:c,right:l}}function UV(){return 0}function hT(e){return e===null?NaN:+e}function*$V(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const qV=Fy(Pi),Au=qV.right;Fy(hT).center;class $E extends Map{constructor(t,r=GV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(qE(this,t))}has(t){return super.has(qE(this,t))}set(t,r){return super.set(HV(this,t),r)}delete(t){return super.delete(VV(this,t))}}function qE({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function HV({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function VV({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function GV(e){return e!==null&&typeof e=="object"?e.valueOf():e}function KV(e=Pi){if(e===Pi)return pT;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function pT(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const YV=Math.sqrt(50),WV=Math.sqrt(10),XV=Math.sqrt(2);function p0(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),l=n/Math.pow(10,s),c=l>=YV?10:l>=WV?5:l>=XV?2:1;let d,f,m;return s<0?(m=Math.pow(10,-s)/c,d=Math.round(e*m),f=Math.round(t*m),d/m<e&&++d,f/m>t&&--f,m=-m):(m=Math.pow(10,s)*c,d=Math.round(e/m),f=Math.round(t/m),d*m<e&&++d,f*m>t&&--f),f<d&&.5<=r&&r<2?p0(e,t,r*2):[d,f,m]}function mb(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,l,c]=n?p0(t,e,r):p0(e,t,r);if(!(l>=s))return[];const d=l-s+1,f=new Array(d);if(n)if(c<0)for(let m=0;m<d;++m)f[m]=(l-m)/-c;else for(let m=0;m<d;++m)f[m]=(l-m)*c;else if(c<0)for(let m=0;m<d;++m)f[m]=(s+m)/-c;else for(let m=0;m<d;++m)f[m]=(s+m)*c;return f}function xb(e,t,r){return t=+t,e=+e,r=+r,p0(e,t,r)[2]}function hb(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?xb(t,e,r):xb(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function HE(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function VE(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function gT(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?pT:KV(s);n>r;){if(n-r>600){const f=n-r+1,m=t-r+1,x=Math.log(f),h=.5*Math.exp(2*x/3),v=.5*Math.sqrt(x*h*(f-h)/f)*(m-f/2<0?-1:1),g=Math.max(r,Math.floor(t-m*h/f+v)),y=Math.min(n,Math.floor(t+(f-m)*h/f+v));gT(e,t,g,y,s)}const l=e[t];let c=r,d=n;for(Ed(e,r,t),s(e[n],l)>0&&Ed(e,r,n);c<d;){for(Ed(e,c,d),++c,--d;s(e[c],l)<0;)++c;for(;s(e[d],l)>0;)--d}s(e[r],l)===0?Ed(e,r,d):(++d,Ed(e,d,n)),d<=t&&(r=d+1),t<=d&&(n=d-1)}return e}function Ed(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function ZV(e,t,r){if(e=Float64Array.from($V(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return VE(e);if(t>=1)return HE(e);var n,s=(n-1)*t,l=Math.floor(s),c=HE(gT(e,l).subarray(0,l+1)),d=VE(e.subarray(l+1));return c+(d-c)*(s-l)}}function QV(e,t,r=hT){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,l=Math.floor(s),c=+r(e[l],l,e),d=+r(e[l+1],l+1,e);return c+(d-c)*(s-l)}}function JV(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,l=new Array(s);++n<s;)l[n]=e+n*r;return l}function Fn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Js(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const pb=Symbol("implicit");function Ly(){var e=new $E,t=[],r=[],n=pb;function s(l){let c=e.get(l);if(c===void 0){if(n!==pb)return n;e.set(l,c=t.push(l)-1)}return r[c%r.length]}return s.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new $E;for(const c of l)e.has(c)||e.set(c,t.push(c)-1);return s},s.range=function(l){return arguments.length?(r=Array.from(l),s):r.slice()},s.unknown=function(l){return arguments.length?(n=l,s):n},s.copy=function(){return Ly(t,r).unknown(n)},Fn.apply(s,arguments),s}function Ry(){var e=Ly().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,l,c,d=!1,f=0,m=0,x=.5;delete e.unknown;function h(){var v=t().length,g=s<n,y=g?s:n,b=g?n:s;l=(b-y)/Math.max(1,v-f+m*2),d&&(l=Math.floor(l)),y+=(b-y-l*(v-f))*x,c=l*(1-f),d&&(y=Math.round(y),c=Math.round(c));var j=JV(v).map(function(w){return y+l*w});return r(g?j.reverse():j)}return e.domain=function(v){return arguments.length?(t(v),h()):t()},e.range=function(v){return arguments.length?([n,s]=v,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(v){return[n,s]=v,n=+n,s=+s,d=!0,h()},e.bandwidth=function(){return c},e.step=function(){return l},e.round=function(v){return arguments.length?(d=!!v,h()):d},e.padding=function(v){return arguments.length?(f=Math.min(1,m=+v),h()):f},e.paddingInner=function(v){return arguments.length?(f=Math.min(1,v),h()):f},e.paddingOuter=function(v){return arguments.length?(m=+v,h()):m},e.align=function(v){return arguments.length?(x=Math.max(0,Math.min(1,v)),h()):x},e.copy=function(){return Ry(t(),[n,s]).round(d).paddingInner(f).paddingOuter(m).align(x)},Fn.apply(h(),arguments)}function vT(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vT(t())},e}function eG(){return vT(Ry.apply(null,arguments).paddingInner(1))}function Iy(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function bT(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Cu(){}var su=.7,g0=1/su,Yo="\\s*([+-]?\\d+)\\s*",iu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",os="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tG=/^#([0-9a-f]{3,8})$/,rG=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),aG=new RegExp(`^rgb\\(${os},${os},${os}\\)$`),nG=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${iu}\\)$`),sG=new RegExp(`^rgba\\(${os},${os},${os},${iu}\\)$`),iG=new RegExp(`^hsl\\(${iu},${os},${os}\\)$`),lG=new RegExp(`^hsla\\(${iu},${os},${os},${iu}\\)$`),GE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Iy(Cu,lu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:KE,formatHex:KE,formatHex8:oG,formatHsl:cG,formatRgb:YE,toString:YE});function KE(){return this.rgb().formatHex()}function oG(){return this.rgb().formatHex8()}function cG(){return yT(this).formatHsl()}function YE(){return this.rgb().formatRgb()}function lu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=tG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?WE(t):r===3?new Pa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Em(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Em(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rG.exec(e))?new Pa(t[1],t[2],t[3],1):(t=aG.exec(e))?new Pa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nG.exec(e))?Em(t[1],t[2],t[3],t[4]):(t=sG.exec(e))?Em(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iG.exec(e))?QE(t[1],t[2]/100,t[3]/100,1):(t=lG.exec(e))?QE(t[1],t[2]/100,t[3]/100,t[4]):GE.hasOwnProperty(e)?WE(GE[e]):e==="transparent"?new Pa(NaN,NaN,NaN,0):null}function WE(e){return new Pa(e>>16&255,e>>8&255,e&255,1)}function Em(e,t,r,n){return n<=0&&(e=t=r=NaN),new Pa(e,t,r,n)}function dG(e){return e instanceof Cu||(e=lu(e)),e?(e=e.rgb(),new Pa(e.r,e.g,e.b,e.opacity)):new Pa}function gb(e,t,r,n){return arguments.length===1?dG(e):new Pa(e,t,r,n??1)}function Pa(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Iy(Pa,gb,bT(Cu,{brighter(e){return e=e==null?g0:Math.pow(g0,e),new Pa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?su:Math.pow(su,e),new Pa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pa(Al(this.r),Al(this.g),Al(this.b),v0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XE,formatHex:XE,formatHex8:uG,formatRgb:ZE,toString:ZE}));function XE(){return`#${yl(this.r)}${yl(this.g)}${yl(this.b)}`}function uG(){return`#${yl(this.r)}${yl(this.g)}${yl(this.b)}${yl((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZE(){const e=v0(this.opacity);return`${e===1?"rgb(":"rgba("}${Al(this.r)}, ${Al(this.g)}, ${Al(this.b)}${e===1?")":`, ${e})`}`}function v0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Al(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yl(e){return e=Al(e),(e<16?"0":"")+e.toString(16)}function QE(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Gn(e,t,r,n)}function yT(e){if(e instanceof Gn)return new Gn(e.h,e.s,e.l,e.opacity);if(e instanceof Cu||(e=lu(e)),!e)return new Gn;if(e instanceof Gn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),l=Math.max(t,r,n),c=NaN,d=l-s,f=(l+s)/2;return d?(t===l?c=(r-n)/d+(r<n)*6:r===l?c=(n-t)/d+2:c=(t-r)/d+4,d/=f<.5?l+s:2-l-s,c*=60):d=f>0&&f<1?0:c,new Gn(c,d,f,e.opacity)}function fG(e,t,r,n){return arguments.length===1?yT(e):new Gn(e,t,r,n??1)}function Gn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Iy(Gn,fG,bT(Cu,{brighter(e){return e=e==null?g0:Math.pow(g0,e),new Gn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?su:Math.pow(su,e),new Gn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Pa(mv(e>=240?e-240:e+120,s,n),mv(e,s,n),mv(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Gn(JE(this.h),Sm(this.s),Sm(this.l),v0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=v0(this.opacity);return`${e===1?"hsl(":"hsla("}${JE(this.h)}, ${Sm(this.s)*100}%, ${Sm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function JE(e){return e=(e||0)%360,e<0?e+360:e}function Sm(e){return Math.max(0,Math.min(1,e||0))}function mv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const By=e=>()=>e;function mG(e,t){return function(r){return e+r*t}}function xG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function hG(e){return(e=+e)==1?jT:function(t,r){return r-t?xG(t,r,e):By(isNaN(t)?r:t)}}function jT(e,t){var r=t-e;return r?mG(e,r):By(isNaN(e)?t:e)}const eS=function e(t){var r=hG(t);function n(s,l){var c=r((s=gb(s)).r,(l=gb(l)).r),d=r(s.g,l.g),f=r(s.b,l.b),m=jT(s.opacity,l.opacity);return function(x){return s.r=c(x),s.g=d(x),s.b=f(x),s.opacity=m(x),s+""}}return n.gamma=e,n}(1);function pG(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(l){for(s=0;s<r;++s)n[s]=e[s]*(1-l)+t[s]*l;return n}}function gG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vG(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),l=new Array(r),c;for(c=0;c<n;++c)s[c]=fc(e[c],t[c]);for(;c<r;++c)l[c]=t[c];return function(d){for(c=0;c<n;++c)l[c]=s[c](d);return l}}function bG(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function b0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function yG(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=fc(e[s],t[s]):n[s]=t[s];return function(l){for(s in r)n[s]=r[s](l);return n}}var vb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xv=new RegExp(vb.source,"g");function jG(e){return function(){return e}}function NG(e){return function(t){return e(t)+""}}function wG(e,t){var r=vb.lastIndex=xv.lastIndex=0,n,s,l,c=-1,d=[],f=[];for(e=e+"",t=t+"";(n=vb.exec(e))&&(s=xv.exec(t));)(l=s.index)>r&&(l=t.slice(r,l),d[c]?d[c]+=l:d[++c]=l),(n=n[0])===(s=s[0])?d[c]?d[c]+=s:d[++c]=s:(d[++c]=null,f.push({i:c,x:b0(n,s)})),r=xv.lastIndex;return r<t.length&&(l=t.slice(r),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?NG(f[0].x):jG(t):(t=f.length,function(m){for(var x=0,h;x<t;++x)d[(h=f[x]).i]=h.x(m);return d.join("")})}function fc(e,t){var r=typeof t,n;return t==null||r==="boolean"?By(t):(r==="number"?b0:r==="string"?(n=lu(t))?(t=n,eS):wG:t instanceof lu?eS:t instanceof Date?bG:gG(t)?pG:Array.isArray(t)?vG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?yG:b0)(e,t)}function zy(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function _G(e,t){t===void 0&&(t=e,e=fc);for(var r=0,n=t.length-1,s=t[0],l=new Array(n<0?0:n);r<n;)l[r]=e(s,s=t[++r]);return function(c){var d=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return l[d](c-d)}}function EG(e){return function(){return e}}function y0(e){return+e}var tS=[0,1];function ya(e){return e}function bb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:EG(isNaN(t)?NaN:.5)}function SG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function AG(e,t,r){var n=e[0],s=e[1],l=t[0],c=t[1];return s<n?(n=bb(s,n),l=r(c,l)):(n=bb(n,s),l=r(l,c)),function(d){return l(n(d))}}function CG(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),l=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)s[c]=bb(e[c],e[c+1]),l[c]=r(t[c],t[c+1]);return function(d){var f=Au(e,d,1,n)-1;return l[f](s[f](d))}}function Tu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function px(){var e=tS,t=tS,r=fc,n,s,l,c=ya,d,f,m;function x(){var v=Math.min(e.length,t.length);return c!==ya&&(c=SG(e[0],e[v-1])),d=v>2?CG:AG,f=m=null,h}function h(v){return v==null||isNaN(v=+v)?l:(f||(f=d(e.map(n),t,r)))(n(c(v)))}return h.invert=function(v){return c(s((m||(m=d(t,e.map(n),b0)))(v)))},h.domain=function(v){return arguments.length?(e=Array.from(v,y0),x()):e.slice()},h.range=function(v){return arguments.length?(t=Array.from(v),x()):t.slice()},h.rangeRound=function(v){return t=Array.from(v),r=zy,x()},h.clamp=function(v){return arguments.length?(c=v?!0:ya,x()):c!==ya},h.interpolate=function(v){return arguments.length?(r=v,x()):r},h.unknown=function(v){return arguments.length?(l=v,h):l},function(v,g){return n=v,s=g,x()}}function Uy(){return px()(ya,ya)}function TG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function j0(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function rc(e){return e=j0(Math.abs(e)),e?e[1]:NaN}function DG(e,t){return function(r,n){for(var s=r.length,l=[],c=0,d=e[0],f=0;s>0&&d>0&&(f+d+1>n&&(d=Math.max(1,n-f)),l.push(r.substring(s-=d,s+d)),!((f+=d+1)>n));)d=e[c=(c+1)%e.length];return l.reverse().join(t)}}function OG(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var kG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ou(e){if(!(t=kG.exec(e)))throw new Error("invalid format: "+e);var t;return new $y({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ou.prototype=$y.prototype;function $y(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$y.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function PG(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var NT;function MG(e,t){var r=j0(e,t);if(!r)return e+"";var n=r[0],s=r[1],l=s-(NT=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,c=n.length;return l===c?n:l>c?n+new Array(l-c+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+j0(e,Math.max(0,t+l-1))[0]}function rS(e,t){var r=j0(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const aS={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:TG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rS(e*100,t),r:rS,s:MG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nS(e){return e}var sS=Array.prototype.map,iS=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function FG(e){var t=e.grouping===void 0||e.thousands===void 0?nS:DG(sS.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?nS:OG(sS.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"−":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function m(h){h=ou(h);var v=h.fill,g=h.align,y=h.sign,b=h.symbol,j=h.zero,w=h.width,A=h.comma,S=h.precision,D=h.trim,T=h.type;T==="n"?(A=!0,T="g"):aS[T]||(S===void 0&&(S=12),D=!0,T="g"),(j||v==="0"&&g==="=")&&(j=!0,v="0",g="=");var k=b==="$"?r:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",C=b==="$"?n:/[%p]/.test(T)?c:"",M=aS[T],I=/[defgprs%]/.test(T);S=S===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function R(L){var P=k,O=C,z,V,G;if(T==="c")O=M(L)+O,L="";else{L=+L;var K=L<0||1/L<0;if(L=isNaN(L)?f:M(Math.abs(L),S),D&&(L=PG(L)),K&&+L==0&&y!=="+"&&(K=!1),P=(K?y==="("?y:d:y==="-"||y==="("?"":y)+P,O=(T==="s"?iS[8+NT/3]:"")+O+(K&&y==="("?")":""),I){for(z=-1,V=L.length;++z<V;)if(G=L.charCodeAt(z),48>G||G>57){O=(G===46?s+L.slice(z+1):L.slice(z))+O,L=L.slice(0,z);break}}}A&&!j&&(L=t(L,1/0));var ce=P.length+L.length+O.length,le=ce<w?new Array(w-ce+1).join(v):"";switch(A&&j&&(L=t(le+L,le.length?w-O.length:1/0),le=""),g){case"<":L=P+L+O+le;break;case"=":L=P+le+L+O;break;case"^":L=le.slice(0,ce=le.length>>1)+P+L+O+le.slice(ce);break;default:L=le+P+L+O;break}return l(L)}return R.toString=function(){return h+""},R}function x(h,v){var g=m((h=ou(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(rc(v)/3)))*3,b=Math.pow(10,-y),j=iS[8+y/3];return function(w){return g(b*w)+j}}return{format:m,formatPrefix:x}}var Am,qy,wT;LG({thousands:",",grouping:[3],currency:["$",""]});function LG(e){return Am=FG(e),qy=Am.format,wT=Am.formatPrefix,Am}function RG(e){return Math.max(0,-rc(Math.abs(e)))}function IG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rc(t)/3)))*3-rc(Math.abs(e)))}function BG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,rc(t)-rc(e))+1}function _T(e,t,r,n){var s=hb(e,t,r),l;switch(n=ou(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(l=IG(s,c))&&(n.precision=l),wT(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=BG(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=RG(s))&&(n.precision=l-(n.type==="%")*2);break}}return qy(n)}function Vi(e){var t=e.domain;return e.ticks=function(r){var n=t();return mb(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return _T(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,l=n.length-1,c=n[s],d=n[l],f,m,x=10;for(d<c&&(m=c,c=d,d=m,m=s,s=l,l=m);x-- >0;){if(m=xb(c,d,r),m===f)return n[s]=c,n[l]=d,t(n);if(m>0)c=Math.floor(c/m)*m,d=Math.ceil(d/m)*m;else if(m<0)c=Math.ceil(c*m)/m,d=Math.floor(d*m)/m;else break;f=m}return e},e}function ET(){var e=Uy();return e.copy=function(){return Tu(e,ET())},Fn.apply(e,arguments),Vi(e)}function ST(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,y0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return ST(e).unknown(t)},e=arguments.length?Array.from(e,y0):[0,1],Vi(r)}function AT(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],l=e[n],c;return l<s&&(c=r,r=n,n=c,c=s,s=l,l=c),e[r]=t.floor(s),e[n]=t.ceil(l),e}function lS(e){return Math.log(e)}function oS(e){return Math.exp(e)}function zG(e){return-Math.log(-e)}function UG(e){return-Math.exp(-e)}function $G(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qG(e){return e===10?$G:e===Math.E?Math.exp:t=>Math.pow(e,t)}function HG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function cS(e){return(t,r)=>-e(-t,r)}function Hy(e){const t=e(lS,oS),r=t.domain;let n=10,s,l;function c(){return s=HG(n),l=qG(n),r()[0]<0?(s=cS(s),l=cS(l),e(zG,UG)):e(lS,oS),t}return t.base=function(d){return arguments.length?(n=+d,c()):n},t.domain=function(d){return arguments.length?(r(d),c()):r()},t.ticks=d=>{const f=r();let m=f[0],x=f[f.length-1];const h=x<m;h&&([m,x]=[x,m]);let v=s(m),g=s(x),y,b;const j=d==null?10:+d;let w=[];if(!(n%1)&&g-v<j){if(v=Math.floor(v),g=Math.ceil(g),m>0){for(;v<=g;++v)for(y=1;y<n;++y)if(b=v<0?y/l(-v):y*l(v),!(b<m)){if(b>x)break;w.push(b)}}else for(;v<=g;++v)for(y=n-1;y>=1;--y)if(b=v>0?y/l(-v):y*l(v),!(b<m)){if(b>x)break;w.push(b)}w.length*2<j&&(w=mb(m,x,j))}else w=mb(v,g,Math.min(g-v,j)).map(l);return h?w.reverse():w},t.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=n===10?"s":","),typeof f!="function"&&(!(n%1)&&(f=ou(f)).precision==null&&(f.trim=!0),f=qy(f)),d===1/0)return f;const m=Math.max(1,n*d/t.ticks().length);return x=>{let h=x/l(Math.round(s(x)));return h*n<n-.5&&(h*=n),h<=m?f(x):""}},t.nice=()=>r(AT(r(),{floor:d=>l(Math.floor(s(d))),ceil:d=>l(Math.ceil(s(d)))})),t}function CT(){const e=Hy(px()).domain([1,10]);return e.copy=()=>Tu(e,CT()).base(e.base()),Fn.apply(e,arguments),e}function dS(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uS(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Vy(e){var t=1,r=e(dS(t),uS(t));return r.constant=function(n){return arguments.length?e(dS(t=+n),uS(t)):t},Vi(r)}function TT(){var e=Vy(px());return e.copy=function(){return Tu(e,TT()).constant(e.constant())},Fn.apply(e,arguments)}function fS(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function VG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function GG(e){return e<0?-e*e:e*e}function Gy(e){var t=e(ya,ya),r=1;function n(){return r===1?e(ya,ya):r===.5?e(VG,GG):e(fS(r),fS(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Vi(t)}function Ky(){var e=Gy(px());return e.copy=function(){return Tu(e,Ky()).exponent(e.exponent())},Fn.apply(e,arguments),e}function KG(){return Ky.apply(null,arguments).exponent(.5)}function mS(e){return Math.sign(e)*e*e}function YG(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function DT(){var e=Uy(),t=[0,1],r=!1,n;function s(l){var c=YG(e(l));return isNaN(c)?n:r?Math.round(c):c}return s.invert=function(l){return e.invert(mS(l))},s.domain=function(l){return arguments.length?(e.domain(l),s):e.domain()},s.range=function(l){return arguments.length?(e.range((t=Array.from(l,y0)).map(mS)),s):t.slice()},s.rangeRound=function(l){return s.range(l).round(!0)},s.round=function(l){return arguments.length?(r=!!l,s):r},s.clamp=function(l){return arguments.length?(e.clamp(l),s):e.clamp()},s.unknown=function(l){return arguments.length?(n=l,s):n},s.copy=function(){return DT(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Fn.apply(s,arguments),Vi(s)}function OT(){var e=[],t=[],r=[],n;function s(){var c=0,d=Math.max(1,t.length);for(r=new Array(d-1);++c<d;)r[c-1]=QV(e,c/d);return l}function l(c){return c==null||isNaN(c=+c)?n:t[Au(r,c)]}return l.invertExtent=function(c){var d=t.indexOf(c);return d<0?[NaN,NaN]:[d>0?r[d-1]:e[0],d<r.length?r[d]:e[e.length-1]]},l.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let d of c)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Pi),s()},l.range=function(c){return arguments.length?(t=Array.from(c),s()):t.slice()},l.unknown=function(c){return arguments.length?(n=c,l):n},l.quantiles=function(){return r.slice()},l.copy=function(){return OT().domain(e).range(t).unknown(n)},Fn.apply(l,arguments)}function kT(){var e=0,t=1,r=1,n=[.5],s=[0,1],l;function c(f){return f!=null&&f<=f?s[Au(n,f,0,r)]:l}function d(){var f=-1;for(n=new Array(r);++f<r;)n[f]=((f+1)*t-(f-r)*e)/(r+1);return c}return c.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,d()):[e,t]},c.range=function(f){return arguments.length?(r=(s=Array.from(f)).length-1,d()):s.slice()},c.invertExtent=function(f){var m=s.indexOf(f);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},c.unknown=function(f){return arguments.length&&(l=f),c},c.thresholds=function(){return n.slice()},c.copy=function(){return kT().domain([e,t]).range(s).unknown(l)},Fn.apply(Vi(c),arguments)}function PT(){var e=[.5],t=[0,1],r,n=1;function s(l){return l!=null&&l<=l?t[Au(e,l,0,n)]:r}return s.domain=function(l){return arguments.length?(e=Array.from(l),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(l){return arguments.length?(t=Array.from(l),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(l){var c=t.indexOf(l);return[e[c-1],e[c]]},s.unknown=function(l){return arguments.length?(r=l,s):r},s.copy=function(){return PT().domain(e).range(t).unknown(r)},Fn.apply(s,arguments)}const hv=new Date,pv=new Date;function Er(e,t,r,n){function s(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return s.floor=l=>(e(l=new Date(+l)),l),s.ceil=l=>(e(l=new Date(l-1)),t(l,1),e(l),l),s.round=l=>{const c=s(l),d=s.ceil(l);return l-c<d-l?c:d},s.offset=(l,c)=>(t(l=new Date(+l),c==null?1:Math.floor(c)),l),s.range=(l,c,d)=>{const f=[];if(l=s.ceil(l),d=d==null?1:Math.floor(d),!(l<c)||!(d>0))return f;let m;do f.push(m=new Date(+l)),t(l,d),e(l);while(m<l&&l<c);return f},s.filter=l=>Er(c=>{if(c>=c)for(;e(c),!l(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;t(c,-1),!l(c););else for(;--d>=0;)for(;t(c,1),!l(c););}),r&&(s.count=(l,c)=>(hv.setTime(+l),pv.setTime(+c),e(hv),e(pv),Math.floor(r(hv,pv))),s.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?s.filter(n?c=>n(c)%l===0:c=>s.count(0,c)%l===0):s)),s}const N0=Er(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);N0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Er(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):N0);N0.range;const Ps=1e3,An=Ps*60,Ms=An*60,Gs=Ms*24,Yy=Gs*7,xS=Gs*30,gv=Gs*365,jl=Er(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getUTCSeconds());jl.range;const Wy=Er(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ps)},(e,t)=>{e.setTime(+e+t*An)},(e,t)=>(t-e)/An,e=>e.getMinutes());Wy.range;const Xy=Er(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*An)},(e,t)=>(t-e)/An,e=>e.getUTCMinutes());Xy.range;const Zy=Er(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ps-e.getMinutes()*An)},(e,t)=>{e.setTime(+e+t*Ms)},(e,t)=>(t-e)/Ms,e=>e.getHours());Zy.range;const Qy=Er(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ms)},(e,t)=>(t-e)/Ms,e=>e.getUTCHours());Qy.range;const Du=Er(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*An)/Gs,e=>e.getDate()-1);Du.range;const gx=Er(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Gs,e=>e.getUTCDate()-1);gx.range;const MT=Er(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Gs,e=>Math.floor(e/Gs));MT.range;function Wl(e){return Er(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*An)/Yy)}const vx=Wl(0),w0=Wl(1),WG=Wl(2),XG=Wl(3),ac=Wl(4),ZG=Wl(5),QG=Wl(6);vx.range;w0.range;WG.range;XG.range;ac.range;ZG.range;QG.range;function Xl(e){return Er(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Yy)}const bx=Xl(0),_0=Xl(1),JG=Xl(2),eK=Xl(3),nc=Xl(4),tK=Xl(5),rK=Xl(6);bx.range;_0.range;JG.range;eK.range;nc.range;tK.range;rK.range;const Jy=Er(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Jy.range;const e1=Er(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());e1.range;const Ks=Er(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ks.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Er(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ks.range;const Ys=Er(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ys.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Er(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ys.range;function FT(e,t,r,n,s,l){const c=[[jl,1,Ps],[jl,5,5*Ps],[jl,15,15*Ps],[jl,30,30*Ps],[l,1,An],[l,5,5*An],[l,15,15*An],[l,30,30*An],[s,1,Ms],[s,3,3*Ms],[s,6,6*Ms],[s,12,12*Ms],[n,1,Gs],[n,2,2*Gs],[r,1,Yy],[t,1,xS],[t,3,3*xS],[e,1,gv]];function d(m,x,h){const v=x<m;v&&([m,x]=[x,m]);const g=h&&typeof h.range=="function"?h:f(m,x,h),y=g?g.range(m,+x+1):[];return v?y.reverse():y}function f(m,x,h){const v=Math.abs(x-m)/h,g=Fy(([,,j])=>j).right(c,v);if(g===c.length)return e.every(hb(m/gv,x/gv,h));if(g===0)return N0.every(Math.max(hb(m,x,h),1));const[y,b]=c[v/c[g-1][2]<c[g][2]/v?g-1:g];return y.every(b)}return[d,f]}const[aK,nK]=FT(Ys,e1,bx,MT,Qy,Xy),[sK,iK]=FT(Ks,Jy,vx,Du,Zy,Wy);function vv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sd(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function lK(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,l=e.days,c=e.shortDays,d=e.months,f=e.shortMonths,m=Ad(s),x=Cd(s),h=Ad(l),v=Cd(l),g=Ad(c),y=Cd(c),b=Ad(d),j=Cd(d),w=Ad(f),A=Cd(f),S={a:K,A:ce,b:le,B:ne,c:null,d:yS,e:yS,f:DK,g:zK,G:$K,H:AK,I:CK,j:TK,L:LT,m:OK,M:kK,p:Z,q:F,Q:wS,s:_S,S:PK,u:MK,U:FK,V:LK,w:RK,W:IK,x:null,X:null,y:BK,Y:UK,Z:qK,"%":NS},D={a:U,A:Y,b:Q,B:ee,c:null,d:jS,e:jS,f:KK,g:aY,G:sY,H:HK,I:VK,j:GK,L:IT,m:YK,M:WK,p:De,q:ke,Q:wS,s:_S,S:XK,u:ZK,U:QK,V:JK,w:eY,W:tY,x:null,X:null,y:rY,Y:nY,Z:iY,"%":NS},T={a:R,A:L,b:P,B:O,c:z,d:vS,e:vS,f:wK,g:gS,G:pS,H:bS,I:bS,j:bK,L:NK,m:vK,M:yK,p:I,q:gK,Q:EK,s:SK,S:jK,u:fK,U:mK,V:xK,w:uK,W:hK,x:V,X:G,y:gS,Y:pS,Z:pK,"%":_K};S.x=k(r,S),S.X=k(n,S),S.c=k(t,S),D.x=k(r,D),D.X=k(n,D),D.c=k(t,D);function k(fe,Ee){return function(Ie){var Ne=[],Je=-1,qe=0,Bt=fe.length,at,Re,Br;for(Ie instanceof Date||(Ie=new Date(+Ie));++Je<Bt;)fe.charCodeAt(Je)===37&&(Ne.push(fe.slice(qe,Je)),(Re=hS[at=fe.charAt(++Je)])!=null?at=fe.charAt(++Je):Re=at==="e"?" ":"0",(Br=Ee[at])&&(at=Br(Ie,Re)),Ne.push(at),qe=Je+1);return Ne.push(fe.slice(qe,Je)),Ne.join("")}}function C(fe,Ee){return function(Ie){var Ne=Sd(1900,void 0,1),Je=M(Ne,fe,Ie+="",0),qe,Bt;if(Je!=Ie.length)return null;if("Q"in Ne)return new Date(Ne.Q);if("s"in Ne)return new Date(Ne.s*1e3+("L"in Ne?Ne.L:0));if(Ee&&!("Z"in Ne)&&(Ne.Z=0),"p"in Ne&&(Ne.H=Ne.H%12+Ne.p*12),Ne.m===void 0&&(Ne.m="q"in Ne?Ne.q:0),"V"in Ne){if(Ne.V<1||Ne.V>53)return null;"w"in Ne||(Ne.w=1),"Z"in Ne?(qe=bv(Sd(Ne.y,0,1)),Bt=qe.getUTCDay(),qe=Bt>4||Bt===0?_0.ceil(qe):_0(qe),qe=gx.offset(qe,(Ne.V-1)*7),Ne.y=qe.getUTCFullYear(),Ne.m=qe.getUTCMonth(),Ne.d=qe.getUTCDate()+(Ne.w+6)%7):(qe=vv(Sd(Ne.y,0,1)),Bt=qe.getDay(),qe=Bt>4||Bt===0?w0.ceil(qe):w0(qe),qe=Du.offset(qe,(Ne.V-1)*7),Ne.y=qe.getFullYear(),Ne.m=qe.getMonth(),Ne.d=qe.getDate()+(Ne.w+6)%7)}else("W"in Ne||"U"in Ne)&&("w"in Ne||(Ne.w="u"in Ne?Ne.u%7:"W"in Ne?1:0),Bt="Z"in Ne?bv(Sd(Ne.y,0,1)).getUTCDay():vv(Sd(Ne.y,0,1)).getDay(),Ne.m=0,Ne.d="W"in Ne?(Ne.w+6)%7+Ne.W*7-(Bt+5)%7:Ne.w+Ne.U*7-(Bt+6)%7);return"Z"in Ne?(Ne.H+=Ne.Z/100|0,Ne.M+=Ne.Z%100,bv(Ne)):vv(Ne)}}function M(fe,Ee,Ie,Ne){for(var Je=0,qe=Ee.length,Bt=Ie.length,at,Re;Je<qe;){if(Ne>=Bt)return-1;if(at=Ee.charCodeAt(Je++),at===37){if(at=Ee.charAt(Je++),Re=T[at in hS?Ee.charAt(Je++):at],!Re||(Ne=Re(fe,Ie,Ne))<0)return-1}else if(at!=Ie.charCodeAt(Ne++))return-1}return Ne}function I(fe,Ee,Ie){var Ne=m.exec(Ee.slice(Ie));return Ne?(fe.p=x.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function R(fe,Ee,Ie){var Ne=g.exec(Ee.slice(Ie));return Ne?(fe.w=y.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function L(fe,Ee,Ie){var Ne=h.exec(Ee.slice(Ie));return Ne?(fe.w=v.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function P(fe,Ee,Ie){var Ne=w.exec(Ee.slice(Ie));return Ne?(fe.m=A.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function O(fe,Ee,Ie){var Ne=b.exec(Ee.slice(Ie));return Ne?(fe.m=j.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function z(fe,Ee,Ie){return M(fe,t,Ee,Ie)}function V(fe,Ee,Ie){return M(fe,r,Ee,Ie)}function G(fe,Ee,Ie){return M(fe,n,Ee,Ie)}function K(fe){return c[fe.getDay()]}function ce(fe){return l[fe.getDay()]}function le(fe){return f[fe.getMonth()]}function ne(fe){return d[fe.getMonth()]}function Z(fe){return s[+(fe.getHours()>=12)]}function F(fe){return 1+~~(fe.getMonth()/3)}function U(fe){return c[fe.getUTCDay()]}function Y(fe){return l[fe.getUTCDay()]}function Q(fe){return f[fe.getUTCMonth()]}function ee(fe){return d[fe.getUTCMonth()]}function De(fe){return s[+(fe.getUTCHours()>=12)]}function ke(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var Ee=k(fe+="",S);return Ee.toString=function(){return fe},Ee},parse:function(fe){var Ee=C(fe+="",!1);return Ee.toString=function(){return fe},Ee},utcFormat:function(fe){var Ee=k(fe+="",D);return Ee.toString=function(){return fe},Ee},utcParse:function(fe){var Ee=C(fe+="",!0);return Ee.toString=function(){return fe},Ee}}}var hS={"-":"",_:" ",0:"0"},Ir=/^\s*\d+/,oK=/^%/,cK=/[\\^$*+?|[\]().{}]/g;function mt(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",l=s.length;return n+(l<r?new Array(r-l+1).join(t)+s:s)}function dK(e){return e.replace(cK,"\\$&")}function Ad(e){return new RegExp("^(?:"+e.map(dK).join("|")+")","i")}function Cd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function uK(e,t,r){var n=Ir.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function fK(e,t,r){var n=Ir.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function mK(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function xK(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function hK(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function pS(e,t,r){var n=Ir.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function gS(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function pK(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function gK(e,t,r){var n=Ir.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function vK(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function vS(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function bK(e,t,r){var n=Ir.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function bS(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function yK(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function jK(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function NK(e,t,r){var n=Ir.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function wK(e,t,r){var n=Ir.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function _K(e,t,r){var n=oK.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function EK(e,t,r){var n=Ir.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function SK(e,t,r){var n=Ir.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function yS(e,t){return mt(e.getDate(),t,2)}function AK(e,t){return mt(e.getHours(),t,2)}function CK(e,t){return mt(e.getHours()%12||12,t,2)}function TK(e,t){return mt(1+Du.count(Ks(e),e),t,3)}function LT(e,t){return mt(e.getMilliseconds(),t,3)}function DK(e,t){return LT(e,t)+"000"}function OK(e,t){return mt(e.getMonth()+1,t,2)}function kK(e,t){return mt(e.getMinutes(),t,2)}function PK(e,t){return mt(e.getSeconds(),t,2)}function MK(e){var t=e.getDay();return t===0?7:t}function FK(e,t){return mt(vx.count(Ks(e)-1,e),t,2)}function RT(e){var t=e.getDay();return t>=4||t===0?ac(e):ac.ceil(e)}function LK(e,t){return e=RT(e),mt(ac.count(Ks(e),e)+(Ks(e).getDay()===4),t,2)}function RK(e){return e.getDay()}function IK(e,t){return mt(w0.count(Ks(e)-1,e),t,2)}function BK(e,t){return mt(e.getFullYear()%100,t,2)}function zK(e,t){return e=RT(e),mt(e.getFullYear()%100,t,2)}function UK(e,t){return mt(e.getFullYear()%1e4,t,4)}function $K(e,t){var r=e.getDay();return e=r>=4||r===0?ac(e):ac.ceil(e),mt(e.getFullYear()%1e4,t,4)}function qK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mt(t/60|0,"0",2)+mt(t%60,"0",2)}function jS(e,t){return mt(e.getUTCDate(),t,2)}function HK(e,t){return mt(e.getUTCHours(),t,2)}function VK(e,t){return mt(e.getUTCHours()%12||12,t,2)}function GK(e,t){return mt(1+gx.count(Ys(e),e),t,3)}function IT(e,t){return mt(e.getUTCMilliseconds(),t,3)}function KK(e,t){return IT(e,t)+"000"}function YK(e,t){return mt(e.getUTCMonth()+1,t,2)}function WK(e,t){return mt(e.getUTCMinutes(),t,2)}function XK(e,t){return mt(e.getUTCSeconds(),t,2)}function ZK(e){var t=e.getUTCDay();return t===0?7:t}function QK(e,t){return mt(bx.count(Ys(e)-1,e),t,2)}function BT(e){var t=e.getUTCDay();return t>=4||t===0?nc(e):nc.ceil(e)}function JK(e,t){return e=BT(e),mt(nc.count(Ys(e),e)+(Ys(e).getUTCDay()===4),t,2)}function eY(e){return e.getUTCDay()}function tY(e,t){return mt(_0.count(Ys(e)-1,e),t,2)}function rY(e,t){return mt(e.getUTCFullYear()%100,t,2)}function aY(e,t){return e=BT(e),mt(e.getUTCFullYear()%100,t,2)}function nY(e,t){return mt(e.getUTCFullYear()%1e4,t,4)}function sY(e,t){var r=e.getUTCDay();return e=r>=4||r===0?nc(e):nc.ceil(e),mt(e.getUTCFullYear()%1e4,t,4)}function iY(){return"+0000"}function NS(){return"%"}function wS(e){return+e}function _S(e){return Math.floor(+e/1e3)}var Io,zT,UT;lY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lY(e){return Io=lK(e),zT=Io.format,Io.parse,UT=Io.utcFormat,Io.utcParse,Io}function oY(e){return new Date(e)}function cY(e){return e instanceof Date?+e:+new Date(+e)}function t1(e,t,r,n,s,l,c,d,f,m){var x=Uy(),h=x.invert,v=x.domain,g=m(".%L"),y=m(":%S"),b=m("%I:%M"),j=m("%I %p"),w=m("%a %d"),A=m("%b %d"),S=m("%B"),D=m("%Y");function T(k){return(f(k)<k?g:d(k)<k?y:c(k)<k?b:l(k)<k?j:n(k)<k?s(k)<k?w:A:r(k)<k?S:D)(k)}return x.invert=function(k){return new Date(h(k))},x.domain=function(k){return arguments.length?v(Array.from(k,cY)):v().map(oY)},x.ticks=function(k){var C=v();return e(C[0],C[C.length-1],k??10)},x.tickFormat=function(k,C){return C==null?T:m(C)},x.nice=function(k){var C=v();return(!k||typeof k.range!="function")&&(k=t(C[0],C[C.length-1],k??10)),k?v(AT(C,k)):x},x.copy=function(){return Tu(x,t1(e,t,r,n,s,l,c,d,f,m))},x}function dY(){return Fn.apply(t1(sK,iK,Ks,Jy,vx,Du,Zy,Wy,jl,zT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uY(){return Fn.apply(t1(aK,nK,Ys,e1,bx,gx,Qy,Xy,jl,UT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yx(){var e=0,t=1,r,n,s,l,c=ya,d=!1,f;function m(h){return h==null||isNaN(h=+h)?f:c(s===0?.5:(h=(l(h)-r)*s,d?Math.max(0,Math.min(1,h)):h))}m.domain=function(h){return arguments.length?([e,t]=h,r=l(e=+e),n=l(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(h){return arguments.length?(d=!!h,m):d},m.interpolator=function(h){return arguments.length?(c=h,m):c};function x(h){return function(v){var g,y;return arguments.length?([g,y]=v,c=h(g,y),m):[c(0),c(1)]}}return m.range=x(fc),m.rangeRound=x(zy),m.unknown=function(h){return arguments.length?(f=h,m):f},function(h){return l=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),m}}function Gi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function $T(){var e=Vi(yx()(ya));return e.copy=function(){return Gi(e,$T())},Js.apply(e,arguments)}function qT(){var e=Hy(yx()).domain([1,10]);return e.copy=function(){return Gi(e,qT()).base(e.base())},Js.apply(e,arguments)}function HT(){var e=Vy(yx());return e.copy=function(){return Gi(e,HT()).constant(e.constant())},Js.apply(e,arguments)}function r1(){var e=Gy(yx());return e.copy=function(){return Gi(e,r1()).exponent(e.exponent())},Js.apply(e,arguments)}function fY(){return r1.apply(null,arguments).exponent(.5)}function VT(){var e=[],t=ya;function r(n){if(n!=null&&!isNaN(n=+n))return t((Au(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Pi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,l)=>ZV(e,l/n))},r.copy=function(){return VT(t).domain(e)},Js.apply(r,arguments)}function jx(){var e=0,t=.5,r=1,n=1,s,l,c,d,f,m=ya,x,h=!1,v;function g(b){return isNaN(b=+b)?v:(b=.5+((b=+x(b))-l)*(n*b<n*l?d:f),m(h?Math.max(0,Math.min(1,b)):b))}g.domain=function(b){return arguments.length?([e,t,r]=b,s=x(e=+e),l=x(t=+t),c=x(r=+r),d=s===l?0:.5/(l-s),f=l===c?0:.5/(c-l),n=l<s?-1:1,g):[e,t,r]},g.clamp=function(b){return arguments.length?(h=!!b,g):h},g.interpolator=function(b){return arguments.length?(m=b,g):m};function y(b){return function(j){var w,A,S;return arguments.length?([w,A,S]=j,m=_G(b,[w,A,S]),g):[m(0),m(.5),m(1)]}}return g.range=y(fc),g.rangeRound=y(zy),g.unknown=function(b){return arguments.length?(v=b,g):v},function(b){return x=b,s=b(e),l=b(t),c=b(r),d=s===l?0:.5/(l-s),f=l===c?0:.5/(c-l),n=l<s?-1:1,g}}function GT(){var e=Vi(jx()(ya));return e.copy=function(){return Gi(e,GT())},Js.apply(e,arguments)}function KT(){var e=Hy(jx()).domain([.1,1,10]);return e.copy=function(){return Gi(e,KT()).base(e.base())},Js.apply(e,arguments)}function YT(){var e=Vy(jx());return e.copy=function(){return Gi(e,YT()).constant(e.constant())},Js.apply(e,arguments)}function a1(){var e=Gy(jx());return e.copy=function(){return Gi(e,a1()).exponent(e.exponent())},Js.apply(e,arguments)}function mY(){return a1.apply(null,arguments).exponent(.5)}const Md=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ry,scaleDiverging:GT,scaleDivergingLog:KT,scaleDivergingPow:a1,scaleDivergingSqrt:mY,scaleDivergingSymlog:YT,scaleIdentity:ST,scaleImplicit:pb,scaleLinear:ET,scaleLog:CT,scaleOrdinal:Ly,scalePoint:eG,scalePow:Ky,scaleQuantile:OT,scaleQuantize:kT,scaleRadial:DT,scaleSequential:$T,scaleSequentialLog:qT,scaleSequentialPow:r1,scaleSequentialQuantile:VT,scaleSequentialSqrt:fY,scaleSequentialSymlog:HT,scaleSqrt:KG,scaleSymlog:TT,scaleThreshold:PT,scaleTime:dY,scaleUtc:uY,tickFormat:_T},Symbol.toStringTag,{value:"Module"}));var Ki=e=>e.chartData,n1=ge([Ki],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Nx=(e,t,r,n)=>n?n1(e):Ki(e);function Rl(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(fa(t)&&fa(r))return!0}return!1}function ES(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function WT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,l;if(fa(r))s=r;else if(typeof r=="function")return;if(fa(n))l=n;else if(typeof n=="function")return;var c=[s,l];if(Rl(c))return c}}function xY(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Rl(n))return ES(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,l]=e,c,d;if(s==="auto")t!=null&&(c=Math.min(...t));else if(Ge(s))c=s;else if(typeof s=="function")try{t!=null&&(c=s(t?.[0]))}catch{}else if(typeof s=="string"&&dE.test(s)){var f=dE.exec(s);if(f==null||t==null)c=void 0;else{var m=+f[1];c=t[0]-m}}else c=t?.[0];if(l==="auto")t!=null&&(d=Math.max(...t));else if(Ge(l))d=l;else if(typeof l=="function")try{t!=null&&(d=l(t?.[1]))}catch{}else if(typeof l=="string"&&uE.test(l)){var x=uE.exec(l);if(x==null||t==null)d=void 0;else{var h=+x[1];d=t[1]+h}}else d=t?.[1];var v=[c,d];if(Rl(v))return t==null?v:ES(v,t,r)}}}var mc=1e9,hY={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},i1,Ht=!0,Pn="[DecimalError] ",Cl=Pn+"Invalid argument: ",s1=Pn+"Exponent out of range: ",xc=Math.floor,vl=Math.pow,pY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ja,Pr=1e7,zt=7,XT=9007199254740991,E0=xc(XT/zt),Ue={};Ue.absoluteValue=Ue.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ue.comparedTo=Ue.cmp=function(e){var t,r,n,s,l=this;if(e=new l.constructor(e),l.s!==e.s)return l.s||-e.s;if(l.e!==e.e)return l.e>e.e^l.s<0?1:-1;for(n=l.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(l.d[t]!==e.d[t])return l.d[t]>e.d[t]^l.s<0?1:-1;return n===s?0:n>s^l.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*zt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ue.dividedBy=Ue.div=function(e){return Bs(this,new this.constructor(e))};Ue.dividedToIntegerBy=Ue.idiv=function(e){var t=this,r=t.constructor;return Pt(Bs(t,new r(e),0,1),r.precision)};Ue.equals=Ue.eq=function(e){return!this.cmp(e)};Ue.exponent=function(){return gr(this)};Ue.greaterThan=Ue.gt=function(e){return this.cmp(e)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(e){return this.cmp(e)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(e){return this.cmp(e)<0};Ue.lessThanOrEqualTo=Ue.lte=function(e){return this.cmp(e)<1};Ue.logarithm=Ue.log=function(e){var t,r=this,n=r.constructor,s=n.precision,l=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ja))throw Error(Pn+"NaN");if(r.s<1)throw Error(Pn+(r.s?"NaN":"-Infinity"));return r.eq(Ja)?new n(0):(Ht=!1,t=Bs(cu(r,l),cu(e,l),l),Ht=!0,Pt(t,s))};Ue.minus=Ue.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?JT(t,e):ZT(t,(e.s=-e.s,e))};Ue.modulo=Ue.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Pn+"NaN");return r.s?(Ht=!1,t=Bs(r,e,0,1).times(e),Ht=!0,r.minus(t)):Pt(new n(r),s)};Ue.naturalExponential=Ue.exp=function(){return QT(this)};Ue.naturalLogarithm=Ue.ln=function(){return cu(this)};Ue.negated=Ue.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ue.plus=Ue.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ZT(t,e):JT(t,(e.s=-e.s,e))};Ue.precision=Ue.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Cl+e);if(t=gr(s)+1,n=s.d.length-1,r=n*zt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ue.squareRoot=Ue.sqrt=function(){var e,t,r,n,s,l,c,d=this,f=d.constructor;if(d.s<1){if(!d.s)return new f(0);throw Error(Pn+"NaN")}for(e=gr(d),Ht=!1,s=Math.sqrt(+d),s==0||s==1/0?(t=ls(d.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=xc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new f(t)):n=new f(s.toString()),r=f.precision,s=c=r+3;;)if(l=n,n=l.plus(Bs(d,l,c+2)).times(.5),ls(l.d).slice(0,c)===(t=ls(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),s==c&&t=="4999"){if(Pt(l,r+1,0),l.times(l).eq(d)){n=l;break}}else if(t!="9999")break;c+=4}return Ht=!0,Pt(n,r)};Ue.times=Ue.mul=function(e){var t,r,n,s,l,c,d,f,m,x=this,h=x.constructor,v=x.d,g=(e=new h(e)).d;if(!x.s||!e.s)return new h(0);for(e.s*=x.s,r=x.e+e.e,f=v.length,m=g.length,f<m&&(l=v,v=g,g=l,c=f,f=m,m=c),l=[],c=f+m,n=c;n--;)l.push(0);for(n=m;--n>=0;){for(t=0,s=f+n;s>n;)d=l[s]+g[n]*v[s-n-1]+t,l[s--]=d%Pr|0,t=d/Pr|0;l[s]=(l[s]+t)%Pr|0}for(;!l[--c];)l.pop();return t?++r:l.shift(),e.d=l,e.e=r,Ht?Pt(e,h.precision):e};Ue.toDecimalPlaces=Ue.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(fs(e,0,mc),t===void 0?t=n.rounding:fs(t,0,8),Pt(r,e+gr(r)+1,t))};Ue.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Il(n,!0):(fs(e,0,mc),t===void 0?t=s.rounding:fs(t,0,8),n=Pt(new s(n),e+1,t),r=Il(n,!0,e+1)),r};Ue.toFixed=function(e,t){var r,n,s=this,l=s.constructor;return e===void 0?Il(s):(fs(e,0,mc),t===void 0?t=l.rounding:fs(t,0,8),n=Pt(new l(s),e+gr(s)+1,t),r=Il(n.abs(),!1,e+gr(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ue.toInteger=Ue.toint=function(){var e=this,t=e.constructor;return Pt(new t(e),gr(e)+1,t.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(e){var t,r,n,s,l,c,d=this,f=d.constructor,m=12,x=+(e=new f(e));if(!e.s)return new f(Ja);if(d=new f(d),!d.s){if(e.s<1)throw Error(Pn+"Infinity");return d}if(d.eq(Ja))return d;if(n=f.precision,e.eq(Ja))return Pt(d,n);if(t=e.e,r=e.d.length-1,c=t>=r,l=d.s,c){if((r=x<0?-x:x)<=XT){for(s=new f(Ja),t=Math.ceil(n/zt+4),Ht=!1;r%2&&(s=s.times(d),AS(s.d,t)),r=xc(r/2),r!==0;)d=d.times(d),AS(d.d,t);return Ht=!0,e.s<0?new f(Ja).div(s):Pt(s,n)}}else if(l<0)throw Error(Pn+"NaN");return l=l<0&&e.d[Math.max(t,r)]&1?-1:1,d.s=1,Ht=!1,s=e.times(cu(d,n+m)),Ht=!0,s=QT(s),s.s=l,s};Ue.toPrecision=function(e,t){var r,n,s=this,l=s.constructor;return e===void 0?(r=gr(s),n=Il(s,r<=l.toExpNeg||r>=l.toExpPos)):(fs(e,1,mc),t===void 0?t=l.rounding:fs(t,0,8),s=Pt(new l(s),e,t),r=gr(s),n=Il(s,e<=r||r<=l.toExpNeg,e)),n};Ue.toSignificantDigits=Ue.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(fs(e,1,mc),t===void 0?t=n.rounding:fs(t,0,8)),Pt(new n(r),e,t)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=gr(e),r=e.constructor;return Il(e,t<=r.toExpNeg||t>=r.toExpPos)};function ZT(e,t){var r,n,s,l,c,d,f,m,x=e.constructor,h=x.precision;if(!e.s||!t.s)return t.s||(t=new x(e)),Ht?Pt(t,h):t;if(f=e.d,m=t.d,c=e.e,s=t.e,f=f.slice(),l=c-s,l){for(l<0?(n=f,l=-l,d=m.length):(n=m,s=c,d=f.length),c=Math.ceil(h/zt),d=c>d?c+1:d+1,l>d&&(l=d,n.length=1),n.reverse();l--;)n.push(0);n.reverse()}for(d=f.length,l=m.length,d-l<0&&(l=d,n=m,m=f,f=n),r=0;l;)r=(f[--l]=f[l]+m[l]+r)/Pr|0,f[l]%=Pr;for(r&&(f.unshift(r),++s),d=f.length;f[--d]==0;)f.pop();return t.d=f,t.e=s,Ht?Pt(t,h):t}function fs(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Cl+e)}function ls(e){var t,r,n,s=e.length-1,l="",c=e[0];if(s>0){for(l+=c,t=1;t<s;t++)n=e[t]+"",r=zt-n.length,r&&(l+=Ci(r)),l+=n;c=e[t],n=c+"",r=zt-n.length,r&&(l+=Ci(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return l+c}var Bs=function(){function e(n,s){var l,c=0,d=n.length;for(n=n.slice();d--;)l=n[d]*s+c,n[d]=l%Pr|0,c=l/Pr|0;return c&&n.unshift(c),n}function t(n,s,l,c){var d,f;if(l!=c)f=l>c?1:-1;else for(d=f=0;d<l;d++)if(n[d]!=s[d]){f=n[d]>s[d]?1:-1;break}return f}function r(n,s,l){for(var c=0;l--;)n[l]-=c,c=n[l]<s[l]?1:0,n[l]=c*Pr+n[l]-s[l];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,l,c){var d,f,m,x,h,v,g,y,b,j,w,A,S,D,T,k,C,M,I=n.constructor,R=n.s==s.s?1:-1,L=n.d,P=s.d;if(!n.s)return new I(n);if(!s.s)throw Error(Pn+"Division by zero");for(f=n.e-s.e,C=P.length,T=L.length,g=new I(R),y=g.d=[],m=0;P[m]==(L[m]||0);)++m;if(P[m]>(L[m]||0)&&--f,l==null?A=l=I.precision:c?A=l+(gr(n)-gr(s))+1:A=l,A<0)return new I(0);if(A=A/zt+2|0,m=0,C==1)for(x=0,P=P[0],A++;(m<T||x)&&A--;m++)S=x*Pr+(L[m]||0),y[m]=S/P|0,x=S%P|0;else{for(x=Pr/(P[0]+1)|0,x>1&&(P=e(P,x),L=e(L,x),C=P.length,T=L.length),D=C,b=L.slice(0,C),j=b.length;j<C;)b[j++]=0;M=P.slice(),M.unshift(0),k=P[0],P[1]>=Pr/2&&++k;do x=0,d=t(P,b,C,j),d<0?(w=b[0],C!=j&&(w=w*Pr+(b[1]||0)),x=w/k|0,x>1?(x>=Pr&&(x=Pr-1),h=e(P,x),v=h.length,j=b.length,d=t(h,b,v,j),d==1&&(x--,r(h,C<v?M:P,v))):(x==0&&(d=x=1),h=P.slice()),v=h.length,v<j&&h.unshift(0),r(b,h,j),d==-1&&(j=b.length,d=t(P,b,C,j),d<1&&(x++,r(b,C<j?M:P,j))),j=b.length):d===0&&(x++,b=[0]),y[m++]=x,d&&b[0]?b[j++]=L[D]||0:(b=[L[D]],j=1);while((D++<T||b[0]!==void 0)&&A--)}return y[0]||y.shift(),g.e=f,Pt(g,c?l+gr(g)+1:l)}}();function QT(e,t){var r,n,s,l,c,d,f=0,m=0,x=e.constructor,h=x.precision;if(gr(e)>16)throw Error(s1+gr(e));if(!e.s)return new x(Ja);for(Ht=!1,d=h,c=new x(.03125);e.abs().gte(.1);)e=e.times(c),m+=5;for(n=Math.log(vl(2,m))/Math.LN10*2+5|0,d+=n,r=s=l=new x(Ja),x.precision=d;;){if(s=Pt(s.times(e),d),r=r.times(++f),c=l.plus(Bs(s,r,d)),ls(c.d).slice(0,d)===ls(l.d).slice(0,d)){for(;m--;)l=Pt(l.times(l),d);return x.precision=h,t==null?(Ht=!0,Pt(l,h)):l}l=c}}function gr(e){for(var t=e.e*zt,r=e.d[0];r>=10;r/=10)t++;return t}function yv(e,t,r){if(t>e.LN10.sd())throw Ht=!0,r&&(e.precision=r),Error(Pn+"LN10 precision limit exceeded");return Pt(new e(e.LN10),t)}function Ci(e){for(var t="";e--;)t+="0";return t}function cu(e,t){var r,n,s,l,c,d,f,m,x,h=1,v=10,g=e,y=g.d,b=g.constructor,j=b.precision;if(g.s<1)throw Error(Pn+(g.s?"NaN":"-Infinity"));if(g.eq(Ja))return new b(0);if(t==null?(Ht=!1,m=j):m=t,g.eq(10))return t==null&&(Ht=!0),yv(b,m);if(m+=v,b.precision=m,r=ls(y),n=r.charAt(0),l=gr(g),Math.abs(l)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=ls(g.d),n=r.charAt(0),h++;l=gr(g),n>1?(g=new b("0."+r),l++):g=new b(n+"."+r.slice(1))}else return f=yv(b,m+2,j).times(l+""),g=cu(new b(n+"."+r.slice(1)),m-v).plus(f),b.precision=j,t==null?(Ht=!0,Pt(g,j)):g;for(d=c=g=Bs(g.minus(Ja),g.plus(Ja),m),x=Pt(g.times(g),m),s=3;;){if(c=Pt(c.times(x),m),f=d.plus(Bs(c,new b(s),m)),ls(f.d).slice(0,m)===ls(d.d).slice(0,m))return d=d.times(2),l!==0&&(d=d.plus(yv(b,m+2,j).times(l+""))),d=Bs(d,new b(h),m),b.precision=j,t==null?(Ht=!0,Pt(d,j)):d;d=f,s+=2}}function SS(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=xc(r/zt),e.d=[],n=(r+1)%zt,r<0&&(n+=zt),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=zt;n<s;)e.d.push(+t.slice(n,n+=zt));t=t.slice(n),n=zt-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ht&&(e.e>E0||e.e<-E0))throw Error(s1+r)}else e.s=0,e.e=0,e.d=[0];return e}function Pt(e,t,r){var n,s,l,c,d,f,m,x,h=e.d;for(c=1,l=h[0];l>=10;l/=10)c++;if(n=t-c,n<0)n+=zt,s=t,m=h[x=0];else{if(x=Math.ceil((n+1)/zt),l=h.length,x>=l)return e;for(m=l=h[x],c=1;l>=10;l/=10)c++;n%=zt,s=n-zt+c}if(r!==void 0&&(l=vl(10,c-s-1),d=m/l%10|0,f=t<0||h[x+1]!==void 0||m%l,f=r<4?(d||f)&&(r==0||r==(e.s<0?3:2)):d>5||d==5&&(r==4||f||r==6&&(n>0?s>0?m/vl(10,c-s):0:h[x-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return f?(l=gr(e),h.length=1,t=t-l-1,h[0]=vl(10,(zt-t%zt)%zt),e.e=xc(-t/zt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=x,l=1,x--):(h.length=x+1,l=vl(10,zt-n),h[x]=s>0?(m/vl(10,c-s)%vl(10,s)|0)*l:0),f)for(;;)if(x==0){(h[0]+=l)==Pr&&(h[0]=1,++e.e);break}else{if(h[x]+=l,h[x]!=Pr)break;h[x--]=0,l=1}for(n=h.length;h[--n]===0;)h.pop();if(Ht&&(e.e>E0||e.e<-E0))throw Error(s1+gr(e));return e}function JT(e,t){var r,n,s,l,c,d,f,m,x,h,v=e.constructor,g=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),Ht?Pt(t,g):t;if(f=e.d,h=t.d,n=t.e,m=e.e,f=f.slice(),c=m-n,c){for(x=c<0,x?(r=f,c=-c,d=h.length):(r=h,n=m,d=f.length),s=Math.max(Math.ceil(g/zt),d)+2,c>s&&(c=s,r.length=1),r.reverse(),s=c;s--;)r.push(0);r.reverse()}else{for(s=f.length,d=h.length,x=s<d,x&&(d=s),s=0;s<d;s++)if(f[s]!=h[s]){x=f[s]<h[s];break}c=0}for(x&&(r=f,f=h,h=r,t.s=-t.s),d=f.length,s=h.length-d;s>0;--s)f[d++]=0;for(s=h.length;s>c;){if(f[--s]<h[s]){for(l=s;l&&f[--l]===0;)f[l]=Pr-1;--f[l],f[s]+=Pr}f[s]-=h[s]}for(;f[--d]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=n,Ht?Pt(t,g):t):new v(0)}function Il(e,t,r){var n,s=gr(e),l=ls(e.d),c=l.length;return t?(r&&(n=r-c)>0?l=l.charAt(0)+"."+l.slice(1)+Ci(n):c>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(s<0?"e":"e+")+s):s<0?(l="0."+Ci(-s-1)+l,r&&(n=r-c)>0&&(l+=Ci(n))):s>=c?(l+=Ci(s+1-c),r&&(n=r-s-1)>0&&(l=l+"."+Ci(n))):((n=s+1)<c&&(l=l.slice(0,n)+"."+l.slice(n)),r&&(n=r-c)>0&&(s+1===c&&(l+="."),l+=Ci(n))),e.s<0?"-"+l:l}function AS(e,t){if(e.length>t)return e.length=t,!0}function e5(e){var t,r,n;function s(l){var c=this;if(!(c instanceof s))return new s(l);if(c.constructor=s,l instanceof s){c.s=l.s,c.e=l.e,c.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(Cl+l);if(l>0)c.s=1;else if(l<0)l=-l,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(l===~~l&&l<1e7){c.e=0,c.d=[l];return}return SS(c,l.toString())}else if(typeof l!="string")throw Error(Cl+l);if(l.charCodeAt(0)===45?(l=l.slice(1),c.s=-1):c.s=1,pY.test(l))SS(c,l);else throw Error(Cl+l)}if(s.prototype=Ue,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e5,s.config=s.set=gY,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function gY(e){if(!e||typeof e!="object")throw Error(Pn+"Object expected");var t,r,n,s=["precision",1,mc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(xc(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Cl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Cl+r+": "+n);return this}var i1=e5(hY);Ja=new i1(1);const Nt=i1;var vY=e=>e,t5={},r5=e=>e===t5,CS=e=>function t(){return arguments.length===0||arguments.length===1&&r5(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},a5=(e,t)=>e===1?t:CS(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var l=n.filter(c=>c!==t5).length;return l>=e?t(...n):a5(e-l,CS(function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];var m=n.map(x=>r5(x)?d.shift():x);return t(...m,...d)}))}),wx=e=>a5(e.length,e),yb=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},bY=wx((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),yY=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return vY;var s=r.reverse(),l=s[0],c=s.slice(1);return function(){return c.reduce((d,f)=>f(d),l(...arguments))}},jb=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),n5=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return t&&s.every((c,d)=>{var f;return c===((f=t)===null||f===void 0?void 0:f[d])})||(t=s,r=e(...s)),r}};function s5(e){var t;return e===0?t=1:t=Math.floor(new Nt(e).abs().log(10).toNumber())+1,t}function i5(e,t,r){for(var n=new Nt(e),s=0,l=[];n.lt(t)&&s<1e5;)l.push(n.toNumber()),n=n.add(r),s++;return l}wx((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});wx((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});wx((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var l5=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},o5=(e,t,r)=>{if(e.lte(0))return new Nt(0);var n=s5(e.toNumber()),s=new Nt(10).pow(n),l=e.div(s),c=n!==1?.05:.1,d=new Nt(Math.ceil(l.div(c).toNumber())).add(r).mul(c),f=d.mul(s);return t?new Nt(f.toNumber()):new Nt(Math.ceil(f.toNumber()))},jY=(e,t,r)=>{var n=new Nt(1),s=new Nt(e);if(!s.isint()&&r){var l=Math.abs(e);l<1?(n=new Nt(10).pow(s5(e)-1),s=new Nt(Math.floor(s.div(n).toNumber())).mul(n)):l>1&&(s=new Nt(Math.floor(e)))}else e===0?s=new Nt(Math.floor((t-1)/2)):r||(s=new Nt(Math.floor(e)));var c=Math.floor((t-1)/2),d=yY(bY(f=>s.add(new Nt(f-c).mul(n)).toNumber()),yb);return d(0,t)},c5=function(t,r,n,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Nt(0),tickMin:new Nt(0),tickMax:new Nt(0)};var c=o5(new Nt(r).sub(t).div(n-1),s,l),d;t<=0&&r>=0?d=new Nt(0):(d=new Nt(t).add(r).div(2),d=d.sub(new Nt(d).mod(c)));var f=Math.ceil(d.sub(t).div(c).toNumber()),m=Math.ceil(new Nt(r).sub(d).div(c).toNumber()),x=f+m+1;return x>n?c5(t,r,n,s,l+1):(x<n&&(m=r>0?m+(n-x):m,f=r>0?f:f+(n-x)),{step:c,tickMin:d.sub(new Nt(f).mul(c)),tickMax:d.add(new Nt(m).mul(c))})};function NY(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(n,2),[c,d]=l5([t,r]);if(c===-1/0||d===1/0){var f=d===1/0?[c,...yb(0,n-1).map(()=>1/0)]:[...yb(0,n-1).map(()=>-1/0),d];return t>r?jb(f):f}if(c===d)return jY(c,n,s);var{step:m,tickMin:x,tickMax:h}=c5(c,d,l,s,0),v=i5(x,h.add(new Nt(.1).mul(m)),m);return t>r?jb(v):v}function wY(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,c]=l5([r,n]);if(l===-1/0||c===1/0)return[r,n];if(l===c)return[l];var d=Math.max(t,2),f=o5(new Nt(c).sub(l).div(d-1),s,0),m=[...i5(new Nt(l),new Nt(c),f),c];return s===!1&&(m=m.map(x=>Math.round(x))),r>n?jb(m):m}var _Y=n5(NY),EY=n5(wY),d5=e=>e.rootProps.maxBarSize,SY=e=>e.rootProps.barGap,u5=e=>e.rootProps.barCategoryGap,AY=e=>e.rootProps.barSize,Ou=e=>e.rootProps.stackOffset,l1=e=>e.options.chartName,o1=e=>e.rootProps.syncId,f5=e=>e.rootProps.syncMethod,c1=e=>e.options.eventEmitter,Ds={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Wa={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},_x=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},CY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ds.angleAxisId,includeHidden:!1,name:void 0,reversed:Ds.reversed,scale:Ds.scale,tick:Ds.tick,tickCount:void 0,ticks:void 0,type:Ds.type,unit:void 0},TY={allowDataOverflow:Wa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Wa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Wa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Wa.scale,tick:Wa.tick,tickCount:Wa.tickCount,ticks:void 0,type:Wa.type,unit:void 0},DY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ds.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ds.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ds.scale,tick:Ds.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},OY={allowDataOverflow:Wa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Wa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Wa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Wa.scale,tick:Wa.tick,tickCount:Wa.tickCount,ticks:void 0,type:"category",unit:void 0},d1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?DY:CY,u1=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?OY:TY,Ex=e=>e.polarOptions,f1=ge([Zs,Qs,_r],q6),m5=ge([Ex,f1],(e,t)=>{if(e!=null)return da(e.innerRadius,t,0)}),x5=ge([Ex,f1],(e,t)=>{if(e!=null)return da(e.outerRadius,t,t*.8)}),kY=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},h5=ge([Ex],kY);ge([d1,h5],_x);var p5=ge([f1,m5,x5],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ge([u1,p5],_x);var g5=ge([ct,Ex,m5,x5,Zs,Qs],(e,t,r,n,s,l)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:d,startAngle:f,endAngle:m}=t;return{cx:da(c,s,s/2),cy:da(d,l,l/2),innerRadius:r,outerRadius:n,startAngle:f,endAngle:m,clockWise:!1}}}),Yt=(e,t)=>t,ku=(e,t,r)=>r;function m1(e){return e?.id}var Sr=e=>{var t=ct(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},hc=e=>e.tooltip.settings.axisId,Ar=e=>{var t=Sr(e),r=hc(e);return Pu(e,t,r)},v5=ge([Ar],e=>e?.dataKey);function b5(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:l}=r,c=new Map;return e.forEach(d=>{var f,m=(f=d.data)!==null&&f!==void 0?f:n;if(!(m==null||m.length===0)){var x=m1(d);m.forEach((h,v)=>{var g=l==null||s?v:String(It(h,l,null)),y=It(h,d.dataKey,0),b;c.has(g)?b=c.get(g):b={},Object.assign(b,{[x]:y}),c.set(g,b)})}}),Array.from(c.values())}function Sx(e){return e.stackId!=null&&e.dataKey!=null}var Ax=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Cx(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function S0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(r),!0).forEach(function(n){PY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PY(e,t,r){return(t=MY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MY(e){var t=FY(e,"string");return typeof t=="symbol"?t:t+""}function FY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nb=[0,"auto"],Va={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},y5=(e,t)=>e.cartesianAxis.xAxis[t],ei=(e,t)=>{var r=y5(e,t);return r??Va},Ga={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Nb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:_u},j5=(e,t)=>e.cartesianAxis.yAxis[t],ti=(e,t)=>{var r=j5(e,t);return r??Ga},LY={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},x1=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??LY},Xt=(e,t,r)=>{switch(t){case"xAxis":return ei(e,r);case"yAxis":return ti(e,r);case"zAxis":return x1(e,r);case"angleAxis":return d1(e,r);case"radiusAxis":return u1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},RY=(e,t,r)=>{switch(t){case"xAxis":return ei(e,r);case"yAxis":return ti(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Pu=(e,t,r)=>{switch(t){case"xAxis":return ei(e,r);case"yAxis":return ti(e,r);case"angleAxis":return d1(e,r);case"radiusAxis":return u1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},N5=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function h1(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Tx=e=>e.graphicalItems.cartesianItems,IY=ge([Yt,ku],h1),p1=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Mu=ge([Tx,Xt,IY],p1,{memoizeOptions:{resultEqualityCheck:Cx}}),w5=ge([Mu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Sx)),_5=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),BY=ge([Mu],_5),g1=e=>e.map(t=>t.data).filter(Boolean).flat(1),zY=ge([Mu],g1,{memoizeOptions:{resultEqualityCheck:Cx}}),v1=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},b1=ge([zY,Nx],v1),y1=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:It(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:It(s,n)}))):e.map(n=>({value:n})),Dx=ge([b1,Xt,Mu],y1);function E5(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Pm(e){if(us(e)||e instanceof Date){var t=Number(e);if(fa(t))return t}}function DS(e){if(Array.isArray(e)){var t=[Pm(e[0]),Pm(e[1])];return Rl(t)?t:void 0}var r=Pm(e);if(r!=null)return[r,r]}function pc(e){return e.map(Pm).filter(aV)}function UY(e,t,r){return!r||typeof t!="number"||On(t)?[]:r.length?pc(r.flatMap(n=>{var s=It(e,n.dataKey),l,c;if(Array.isArray(s)?[l,c]=s:l=c=s,!(!fa(l)||!fa(c)))return[t-l,t+c]})):[]}var $Y=ge([w5,Nx,Ar],b5),S5=(e,t,r)=>{var n={},s=t.reduce((l,c)=>(c.stackId==null||(l[c.stackId]==null&&(l[c.stackId]=[]),l[c.stackId].push(c)),l),n);return Object.fromEntries(Object.entries(s).map(l=>{var[c,d]=l,f=d.map(m1);return[c,{stackedData:Bq(e,f,r),graphicalItems:d}]}))},wb=ge([$Y,w5,Ou],S5),A5=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:l}=t;if(n==null&&r!=="zAxis"){var c=Hq(e,s,l);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},qY=ge([Xt],e=>e.allowDataOverflow),j1=e=>{var t;if(e==null||!("domain"in e))return Nb;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=pc(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Nb},N1=ge([Xt],j1),w1=ge([N1,qY],WT),HY=ge([wb,Ki,Yt,w1],A5,{memoizeOptions:{resultEqualityCheck:Ax}}),Ox=e=>e.errorBars,VY=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>E5(r,n)),A0=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var l=s.flat(),c=Math.min(...l),d=Math.max(...l);return[c,d]}},_1=(e,t,r,n,s)=>{var l,c;if(r.length>0&&e.forEach(d=>{r.forEach(f=>{var m,x,h=(m=n[f.id])===null||m===void 0?void 0:m.filter(w=>E5(s,w)),v=It(d,(x=t.dataKey)!==null&&x!==void 0?x:f.dataKey),g=UY(d,v,h);if(g.length>=2){var y=Math.min(...g),b=Math.max(...g);(l==null||y<l)&&(l=y),(c==null||b>c)&&(c=b)}var j=DS(v);j!=null&&(l=l==null?j[0]:Math.min(l,j[0]),c=c==null?j[1]:Math.max(c,j[1]))})}),t?.dataKey!=null&&e.forEach(d=>{var f=DS(It(d,t.dataKey));f!=null&&(l=l==null?f[0]:Math.min(l,f[0]),c=c==null?f[1]:Math.max(c,f[1]))}),fa(l)&&fa(c))return[l,c]},GY=ge([b1,Xt,BY,Ox,Yt],_1,{memoizeOptions:{resultEqualityCheck:Ax}});function KY(e){var{value:t}=e;if(us(t)||t instanceof Date)return t}var YY=(e,t,r)=>{var n=e.map(KY).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&t6(n))?xT(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},C5=e=>e.referenceElements.dots,gc=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),WY=ge([C5,Yt,ku],gc),T5=e=>e.referenceElements.areas,XY=ge([T5,Yt,ku],gc),D5=e=>e.referenceElements.lines,ZY=ge([D5,Yt,ku],gc),O5=(e,t)=>{var r=pc(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},QY=ge(WY,Yt,O5),k5=(e,t)=>{var r=pc(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},JY=ge([XY,Yt],k5),P5=(e,t)=>{var r=pc(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},eW=ge(ZY,Yt,P5),tW=ge(QY,eW,JY,(e,t,r)=>A0(e,r,t)),E1=(e,t,r,n,s,l,c,d)=>{if(r!=null)return r;var f=c==="vertical"&&d==="xAxis"||c==="horizontal"&&d==="yAxis",m=f?A0(n,l,s):A0(l,s);return xY(t,m,e.allowDataOverflow)},rW=ge([Xt,N1,w1,HY,GY,tW,ct,Yt],E1,{memoizeOptions:{resultEqualityCheck:Ax}}),aW=[0,1],S1=(e,t,r,n,s,l,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:d,type:f}=e,m=qi(t,l);return m&&d==null?xT(0,r.length):f==="category"?YY(n,e,m):s==="expand"?aW:c}},A1=ge([Xt,ct,b1,Dx,Ou,Yt,rW],S1),M5=(e,t,r,n,s)=>{if(e!=null){var{scale:l,type:c}=e;if(l==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof l=="string"){var d="scale".concat(ju(l));return d in Md?d:"point"}}},vc=ge([Xt,ct,N5,l1,Yt],M5);function nW(e){if(e!=null){if(e in Md)return Md[e]();var t="scale".concat(ju(e));if(t in Md)return Md[t]()}}function C1(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=nW(t);if(s!=null){var l=s.domain(r).range(n);return Mq(l),l}}}var T1=(e,t,r)=>{var n=j1(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Rl(e))return _Y(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Rl(e))return EY(e,t.tickCount,t.allowDecimals)}},D1=ge([A1,Pu,vc],T1),O1=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Rl(t)&&Array.isArray(r)&&r.length>0){var s=t[0],l=r[0],c=t[1],d=r[r.length-1];return[Math.min(s,l),Math.max(c,d)]}return t},sW=ge([Xt,A1,D1,Yt],O1),iW=ge(Dx,Xt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(pc(e.map(d=>d.value))).sort((d,f)=>d-f);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l+1]-n[l];r=Math.min(r,c)}return r/s}}),F5=ge(iW,ct,u5,_r,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!fa(e))return 0;var l=t==="vertical"?n.height:n.width;if(s==="gap")return e*l/2;if(s==="no-gap"){var c=da(r,e*l),d=e*l/2;return d-c-(d-c)/l*c}return 0}),lW=(e,t)=>{var r=ei(e,t);return r==null||typeof r.padding!="string"?0:F5(e,"xAxis",t,r.padding)},oW=(e,t)=>{var r=ti(e,t);return r==null||typeof r.padding!="string"?0:F5(e,"yAxis",t,r.padding)},cW=ge(ei,lW,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),dW=ge(ti,oW,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),uW=ge([_r,cW,fx,ux,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:l}=n;return s?[l.left,r.width-l.right]:[e.left+t.left,e.left+e.width-t.right]}),fW=ge([_r,ct,dW,fx,ux,(e,t,r)=>r],(e,t,r,n,s,l)=>{var{padding:c}=s;return l?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Fu=(e,t,r,n)=>{var s;switch(t){case"xAxis":return uW(e,r,n);case"yAxis":return fW(e,r,n);case"zAxis":return(s=x1(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return h5(e);case"radiusAxis":return p5(e,r);default:return}},L5=ge([Xt,Fu],_x),bc=ge([Xt,vc,sW,L5],C1);ge([Mu,Ox,Yt],VY);function R5(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var kx=(e,t)=>t,Px=(e,t,r)=>r,mW=ge(cx,kx,Px,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(R5)),xW=ge(dx,kx,Px,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(R5)),I5=(e,t)=>({width:e.width,height:t.height}),hW=(e,t)=>{var r=typeof t.width=="number"?t.width:_u;return{width:r,height:e.height}},B5=ge(_r,ei,I5),pW=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},gW=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},vW=ge(Qs,_r,mW,kx,Px,(e,t,r,n,s)=>{var l={},c;return r.forEach(d=>{var f=I5(t,d);c==null&&(c=pW(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;l[d.id]=c-Number(m)*f.height,c+=(m?-1:1)*f.height}),l}),bW=ge(Zs,_r,xW,kx,Px,(e,t,r,n,s)=>{var l={},c;return r.forEach(d=>{var f=hW(t,d);c==null&&(c=gW(t,n,e));var m=n==="left"&&!s||n==="right"&&s;l[d.id]=c-Number(m)*f.width,c+=(m?-1:1)*f.width}),l}),yW=(e,t)=>{var r=ei(e,t);if(r!=null)return vW(e,r.orientation,r.mirror)},jW=ge([_r,ei,yW,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),NW=(e,t)=>{var r=ti(e,t);if(r!=null)return bW(e,r.orientation,r.mirror)},wW=ge([_r,ti,NW,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),z5=ge(_r,ti,(e,t)=>{var r=typeof t.width=="number"?t.width:_u;return{width:r,height:e.height}}),OS=(e,t,r)=>{switch(t){case"xAxis":return B5(e,r).width;case"yAxis":return z5(e,r).height;default:return}},U5=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:l,dataKey:c}=r,d=qi(e,n),f=t.map(m=>m.value);if(c&&d&&l==="category"&&s&&t6(f))return f}},k1=ge([ct,Dx,Xt,Yt],U5),$5=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:l}=r,c=qi(e,n);if(c&&(s==="number"||l!=="auto"))return t.map(d=>d.value)}},P1=ge([ct,Dx,Pu,Yt],$5),kS=ge([ct,RY,vc,bc,k1,P1,Fu,D1,Yt],(e,t,r,n,s,l,c,d,f)=>{if(t==null)return null;var m=qi(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:l,duplicateDomain:s,isCategorical:m,niceTicks:d,range:c,realScaleType:r,scale:n}}),_W=(e,t,r,n,s,l,c,d,f)=>{if(!(t==null||n==null)){var m=qi(e,f),{type:x,ticks:h,tickCount:v}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,y=x==="category"&&n.bandwidth?n.bandwidth()/g:0;y=f==="angleAxis"&&l!=null&&l.length>=2?Rr(l[0]-l[1])*2*y:y;var b=h||s;if(b){var j=b.map((w,A)=>{var S=c?c.indexOf(w):w;return{index:A,coordinate:n(S)+y,value:w,offset:y}});return j.filter(w=>!On(w.coordinate))}return m&&d?d.map((w,A)=>({coordinate:n(w)+y,value:w,index:A,offset:y})):n.ticks?n.ticks(v).map(w=>({coordinate:n(w)+y,value:w,offset:y})):n.domain().map((w,A)=>({coordinate:n(w)+y,value:c?c[w]:w,index:A,offset:y}))}},q5=ge([ct,Pu,vc,bc,D1,Fu,k1,P1,Yt],_W),EW=(e,t,r,n,s,l,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var d=qi(e,c),{tickCount:f}=t,m=0;return m=c==="angleAxis"&&n?.length>=2?Rr(n[0]-n[1])*2*m:m,d&&l?l.map((x,h)=>({coordinate:r(x)+m,value:x,index:h,offset:m})):r.ticks?r.ticks(f).map(x=>({coordinate:r(x)+m,value:x,offset:m})):r.domain().map((x,h)=>({coordinate:r(x)+m,value:s?s[x]:x,index:h,offset:m}))}},Ri=ge([ct,Pu,bc,Fu,k1,P1,Yt],EW),Ii=ge(Xt,bc,(e,t)=>{if(!(e==null||t==null))return S0(S0({},e),{},{scale:t})}),SW=ge([Xt,vc,A1,L5],C1);ge((e,t,r)=>x1(e,r),SW,(e,t)=>{if(!(e==null||t==null))return S0(S0({},e),{},{scale:t})});var AW=ge([ct,cx,dx],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),H5=e=>e.options.defaultTooltipEventType,V5=e=>e.options.validateTooltipEventTypes;function G5(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function M1(e,t){var r=H5(e),n=V5(e);return G5(t,r,n)}function CW(e){return He(t=>M1(t,e))}var K5=(e,t)=>{var r,n=Number(t);if(!(On(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},TW=e=>e.tooltip.settings,Di={active:!1,index:null,dataKey:void 0,coordinate:void 0},DW={itemInteraction:{click:Di,hover:Di},axisInteraction:{click:Di,hover:Di},keyboardInteraction:Di,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Y5=on({name:"tooltip",initialState:DW,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:va()},removeTooltipEntrySettings:{reducer(e,t){var r=Is(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:va()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:OW,removeTooltipEntrySettings:kW,setTooltipSettingsState:PW,setActiveMouseOverItemIndex:W5,mouseLeaveItem:MW,mouseLeaveChart:X5,setActiveClickItemIndex:FW,setMouseOverAxisIndex:Z5,setMouseClickAxisIndex:LW,setSyncInteraction:_b,setKeyboardInteraction:Eb}=Y5.actions,RW=Y5.reducer;function PS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PS(Object(r),!0).forEach(function(n){IW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IW(e,t,r){return(t=BW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BW(e){var t=zW(e,"string");return typeof t=="symbol"?t:t+""}function zW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UW(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $W(e){return e.index!=null}var Q5=(e,t,r,n)=>{if(t==null)return Di;var s=UW(e,t,r);if(s==null)return Di;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var l=e.settings.active===!0;if($W(s)){if(l)return Cm(Cm({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Cm(Cm({},Di),{},{coordinate:s.coordinate})},F1=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!fa(n))return r;var s=0,l=1/0;return t.length>0&&(l=t.length-1),String(Math.max(s,Math.min(n,l)))},J5=(e,t,r,n,s,l,c,d)=>{if(!(l==null||d==null)){var f=c[0],m=f==null?void 0:d(f.positions,l);if(m!=null)return m;var x=s?.[Number(l)];if(x)switch(r){case"horizontal":return{x:x.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:x.coordinate}}}},eD=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(l=>{var c;return((c=l.settings)===null||c===void 0?void 0:c.dataKey)===s})},Lu=e=>e.options.tooltipPayloadSearcher,yc=e=>e.tooltip;function MS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MS(Object(r),!0).forEach(function(n){qW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qW(e,t,r){return(t=HW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HW(e){var t=VW(e,"string");return typeof t=="symbol"?t:t+""}function VW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GW(e,t){return e??t}var tD=(e,t,r,n,s,l,c)=>{if(!(t==null||l==null)){var{chartData:d,computedData:f,dataStartIndex:m,dataEndIndex:x}=r,h=[];return e.reduce((v,g)=>{var y,{dataDefinedOnItem:b,settings:j}=g,w=GW(b,d),A=Array.isArray(w)?H6(w,m,x):w,S=(y=j?.dataKey)!==null&&y!==void 0?y:n,D=j?.nameKey,T;if(n&&Array.isArray(A)&&!Array.isArray(A[0])&&c==="axis"?T=r6(A,n,s):T=l(A,t,f,D),Array.isArray(T))T.forEach(C=>{var M=FS(FS({},j),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});v.push(fE({tooltipEntrySettings:M,dataKey:C.dataKey,payload:C.payload,value:It(C.payload,C.dataKey),name:C.name}))});else{var k;v.push(fE({tooltipEntrySettings:j,dataKey:S,payload:T,value:It(T,S),name:(k=It(T,D))!==null&&k!==void 0?k:j?.name}))}return v},h)}},L1=ge([Ar,ct,N5,l1,Sr],M5),KW=ge([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),YW=ge([Sr,hc],h1),Ru=ge([KW,Ar,YW],p1,{memoizeOptions:{resultEqualityCheck:Cx}}),WW=ge([Ru],e=>e.filter(Sx)),XW=ge([Ru],g1,{memoizeOptions:{resultEqualityCheck:Cx}}),jc=ge([XW,Ki],v1),ZW=ge([WW,Ki,Ar],b5),R1=ge([jc,Ar,Ru],y1),rD=ge([Ar],j1),QW=ge([Ar],e=>e.allowDataOverflow),aD=ge([rD,QW],WT),JW=ge([Ru],e=>e.filter(Sx)),eX=ge([ZW,JW,Ou],S5),tX=ge([eX,Ki,Sr,aD],A5),rX=ge([Ru],_5),aX=ge([jc,Ar,rX,Ox,Sr],_1,{memoizeOptions:{resultEqualityCheck:Ax}}),nX=ge([C5,Sr,hc],gc),sX=ge([nX,Sr],O5),iX=ge([T5,Sr,hc],gc),lX=ge([iX,Sr],k5),oX=ge([D5,Sr,hc],gc),cX=ge([oX,Sr],P5),dX=ge([sX,cX,lX],A0),uX=ge([Ar,rD,aD,tX,aX,dX,ct,Sr],E1),nD=ge([Ar,ct,jc,R1,Ou,Sr,uX],S1),fX=ge([nD,Ar,L1],T1),mX=ge([Ar,nD,fX,Sr],O1),sD=e=>{var t=Sr(e),r=hc(e),n=!1;return Fu(e,t,r,n)},iD=ge([Ar,sD],_x),lD=ge([Ar,L1,mX,iD],C1),xX=ge([ct,R1,Ar,Sr],U5),hX=ge([ct,R1,Ar,Sr],$5),pX=(e,t,r,n,s,l,c,d)=>{if(t){var{type:f}=t,m=qi(e,d);if(n){var x=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=f==="category"&&n.bandwidth?n.bandwidth()/x:0;return h=d==="angleAxis"&&s!=null&&s?.length>=2?Rr(s[0]-s[1])*2*h:h,m&&c?c.map((v,g)=>({coordinate:n(v)+h,value:v,index:g,offset:h})):n.domain().map((v,g)=>({coordinate:n(v)+h,value:l?l[v]:v,index:g,offset:h}))}}},ri=ge([ct,Ar,L1,lD,sD,xX,hX,Sr],pX),I1=ge([H5,V5,TW],(e,t,r)=>G5(r.shared,e,t)),oD=e=>e.tooltip.settings.trigger,B1=e=>e.tooltip.settings.defaultIndex,Mx=ge([yc,I1,oD,B1],Q5),Bi=ge([Mx,jc],F1),cD=ge([ri,Bi],K5),dD=ge([Mx],e=>{if(e)return e.dataKey}),uD=ge([yc,I1,oD,B1],eD),gX=ge([Zs,Qs,ct,_r,ri,B1,uD,Lu],J5),vX=ge([Mx,gX],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),bX=ge([Mx],e=>e.active),yX=ge([uD,Bi,Ki,v5,cD,Lu,I1],tD),jX=ge([yX],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function LS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LS(Object(r),!0).forEach(function(n){NX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NX(e,t,r){return(t=wX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wX(e){var t=_X(e,"string");return typeof t=="symbol"?t:t+""}function _X(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EX=()=>He(Ar),SX=()=>{var e=EX(),t=He(ri),r=He(lD);return au(RS(RS({},e),{},{scale:r}),t)},AX=()=>He(l1),z1=(e,t)=>t,fD=(e,t,r)=>r,U1=(e,t,r,n)=>n,CX=ge(ri,e=>ax(e,t=>t.coordinate)),$1=ge([yc,z1,fD,U1],Q5),mD=ge([$1,jc],F1),TX=(e,t,r)=>{if(t!=null){var n=yc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},xD=ge([yc,z1,fD,U1],eD),C0=ge([Zs,Qs,ct,_r,ri,U1,xD,Lu],J5),DX=ge([$1,C0],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),hD=ge(ri,mD,K5),OX=ge([xD,mD,Ki,v5,hD,Lu,z1],tD),kX=ge([$1],e=>({isActive:e.active,activeIndex:e.index})),PX=(e,t,r,n,s,l,c,d)=>{if(!(!e||!t||!n||!s||!l)){var f=Vq(e.chartX,e.chartY,t,r,d);if(f){var m=Kq(f,t),x=kq(m,c,l,n,s),h=Gq(t,l,x,f);return{activeIndex:String(x),activeCoordinate:h}}}};function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb.apply(null,arguments)}function IS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(r),!0).forEach(function(n){MX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MX(e,t,r){return(t=FX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FX(e){var t=LX(e,"string");return typeof t=="symbol"?t:t+""}function LX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RX(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:l,layout:c,cursor:d,tooltipEventType:f,chartName:m}=e,x=t,h=r,v=n;if(!d||!x||m!=="ScatterChart"&&f!=="axis")return null;var g,y;if(m==="ScatterChart")g=x,y=XH;else if(m==="BarChart")g=ZH(c,x,s,l),y=dT;else if(c==="radial"){var{cx:b,cy:j,radius:w,startAngle:A,endAngle:S}=uT(x);g={cx:b,cy:j,startAngle:A,endAngle:S,innerRadius:w,outerRadius:w},y=mT}else g={points:MV(c,x,s)},y=My;var D=typeof d=="object"&&"className"in d?d.className:void 0,T=Tm(Tm(Tm(Tm({stroke:"#ccc",pointerEvents:"none"},s),g),Pl(d)),{},{payload:h,payloadIndex:v,className:pt("recharts-tooltip-cursor",D)});return _.isValidElement(d)?_.cloneElement(d,T):_.createElement(y,T)}function IX(e){var t=SX(),r=J6(),n=xx(),s=AX();return _.createElement(RX,Sb({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var pD=_.createContext(null),BX=()=>_.useContext(pD),jv={exports:{}},BS;function zX(){return BS||(BS=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(f,m,x){this.fn=f,this.context=m,this.once=x||!1}function l(f,m,x,h,v){if(typeof x!="function")throw new TypeError("The listener must be a function");var g=new s(x,h||f,v),y=r?r+m:m;return f._events[y]?f._events[y].fn?f._events[y]=[f._events[y],g]:f._events[y].push(g):(f._events[y]=g,f._eventsCount++),f}function c(f,m){--f._eventsCount===0?f._events=new n:delete f._events[m]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],x,h;if(this._eventsCount===0)return m;for(h in x=this._events)t.call(x,h)&&m.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(x)):m},d.prototype.listeners=function(m){var x=r?r+m:m,h=this._events[x];if(!h)return[];if(h.fn)return[h.fn];for(var v=0,g=h.length,y=new Array(g);v<g;v++)y[v]=h[v].fn;return y},d.prototype.listenerCount=function(m){var x=r?r+m:m,h=this._events[x];return h?h.fn?1:h.length:0},d.prototype.emit=function(m,x,h,v,g,y){var b=r?r+m:m;if(!this._events[b])return!1;var j=this._events[b],w=arguments.length,A,S;if(j.fn){switch(j.once&&this.removeListener(m,j.fn,void 0,!0),w){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,x),!0;case 3:return j.fn.call(j.context,x,h),!0;case 4:return j.fn.call(j.context,x,h,v),!0;case 5:return j.fn.call(j.context,x,h,v,g),!0;case 6:return j.fn.call(j.context,x,h,v,g,y),!0}for(S=1,A=new Array(w-1);S<w;S++)A[S-1]=arguments[S];j.fn.apply(j.context,A)}else{var D=j.length,T;for(S=0;S<D;S++)switch(j[S].once&&this.removeListener(m,j[S].fn,void 0,!0),w){case 1:j[S].fn.call(j[S].context);break;case 2:j[S].fn.call(j[S].context,x);break;case 3:j[S].fn.call(j[S].context,x,h);break;case 4:j[S].fn.call(j[S].context,x,h,v);break;default:if(!A)for(T=1,A=new Array(w-1);T<w;T++)A[T-1]=arguments[T];j[S].fn.apply(j[S].context,A)}}return!0},d.prototype.on=function(m,x,h){return l(this,m,x,h,!1)},d.prototype.once=function(m,x,h){return l(this,m,x,h,!0)},d.prototype.removeListener=function(m,x,h,v){var g=r?r+m:m;if(!this._events[g])return this;if(!x)return c(this,g),this;var y=this._events[g];if(y.fn)y.fn===x&&(!v||y.once)&&(!h||y.context===h)&&c(this,g);else{for(var b=0,j=[],w=y.length;b<w;b++)(y[b].fn!==x||v&&!y[b].once||h&&y[b].context!==h)&&j.push(y[b]);j.length?this._events[g]=j.length===1?j[0]:j:c(this,g)}return this},d.prototype.removeAllListeners=function(m){var x;return m?(x=r?r+m:m,this._events[x]&&c(this,x)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,e.exports=d}(jv)),jv.exports}var UX=zX();const $X=Ws(UX);var du=new $X,Ab="recharts.syncEvent.tooltip",zS="recharts.syncEvent.brush";function q1(e,t){if(t){var r=Number.parseInt(t,10);if(!On(r))return e?.[r]}}var qX={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},gD=on({name:"options",initialState:qX,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),HX=gD.reducer,{createEventEmitter:VX}=gD.actions;function GX(e){return e.tooltip.syncInteraction}var KX={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},vD=on({name:"chartData",initialState:KX,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:US,setDataStartEndIndexes:YX,setComputedData:yne}=vD.actions,WX=vD.reducer,XX=["x","y"];function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(n){ZX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZX(e,t,r){return(t=QX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QX(e){var t=JX(e,"string");return typeof t=="symbol"?t:t+""}function JX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eZ(e,t){if(e==null)return{};var r,n,s=tZ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bD=()=>{};function rZ(){var e=He(o1),t=He(c1),r=ar(),n=He(f5),s=He(ri),l=xx(),c=mx(),d=He(f=>f.rootProps.className);_.useEffect(()=>{if(e==null)return bD;var f=(m,x,h)=>{if(t!==h&&e===m){if(n==="index"){var v;if(c&&x!==null&&x!==void 0&&(v=x.payload)!==null&&v!==void 0&&v.coordinate&&x.payload.sourceViewBox){var g=x.payload.coordinate,{x:y,y:b}=g,j=eZ(g,XX),{x:w,y:A,width:S,height:D}=x.payload.sourceViewBox,T=Bo(Bo({},j),{},{x:c.x+(S?(y-w)/S:0)*c.width,y:c.y+(D?(b-A)/D:0)*c.height});r(Bo(Bo({},x),{},{payload:Bo(Bo({},x.payload),{},{coordinate:T})}))}else r(x);return}if(s!=null){var k;if(typeof n=="function"){var C={activeTooltipIndex:x.payload.index==null?void 0:Number(x.payload.index),isTooltipActive:x.payload.active,activeIndex:x.payload.index==null?void 0:Number(x.payload.index),activeLabel:x.payload.label,activeDataKey:x.payload.dataKey,activeCoordinate:x.payload.coordinate},M=n(s,C);k=s[M]}else n==="value"&&(k=s.find(G=>String(G.value)===x.payload.label));var{coordinate:I}=x.payload;if(k==null||x.payload.active===!1||I==null||c==null){r(_b({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:R,y:L}=I,P=Math.min(R,c.x+c.width),O=Math.min(L,c.y+c.height),z={x:l==="horizontal"?k.coordinate:P,y:l==="horizontal"?O:k.coordinate},V=_b({active:x.payload.active,coordinate:z,dataKey:x.payload.dataKey,index:String(k.index),label:x.payload.label,sourceViewBox:x.payload.sourceViewBox});r(V)}}};return du.on(Ab,f),()=>{du.off(Ab,f)}},[d,r,t,e,n,s,l,c])}function aZ(){var e=He(o1),t=He(c1),r=ar();_.useEffect(()=>{if(e==null)return bD;var n=(s,l,c)=>{t!==c&&e===s&&r(YX(l))};return du.on(zS,n),()=>{du.off(zS,n)}},[r,t,e])}function nZ(){var e=ar();_.useEffect(()=>{e(VX())},[e]),rZ(),aZ()}function sZ(e,t,r,n,s,l){var c=He(g=>TX(g,e,t)),d=He(c1),f=He(o1),m=He(f5),x=He(GX),h=x?.active,v=mx();_.useEffect(()=>{if(!h&&f!=null&&d!=null){var g=_b({active:l,coordinate:r,dataKey:c,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:v});du.emit(Ab,f,g,d)}},[h,r,c,s,n,d,f,m,l,v])}function qS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qS(Object(r),!0).forEach(function(n){iZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iZ(e,t,r){return(t=lZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lZ(e){var t=oZ(e,"string");return typeof t=="symbol"?t:t+""}function oZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cZ(e){return e.dataKey}function dZ(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(CH,t)}var VS=[],uZ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Hi.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Nv(e){var t=ra(e,uZ),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:l,content:c,filterNull:d,isAnimationActive:f,offset:m,payloadUniqBy:x,position:h,reverseDirection:v,useTranslate3d:g,wrapperStyle:y,cursor:b,shared:j,trigger:w,defaultIndex:A,portal:S,axisId:D}=t,T=ar(),k=typeof A=="number"?String(A):A;_.useEffect(()=>{T(PW({shared:j,trigger:w,axisId:D,active:r,defaultIndex:k}))},[T,j,w,D,r,k]);var C=mx(),M=sT(),I=CW(j),{activeIndex:R,isActive:L}=He(Q=>kX(Q,I,w,k)),P=He(Q=>OX(Q,I,w,k)),O=He(Q=>hD(Q,I,w,k)),z=He(Q=>DX(Q,I,w,k)),V=P,G=BX(),K=r??L,[ce,le]=_$([V,K]),ne=I==="axis"?O:void 0;sZ(I,w,z,ne,R,K);var Z=S??G;if(Z==null)return null;var F=V??VS;K||(F=VS),d&&F.length&&(F=XU(V.filter(Q=>Q.value!=null&&(Q.hide!==!0||t.includeHidden)),x,cZ));var U=F.length>0,Y=_.createElement(FH,{allowEscapeViewBox:n,animationDuration:s,animationEasing:l,isAnimationActive:f,active:K,coordinate:z,hasPayload:U,offset:m,position:h,reverseDirection:v,useTranslate3d:g,viewBox:C,wrapperStyle:y,lastBoundingBox:ce,innerRef:le,hasPortalFromProps:!!S},dZ(c,HS(HS({},t),{},{payload:F,label:ne,active:K,coordinate:z,accessibilityLayer:M})));return _.createElement(_.Fragment,null,q8.createPortal(Y,Z),K&&_.createElement(IX,{cursor:b,tooltipEventType:I,coordinate:z,payload:V,index:R}))}var Iu=e=>null;Iu.displayName="Cell";function fZ(e,t,r){return(t=mZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mZ(e){var t=xZ(e,"string");return typeof t=="symbol"?t:t+""}function xZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class hZ{constructor(t){fZ(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function GS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(r),!0).forEach(function(n){gZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gZ(e,t,r){return(t=vZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vZ(e){var t=bZ(e,"string");return typeof t=="symbol"?t:t+""}function bZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yZ={cacheSize:2e3,enableCache:!0},yD=pZ({},yZ),KS=new hZ(yD.cacheSize),jZ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},YS="recharts_measurement_span";function NZ(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",l=t.fontStyle||"",c=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(l,"|").concat(c,"|").concat(d)}var WS=(e,t)=>{try{var r=document.getElementById(YS);r||(r=document.createElement("span"),r.setAttribute("id",YS),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,jZ,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Ud=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Hi.isSsr)return{width:0,height:0};if(!yD.enableCache)return WS(t,r);var n=NZ(t,r),s=KS.get(n);if(s)return s;var l=WS(t,r);return KS.set(n,l),l},XS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wZ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_Z=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,jD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},EZ=Object.keys(jD),$o="NaN";function SZ(e,t){return e*jD[t]}class ka{static parse(t){var r,[,n,s]=(r=_Z.exec(t))!==null&&r!==void 0?r:[];return new ka(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,On(t)&&(this.unit=""),r!==""&&!wZ.test(r)&&(this.num=NaN,this.unit=""),EZ.includes(r)&&(this.num=SZ(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ka(NaN,""):new ka(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ka(NaN,""):new ka(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ka(NaN,""):new ka(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ka(NaN,""):new ka(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return On(this.num)}}function ND(e){if(e.includes($o))return $o;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,l]=(r=XS.exec(t))!==null&&r!==void 0?r:[],c=ka.parse(n??""),d=ka.parse(l??""),f=s==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return $o;t=t.replace(XS,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,x,h,v]=(m=ZS.exec(t))!==null&&m!==void 0?m:[],g=ka.parse(x??""),y=ka.parse(v??""),b=h==="+"?g.add(y):g.subtract(y);if(b.isNaN())return $o;t=t.replace(ZS,b.toString())}return t}var QS=/\(([^()]*)\)/;function AZ(e){for(var t=e,r;(r=QS.exec(t))!=null;){var[,n]=r;t=t.replace(QS,ND(n))}return t}function CZ(e){var t=e.replace(/\s+/g,"");return t=AZ(t),t=ND(t),t}function TZ(e){try{return CZ(e)}catch{return $o}}function wv(e){var t=TZ(e.slice(5,-1));return t===$o?"":t}var DZ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],OZ=["dx","dy","angle","className","breakAll"];function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(null,arguments)}function JS(e,t){if(e==null)return{};var r,n,s=kZ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wD=/[ \f\n\r\t\v\u2028\u2029]+/,_D=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Gt(t)||(r?s=t.toString().split(""):s=t.toString().split(wD));var l=s.map(d=>({word:d,width:Ud(d,n).width})),c=r?0:Ud(" ",n).width;return{wordsWithComputedWidth:l,spaceWidth:c}}catch{return null}},PZ=(e,t,r,n,s)=>{var{maxLines:l,children:c,style:d,breakAll:f}=e,m=Ge(l),x=c,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce((P,O)=>{var{word:z,width:V}=O,G=P[P.length-1];if(G&&(n==null||s||G.width+V+r<Number(n)))G.words.push(z),G.width+=V+r;else{var K={words:[z],width:V};P.push(K)}return P},[])},v=h(t),g=R=>R.reduce((L,P)=>L.width>P.width?L:P);if(!m||s)return v;var y=v.length>l||g(v).width>Number(n);if(!y)return v;for(var b="…",j=R=>{var L=x.slice(0,R),P=_D({breakAll:f,style:d,children:L+b}).wordsWithComputedWidth,O=h(P),z=O.length>l||g(O).width>Number(n);return[z,O]},w=0,A=x.length-1,S=0,D;w<=A&&S<=x.length-1;){var T=Math.floor((w+A)/2),k=T-1,[C,M]=j(k),[I]=j(T);if(!C&&!I&&(w=T+1),C&&I&&(A=T-1),!C&&I){D=M;break}S++}return D||v},e3=e=>{var t=Gt(e)?[]:e.toString().split(wD);return[{words:t}]},MZ=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:l,maxLines:c}=e;if((t||r)&&!Hi.isSsr){var d,f,m=_D({breakAll:l,children:n,style:s});if(m){var{wordsWithComputedWidth:x,spaceWidth:h}=m;d=x,f=h}else return e3(n);return PZ({breakAll:l,children:n,maxLines:c,style:s},d,f,t,r)}return e3(n)},t3="#808080",Fx=_.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:l="0.71em",scaleToFit:c=!1,textAnchor:d="start",verticalAnchor:f="end",fill:m=t3}=e,x=JS(e,DZ),h=_.useMemo(()=>MZ({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:c,style:x.style,width:x.width}),[x.breakAll,x.children,x.maxLines,c,x.style,x.width]),{dx:v,dy:g,angle:y,className:b,breakAll:j}=x,w=JS(x,OZ);if(!us(r)||!us(n)||h.length===0)return null;var A=r+(Ge(v)?v:0),S=n+(Ge(g)?g:0),D;switch(f){case"start":D=wv("calc(".concat(l,")"));break;case"middle":D=wv("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:D=wv("calc(".concat(h.length-1," * -").concat(s,")"));break}var T=[];if(c){var k=h[0].width,{width:C}=x;T.push("scale(".concat(Ge(C)?C/k:1,")"))}return y&&T.push("rotate(".concat(y,", ").concat(A,", ").concat(S,")")),T.length&&(w.transform=T.join(" ")),_.createElement("text",Cb({},Ea(w),{ref:t,x:A,y:S,className:pt("recharts-text",b),textAnchor:d,fill:m.includes("url")?t3:m}),h.map((M,I)=>{var R=M.words.join(j?"":" ");return _.createElement("tspan",{x:A,dy:I===0?D:s,key:"".concat(R,"-").concat(I)},R)}))});Fx.displayName="Text";var FZ=["labelRef"];function LZ(e,t){if(e==null)return{};var r,n,s=RZ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function r3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(r),!0).forEach(function(n){IZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IZ(e,t,r){return(t=BZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BZ(e){var t=zZ(e,"string");return typeof t=="symbol"?t:t+""}function zZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Os.apply(null,arguments)}var ED=_.createContext(null),UZ=e=>{var{x:t,y:r,width:n,height:s,children:l}=e,c=_.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return _.createElement(ED.Provider,{value:c},l)},SD=()=>{var e=_.useContext(ED),t=mx();return e||t},$Z=_.createContext(null),qZ=()=>{var e=_.useContext($Z),t=He(g5);return e||t},HZ=e=>{var{value:t,formatter:r}=e,n=Gt(e.children)?t:e.children;return typeof r=="function"?r(n):n},H1=e=>e!=null&&typeof e=="function",VZ=(e,t)=>{var r=Rr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},GZ=(e,t,r,n,s)=>{var{offset:l,className:c}=e,{cx:d,cy:f,innerRadius:m,outerRadius:x,startAngle:h,endAngle:v,clockWise:g}=s,y=(m+x)/2,b=VZ(h,v),j=b>=0?1:-1,w,A;switch(t){case"insideStart":w=h+j*l,A=g;break;case"insideEnd":w=v-j*l,A=!g;break;case"end":w=v+j*l,A=g;break;default:throw new Error("Unsupported position ".concat(t))}A=b<=0?A:!A;var S=mr(d,f,y,w),D=mr(d,f,y,w+(A?1:-1)*359),T="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(A?0:1,`,
    `).concat(D.x,",").concat(D.y),k=Gt(e.id)?eu("recharts-radial-line-"):e.id;return _.createElement("text",Os({},n,{dominantBaseline:"central",className:pt("recharts-radial-bar-label",c)}),_.createElement("defs",null,_.createElement("path",{id:k,d:T})),_.createElement("textPath",{xlinkHref:"#".concat(k)},r))},KZ=(e,t,r)=>{var{cx:n,cy:s,innerRadius:l,outerRadius:c,startAngle:d,endAngle:f}=e,m=(d+f)/2;if(r==="outside"){var{x,y:h}=mr(n,s,c+t,m);return{x,y:h,textAnchor:x>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(l+c)/2,{x:g,y}=mr(n,s,v,m);return{x:g,y,textAnchor:"middle",verticalAnchor:"middle"}},AD=e=>"cx"in e&&Ge(e.cx),YZ=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,l;r!=null&&!AD(r)&&(l=r);var{x:c,y:d,width:f,height:m}=t,x=m>=0?1:-1,h=x*n,v=x>0?"end":"start",g=x>0?"start":"end",y=f>=0?1:-1,b=y*n,j=y>0?"end":"start",w=y>0?"start":"end";if(s==="top"){var A={x:c+f/2,y:d-x*n,textAnchor:"middle",verticalAnchor:v};return ir(ir({},A),l?{height:Math.max(d-l.y,0),width:f}:{})}if(s==="bottom"){var S={x:c+f/2,y:d+m+h,textAnchor:"middle",verticalAnchor:g};return ir(ir({},S),l?{height:Math.max(l.y+l.height-(d+m),0),width:f}:{})}if(s==="left"){var D={x:c-b,y:d+m/2,textAnchor:j,verticalAnchor:"middle"};return ir(ir({},D),l?{width:Math.max(D.x-l.x,0),height:m}:{})}if(s==="right"){var T={x:c+f+b,y:d+m/2,textAnchor:w,verticalAnchor:"middle"};return ir(ir({},T),l?{width:Math.max(l.x+l.width-T.x,0),height:m}:{})}var k=l?{width:f,height:m}:{};return s==="insideLeft"?ir({x:c+b,y:d+m/2,textAnchor:w,verticalAnchor:"middle"},k):s==="insideRight"?ir({x:c+f-b,y:d+m/2,textAnchor:j,verticalAnchor:"middle"},k):s==="insideTop"?ir({x:c+f/2,y:d+h,textAnchor:"middle",verticalAnchor:g},k):s==="insideBottom"?ir({x:c+f/2,y:d+m-h,textAnchor:"middle",verticalAnchor:v},k):s==="insideTopLeft"?ir({x:c+b,y:d+h,textAnchor:w,verticalAnchor:g},k):s==="insideTopRight"?ir({x:c+f-b,y:d+h,textAnchor:j,verticalAnchor:g},k):s==="insideBottomLeft"?ir({x:c+b,y:d+m-h,textAnchor:w,verticalAnchor:v},k):s==="insideBottomRight"?ir({x:c+f-b,y:d+m-h,textAnchor:j,verticalAnchor:v},k):s&&typeof s=="object"&&(Ge(s.x)||Hs(s.x))&&(Ge(s.y)||Hs(s.y))?ir({x:c+da(s.x,f),y:d+da(s.y,m),textAnchor:"end",verticalAnchor:"end"},k):ir({x:c+f/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},k)},WZ={offset:5};function Ti(e){var t=ra(e,WZ),{viewBox:r,position:n,value:s,children:l,content:c,className:d="",textBreakAll:f,labelRef:m}=t,x=qZ(),h=SD(),v=n==="center"?h:x??h,g=r||v;if(!g||Gt(s)&&Gt(l)&&!_.isValidElement(c)&&typeof c!="function")return null;var y=ir(ir({},t),{},{viewBox:g});if(_.isValidElement(c)){var{labelRef:b}=y,j=LZ(y,FZ);return _.cloneElement(c,j)}var w;if(typeof c=="function"){if(w=_.createElement(c,y),_.isValidElement(w))return w}else w=HZ(t);var A=AD(g),S=Ea(t);if(A&&(n==="insideStart"||n==="insideEnd"||n==="end"))return GZ(t,n,w,S,g);var D=A?KZ(g,t.offset,t.position):YZ(t,g);return _.createElement(Fx,Os({ref:m,className:pt("recharts-label",d)},S,D,{breakAll:f}),w)}Ti.displayName="Label";var XZ=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?_.createElement(Ti,Os({key:"label-implicit"},n)):us(e)?_.createElement(Ti,Os({key:"label-implicit",value:e},n)):_.isValidElement(e)?e.type===Ti?_.cloneElement(e,ir({key:"label-implicit"},n)):_.createElement(Ti,Os({key:"label-implicit",content:e},n)):H1(e)?_.createElement(Ti,Os({key:"label-implicit",content:e},n)):e&&typeof e=="object"?_.createElement(Ti,Os({},e,{key:"label-implicit"},n)):null};function ZZ(e){var{label:t,labelRef:r}=e,n=SD();return XZ(t,n,r)||null}var _v={},Ev={},a3;function QZ(){return a3||(a3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(Ev)),Ev}var Sv={},n3;function JZ(){return n3||(n3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(Sv)),Sv}var s3;function eQ(){return s3||(s3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QZ(),r=JZ(),n=_y();function s(l){if(n.isArrayLike(l))return t.last(r.toArray(l))}e.last=s}(_v)),_v}var Av,i3;function tQ(){return i3||(i3=1,Av=eQ().last),Av}var rQ=tQ();const aQ=Ws(rQ);var nQ=["valueAccessor"],sQ=["dataKey","clockWise","id","textBreakAll"];function T0(){return T0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T0.apply(null,arguments)}function l3(e,t){if(e==null)return{};var r,n,s=iQ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lQ=e=>Array.isArray(e.value)?aQ(e.value):e.value,CD=_.createContext(void 0),TD=CD.Provider,DD=_.createContext(void 0),oQ=DD.Provider;function cQ(){return _.useContext(CD)}function dQ(){return _.useContext(DD)}function Mm(e){var{valueAccessor:t=lQ}=e,r=l3(e,nQ),{dataKey:n,clockWise:s,id:l,textBreakAll:c}=r,d=l3(r,sQ),f=cQ(),m=dQ(),x=f||m;return!x||!x.length?null:_.createElement(ta,{className:"recharts-label-list"},x.map((h,v)=>{var g,y=Gt(n)?t(h,v):It(h&&h.payload,n),b=Gt(l)?{}:{id:"".concat(l,"-").concat(v)};return _.createElement(Ti,T0({key:"label-".concat(v)},Ea(h),d,b,{fill:(g=r.fill)!==null&&g!==void 0?g:h.fill,parentViewBox:h.parentViewBox,value:y,textBreakAll:c,viewBox:h.viewBox,index:v}))}))}Mm.displayName="LabelList";function V1(e){var{label:t}=e;return t?t===!0?_.createElement(Mm,{key:"labelList-implicit"}):_.isValidElement(t)||H1(t)?_.createElement(Mm,{key:"labelList-implicit",content:t}):typeof t=="object"?_.createElement(Mm,T0({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Tb(){return Tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tb.apply(null,arguments)}var OD=e=>{var{cx:t,cy:r,r:n,className:s}=e,l=pt("recharts-dot",s);return t===+t&&r===+r&&n===+n?_.createElement("circle",Tb({},nn(e),wy(e),{className:l,cx:t,cy:r,r:n})):null},kD=e=>e.graphicalItems.polarItems,uQ=ge([Yt,ku],h1),Lx=ge([kD,Xt,uQ],p1),fQ=ge([Lx],g1),Rx=ge([fQ,n1],v1),mQ=ge([Rx,Xt,Lx],y1);ge([Rx,Xt,Lx],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(s=>{var l,c=It(n,(l=t.dataKey)!==null&&l!==void 0?l:s.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:It(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var o3=()=>{},xQ=ge([Rx,Xt,Lx,Ox,Yt],_1),hQ=ge([Xt,N1,w1,o3,xQ,o3,ct,Yt],E1),PD=ge([Xt,ct,Rx,mQ,Ou,Yt,hQ],S1),pQ=ge([PD,Xt,vc],T1);ge([Xt,PD,pQ,Yt],O1);var gQ={radiusAxis:{},angleAxis:{}},MD=on({name:"polarAxis",initialState:gQ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:jne,removeRadiusAxis:Nne,addAngleAxis:wne,removeAngleAxis:_ne}=MD.actions,vQ=MD.reducer;function c3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function d3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(r),!0).forEach(function(n){bQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bQ(e,t,r){return(t=yQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yQ(e){var t=jQ(e,"string");return typeof t=="symbol"?t:t+""}function jQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NQ=(e,t)=>t,G1=ge([kD,NQ],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),wQ=[],K1=(e,t,r)=>r?.length===0?wQ:r,FD=ge([n1,G1,K1],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var s;if(t?.data!=null&&t.data.length>0?s=t.data:s=n,(!s||!s.length)&&r!=null&&(s=r.map(l=>d3(d3({},t.presentationProps),l.props))),s!=null)return s}}),_Q=ge([FD,G1,K1],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,s)=>{var l,c=It(n,t.nameKey,t.name),d;return r!=null&&(l=r[s])!==null&&l!==void 0&&(l=l.props)!==null&&l!==void 0&&l.fill?d=r[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?d=n.fill:d=t.fill,{value:uc(c,t.dataKey),color:d,payload:n,type:t.legendType}})}),EQ=ge([FD,G1,K1,_r],(e,t,r,n)=>{if(!(t==null||e==null))return EJ({offset:n,pieSettings:t,displayedData:e,cells:r})}),Cv={exports:{}},Dt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u3;function SQ(){if(u3)return Dt;u3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function y(b){if(typeof b=="object"&&b!==null){var j=b.$$typeof;switch(j){case e:switch(b=b.type,b){case r:case s:case n:case f:case m:case v:return b;default:switch(b=b&&b.$$typeof,b){case c:case d:case h:case x:return b;case l:return b;default:return j}}case t:return j}}}return Dt.ContextConsumer=l,Dt.ContextProvider=c,Dt.Element=e,Dt.ForwardRef=d,Dt.Fragment=r,Dt.Lazy=h,Dt.Memo=x,Dt.Portal=t,Dt.Profiler=s,Dt.StrictMode=n,Dt.Suspense=f,Dt.SuspenseList=m,Dt.isContextConsumer=function(b){return y(b)===l},Dt.isContextProvider=function(b){return y(b)===c},Dt.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},Dt.isForwardRef=function(b){return y(b)===d},Dt.isFragment=function(b){return y(b)===r},Dt.isLazy=function(b){return y(b)===h},Dt.isMemo=function(b){return y(b)===x},Dt.isPortal=function(b){return y(b)===t},Dt.isProfiler=function(b){return y(b)===s},Dt.isStrictMode=function(b){return y(b)===n},Dt.isSuspense=function(b){return y(b)===f},Dt.isSuspenseList=function(b){return y(b)===m},Dt.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===s||b===n||b===f||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===h||b.$$typeof===x||b.$$typeof===c||b.$$typeof===l||b.$$typeof===d||b.$$typeof===g||b.getModuleId!==void 0)},Dt.typeOf=y,Dt}var f3;function AQ(){return f3||(f3=1,Cv.exports=SQ()),Cv.exports}var CQ=AQ(),m3=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",x3=null,Tv=null,LD=e=>{if(e===x3&&Array.isArray(Tv))return Tv;var t=[];return _.Children.forEach(e,r=>{Gt(r)||(CQ.isFragment(r)?t=t.concat(LD(r.props.children)):t.push(r))}),Tv=t,x3=e,t};function Y1(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>m3(s)):n=[m3(t)],LD(e).forEach(s=>{var l=Ml(s,"type.displayName")||Ml(s,"type.name");n.indexOf(l)!==-1&&r.push(s)}),r}var RD=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Dv={},h3;function TQ(){return h3||(h3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(Dv)),Dv}var Ov,p3;function DQ(){return p3||(p3=1,Ov=TQ().isPlainObject),Ov}var OQ=DQ();const kQ=Ws(OQ);function g3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function v3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g3(Object(r),!0).forEach(function(n){PQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PQ(e,t,r){return(t=MQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MQ(e){var t=FQ(e,"string");return typeof t=="symbol"?t:t+""}function FQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D0.apply(null,arguments)}var b3=(e,t,r,n,s)=>{var l=r-n,c;return c="M ".concat(e,",").concat(t),c+="L ".concat(e+r,",").concat(t),c+="L ".concat(e+r-l/2,",").concat(t+s),c+="L ".concat(e+r-l/2-n,",").concat(t+s),c+="L ".concat(e,",").concat(t," Z"),c},LQ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RQ=e=>{var t=ra(e,LQ),{x:r,y:n,upperWidth:s,lowerWidth:l,height:c,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:x,isUpdateAnimationActive:h}=t,v=_.useRef(null),[g,y]=_.useState(-1),b=_.useRef(s),j=_.useRef(l),w=_.useRef(c),A=_.useRef(r),S=_.useRef(n),D=Su(e,"trapezoid-");if(_.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var z=v.current.getTotalLength();z&&y(z)}catch{}},[]),r!==+r||n!==+n||s!==+s||l!==+l||c!==+c||s===0&&l===0||c===0)return null;var T=pt("recharts-trapezoid",d);if(!h)return _.createElement("g",null,_.createElement("path",D0({},Ea(t),{className:T,d:b3(r,n,s,l,c)})));var k=b.current,C=j.current,M=w.current,I=A.current,R=S.current,L="0px ".concat(g===-1?1:g,"px"),P="".concat(g,"px 0px"),O=iT(["strokeDasharray"],m,f);return _.createElement(Eu,{animationId:D,key:D,canBegin:g>0,duration:m,easing:f,isActive:h,begin:x},z=>{var V=er(k,s,z),G=er(C,l,z),K=er(M,c,z),ce=er(I,r,z),le=er(R,n,z);v.current&&(b.current=V,j.current=G,w.current=K,A.current=ce,S.current=le);var ne=z>0?{transition:O,strokeDasharray:P}:{strokeDasharray:L};return _.createElement("path",D0({},Ea(t),{className:T,d:b3(ce,le,V,G,K),ref:v,style:v3(v3({},ne),t.style)}))})},IQ=["option","shapeType","propTransformer","activeClassName","isActive"];function BQ(e,t){if(e==null)return{};var r,n,s=zQ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function O0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y3(Object(r),!0).forEach(function(n){UQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UQ(e,t,r){return(t=$Q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Q(e){var t=qQ(e,"string");return typeof t=="symbol"?t:t+""}function qQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HQ(e,t){return O0(O0({},t),e)}function VQ(e,t){return e==="symbols"}function j3(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return _.createElement(dT,r);case"trapezoid":return _.createElement(RQ,r);case"sector":return _.createElement(mT,r);case"symbols":if(VQ(t))return _.createElement(n6,r);break;default:return null}}function GQ(e){return _.isValidElement(e)?e.props:e}function ID(e){var{option:t,shapeType:r,propTransformer:n=HQ,activeClassName:s="recharts-active-shape",isActive:l}=e,c=BQ(e,IQ),d;if(_.isValidElement(t))d=_.cloneElement(t,O0(O0({},c),GQ(t)));else if(typeof t=="function")d=t(c);else if(kQ(t)&&typeof t!="boolean"){var f=n(t,c);d=_.createElement(j3,{shapeType:r,elementProps:f})}else{var m=c;d=_.createElement(j3,{shapeType:r,elementProps:m})}return l?_.createElement(ta,{className:s},d):d}var W1=(e,t)=>{var r=ar();return(n,s)=>l=>{e?.(n,s,l),r(W5({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},X1=e=>{var t=ar();return(r,n)=>s=>{e?.(r,n,s),t(MW())}},Z1=(e,t)=>{var r=ar();return(n,s)=>l=>{e?.(n,s,l),r(FW({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function Q1(e){var{fn:t,args:r}=e,n=ar(),s=Aa();return _.useLayoutEffect(()=>{if(!s){var l=t(r);return n(OW(l)),()=>{n(kW(l))}}},[t,r,n,s]),null}var BD=()=>{};function zD(e){var{legendPayload:t}=e,r=ar(),n=Aa();return _.useLayoutEffect(()=>n?BD:(r(aT(t)),()=>{r(nT(t))}),[r,n,t]),null}function KQ(e){var{legendPayload:t}=e,r=ar(),n=He(ct);return _.useLayoutEffect(()=>n!=="centric"&&n!=="radial"?BD:(r(aT(t)),()=>{r(nT(t))}),[r,n,t]),null}var kv,YQ=()=>{var[e]=_.useState(()=>eu("uid-"));return e},WQ=(kv=H8.useId)!==null&&kv!==void 0?kv:YQ;function XQ(e,t){var r=WQ();return t||(e?"".concat(e,"-").concat(r):r)}var ZQ=_.createContext(void 0),J1=e=>{var{id:t,type:r,children:n}=e,s=XQ("recharts-".concat(r),t);return _.createElement(ZQ.Provider,{value:s},n(s))},QQ={cartesianItems:[],polarItems:[]},UD=on({name:"graphicalItems",initialState:QQ,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:va()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Is(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:va()},removeCartesianGraphicalItem:{reducer(e,t){var r=Is(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:va()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:va()},removePolarGraphicalItem:{reducer(e,t){var r=Is(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:va()}}}),{addCartesianGraphicalItem:JQ,replaceCartesianGraphicalItem:eJ,removeCartesianGraphicalItem:tJ,addPolarGraphicalItem:rJ,removePolarGraphicalItem:aJ}=UD.actions,nJ=UD.reducer;function $D(e){var t=ar(),r=_.useRef(null);return _.useLayoutEffect(()=>{r.current===null?t(JQ(e)):r.current!==e&&t(eJ({prev:r.current,next:e})),r.current=e},[t,e]),_.useLayoutEffect(()=>()=>{r.current&&(t(tJ(r.current)),r.current=null)},[t]),null}function sJ(e){var t=ar();return _.useLayoutEffect(()=>(t(rJ(e)),()=>{t(aJ(e))}),[t,e]),null}var iJ=["onMouseEnter","onClick","onMouseLeave"],lJ=["id"],oJ=["id"];function ej(e,t){if(e==null)return{};var r,n,s=cJ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function N3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N3(Object(r),!0).forEach(function(n){dJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dJ(e,t,r){return(t=uJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uJ(e){var t=fJ(e,"string");return typeof t=="symbol"?t:t+""}function fJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zi(){return zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zi.apply(null,arguments)}function mJ(e){var t=_.useMemo(()=>Y1(e.children,Iu),[e.children]),r=He(n=>_Q(n,e.id,t));return r==null?null:_.createElement(KQ,{legendPayload:r})}function xJ(e){var{dataKey:t,nameKey:r,sectors:n,stroke:s,strokeWidth:l,fill:c,name:d,hide:f,tooltipType:m}=e;return{dataDefinedOnItem:n.map(x=>x.tooltipPayload),positions:n.map(x=>x.tooltipPosition),settings:{stroke:s,strokeWidth:l,fill:c,dataKey:t,nameKey:r,name:uc(d,t),hide:f,type:m,color:c,unit:""}}}var hJ=(e,t)=>e>t?"start":e<t?"end":"middle",pJ=(e,t,r)=>da(typeof t=="function"?t(e):t,r,r*.8),gJ=(e,t,r)=>{var{top:n,left:s,width:l,height:c}=t,d=q6(l,c),f=s+da(e.cx,l,l/2),m=n+da(e.cy,c,c/2),x=da(e.innerRadius,d,0),h=pJ(r,e.outerRadius,d),v=e.maxRadius||Math.sqrt(l*l+c*c)/2;return{cx:f,cy:m,innerRadius:x,outerRadius:h,maxRadius:v}},vJ=(e,t)=>{var r=Rr(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function bJ(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var yJ=(e,t)=>{if(_.isValidElement(e))return _.cloneElement(e,t);if(typeof e=="function")return e(t);var r=pt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return _.createElement(My,zi({},t,{type:"linear",className:r}))},jJ=(e,t,r)=>{if(_.isValidElement(e))return _.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),_.isValidElement(n)))return n;var s=pt("recharts-pie-label-text",bJ(e));return _.createElement(Fx,zi({},t,{alignmentBaseline:"middle",className:s}),n)};function NJ(e){var{sectors:t,props:r,showLabels:n}=e,{label:s,labelLine:l,dataKey:c}=r;if(!n||!s||!t)return null;var d=nn(r),f=Pl(s),m=Pl(l),x=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,h=t.map((v,g)=>{var y=(v.startAngle+v.endAngle)/2,b=mr(v.cx,v.cy,v.outerRadius+x,y),j=qt(qt(qt(qt({},d),v),{},{stroke:"none"},f),{},{index:g,textAnchor:hJ(b.x,v.cx)},b),w=qt(qt(qt(qt({},d),v),{},{fill:"none",stroke:v.fill},m),{},{index:g,points:[mr(v.cx,v.cy,v.outerRadius,y),b],key:"line"});return _.createElement(ta,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(g)},l&&yJ(l,w),jJ(s,j,It(v,c)))});return _.createElement(ta,{className:"recharts-pie-labels"},h)}function wJ(e){var{sectors:t,props:r,showLabels:n}=e,{label:s}=r;return typeof s=="object"&&s!=null&&"position"in s?_.createElement(V1,{label:s}):_.createElement(NJ,{sectors:t,props:r,showLabels:n})}function _J(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:s}=e,l=He(Bi),{onMouseEnter:c,onClick:d,onMouseLeave:f}=s,m=ej(s,iJ),x=W1(c,s.dataKey),h=X1(f),v=Z1(d,s.dataKey);return t==null||t.length===0?null:_.createElement(_.Fragment,null,t.map((g,y)=>{if(g?.startAngle===0&&g?.endAngle===0&&t.length!==1)return null;var b=r&&String(y)===l,j=l?n:null,w=b?r:j,A=qt(qt({},g),{},{stroke:g.stroke,tabIndex:-1,[Y6]:y,[W6]:s.dataKey});return _.createElement(ta,zi({key:"sector-".concat(g?.startAngle,"-").concat(g?.endAngle,"-").concat(g.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},rx(m,g,y),{onMouseEnter:x(g,y),onMouseLeave:h(g,y),onClick:v(g,y)}),_.createElement(ID,zi({option:w,isActive:b,shapeType:"sector"},A)))}))}function EJ(e){var t,{pieSettings:r,displayedData:n,cells:s,offset:l}=e,{cornerRadius:c,startAngle:d,endAngle:f,dataKey:m,nameKey:x,tooltipType:h}=r,v=Math.abs(r.minAngle),g=vJ(d,f),y=Math.abs(g),b=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,j=n.filter(k=>It(k,m,0)!==0).length,w=(y>=360?j:j-1)*b,A=y-j*v-w,S=n.reduce((k,C)=>{var M=It(C,m,0);return k+(Ge(M)?M:0)},0),D;if(S>0){var T;D=n.map((k,C)=>{var M=It(k,m,0),I=It(k,x,C),R=gJ(r,l,k),L=(Ge(M)?M:0)/S,P,O=qt(qt({},k),s&&s[C]&&s[C].props);C?P=T.endAngle+Rr(g)*b*(M!==0?1:0):P=d;var z=P+Rr(g)*((M!==0?v:0)+L*A),V=(P+z)/2,G=(R.innerRadius+R.outerRadius)/2,K=[{name:I,value:M,payload:O,dataKey:m,type:h}],ce=mr(R.cx,R.cy,G,V);return T=qt(qt(qt(qt({},r.presentationProps),{},{percent:L,cornerRadius:c,name:I,tooltipPayload:K,midAngle:V,middleRadius:G,tooltipPosition:ce},O),R),{},{value:M,startAngle:P,endAngle:z,payload:O,paddingAngle:Rr(g)*b}),T})}return D}function SJ(e){var{showLabels:t,sectors:r,children:n}=e,s=_.useMemo(()=>!t||!r?[]:r.map(l=>({value:l.value,payload:l.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:l.cx,cy:l.cy,innerRadius:l.innerRadius,outerRadius:l.outerRadius,startAngle:l.startAngle,endAngle:l.endAngle,clockWise:!1},fill:l.fill})),[r,t]);return _.createElement(oQ,{value:t?s:void 0},n)}function AJ(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:s,animationBegin:l,animationDuration:c,animationEasing:d,activeShape:f,inactiveShape:m,onAnimationStart:x,onAnimationEnd:h}=t,v=Su(t,"recharts-pie-"),g=r.current,[y,b]=_.useState(!1),j=_.useCallback(()=>{typeof h=="function"&&h(),b(!1)},[h]),w=_.useCallback(()=>{typeof x=="function"&&x(),b(!0)},[x]);return _.createElement(SJ,{showLabels:!y,sectors:n},_.createElement(Eu,{animationId:v,begin:l,duration:c,isActive:s,easing:d,onAnimationStart:w,onAnimationEnd:j,key:v},A=>{var S=[],D=n&&n[0],T=D?.startAngle;return n?.forEach((k,C)=>{var M=g&&g[C],I=C>0?Ml(k,"paddingAngle",0):0;if(M){var R=er(M.endAngle-M.startAngle,k.endAngle-k.startAngle,A),L=qt(qt({},k),{},{startAngle:T+I,endAngle:T+R+I});S.push(L),T=L.endAngle}else{var{endAngle:P,startAngle:O}=k,z=er(0,P-O,A),V=qt(qt({},k),{},{startAngle:T+I,endAngle:T+z+I});S.push(V),T=V.endAngle}}),r.current=S,_.createElement(ta,null,_.createElement(_J,{sectors:S,activeShape:f,inactiveShape:m,allOtherPieProps:t}))}),_.createElement(wJ,{showLabels:!y,sectors:n,props:t}),t.children)}var CJ={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Hi.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function TJ(e){var{id:t}=e,r=ej(e,lJ),{hide:n,className:s,rootTabIndex:l}=e,c=_.useMemo(()=>Y1(e.children,Iu),[e.children]),d=He(x=>EQ(x,t,c)),f=_.useRef(null),m=pt("recharts-pie",s);return n||d==null?(f.current=null,_.createElement(ta,{tabIndex:l,className:m})):_.createElement(_.Fragment,null,_.createElement(Q1,{fn:xJ,args:qt(qt({},e),{},{sectors:d})}),_.createElement(ta,{tabIndex:l,className:m},_.createElement(AJ,{props:qt(qt({},r),{},{sectors:d}),previousSectorsRef:f})))}function qD(e){var t=ra(e,CJ),{id:r}=t,n=ej(t,oJ),s=nn(n);return _.createElement(J1,{id:r,type:"pie"},l=>_.createElement(_.Fragment,null,_.createElement(sJ,{type:"pie",id:l,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),_.createElement(mJ,zi({},n,{id:l})),_.createElement(TJ,zi({},n,{id:l}))))}qD.displayName="Pie";function w3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w3(Object(r),!0).forEach(function(n){DJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DJ(e,t,r){return(t=OJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OJ(e){var t=kJ(e,"string");return typeof t=="symbol"?t:t+""}function kJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PJ={xAxis:{},yAxis:{},zAxis:{}},HD=on({name:"cartesianAxis",initialState:PJ,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:va()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:va()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:va()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:va()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:va()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:va()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var l=s.widthHistory||[];if(l.length===3&&l[0]===l[2]&&n===l[1]&&n!==s.width&&Math.abs(n-l[0])<=1)return;var c=[...l,n].slice(-3);e.yAxis[r]=_3(_3({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:MJ,removeXAxis:FJ,addYAxis:LJ,removeYAxis:RJ,addZAxis:Ene,removeZAxis:Sne,updateYAxisWidth:IJ}=HD.actions,BJ=HD.reducer,zJ=ge([_r],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),UJ=ge([zJ,Zs,Qs],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),tj=()=>He(UJ),$J=()=>He(jX);function E3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function S3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E3(Object(r),!0).forEach(function(n){qJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qJ(e,t,r){return(t=HJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HJ(e){var t=VJ(e,"string");return typeof t=="symbol"?t:t+""}function VJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GJ=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:l}=e;if(s===!1||t.x==null||t.y==null)return null;var c=S3(S3({index:r,dataKey:l,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Pl(s)),wy(s)),d;return _.isValidElement(s)?d=_.cloneElement(s,c):typeof s=="function"?d=s(c):d=_.createElement(OD,c),_.createElement(ta,{className:"recharts-active-dot"},d)};function KJ(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,l=He(Bi),c=$J();if(t==null||c==null)return null;var d=t.find(f=>c.includes(f.payload));return Gt(d)?null:GJ({point:d,childIndex:Number(l),mainColor:r,dataKey:s,activeDot:n})}var YJ="Invariant failed";function WJ(e,t){throw new Error(YJ)}var XJ=["x","y"];function Db(){return Db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Db.apply(null,arguments)}function A3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A3(Object(r),!0).forEach(function(n){ZJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZJ(e,t,r){return(t=QJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QJ(e){var t=JJ(e,"string");return typeof t=="symbol"?t:t+""}function JJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eee(e,t){if(e==null)return{};var r,n,s=tee(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ree(e,t){var{x:r,y:n}=e,s=eee(e,XJ),l="".concat(r),c=parseInt(l,10),d="".concat(n),f=parseInt(d,10),m="".concat(t.height||s.height),x=parseInt(m,10),h="".concat(t.width||s.width),v=parseInt(h,10);return Td(Td(Td(Td(Td({},t),s),c?{x:c}:{}),f?{y:f}:{}),{},{height:x,width:v,name:t.name,radius:t.radius})}function rj(e){return _.createElement(ID,Db({shapeType:"rectangle",propTransformer:ree,activeClassName:"recharts-active-bar"},e))}var aee=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(Ge(t))return t;var l=Ge(n)||Gt(n);return l?t(n,s):(l||WJ(),r)}},nee={},VD=on({name:"errorBars",initialState:nee,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(l=>l.dataKey===n.dataKey&&l.direction===n.direction?s:l))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Ane,replaceErrorBar:Cne,removeErrorBar:Tne}=VD.actions,see=VD.reducer,iee=["children"];function lee(e,t){if(e==null)return{};var r,n,s=oee(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cee={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},dee=_.createContext(cee);function GD(e){var{children:t}=e,r=lee(e,iee);return _.createElement(dee.Provider,{value:r},t)}function aj(e,t){var r,n,s=He(m=>ei(m,e)),l=He(m=>ti(m,t)),c=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Va.allowDataOverflow,d=(n=l?.allowDataOverflow)!==null&&n!==void 0?n:Ga.allowDataOverflow,f=c||d;return{needClip:f,needClipX:c,needClipY:d}}function KD(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=tj(),{needClipX:l,needClipY:c,needClip:d}=aj(t,r);if(!d)return null;var{x:f,y:m,width:x,height:h}=s;return _.createElement("clipPath",{id:"clipPath-".concat(n)},_.createElement("rect",{x:l?f:f-x/2,y:c?m:m-h/2,width:l?x:x*2,height:c?h:h*2}))}var uee=["onMouseEnter","onMouseLeave","onClick"],fee=["value","background","tooltipPosition"],mee=["id"],xee=["onMouseEnter","onClick","onMouseLeave"];function Ui(){return Ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ui.apply(null,arguments)}function C3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ba(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C3(Object(r),!0).forEach(function(n){hee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hee(e,t,r){return(t=pee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pee(e){var t=gee(e,"string");return typeof t=="symbol"?t:t+""}function gee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k0(e,t){if(e==null)return{};var r,n,s=vee(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bee=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:l}=e;return[{inactive:l,dataKey:t,type:s,color:n,value:uc(r,t),payload:e}]};function yee(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:l,hide:c,unit:d}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:uc(l,t),hide:c,type:e.tooltipType,color:e.fill,unit:d}}}function jee(e){var t=He(Bi),{data:r,dataKey:n,background:s,allOtherBarProps:l}=e,{onMouseEnter:c,onMouseLeave:d,onClick:f}=l,m=k0(l,uee),x=W1(c,n),h=X1(d),v=Z1(f,n);if(!s||r==null)return null;var g=Pl(s);return _.createElement(_.Fragment,null,r.map((y,b)=>{var{value:j,background:w,tooltipPosition:A}=y,S=k0(y,fee);if(!w)return null;var D=x(y,b),T=h(y,b),k=v(y,b),C=ba(ba(ba(ba(ba({option:s,isActive:String(b)===t},S),{},{fill:"#eee"},w),g),rx(m,y,b)),{},{onMouseEnter:D,onMouseLeave:T,onClick:k,dataKey:n,index:b,className:"recharts-bar-background-rectangle"});return _.createElement(rj,Ui({key:"background-bar-".concat(b)},C))}))}function Nee(e){var{showLabels:t,children:r,rects:n}=e,s=n?.map(l=>{var c={x:l.x,y:l.y,width:l.width,height:l.height};return ba(ba({},c),{},{value:l.value,payload:l.payload,parentViewBox:l.parentViewBox,viewBox:c,fill:l.fill})});return _.createElement(TD,{value:t?s:void 0},r)}function wee(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:l,dataKey:c}=e,d=He(Bi),f=He(dD),m=r&&String(l)===d&&(f==null||c===f),x=m?r:t;return _.createElement(rj,Ui({},n,{name:String(n.name)},s,{isActive:m,option:x,index:l,dataKey:c}))}function _ee(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:l}=e;return _.createElement(rj,Ui({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:l}))}function Eee(e){var{data:t,props:r}=e,n=nn(r),{id:s}=n,l=k0(n,mee),{shape:c,dataKey:d,activeBar:f}=r,{onMouseEnter:m,onClick:x,onMouseLeave:h}=r,v=k0(r,xee),g=W1(m,d),y=X1(h),b=Z1(x,d);return t?_.createElement(_.Fragment,null,t.map((j,w)=>_.createElement(ta,Ui({key:"rectangle-".concat(j?.x,"-").concat(j?.y,"-").concat(j?.value,"-").concat(w),className:"recharts-bar-rectangle"},rx(v,j,w),{onMouseEnter:g(j,w),onMouseLeave:y(j,w),onClick:b(j,w)}),f?_.createElement(wee,{shape:c,activeBar:f,baseProps:l,entry:j,index:w,dataKey:d}):_.createElement(_ee,{shape:c,baseProps:l,entry:j,index:w,dataKey:d})))):null}function See(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:f,onAnimationEnd:m,onAnimationStart:x}=t,h=r.current,v=Su(t,"recharts-bar-"),[g,y]=_.useState(!1),b=!g,j=_.useCallback(()=>{typeof m=="function"&&m(),y(!1)},[m]),w=_.useCallback(()=>{typeof x=="function"&&x(),y(!0)},[x]);return _.createElement(Nee,{showLabels:b,rects:n},_.createElement(Eu,{animationId:v,begin:c,duration:d,isActive:l,easing:f,onAnimationEnd:j,onAnimationStart:w,key:v},A=>{var S=A===1?n:n?.map((D,T)=>{var k=h&&h[T];if(k)return ba(ba({},D),{},{x:er(k.x,D.x,A),y:er(k.y,D.y,A),width:er(k.width,D.width,A),height:er(k.height,D.height,A)});if(s==="horizontal"){var C=er(0,D.height,A);return ba(ba({},D),{},{y:D.y+D.height-C,height:C})}var M=er(0,D.width,A);return ba(ba({},D),{},{width:M})});return A>0&&(r.current=S??null),S==null?null:_.createElement(ta,null,_.createElement(Eee,{props:t,data:S}))}),_.createElement(V1,{label:t.label}),t.children)}function Aee(e){var t=_.useRef(null);return _.createElement(See,{previousRectanglesRef:t,props:e})}var YD=0,Cee=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:It(e,t)}};class Tee extends _.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:l,yAxisId:c,needClip:d,background:f,id:m}=this.props;if(t||r==null)return null;var x=pt("recharts-bar",s),h=m;return _.createElement(ta,{className:x,id:m},d&&_.createElement("defs",null,_.createElement(KD,{clipPathId:h,xAxisId:l,yAxisId:c})),_.createElement(ta,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(h,")"):void 0},_.createElement(jee,{data:r,dataKey:n,background:f,allOtherBarProps:this.props}),_.createElement(Aee,this.props)))}}var Dee={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Hi.isSsr,legendType:"rect",minPointSize:YD,xAxisId:0,yAxisId:0};function Oee(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:l,activeBar:c,animationBegin:d,animationDuration:f,animationEasing:m,isAnimationActive:x}=e,{needClip:h}=aj(t,r),v=xx(),g=Aa(),y=Y1(e.children,Iu),b=He(A=>ste(A,t,r,g,e.id,y));if(v!=="vertical"&&v!=="horizontal")return null;var j,w=b?.[0];return w==null||w.height==null||w.width==null?j=0:j=v==="vertical"?w.height/2:w.width/2,_.createElement(GD,{xAxisId:t,yAxisId:r,data:b,dataPointFormatter:Cee,errorBarOffset:j},_.createElement(Tee,Ui({},e,{layout:v,needClip:h,data:b,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:l,activeBar:c,animationBegin:d,animationDuration:f,animationEasing:m,isAnimationActive:x})))}function kee(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:l,xAxis:c,yAxis:d,xAxisTicks:f,yAxisTicks:m,stackedData:x,displayedData:h,offset:v,cells:g,parentViewBox:y}=e,b=t==="horizontal"?d:c,j=x?b.scale.domain():null,w=Uq({numericAxis:b});return h.map((A,S)=>{var D,T,k,C,M,I;x?D=Fq(x[S],j):(D=It(A,r),Array.isArray(D)||(D=[w,D]));var R=aee(n,YD)(D[1],S);if(t==="horizontal"){var L,[P,O]=[d.scale(D[0]),d.scale(D[1])];T=cE({axis:c,ticks:f,bandSize:l,offset:s.offset,entry:A,index:S}),k=(L=O??P)!==null&&L!==void 0?L:void 0,C=s.size;var z=P-O;if(M=On(z)?0:z,I={x:T,y:v.top,width:C,height:v.height},Math.abs(R)>0&&Math.abs(M)<Math.abs(R)){var V=Rr(M||R)*(Math.abs(R)-Math.abs(M));k-=V,M+=V}}else{var[G,K]=[c.scale(D[0]),c.scale(D[1])];if(T=G,k=cE({axis:d,ticks:m,bandSize:l,offset:s.offset,entry:A,index:S}),C=K-G,M=s.size,I={x:v.left,y:k,width:v.width,height:M},Math.abs(R)>0&&Math.abs(C)<Math.abs(R)){var ce=Rr(C||R)*(Math.abs(R)-Math.abs(C));C+=ce}}if(T==null||k==null||C==null||M==null)return null;var le=ba(ba({},A),{},{x:T,y:k,width:C,height:M,value:x?D:D[1],payload:A,background:I,tooltipPosition:{x:T+C/2,y:k+M/2},parentViewBox:y},g&&g[S]&&g[S].props);return le}).filter(Boolean)}function Pee(e){var t=ra(e,Dee),r=Aa();return _.createElement(J1,{id:t.id,type:"bar"},n=>_.createElement(_.Fragment,null,_.createElement(zD,{legendPayload:bee(t)}),_.createElement(Q1,{fn:yee,args:t}),_.createElement($D,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:zq(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),_.createElement(Oee,Ui({},t,{id:n}))))}var Fm=_.memo(Pee);Fm.displayName="Bar";function T3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T3(Object(r),!0).forEach(function(n){Mee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mee(e,t,r){return(t=Fee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fee(e){var t=Lee(e,"string");return typeof t=="symbol"?t:t+""}function Lee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ree=(e,t)=>t,Iee=(e,t,r)=>r,Bee=(e,t,r,n)=>n,zee=(e,t,r,n,s)=>s,Bu=ge([Tx,zee],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Uee=ge([Bu],e=>e?.maxBarSize),$ee=(e,t,r,n,s,l)=>l,D3=(e,t,r)=>{var n=r??e;if(!Gt(n))return da(n,t,0)},qee=ge([ct,Tx,Ree,Iee,Bee],(e,t,r,n,s)=>t.filter(l=>e==="horizontal"?l.xAxisId===r:l.yAxisId===n).filter(l=>l.isPanorama===s).filter(l=>l.hide===!1).filter(l=>l.type==="bar")),Hee=(e,t,r,n)=>{var s=ct(e);return s==="horizontal"?wb(e,"yAxis",r,n):wb(e,"xAxis",t,n)},Vee=(e,t,r)=>{var n=ct(e);return n==="horizontal"?OS(e,"xAxis",t):OS(e,"yAxis",r)},Gee=(e,t,r)=>{var n={},s=e.filter(Sx),l=e.filter(m=>m.stackId==null),c=s.reduce((m,x)=>(m[x.stackId]||(m[x.stackId]=[]),m[x.stackId].push(x),m),n),d=Object.entries(c).map(m=>{var[x,h]=m,v=h.map(y=>y.dataKey),g=D3(t,r,h[0].barSize);return{stackId:x,dataKeys:v,barSize:g}}),f=l.map(m=>{var x=[m.dataKey].filter(v=>v!=null),h=D3(t,r,m.barSize);return{stackId:void 0,dataKeys:x,barSize:h}});return[...d,...f]},Kee=ge([qee,AY,Vee],Gee),Yee=(e,t,r,n,s)=>{var l,c,d=Bu(e,t,r,n,s);if(d!=null){var f=ct(e),m=d5(e),{maxBarSize:x}=d,h=Gt(x)?m:x,v,g;return f==="horizontal"?(v=Ii(e,"xAxis",t,n),g=Ri(e,"xAxis",t,n)):(v=Ii(e,"yAxis",r,n),g=Ri(e,"yAxis",r,n)),(l=(c=au(v,g,!0))!==null&&c!==void 0?c:h)!==null&&l!==void 0?l:0}},WD=(e,t,r,n)=>{var s=ct(e),l,c;return s==="horizontal"?(l=Ii(e,"xAxis",t,n),c=Ri(e,"xAxis",t,n)):(l=Ii(e,"yAxis",r,n),c=Ri(e,"yAxis",r,n)),au(l,c)};function Wee(e,t,r,n,s){var l=n.length;if(!(l<1)){var c=da(e,r,0,!0),d,f=[];if(fa(n[0].barSize)){var m=!1,x=r/l,h=n.reduce((w,A)=>w+(A.barSize||0),0);h+=(l-1)*c,h>=r&&(h-=(l-1)*c,c=0),h>=r&&x>0&&(m=!0,x*=.9,h=l*x);var v=(r-h)/2>>0,g={offset:v-c,size:0};d=n.reduce((w,A)=>{var S,D={stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:g.offset+g.size+c,size:m?x:(S=A.barSize)!==null&&S!==void 0?S:0}},T=[...w,D];return g=T[T.length-1].position,T},f)}else{var y=da(t,r,0,!0);r-2*y-(l-1)*c<=0&&(c=0);var b=(r-2*y-(l-1)*c)/l;b>1&&(b>>=0);var j=fa(s)?Math.min(b,s):b;d=n.reduce((w,A,S)=>[...w,{stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:y+(b+c)*S+(b-j)/2,size:j}}],f)}return d}}var Xee=(e,t,r,n,s,l,c)=>{var d=Gt(c)?t:c,f=Wee(r,n,s!==l?s:l,e,d);return s!==l&&f!=null&&(f=f.map(m=>Dm(Dm({},m),{},{position:Dm(Dm({},m.position),{},{offset:m.position.offset-s/2})}))),f},Zee=ge([Kee,d5,SY,u5,Yee,WD,Uee],Xee),Qee=(e,t,r,n)=>Ii(e,"xAxis",t,n),Jee=(e,t,r,n)=>Ii(e,"yAxis",r,n),ete=(e,t,r,n)=>Ri(e,"xAxis",t,n),tte=(e,t,r,n)=>Ri(e,"yAxis",r,n),rte=ge([Zee,Bu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),ate=(e,t)=>{var r=m1(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:l}=s;if(l)return l.find(c=>c.key===r)}}}},nte=ge([Hee,Bu],ate),ste=ge([_r,ky,Qee,Jee,ete,tte,rte,ct,Nx,WD,nte,Bu,$ee],(e,t,r,n,s,l,c,d,f,m,x,h,v)=>{var{chartData:g,dataStartIndex:y,dataEndIndex:b}=f;if(!(h==null||c==null||t==null||d!=="horizontal"&&d!=="vertical"||r==null||n==null||s==null||l==null||m==null)){var{data:j}=h,w;if(j!=null&&j.length>0?w=j:w=g?.slice(y,b+1),w!=null)return kee({layout:d,barSettings:h,pos:c,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:l,stackedData:x,displayedData:w,offset:e,cells:v})}}),XD=e=>{var{chartData:t}=e,r=ar(),n=Aa();return _.useEffect(()=>n?()=>{}:(r(US(t)),()=>{r(US(void 0))}),[t,r,n]),null},O3={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ZD=on({name:"brush",initialState:O3,reducers:{setBrushSettings(e,t){return t.payload==null?O3:t.payload}}}),{setBrushSettings:Dne}=ZD.actions,ite=ZD.reducer;function lte(e,t,r){return(t=ote(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ote(e){var t=cte(e,"string");return typeof t=="symbol"?t:t+""}function cte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nj{static create(t){return new nj(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(t)+l}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}lte(nj,"EPS",1e-4);function dte(e){return(e%180+180)%180}var ute=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=dte(s),c=l*Math.PI/180,d=Math.atan(n/r),f=c>d&&c<Math.PI-d?n/Math.sin(c):r/Math.cos(c);return Math.abs(f)},fte={dots:[],areas:[],lines:[]},QD=on({name:"referenceElements",initialState:fte,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Is(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Is(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Is(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:One,removeDot:kne,addArea:Pne,removeArea:Mne,addLine:Fne,removeLine:Lne}=QD.actions,mte=QD.reducer,xte=_.createContext(void 0),hte=e=>{var{children:t}=e,[r]=_.useState("".concat(eu("recharts"),"-clip")),n=tj();if(n==null)return null;var{x:s,y:l,width:c,height:d}=n;return _.createElement(xte.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:s,y:l,height:d,width:c}))),t)};function sc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function JD(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function pte(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return ute(n,r)}function gte(e,t,r){var n=r==="width",{x:s,y:l,width:c,height:d}=e;return t===1?{start:n?s:l,end:n?s+c:l+d}:{start:n?s+c:l+d,end:n?s:l}}function P0(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var l=r();return e*(t-e*l/2-n)>=0&&e*(t+e*l/2-s)<=0}function vte(e,t){return JD(e,t+1)}function bte(e,t,r,n,s){for(var l=(n||[]).slice(),{start:c,end:d}=t,f=0,m=1,x=c,h=function(){var y=n?.[f];if(y===void 0)return{v:JD(n,m)};var b=f,j,w=()=>(j===void 0&&(j=r(y,b)),j),A=y.coordinate,S=f===0||P0(e,A,w,x,d);S||(f=0,x=c,m+=1),S&&(x=A+e*(w()/2+s),f+=m)},v;m<=l.length;)if(v=h(),v)return v.v;return[]}function k3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(r),!0).forEach(function(n){yte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yte(e,t,r){return(t=jte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jte(e){var t=Nte(e,"string");return typeof t=="symbol"?t:t+""}function Nte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wte(e,t,r,n,s){for(var l=(n||[]).slice(),c=l.length,{start:d}=t,{end:f}=t,m=function(v){var g=l[v],y,b=()=>(y===void 0&&(y=r(g,v)),y);if(v===c-1){var j=e*(g.coordinate+e*b()/2-f);l[v]=g=sa(sa({},g),{},{tickCoord:j>0?g.coordinate-j*e:g.coordinate})}else l[v]=g=sa(sa({},g),{},{tickCoord:g.coordinate});var w=P0(e,g.tickCoord,b,d,f);w&&(f=g.tickCoord-e*(b()/2+s),l[v]=sa(sa({},g),{},{isShow:!0}))},x=c-1;x>=0;x--)m(x);return l}function _te(e,t,r,n,s,l){var c=(n||[]).slice(),d=c.length,{start:f,end:m}=t;if(l){var x=n[d-1],h=r(x,d-1),v=e*(x.coordinate+e*h/2-m);c[d-1]=x=sa(sa({},x),{},{tickCoord:v>0?x.coordinate-v*e:x.coordinate});var g=P0(e,x.tickCoord,()=>h,f,m);g&&(m=x.tickCoord-e*(h/2+s),c[d-1]=sa(sa({},x),{},{isShow:!0}))}for(var y=l?d-1:d,b=function(A){var S=c[A],D,T=()=>(D===void 0&&(D=r(S,A)),D);if(A===0){var k=e*(S.coordinate-e*T()/2-f);c[A]=S=sa(sa({},S),{},{tickCoord:k<0?S.coordinate-k*e:S.coordinate})}else c[A]=S=sa(sa({},S),{},{tickCoord:S.coordinate});var C=P0(e,S.tickCoord,T,f,m);C&&(f=S.tickCoord+e*(T()/2+s),c[A]=sa(sa({},S),{},{isShow:!0}))},j=0;j<y;j++)b(j);return c}function sj(e,t,r){var{tick:n,ticks:s,viewBox:l,minTickGap:c,orientation:d,interval:f,tickFormatter:m,unit:x,angle:h}=e;if(!s||!s.length||!n)return[];if(Ge(f)||Hi.isSsr){var v;return(v=vte(s,Ge(f)?f:0))!==null&&v!==void 0?v:[]}var g=[],y=d==="top"||d==="bottom"?"width":"height",b=x&&y==="width"?Ud(x,{fontSize:t,letterSpacing:r}):{width:0,height:0},j=(S,D)=>{var T=typeof m=="function"?m(S.value,D):S.value;return y==="width"?pte(Ud(T,{fontSize:t,letterSpacing:r}),b,h):Ud(T,{fontSize:t,letterSpacing:r})[y]},w=s.length>=2?Rr(s[1].coordinate-s[0].coordinate):1,A=gte(l,w,y);return f==="equidistantPreserveStart"?bte(w,A,j,s,c):(f==="preserveStart"||f==="preserveStartEnd"?g=_te(w,A,j,s,c,f==="preserveStartEnd"):g=wte(w,A,j,s,c),g.filter(S=>S.isShow))}var Ete=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:l=0}=e,c=0;if(t){Array.from(t).forEach(x=>{if(x){var h=x.getBoundingClientRect();h.width>c&&(c=h.width)}});var d=r?r.getBoundingClientRect().width:0,f=s+l,m=c+f+d+(r?n:0);return Math.round(m)}return 0},Ste=["axisLine","width","height","className","hide","ticks"],Ate=["viewBox"],Cte=["viewBox"];function Ob(e,t){if(e==null)return{};var r,n,s=Tte(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Tte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bl(){return Bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bl.apply(null,arguments)}function P3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P3(Object(r),!0).forEach(function(n){Dte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dte(e,t,r){return(t=Ote(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ote(e){var t=kte(e,"string");return typeof t=="symbol"?t:t+""}function kte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ij={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Pte(e){var{x:t,y:r,width:n,height:s,orientation:l,mirror:c,axisLine:d,otherSvgProps:f}=e;if(!d)return null;var m=Nr(Nr(Nr({},f),nn(d)),{},{fill:"none"});if(l==="top"||l==="bottom"){var x=+(l==="top"&&!c||l==="bottom"&&c);m=Nr(Nr({},m),{},{x1:t,y1:r+x*s,x2:t+n,y2:r+x*s})}else{var h=+(l==="left"&&!c||l==="right"&&c);m=Nr(Nr({},m),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+s})}return _.createElement("line",Bl({},m,{className:pt("recharts-cartesian-axis-line",Ml(d,"className"))}))}function Mte(e,t,r,n,s,l,c,d,f){var m,x,h,v,g,y,b=d?-1:1,j=e.tickSize||c,w=Ge(e.tickCoord)?e.tickCoord:e.coordinate;switch(l){case"top":m=x=e.coordinate,v=r+ +!d*s,h=v-b*j,y=h-b*f,g=w;break;case"left":h=v=e.coordinate,x=t+ +!d*n,m=x-b*j,g=m-b*f,y=w;break;case"right":h=v=e.coordinate,x=t+ +d*n,m=x+b*j,g=m+b*f,y=w;break;default:m=x=e.coordinate,v=r+ +d*s,h=v+b*j,y=h+b*f,g=w;break}return{line:{x1:m,y1:h,x2:x,y2:v},tick:{x:g,y}}}function Fte(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Lte(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Rte(e){var{option:t,tickProps:r,value:n}=e,s,l=pt(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))s=_.cloneElement(t,Nr(Nr({},r),{},{className:l}));else if(typeof t=="function")s=t(Nr(Nr({},r),{},{className:l}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=pt(c,t?.className)),s=_.createElement(Fx,Bl({},r,{className:c}),n)}return s}function Ite(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:l,unit:c,padding:d,tickTextProps:f,orientation:m,mirror:x,x:h,y:v,width:g,height:y,tickSize:b,tickMargin:j,fontSize:w,letterSpacing:A,getTicksConfig:S,events:D}=e,T=sj(Nr(Nr({},S),{},{ticks:t}),w,A),k=Fte(m,x),C=Lte(m,x),M=nn(S),I=Pl(r),R={};typeof n=="object"&&(R=n);var L=Nr(Nr({},M),{},{fill:"none"},R),P=T.map((O,z)=>{var{line:V,tick:G}=Mte(O,h,v,g,y,m,b,x,j),K=Nr(Nr(Nr(Nr({textAnchor:k,verticalAnchor:C},M),{},{stroke:"none",fill:s},I),G),{},{index:z,payload:O,visibleTicksCount:T.length,tickFormatter:l,padding:d},f);return _.createElement(ta,Bl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},rx(D,O,z)),n&&_.createElement("line",Bl({},L,V,{className:pt("recharts-cartesian-axis-tick-line",Ml(n,"className"))})),r&&_.createElement(Rte,{option:r,tickProps:K,value:"".concat(typeof l=="function"?l(O.value,z):O.value).concat(c||"")}))});return P.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},P):null}var Bte=_.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:l,hide:c,ticks:d}=e,f=Ob(e,Ste),[m,x]=_.useState(""),[h,v]=_.useState(""),g=_.useRef(null);_.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return Ete({ticks:g.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=_.useCallback(b=>{if(b){var j=b.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=j;var w=j[0];if(w){var A=window.getComputedStyle(w),S=A.fontSize,D=A.letterSpacing;(S!==m||D!==h)&&(x(S),v(D))}}},[m,h]);return c||n!=null&&n<=0||s!=null&&s<=0?null:_.createElement(ta,{className:pt("recharts-cartesian-axis",l),ref:y},_.createElement(Pte,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:nn(e)}),_.createElement(Ite,{ticks:d,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:m,letterSpacing:h,getTicksConfig:e,events:f}),_.createElement(UZ,{x:e.x,y:e.y,width:e.width,height:e.height},_.createElement(ZZ,{label:e.label,labelRef:e.labelRef}),e.children))}),zte=_.memo(Bte,(e,t)=>{var{viewBox:r}=e,n=Ob(e,Ate),{viewBox:s}=t,l=Ob(t,Cte);return sc(r,s)&&sc(n,l)}),lj=_.forwardRef((e,t)=>{var r=ra(e,ij);return _.createElement(zte,Bl({},r,{ref:t}))});lj.displayName="CartesianAxis";var Ute=["x1","y1","x2","y2","key"],$te=["offset"],qte=["xAxisId","yAxisId"],Hte=["xAxisId","yAxisId"];function M3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function la(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(r),!0).forEach(function(n){Vte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vte(e,t,r){return(t=Gte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gte(e){var t=Kte(e,"string");return typeof t=="symbol"?t:t+""}function Kte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nl.apply(null,arguments)}function M0(e,t){if(e==null)return{};var r,n,s=Yte(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Yte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Wte=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:l,height:c,ry:d}=e;return _.createElement("rect",{x:n,y:s,ry:d,width:l,height:c,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function eO(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:l,y2:c,key:d}=t,f=M0(t,Ute),m=nn(f),{offset:x}=m,h=M0(m,$te);r=_.createElement("line",Nl({},h,{x1:n,y1:s,x2:l,y2:c,fill:"none",key:d}))}return r}function Xte(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:l,yAxisId:c}=e,d=M0(e,qte),f=s.map((m,x)=>{var h=la(la({},d),{},{x1:t,y1:m,x2:t+r,y2:m,key:"line-".concat(x),index:x});return eO(n,h)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Zte(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:l,yAxisId:c}=e,d=M0(e,Hte),f=s.map((m,x)=>{var h=la(la({},d),{},{x1:m,y1:t,x2:m,y2:t+r,key:"line-".concat(x),index:x});return eO(n,h)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function Qte(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:l,height:c,horizontalPoints:d,horizontal:f=!0}=e;if(!f||!t||!t.length)return null;var m=d.map(h=>Math.round(h+s-s)).sort((h,v)=>h-v);s!==m[0]&&m.unshift(0);var x=m.map((h,v)=>{var g=!m[v+1],y=g?s+c-h:m[v+1]-h;if(y<=0)return null;var b=v%t.length;return _.createElement("rect",{key:"react-".concat(v),y:h,x:n,height:y,width:l,stroke:"none",fill:t[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},x)}function Jte(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:l,width:c,height:d,verticalPoints:f}=e;if(!t||!r||!r.length)return null;var m=f.map(h=>Math.round(h+s-s)).sort((h,v)=>h-v);s!==m[0]&&m.unshift(0);var x=m.map((h,v)=>{var g=!m[v+1],y=g?s+c-h:m[v+1]-h;if(y<=0)return null;var b=v%r.length;return _.createElement("rect",{key:"react-".concat(v),x:h,y:l,width:y,height:d,stroke:"none",fill:r[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},x)}var ere=(e,t)=>{var{xAxis:r,width:n,height:s,offset:l}=e;return V6(sj(la(la(la({},ij),r),{},{ticks:G6(r),viewBox:{x:0,y:0,width:n,height:s}})),l.left,l.left+l.width,t)},tre=(e,t)=>{var{yAxis:r,width:n,height:s,offset:l}=e;return V6(sj(la(la(la({},ij),r),{},{ticks:G6(r),viewBox:{x:0,y:0,width:n,height:s}})),l.top,l.top+l.height,t)},rre={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function kb(e){var t=eT(),r=tT(),n=J6(),s=la(la({},ra(e,rre)),{},{x:Ge(e.x)?e.x:n.left,y:Ge(e.y)?e.y:n.top,width:Ge(e.width)?e.width:n.width,height:Ge(e.height)?e.height:n.height}),{xAxisId:l,yAxisId:c,x:d,y:f,width:m,height:x,syncWithTicks:h,horizontalValues:v,verticalValues:g}=s,y=Aa(),b=He(I=>kS(I,"xAxis",l,y)),j=He(I=>kS(I,"yAxis",c,y));if(!Ge(m)||m<=0||!Ge(x)||x<=0||!Ge(d)||d!==+d||!Ge(f)||f!==+f)return null;var w=s.verticalCoordinatesGenerator||ere,A=s.horizontalCoordinatesGenerator||tre,{horizontalPoints:S,verticalPoints:D}=s;if((!S||!S.length)&&typeof A=="function"){var T=v&&v.length,k=A({yAxis:j?la(la({},j),{},{ticks:T?v:j.ticks}):void 0,width:t,height:r,offset:n},T?!0:h);f0(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(S=k)}if((!D||!D.length)&&typeof w=="function"){var C=g&&g.length,M=w({xAxis:b?la(la({},b),{},{ticks:C?g:b.ticks}):void 0,width:t,height:r,offset:n},C?!0:h);f0(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(D=M)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(Wte,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),_.createElement(Qte,Nl({},s,{horizontalPoints:S})),_.createElement(Jte,Nl({},s,{verticalPoints:D})),_.createElement(Xte,Nl({},s,{offset:n,horizontalPoints:S,xAxis:b,yAxis:j})),_.createElement(Zte,Nl({},s,{offset:n,verticalPoints:D,xAxis:b,yAxis:j})))}kb.displayName="CartesianGrid";var tO=(e,t,r,n)=>Ii(e,"xAxis",t,n),rO=(e,t,r,n)=>Ri(e,"xAxis",t,n),aO=(e,t,r,n)=>Ii(e,"yAxis",r,n),nO=(e,t,r,n)=>Ri(e,"yAxis",r,n),are=ge([ct,tO,aO,rO,nO],(e,t,r,n,s)=>qi(e,"xAxis")?au(t,n,!1):au(r,s,!1)),nre=(e,t,r,n,s)=>s;function sre(e){return e.type==="line"}var ire=ge([Tx,nre],(e,t)=>e.filter(sre).find(r=>r.id===t)),lre=ge([ct,tO,aO,rO,nO,ire,are,Nx],(e,t,r,n,s,l,c,d)=>{var{chartData:f,dataStartIndex:m,dataEndIndex:x}=d;if(!(l==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||c==null)){var{dataKey:h,data:v}=l,g;if(v!=null&&v.length>0?g=v:g=f?.slice(m,x+1),g!=null)return Dre({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:h,bandSize:c,displayedData:g})}});function ore(e){var t=Pl(e),r=3,n=2;if(t!=null){var{r:s,strokeWidth:l}=t,c=Number(s),d=Number(l);return(Number.isNaN(c)||c<0)&&(c=r),(Number.isNaN(d)||d<0)&&(d=n),{r:c,strokeWidth:d}}return{r,strokeWidth:n}}var cre=["id"],dre=["type","layout","connectNulls","needClip"],ure=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function F3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(r),!0).forEach(function(n){fre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fre(e,t,r){return(t=mre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mre(e){var t=xre(e,"string");return typeof t=="symbol"?t:t+""}function xre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oj(e,t){if(e==null)return{};var r,n,s=hre(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zl.apply(null,arguments)}var pre=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:l}=e;return[{inactive:l,dataKey:t,type:s,color:n,value:uc(r,t),payload:e}]};function gre(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:l,name:c,hide:d,unit:f}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:l,dataKey:t,nameKey:void 0,name:uc(c,t),hide:d,type:e.tooltipType,color:e.stroke,unit:f}}}var sO=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function vre(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var bre=(e,t,r)=>{var n=r.reduce((h,v)=>h+v);if(!n)return sO(t,e);for(var s=Math.floor(e/n),l=e%n,c=t-e,d=[],f=0,m=0;f<r.length;m+=r[f],++f)if(m+r[f]>l){d=[...r.slice(0,f),l-m];break}var x=d.length%2===0?[0,c]:[c];return[...vre(r,s),...d,...x].map(h=>"".concat(h,"px")).join(", ")};function yre(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=pt("recharts-line-dot",typeof e!="boolean"?e.className:"");r=_.createElement(OD,zl({},t,{className:n}))}return r}function jre(e,t){return e==null?!1:t?!0:e.length===1}function Nre(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:l,needClip:c}=n;if(!jre(r,s))return null;var{id:d}=n,f=oj(n,cre),m=RD(s),x=nn(f),h=Cz(s),v=r.map((y,b)=>{var j=Qa(Qa(Qa({key:"dot-".concat(b),r:3},x),h),{},{index:b,cx:y.x,cy:y.y,dataKey:l,value:y.value,payload:y.payload,points:r});return yre(s,j)}),g={clipPath:c?"url(#clipPath-".concat(m?"":"dots-").concat(t,")"):void 0};return _.createElement(ta,zl({className:"recharts-line-dots",key:"dots"},g),v)}function wre(e){var{showLabels:t,children:r,points:n}=e,s=_.useMemo(()=>n?.map(l=>{var c={x:l.x,y:l.y,width:0,height:0};return Qa(Qa({},c),{},{value:l.value,payload:l.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return _.createElement(TD,{value:t?s:null},r)}function L3(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:l}=e,{type:c,layout:d,connectNulls:f,needClip:m}=l,x=oj(l,dre),h=Qa(Qa({},Ea(x)),{},{fill:"none",className:"recharts-line-curve",clipPath:m?"url(#clipPath-".concat(t,")"):void 0,points:n,type:c,layout:d,connectNulls:f,strokeDasharray:s??l.strokeDasharray});return _.createElement(_.Fragment,null,n?.length>1&&_.createElement(My,zl({},h,{pathRef:r})),_.createElement(Nre,{points:n,clipPathId:t,props:l}))}function _re(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Ere(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:l}=e,{points:c,strokeDasharray:d,isAnimationActive:f,animationBegin:m,animationDuration:x,animationEasing:h,animateNewValues:v,width:g,height:y,onAnimationEnd:b,onAnimationStart:j}=r,w=s.current,A=Su(r,"recharts-line-"),[S,D]=_.useState(!1),T=!S,k=_.useCallback(()=>{typeof b=="function"&&b(),D(!1)},[b]),C=_.useCallback(()=>{typeof j=="function"&&j(),D(!0)},[j]),M=_re(n.current),I=l.current;return _.createElement(wre,{points:c,showLabels:T},r.children,_.createElement(Eu,{animationId:A,begin:m,duration:x,isActive:f,easing:h,onAnimationEnd:k,onAnimationStart:C,key:A},R=>{var L=er(I,M+I,R),P=Math.min(L,M),O;if(f)if(d){var z="".concat(d).split(/[,\s]+/gim).map(K=>parseFloat(K));O=bre(P,M,z)}else O=sO(M,P);else O=d==null?void 0:String(d);if(w){var V=w.length/c.length,G=R===1?c:c.map((K,ce)=>{var le=Math.floor(ce*V);if(w[le]){var ne=w[le];return Qa(Qa({},K),{},{x:er(ne.x,K.x,R),y:er(ne.y,K.y,R)})}return v?Qa(Qa({},K),{},{x:er(g*2,K.x,R),y:er(y/2,K.y,R)}):Qa(Qa({},K),{},{x:K.x,y:K.y})});return s.current=G,_.createElement(L3,{props:r,points:G,clipPathId:t,pathRef:n,strokeDasharray:O})}return R>0&&M>0&&(s.current=c,l.current=P),_.createElement(L3,{props:r,points:c,clipPathId:t,pathRef:n,strokeDasharray:O})}),_.createElement(V1,{label:r.label}))}function Sre(e){var{clipPathId:t,props:r}=e,n=_.useRef(null),s=_.useRef(0),l=_.useRef(null);return _.createElement(Ere,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:l})}var Are=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:It(e.payload,t)});class Cre extends _.Component{render(){var{hide:t,dot:r,points:n,className:s,xAxisId:l,yAxisId:c,top:d,left:f,width:m,height:x,id:h,needClip:v}=this.props;if(t)return null;var g=pt("recharts-line",s),y=h,{r:b,strokeWidth:j}=ore(r),w=RD(r),A=b*2+j;return _.createElement(_.Fragment,null,_.createElement(ta,{className:g},v&&_.createElement("defs",null,_.createElement(KD,{clipPathId:y,xAxisId:l,yAxisId:c}),!w&&_.createElement("clipPath",{id:"clipPath-dots-".concat(y)},_.createElement("rect",{x:f-A/2,y:d-A/2,width:m+A,height:x+A}))),_.createElement(GD,{xAxisId:l,yAxisId:c,data:n,dataPointFormatter:Are,errorBarOffset:0},_.createElement(Sre,{props:this.props,clipPathId:y}))),_.createElement(KJ,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var iO={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Hi.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Tre(e){var t=ra(e,iO),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:l,animationEasing:c,connectNulls:d,dot:f,hide:m,isAnimationActive:x,label:h,legendType:v,xAxisId:g,yAxisId:y,id:b}=t,j=oj(t,ure),{needClip:w}=aj(g,y),A=tj(),S=xx(),D=Aa(),T=He(R=>lre(R,g,y,D,b));if(S!=="horizontal"&&S!=="vertical"||T==null||A==null)return null;var{height:k,width:C,x:M,y:I}=A;return _.createElement(Cre,zl({},j,{id:b,connectNulls:d,dot:f,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:l,animationEasing:c,isAnimationActive:x,hide:m,label:h,legendType:v,xAxisId:g,yAxisId:y,points:T,layout:S,height:k,width:C,left:M,top:I,needClip:w}))}function Dre(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:l,dataKey:c,bandSize:d,displayedData:f}=e;return f.map((m,x)=>{var h=It(m,c);if(t==="horizontal"){var v=oE({axis:r,ticks:s,bandSize:d,entry:m,index:x}),g=Gt(h)?null:n.scale(h);return{x:v,y:g,value:h,payload:m}}var y=Gt(h)?null:r.scale(h),b=oE({axis:n,ticks:l,bandSize:d,entry:m,index:x});return y==null||b==null?null:{x:y,y:b,value:h,payload:m}}).filter(Boolean)}function Ore(e){var t=ra(e,iO),r=Aa();return _.createElement(J1,{id:t.id,type:"line"},n=>_.createElement(_.Fragment,null,_.createElement(zD,{legendPayload:pre(t)}),_.createElement(Q1,{fn:gre,args:t}),_.createElement($D,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),_.createElement(Tre,zl({},t,{id:n}))))}var lO=_.memo(Ore);lO.displayName="Line";var kre=["dangerouslySetInnerHTML","ticks"],Pre=["id"],Mre=["domain"],Fre=["domain"];function Pb(){return Pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pb.apply(null,arguments)}function F0(e,t){if(e==null)return{};var r,n,s=Lre(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Lre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rre(e){var t=ar();return _.useLayoutEffect(()=>(t(MJ(e)),()=>{t(FJ(e))}),[e,t]),null}var Ire=e=>{var{xAxisId:t,className:r}=e,n=He(ky),s=Aa(),l="xAxis",c=He(j=>bc(j,l,t,s)),d=He(j=>q5(j,l,t,s)),f=He(j=>B5(j,t)),m=He(j=>jW(j,t)),x=He(j=>y5(j,t));if(f==null||m==null||x==null)return null;var{dangerouslySetInnerHTML:h,ticks:v}=e,g=F0(e,kre),{id:y}=x,b=F0(x,Pre);return _.createElement(lj,Pb({},g,b,{scale:c,x:m.x,y:m.y,width:f.width,height:f.height,className:pt("recharts-".concat(l," ").concat(l),r),viewBox:n,ticks:d}))},Bre={allowDataOverflow:Va.allowDataOverflow,allowDecimals:Va.allowDecimals,allowDuplicatedCategory:Va.allowDuplicatedCategory,height:Va.height,hide:!1,mirror:Va.mirror,orientation:Va.orientation,padding:Va.padding,reversed:Va.reversed,scale:Va.scale,tickCount:Va.tickCount,type:Va.type,xAxisId:0},zre=e=>{var t,r,n,s,l,c=ra(e,Bre);return _.createElement(_.Fragment,null,_.createElement(Rre,{interval:(t=c.interval)!==null&&t!==void 0?t:"preserveEnd",id:c.xAxisId,scale:c.scale,type:c.type,padding:c.padding,allowDataOverflow:c.allowDataOverflow,domain:c.domain,dataKey:c.dataKey,allowDuplicatedCategory:c.allowDuplicatedCategory,allowDecimals:c.allowDecimals,tickCount:c.tickCount,includeHidden:(r=c.includeHidden)!==null&&r!==void 0?r:!1,reversed:c.reversed,ticks:c.ticks,height:c.height,orientation:c.orientation,mirror:c.mirror,hide:c.hide,unit:c.unit,name:c.name,angle:(n=c.angle)!==null&&n!==void 0?n:0,minTickGap:(s=c.minTickGap)!==null&&s!==void 0?s:5,tick:(l=c.tick)!==null&&l!==void 0?l:!0,tickFormatter:c.tickFormatter}),_.createElement(Ire,c))},Ure=(e,t)=>{var{domain:r}=e,n=F0(e,Mre),{domain:s}=t,l=F0(t,Fre);return sc(n,l)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:sc({domain:r},{domain:s}):!1},Mb=_.memo(zre,Ure);Mb.displayName="XAxis";var $re=["dangerouslySetInnerHTML","ticks"],qre=["id"],Hre=["domain"],Vre=["domain"];function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fb.apply(null,arguments)}function L0(e,t){if(e==null)return{};var r,n,s=Gre(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Gre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Kre(e){var t=ar();return _.useLayoutEffect(()=>(t(LJ(e)),()=>{t(RJ(e))}),[e,t]),null}var Yre=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,l=_.useRef(null),c=_.useRef(null),d=He(ky),f=Aa(),m=ar(),x="yAxis",h=He(T=>bc(T,x,t,f)),v=He(T=>z5(T,t)),g=He(T=>wW(T,t)),y=He(T=>q5(T,x,t,f)),b=He(T=>j5(T,t));if(_.useLayoutEffect(()=>{if(!(n!=="auto"||!v||H1(s)||_.isValidElement(s)||b==null)){var T=l.current;if(T){var k=T.getCalculatedWidth();Math.round(v.width)!==Math.round(k)&&m(IJ({id:t,width:k}))}}},[y,v,m,s,t,n,b]),v==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:j,ticks:w}=e,A=L0(e,$re),{id:S}=b,D=L0(b,qre);return _.createElement(lj,Fb({},A,D,{ref:l,labelRef:c,scale:h,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:v.width,height:v.height,className:pt("recharts-".concat(x," ").concat(x),r),viewBox:d,ticks:y}))},Wre={allowDataOverflow:Ga.allowDataOverflow,allowDecimals:Ga.allowDecimals,allowDuplicatedCategory:Ga.allowDuplicatedCategory,hide:!1,mirror:Ga.mirror,orientation:Ga.orientation,padding:Ga.padding,reversed:Ga.reversed,scale:Ga.scale,tickCount:Ga.tickCount,type:Ga.type,width:Ga.width,yAxisId:0},Xre=e=>{var t,r,n,s,l,c=ra(e,Wre);return _.createElement(_.Fragment,null,_.createElement(Kre,{interval:(t=c.interval)!==null&&t!==void 0?t:"preserveEnd",id:c.yAxisId,scale:c.scale,type:c.type,domain:c.domain,allowDataOverflow:c.allowDataOverflow,dataKey:c.dataKey,allowDuplicatedCategory:c.allowDuplicatedCategory,allowDecimals:c.allowDecimals,tickCount:c.tickCount,padding:c.padding,includeHidden:(r=c.includeHidden)!==null&&r!==void 0?r:!1,reversed:c.reversed,ticks:c.ticks,width:c.width,orientation:c.orientation,mirror:c.mirror,hide:c.hide,unit:c.unit,name:c.name,angle:(n=c.angle)!==null&&n!==void 0?n:0,minTickGap:(s=c.minTickGap)!==null&&s!==void 0?s:5,tick:(l=c.tick)!==null&&l!==void 0?l:!0,tickFormatter:c.tickFormatter}),_.createElement(Yre,c))},Zre=(e,t)=>{var{domain:r}=e,n=L0(e,Hre),{domain:s}=t,l=L0(t,Vre);return sc(n,l)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:sc({domain:r},{domain:s}):!1},Lb=_.memo(Xre,Zre);Lb.displayName="YAxis";var Pv={exports:{}},Mv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R3;function Qre(){if(R3)return Mv;R3=1;var e=q0();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,l=e.useEffect,c=e.useMemo,d=e.useDebugValue;return Mv.useSyncExternalStoreWithSelector=function(f,m,x,h,v){var g=s(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=c(function(){function j(T){if(!w){if(w=!0,A=T,T=h(T),v!==void 0&&y.hasValue){var k=y.value;if(v(k,T))return S=k}return S=T}if(k=S,r(A,T))return k;var C=h(T);return v!==void 0&&v(k,C)?(A=T,k):(A=T,S=C)}var w=!1,A,S,D=x===void 0?null:x;return[function(){return j(m())},D===null?void 0:function(){return j(D())}]},[m,x,h,v]);var b=n(f,g[0],g[1]);return l(function(){y.hasValue=!0,y.value=b},[b]),d(b),b},Mv}var I3;function Jre(){return I3||(I3=1,Pv.exports=Qre()),Pv.exports}Jre();function eae(e){e()}function tae(){let e=null,t=null;return{clear(){e=null,t=null},notify(){eae(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var B3={notify(){},get:()=>[]};function rae(e,t){let r,n=B3,s=0,l=!1;function c(b){x();const j=n.subscribe(b);let w=!1;return()=>{w||(w=!0,j(),h())}}function d(){n.notify()}function f(){y.onStateChange&&y.onStateChange()}function m(){return l}function x(){s++,r||(r=e.subscribe(f),n=tae())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=B3)}function v(){l||(l=!0,x())}function g(){l&&(l=!1,h())}const y={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:m,trySubscribe:v,tryUnsubscribe:g,getListeners:()=>n};return y}var aae=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nae=aae(),sae=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iae=sae(),lae=()=>nae||iae?_.useLayoutEffect:_.useEffect,oae=lae(),cae=Symbol.for("react-redux-context"),dae=typeof globalThis<"u"?globalThis:{};function uae(){if(!_.createContext)return{};const e=dae[cae]??=new Map;let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var fae=uae();function mae(e){const{children:t,context:r,serverState:n,store:s}=e,l=_.useMemo(()=>{const f=rae(s);return{store:s,subscription:f,getServerState:n?()=>n:void 0}},[s,n]),c=_.useMemo(()=>s.getState(),[s]);oae(()=>{const{subscription:f}=l;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),c!==s.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[l,c]);const d=r||fae;return _.createElement(d.Provider,{value:l},t)}var xae=mae,hae=(e,t)=>t,cj=ge([hae,ct,g5,Sr,iD,ri,CX,_r],PX),dj=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},oO=kn("mouseClick"),cO=wu();cO.startListening({actionCreator:oO,effect:(e,t)=>{var r=e.payload,n=cj(t.getState(),dj(r));n?.activeIndex!=null&&t.dispatch(LW({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Rb=kn("mouseMove"),dO=wu();dO.startListening({actionCreator:Rb,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=M1(n,n.tooltip.settings.shared),l=cj(n,dj(r));s==="axis"&&(l?.activeIndex!=null?t.dispatch(Z5({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(X5()))}});var z3={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},uO=on({name:"rootProps",initialState:z3,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:z3.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),pae=uO.reducer,{updateOptions:gae}=uO.actions,fO=on({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:vae}=fO.actions,bae=fO.reducer,mO=kn("keyDown"),xO=kn("focus"),uj=wu();uj.startListening({actionCreator:mO,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,l=e.payload;if(!(l!=="ArrowRight"&&l!=="ArrowLeft"&&l!=="Enter")){var c=Number(F1(s,jc(r))),d=ri(r);if(l==="Enter"){var f=C0(r,"axis","hover",String(s.index));t.dispatch(Eb({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:f}));return}var m=AW(r),x=m==="left-to-right"?1:-1,h=l==="ArrowRight"?1:-1,v=c+h*x;if(!(d==null||v>=d.length||v<0)){var g=C0(r,"axis","hover",String(v));t.dispatch(Eb({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});uj.startListening({actionCreator:xO,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var l="0",c=C0(r,"axis","hover",String(l));t.dispatch(Eb({activeDataKey:void 0,active:!0,activeIndex:l,activeCoordinate:c}))}}}});var _n=kn("externalEvent"),hO=wu();hO.startListening({actionCreator:_n,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:vX(r),activeDataKey:dD(r),activeIndex:Bi(r),activeLabel:cD(r),activeTooltipIndex:Bi(r),isTooltipActive:bX(r)};e.payload.handler(n,e.payload.reactEvent)}}});var yae=ge([yc],e=>e.tooltipItemPayloads),jae=ge([yae,Lu,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(d=>d.settings.dataKey===n);if(s!=null){var{positions:l}=s;if(l!=null){var c=t(l,r);return c}}}),pO=kn("touchMove"),gO=wu();gO.startListening({actionCreator:pO,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=M1(n,n.tooltip.settings.shared);if(s==="axis"){var l=cj(n,dj({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));l?.activeIndex!=null&&t.dispatch(Z5({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(s==="item"){var c,d=r.touches[0],f=document.elementFromPoint(d.clientX,d.clientY);if(!f||!f.getAttribute)return;var m=f.getAttribute(Y6),x=(c=f.getAttribute(W6))!==null&&c!==void 0?c:void 0,h=jae(t.getState(),m,x);t.dispatch(W5({activeDataKey:x,activeIndex:m,activeCoordinate:h}))}}});var Nae=v6({brush:ite,cartesianAxis:BJ,chartData:WX,errorBars:see,graphicalItems:nJ,layout:bq,legend:wH,options:HX,polarAxis:vQ,polarOptions:bae,referenceElements:mte,rootProps:pae,tooltip:RW}),wae=function(t){return H$({reducer:Nae,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([cO.middleware,dO.middleware,uj.middleware,hO.middleware,gO.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(D6({type:"raf"}))},devTools:Hi.devToolsEnabled})};function vO(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Aa(),l=_.useRef(null);if(s)return r;l.current==null&&(l.current=wae(t));var c=Sy;return _.createElement(xae,{context:c,store:l.current},r)}function bO(e){var{layout:t,margin:r}=e,n=ar(),s=Aa();return _.useEffect(()=>{s||(n(pq(t)),n(hq(r)))},[n,s,t,r]),null}function yO(e){var t=ar();return _.useEffect(()=>{t(gae(e))},[t,e]),null}var _ae=["children"];function Eae(e,t){if(e==null)return{};var r,n,s=Sae(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Sae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(null,arguments)}var Aae={width:"100%",height:"100%",display:"block"},Cae=_.forwardRef((e,t)=>{var r=eT(),n=tT(),s=sT();if(!tc(r)||!tc(n))return null;var{children:l,otherAttributes:c,title:d,desc:f}=e,m,x;return typeof c.tabIndex=="number"?m=c.tabIndex:m=s?0:void 0,typeof c.role=="string"?x=c.role:x=s?"application":void 0,_.createElement(RC,R0({},c,{title:d,desc:f,role:x,tabIndex:m,width:r,height:n,style:Aae,ref:t}),l)}),Tae=e=>{var{children:t}=e,r=He(fx);if(!r)return null;var{width:n,height:s,y:l,x:c}=r;return _.createElement(RC,{width:n,height:s,x:c,y:l},t)},U3=_.forwardRef((e,t)=>{var{children:r}=e,n=Eae(e,_ae),s=Aa();return s?_.createElement(Tae,null,r):_.createElement(Cae,R0({ref:t},n),r)});function Dae(){var e=ar(),[t,r]=_.useState(null),n=He(Yq);return _.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),l=s.width/t.offsetWidth;fa(l)&&l!==n&&e(vq(l))}},[t,e,n]),r}function $3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$3(Object(r),!0).forEach(function(n){kae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kae(e,t,r){return(t=Pae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pae(e){var t=Mae(e,"string");return typeof t=="symbol"?t:t+""}function Mae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ul.apply(null,arguments)}var Fae=()=>(nZ(),null);function I0(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Lae=_.forwardRef((e,t)=>{var r,n,s=_.useRef(null),[l,c]=_.useState({containerWidth:I0((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:I0((n=e.style)===null||n===void 0?void 0:n.height)}),d=_.useCallback((m,x)=>{c(h=>{var v=Math.round(m),g=Math.round(x);return h.containerWidth===v&&h.containerHeight===g?h:{containerWidth:v,containerHeight:g}})},[]),f=_.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:x,height:h}=m.getBoundingClientRect();d(x,h);var v=y=>{var{width:b,height:j}=y[0].contentRect;d(b,j)},g=new ResizeObserver(v);g.observe(m),s.current=g}},[t,d]);return _.useEffect(()=>()=>{var m=s.current;m?.disconnect()},[d]),_.createElement(_.Fragment,null,_.createElement(hx,{width:l.containerWidth,height:l.containerHeight}),_.createElement("div",Ul({ref:f},e)))}),Rae=_.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,l]=_.useState({containerWidth:I0(r),containerHeight:I0(n)}),c=_.useCallback((f,m)=>{l(x=>{var h=Math.round(f),v=Math.round(m);return x.containerWidth===h&&x.containerHeight===v?x:{containerWidth:h,containerHeight:v}})},[]),d=_.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:m,height:x}=f.getBoundingClientRect();c(m,x)}},[t,c]);return _.createElement(_.Fragment,null,_.createElement(hx,{width:s.containerWidth,height:s.containerHeight}),_.createElement("div",Ul({ref:d},e)))}),Iae=_.forwardRef((e,t)=>{var{width:r,height:n}=e;return _.createElement(_.Fragment,null,_.createElement(hx,{width:r,height:n}),_.createElement("div",Ul({ref:t},e)))}),Bae=_.forwardRef((e,t)=>{var{width:r,height:n}=e;return Hs(r)||Hs(n)?_.createElement(Rae,Ul({},e,{ref:t})):_.createElement(Iae,Ul({},e,{ref:t}))});function zae(e){return e===!0?Lae:Bae}var Uae=_.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:l,onContextMenu:c,onDoubleClick:d,onMouseDown:f,onMouseEnter:m,onMouseLeave:x,onMouseMove:h,onMouseUp:v,onTouchEnd:g,onTouchMove:y,onTouchStart:b,style:j,width:w,responsive:A,dispatchTouchEvents:S=!0}=e,D=_.useRef(null),T=ar(),[k,C]=_.useState(null),[M,I]=_.useState(null),R=Dae(),L=Py(),P=L?.width>0?L.width:w,O=L?.height>0?L.height:s,z=_.useCallback(fe=>{R(fe),typeof t=="function"&&t(fe),C(fe),I(fe),fe!=null&&(D.current=fe)},[R,t,C,I]),V=_.useCallback(fe=>{T(oO(fe)),T(_n({handler:l,reactEvent:fe}))},[T,l]),G=_.useCallback(fe=>{T(Rb(fe)),T(_n({handler:m,reactEvent:fe}))},[T,m]),K=_.useCallback(fe=>{T(X5()),T(_n({handler:x,reactEvent:fe}))},[T,x]),ce=_.useCallback(fe=>{T(Rb(fe)),T(_n({handler:h,reactEvent:fe}))},[T,h]),le=_.useCallback(()=>{T(xO())},[T]),ne=_.useCallback(fe=>{T(mO(fe.key))},[T]),Z=_.useCallback(fe=>{T(_n({handler:c,reactEvent:fe}))},[T,c]),F=_.useCallback(fe=>{T(_n({handler:d,reactEvent:fe}))},[T,d]),U=_.useCallback(fe=>{T(_n({handler:f,reactEvent:fe}))},[T,f]),Y=_.useCallback(fe=>{T(_n({handler:v,reactEvent:fe}))},[T,v]),Q=_.useCallback(fe=>{T(_n({handler:b,reactEvent:fe}))},[T,b]),ee=_.useCallback(fe=>{S&&T(pO(fe)),T(_n({handler:y,reactEvent:fe}))},[T,S,y]),De=_.useCallback(fe=>{T(_n({handler:g,reactEvent:fe}))},[T,g]),ke=zae(A);return _.createElement(pD.Provider,{value:k},_.createElement(Fz.Provider,{value:M},_.createElement(ke,{width:P??j?.width,height:O??j?.height,className:pt("recharts-wrapper",n),style:Oae({position:"relative",cursor:"default",width:P,height:O},j),onClick:V,onContextMenu:Z,onDoubleClick:F,onFocus:le,onKeyDown:ne,onMouseDown:U,onMouseEnter:G,onMouseLeave:K,onMouseMove:ce,onMouseUp:Y,onTouchEnd:De,onTouchMove:ee,onTouchStart:Q,ref:z},_.createElement(Fae,null),r)))}),$ae=["width","height","responsive","children","className","style","compact","title","desc"];function qae(e,t){if(e==null)return{};var r,n,s=Hae(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Hae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jO=_.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:l,className:c,style:d,compact:f,title:m,desc:x}=e,h=qae(e,$ae),v=nn(h);return f?_.createElement(_.Fragment,null,_.createElement(hx,{width:r,height:n}),_.createElement(U3,{otherAttributes:v,title:m,desc:x},l)):_.createElement(Uae,{className:c,style:d,width:r,height:n,responsive:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement(U3,{otherAttributes:v,title:m,desc:x,ref:t},_.createElement(hte,null,l)))});function Ib(){return Ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ib.apply(null,arguments)}var Vae={top:5,right:5,bottom:5,left:5},Gae={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Vae,reverseStackOrder:!1,syncMethod:"index",responsive:!1},NO=_.forwardRef(function(t,r){var n,s=ra(t.categoricalChartProps,Gae),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:m}=t,x={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return _.createElement(vO,{preloadedState:{options:x},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:l},_.createElement(XD,{chartData:m.data}),_.createElement(bO,{layout:s.layout,margin:s.margin}),_.createElement(yO,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(jO,Ib({},s,{ref:r})))}),Kae=["axis"],Yae=_.forwardRef((e,t)=>_.createElement(NO,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Kae,tooltipPayloadSearcher:q1,categoricalChartProps:e,ref:t})),Wae=["axis","item"],Xae=_.forwardRef((e,t)=>_.createElement(NO,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Wae,tooltipPayloadSearcher:q1,categoricalChartProps:e,ref:t}));function Zae(e){var t=ar();return _.useEffect(()=>{t(vae(e))},[t,e]),null}var Qae=["layout"];function Bb(){return Bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bb.apply(null,arguments)}function Jae(e,t){if(e==null)return{};var r,n,s=ene(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ene(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tne={top:5,right:5,bottom:5,left:5},rne={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:tne,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},ane=_.forwardRef(function(t,r){var n,s=ra(t.categoricalChartProps,rne),{layout:l}=s,c=Jae(s,Qae),{chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:m,tooltipPayloadSearcher:x}=t,h={chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:m,tooltipPayloadSearcher:x,eventEmitter:void 0};return _.createElement(vO,{preloadedState:{options:h},reduxStoreName:(n=s.id)!==null&&n!==void 0?n:d},_.createElement(XD,{chartData:s.data}),_.createElement(bO,{layout:l,margin:s.margin}),_.createElement(yO,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(Zae,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),_.createElement(jO,Bb({},c,{ref:r})))}),nne=["item"],sne={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},ine=_.forwardRef((e,t)=>{var r=ra(e,sne);return _.createElement(ane,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:nne,tooltipPayloadSearcher:q1,categoricalChartProps:r,ref:t})});const lne=()=>{Yl();const[e,t]=_.useState(!0),[r,n]=_.useState("mes"),[s,l]=_.useState([]),[c,d]=_.useState([]),[f,m]=_.useState({totalMovimientos:0,totalIngresos:0,promedioMensual:0,tendencia:"up"});_.useEffect(()=>{x()},[r]);const x=async()=>{t(!0);try{const g=[{periodo:"Ene 2024",llegadas:15,ventas:8,transferencias:12,ingresos:68e5},{periodo:"Feb 2024",llegadas:12,ventas:10,transferencias:15,ingresos:85e5},{periodo:"Mar 2024",llegadas:18,ventas:6,transferencias:10,ingresos:51e5},{periodo:"Abr 2024",llegadas:20,ventas:12,transferencias:18,ingresos:102e5},{periodo:"May 2024",llegadas:16,ventas:14,transferencias:8,ingresos:119e5},{periodo:"Jun 2024",llegadas:22,ventas:9,transferencias:20,ingresos:765e4}],y=[{tipo:"Llegadas",cantidad:103,porcentaje:45.2,color:"#10B981"},{tipo:"Transferencias",cantidad:83,porcentaje:36.4,color:"#3B82F6"},{tipo:"Ventas",cantidad:42,porcentaje:18.4,color:"#EF4444"}];l(g),d(y),m({totalMovimientos:228,totalIngresos:5015e4,promedioMensual:38,tendencia:"up"})}catch(g){console.error("Error al cargar estadísticas:",g)}finally{t(!1)}},h=g=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(g),v=g=>new Intl.NumberFormat("es-AR").format(g);return e?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Estadísticas de Movimientos"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Análisis y tendencias de los movimientos de animales"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Período:"}),a.jsxs("select",{value:r,onChange:g=>n(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"mes",children:"Mensual"}),a.jsx("option",{value:"trimestre",children:"Trimestral"}),a.jsx("option",{value:"año",children:"Anual"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Movimientos"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v(f.totalMovimientos)})]}),a.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:a.jsx(xr,{className:"h-6 w-6 text-blue-600"})})]}),a.jsxs("div",{className:"mt-4 flex items-center",children:[f.tendencia==="up"?a.jsx(Mt,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(zb,{className:"h-4 w-4 text-red-500 mr-1"}),a.jsx("span",{className:`text-sm ${f.tendencia==="up"?"text-green-600":"text-red-600"}`,children:"+12% vs mes anterior"})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ingresos Totales"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h(f.totalIngresos)})]}),a.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:a.jsx(rr,{className:"h-6 w-6 text-green-600"})})]}),a.jsxs("div",{className:"mt-4 flex items-center",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 mr-1"}),a.jsx("span",{className:"text-sm text-green-600",children:"+8% vs mes anterior"})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Promedio Mensual"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v(f.promedioMensual)})]}),a.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:a.jsx(We,{className:"h-6 w-6 text-purple-600"})})]}),a.jsx("div",{className:"mt-4 flex items-center",children:a.jsx("span",{className:"text-sm text-gray-600",children:"movimientos/mes"})})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transferencias Activas"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"83"})]}),a.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:a.jsx(ua,{className:"h-6 w-6 text-orange-600"})})]}),a.jsx("div",{className:"mt-4 flex items-center",children:a.jsx("span",{className:"text-sm text-gray-600",children:"36.4% del total"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Movimientos por Período"}),a.jsx(iv,{width:"100%",height:300,children:a.jsxs(Xae,{data:s,children:[a.jsx(kb,{strokeDasharray:"3 3"}),a.jsx(Mb,{dataKey:"periodo"}),a.jsx(Lb,{}),a.jsx(Nv,{}),a.jsx(Fm,{dataKey:"llegadas",fill:"#10B981",name:"Llegadas"}),a.jsx(Fm,{dataKey:"ventas",fill:"#EF4444",name:"Ventas"}),a.jsx(Fm,{dataKey:"transferencias",fill:"#3B82F6",name:"Transferencias"})]})})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribución por Tipo"}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(iv,{width:"100%",height:300,children:a.jsxs(ine,{children:[a.jsx(qD,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:({tipo:g,porcentaje:y})=>`${g}: ${y}%`,outerRadius:80,fill:"#8884d8",dataKey:"cantidad",children:c.map((g,y)=>a.jsx(Iu,{fill:g.color},`cell-${y}`))}),a.jsx(Nv,{})]})})}),a.jsx("div",{className:"mt-4 space-y-2",children:c.map((g,y)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:g.color}}),a.jsx("span",{className:"text-sm text-gray-700",children:g.tipo})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:g.cantidad}),a.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",g.porcentaje,"%)"]})]})]},y))})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Evolución de Ingresos"}),a.jsx(iv,{width:"100%",height:300,children:a.jsxs(Yae,{data:s,children:[a.jsx(kb,{strokeDasharray:"3 3"}),a.jsx(Mb,{dataKey:"periodo"}),a.jsx(Lb,{tickFormatter:g=>`$${(g/1e6).toFixed(1)}M`}),a.jsx(Nv,{formatter:g=>[h(g),"Ingresos"]}),a.jsx(lO,{type:"monotone",dataKey:"ingresos",stroke:"#10B981",strokeWidth:3,dot:{fill:"#10B981",strokeWidth:2,r:4}})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Detalle por Período"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Período"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Llegadas"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ventas"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transferencias"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Movimientos"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ingresos"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((g,y)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.periodo}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:g.llegadas})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:g.ventas})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:g.transferencias})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.llegadas+g.ventas+g.transferencias}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:h(g.ingresos)})]},y))})]})})]}),a.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Insights y Recomendaciones"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Tendencia Positiva"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Los movimientos han aumentado un 12% respecto al mes anterior, indicando mayor actividad en el establecimiento."})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Oportunidad de Mejora"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Las transferencias representan el 36% de los movimientos. Considerar optimizar la distribución inicial de animales."})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Ingresos Estables"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Los ingresos por ventas muestran una tendencia estable con picos en abril y mayo."})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Planificación"}),a.jsx("p",{className:"text-sm text-gray-600",children:"El promedio de 38 movimientos mensuales permite una buena planificación de recursos y personal."})]})]})]})]})},one=()=>{const{exportarMovimientos:e}=Yl(),[t,r]=_.useState(!1),[n,s]=_.useState(""),[l,c]=_.useState({fecha_desde:"",fecha_hasta:"",tipo_movimiento:"",lote:"",responsable:""}),[d,f]=_.useState([]),[m,x]=_.useState(!1),h=[{id:"completo",nombre:"Reporte Completo",descripcion:"Incluye todos los movimientos con información detallada",formato:"excel",incluye:["Información del animal (caravana, raza, sexo, edad)","Detalles del movimiento (fecha, tipo, origen, destino)","Datos económicos (precios, costos)","Responsables y observaciones","Documentos adjuntos"]},{id:"resumen",nombre:"Resumen Ejecutivo",descripcion:"Resumen estadístico de movimientos por período",formato:"pdf",incluye:["Estadísticas por tipo de movimiento","Gráficos de tendencias","Resumen financiero","Indicadores clave de rendimiento"]},{id:"inventario",nombre:"Control de Inventario",descripcion:"Movimientos para control de stock y ubicación",formato:"csv",incluye:["Caravana y identificación","Ubicación actual","Historial de transferencias","Estado del animal"]},{id:"financiero",nombre:"Reporte Financiero",descripcion:"Enfocado en aspectos económicos de los movimientos",formato:"excel",incluye:["Ingresos por ventas","Costos de adquisición","Análisis de rentabilidad","Proyecciones financieras"]},{id:"sanitario",nombre:"Registro Sanitario",descripción:"Movimientos con enfoque en trazabilidad sanitaria",formato:"pdf",incluye:["Certificados sanitarios","Historial de tratamientos","Origen y destino de animales","Cumplimiento normativo"]}],v=["Todos","Lote A","Lote B","Lote C","Potrero 1","Potrero 2","Corral 1","Corral 2"],g=["Todos","llegada","venta","transferencia"];_.useEffect(()=>{y()},[]);const y=async()=>{try{f([{id:"1",nombre:"Reporte Completo - Enero 2024",fecha:"2024-01-31",formato:"excel",estado:"completado",registros:45,tamaño:"2.3 MB"},{id:"2",nombre:"Resumen Ejecutivo - Q4 2023",fecha:"2024-01-15",formato:"pdf",estado:"completado",registros:180,tamaño:"1.8 MB"},{id:"3",nombre:"Control Inventario - Diciembre",fecha:"2024-01-05",formato:"csv",estado:"completado",registros:320,tamaño:"850 KB"}])}catch(S){console.error("Error al cargar exportaciones:",S)}},b=async()=>{if(!n){alert("Selecciona un tipo de reporte para exportar");return}r(!0);try{const S=h.find(L=>L.id===n);await e({tipo:n,formato:S?.formato||"csv",filtros:l,incluir:S?.incluye||[]});const D=`${S?.nombre.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.${S?.formato}`;let T="",k="";switch(S?.formato){case"csv":T=`Fecha,Tipo,Caravana,Raza,Origen,Destino,Responsable
2024-01-15,llegada,A001,Holstein,Establecimiento San José,Lote A,Juan Pérez`,k="text/csv";break;case"excel":T="Reporte de Movimientos - Datos exportados en formato Excel",k="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case"pdf":T="Reporte de Movimientos - Documento PDF generado",k="application/pdf";break}const C=new Blob([T],{type:k}),M=window.URL.createObjectURL(C),I=document.createElement("a");I.href=M,I.download=D,I.click(),window.URL.revokeObjectURL(M);const R={id:Date.now().toString(),nombre:`${S?.nombre} - ${new Date().toLocaleDateString("es-AR")}`,fecha:new Date().toISOString().split("T")[0],formato:S?.formato||"csv",estado:"completado",registros:Math.floor(Math.random()*200)+50,tamaño:`${(Math.random()*3+.5).toFixed(1)} MB`};f([R,...d.slice(0,4)]),alert("Exportación generada exitosamente")}catch(S){console.error("Error al generar exportación:",S),alert("Error al generar la exportación")}finally{r(!1)}},j=()=>{c({fecha_desde:"",fecha_hasta:"",tipo_movimiento:"",lote:"",responsable:""})},w=S=>{switch(S){case"excel":return"📊";case"pdf":return"📄";case"csv":return"📋";default:return"📁"}},A=S=>{switch(S){case"completado":return"text-green-600 bg-green-100";case"procesando":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Exportación de Movimientos"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Genera reportes personalizados de los movimientos de animales"})]}),a.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Seleccionar Tipo de Reporte"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(S=>a.jsxs("div",{onClick:()=>s(S.id),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${n===S.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:w(S.formato)}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:S.nombre}),a.jsx("span",{className:"text-xs text-gray-500 uppercase",children:S.formato})]})]}),n===S.id&&a.jsx(en,{className:"h-5 w-5 text-blue-500"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:S.descripcion}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Incluye:"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[S.incluye.slice(0,3).map((D,T)=>a.jsxs("li",{className:"flex items-start gap-1",children:[a.jsx("span",{className:"text-green-500 mt-0.5",children:"•"}),a.jsx("span",{children:D})]},T)),S.incluye.length>3&&a.jsxs("li",{className:"text-gray-500",children:["+ ",S.incluye.length-3," más..."]})]})]})]},S.id))})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(Jr,{className:"h-4 w-4"}),"Filtros de Exportación"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>x(!m),className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:[m?"Ocultar":"Mostrar"," Filtros"]}),(l.fecha_desde||l.fecha_hasta||l.tipo_movimiento||l.lote||l.responsable)&&a.jsx("button",{onClick:j,className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"Limpiar"})]})]}),m&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),a.jsx("input",{type:"date",value:l.fecha_desde,onChange:S=>c({...l,fecha_desde:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),a.jsx("input",{type:"date",value:l.fecha_hasta,onChange:S=>c({...l,fecha_hasta:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),a.jsx("select",{value:l.tipo_movimiento,onChange:S=>c({...l,tipo_movimiento:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.map(S=>a.jsx("option",{value:S==="Todos"?"":S,children:S==="Todos"?"Todos los tipos":S.charAt(0).toUpperCase()+S.slice(1)},S))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lote"}),a.jsx("select",{value:l.lote,onChange:S=>c({...l,lote:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:v.map(S=>a.jsx("option",{value:S==="Todos"?"":S,children:S},S))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsable"}),a.jsx("input",{type:"text",placeholder:"Filtrar por responsable",value:l.responsable,onChange:S=>c({...l,responsable:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(l.fecha_desde||l.fecha_hasta||l.tipo_movimiento||l.lote||l.responsable)&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[a.jsx("p",{className:"text-sm text-blue-800 font-medium mb-2",children:"Filtros activos:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.fecha_desde&&a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:["Desde: ",new Date(l.fecha_desde).toLocaleDateString("es-AR")]}),l.fecha_hasta&&a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:["Hasta: ",new Date(l.fecha_hasta).toLocaleDateString("es-AR")]}),l.tipo_movimiento&&a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:["Tipo: ",l.tipo_movimiento]}),l.lote&&a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:["Lote: ",l.lote]}),l.responsable&&a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:["Responsable: ",l.responsable]})]})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("button",{onClick:b,disabled:t||!n,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-lg font-medium",children:[a.jsx(ma,{className:"h-5 w-5"}),t?"Generando...":"Generar Exportación"]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(We,{className:"h-5 w-5"}),"Exportaciones Recientes"]})}),a.jsx("div",{className:"p-6",children:d.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(et,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{children:"No hay exportaciones recientes"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Las exportaciones que generes aparecerán aquí"})]}):a.jsx("div",{className:"space-y-3",children:d.map(S=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:w(S.formato)}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:S.nombre}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[a.jsx("span",{children:new Date(S.fecha).toLocaleDateString("es-AR")}),a.jsxs("span",{children:[S.registros," registros"]}),a.jsx("span",{children:S.tamaño})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A(S.estado)}`,children:[S.estado==="completado"&&a.jsx(en,{className:"inline h-3 w-3 mr-1"}),S.estado==="error"&&a.jsx(ia,{className:"inline h-3 w-3 mr-1"}),S.estado.charAt(0).toUpperCase()+S.estado.slice(1)]}),S.estado==="completado"&&a.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Descargar"})]})]},S.id))})})]}),a.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ia,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-yellow-800",children:"Información sobre Exportaciones"}),a.jsxs("ul",{className:"text-sm text-yellow-700 mt-2 space-y-1",children:[a.jsx("li",{children:"• Los archivos CSV son ideales para análisis en hojas de cálculo"}),a.jsx("li",{children:"• Los reportes PDF incluyen gráficos y formato profesional"}),a.jsx("li",{children:"• Los archivos Excel permiten análisis avanzado con fórmulas"}),a.jsx("li",{children:"• Las exportaciones se mantienen disponibles por 30 días"}),a.jsx("li",{children:"• Los filtros aplicados se incluyen en el nombre del archivo"})]})]})]})})]})},cne=({filtros:e,onAplicarFiltros:t,onLimpiarFiltros:r})=>{const[n,s]=_.useState(e),[l,c]=_.useState([]),[d,f]=_.useState([]);_.useEffect(()=>{s(e)},[e]),_.useEffect(()=>{m()},[]);const m=async()=>{c([{id:"1",nombre:"Lote Principal"},{id:"2",nombre:"Lote Secundario"},{id:"3",nombre:"Lote de Engorde"},{id:"4",nombre:"Lote de Cría"}]),f([{id:"1",caravana:"A001",nombre:"Vaca 1"},{id:"2",caravana:"A002",nombre:"Vaca 2"},{id:"3",caravana:"T001",nombre:"Toro 1"}])},x=(w,A)=>{s(S=>({...S,[w]:A}))},h=(w,A)=>{const S=n.tipoMovimiento||[];let D;A?D=[...S,w]:D=S.filter(T=>T!==w),x("tipoMovimiento",D)},v=(w,A,S)=>{const D=n[w]||[];let T;S?T=[...D,A]:T=D.filter(k=>k!==A),x(w,T)},g=()=>{t(n)},y=()=>{s({}),r()},b=[{id:"llegada",label:"Llegadas",color:"text-green-600"},{id:"venta",label:"Ventas",color:"text-red-600"},{id:"transferencia",label:"Transferencias",color:"text-blue-600"},{id:"muerte",label:"Muertes",color:"text-gray-600"},{id:"robo",label:"Robos",color:"text-orange-600"},{id:"otro",label:"Otros",color:"text-purple-600"}],j=Object.keys(n).some(w=>{const A=n[w];return A&&(Array.isArray(A)?A.length>0:A)});return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{className:"h-5 w-5 text-gray-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros de Movimientos"}),j&&a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full",children:"Filtros activos"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:y,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:[a.jsx(Qe,{className:"h-4 w-4"}),"Limpiar"]}),a.jsxs("button",{onClick:g,className:"flex items-center gap-1 px-4 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[a.jsx(Jr,{className:"h-4 w-4"}),"Aplicar Filtros"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(We,{className:"h-4 w-4 text-gray-600"}),"Rango de Fechas"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Desde"}),a.jsx("input",{type:"date",value:n.fechaDesde||"",onChange:w=>x("fechaDesde",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Hasta"}),a.jsx("input",{type:"date",value:n.fechaHasta||"",onChange:w=>x("fechaHasta",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(et,{className:"h-4 w-4 text-gray-600"}),"Tipo de Movimiento"]}),a.jsx("div",{className:"space-y-2",children:b.map(w=>a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n.tipoMovimiento?.includes(w.id)||!1,onChange:A=>h(w.id,A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:`text-sm font-medium ${w.color}`,children:w.label})]},w.id))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(ua,{className:"h-4 w-4 text-gray-600"}),"Lotes y Animales"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lotes de Origen"}),a.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:l.map(w=>a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n.loteOrigen?.includes(w.id)||!1,onChange:A=>v("loteOrigen",w.id,A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:w.nombre})]},`origen-${w.id}`))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lotes de Destino"}),a.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:l.map(w=>a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n.loteDestino?.includes(w.id)||!1,onChange:A=>v("loteDestino",w.id,A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:w.nombre})]},`destino-${w.id}`))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Animal Específico"}),a.jsxs("select",{value:n.animalId||"",onChange:w=>x("animalId",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos los animales"}),d.map(w=>a.jsxs("option",{value:w.id,children:[w.caravana," ",w.nombre&&`- ${w.nombre}`]},w.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comprador/Vendedor"}),a.jsxs("div",{className:"relative",children:[a.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Nombre del comprador o vendedor",value:n.compradorVendedor||"",onChange:w=>x("compradorVendedor",w.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]})]}),j&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Filtros Activos:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.fechaDesde&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:["Desde: ",n.fechaDesde,a.jsx("button",{onClick:()=>x("fechaDesde",""),className:"hover:bg-blue-200 rounded-full p-0.5",children:a.jsx(Qe,{className:"h-3 w-3"})})]}),n.fechaHasta&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:["Hasta: ",n.fechaHasta,a.jsx("button",{onClick:()=>x("fechaHasta",""),className:"hover:bg-blue-200 rounded-full p-0.5",children:a.jsx(Qe,{className:"h-3 w-3"})})]}),n.tipoMovimiento?.map(w=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:[b.find(A=>A.id===w)?.label,a.jsx("button",{onClick:()=>h(w,!1),className:"hover:bg-green-200 rounded-full p-0.5",children:a.jsx(Qe,{className:"h-3 w-3"})})]},w)),n.animalId&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full",children:["Animal: ",d.find(w=>w.id===n.animalId)?.caravana,a.jsx("button",{onClick:()=>x("animalId",""),className:"hover:bg-purple-200 rounded-full p-0.5",children:a.jsx(Qe,{className:"h-3 w-3"})})]}),n.compradorVendedor&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:[n.compradorVendedor,a.jsx("button",{onClick:()=>x("compradorVendedor",""),className:"hover:bg-orange-200 rounded-full p-0.5",children:a.jsx(Qe,{className:"h-3 w-3"})})]})]})]})]})},dne=()=>{const[e,t]=_.useState("llegada"),[r,n]=_.useState(!1),[s,l]=_.useState(""),{movimientos:c,loading:d,filtros:f,estadisticas:m,cargarMovimientos:x,aplicarFiltros:h,limpiarFiltros:v,obtenerEstadisticas:g}=Yl();_.useEffect(()=>{x(),g()},[]);const y=[{id:"llegada",nombre:"Llegadas",icono:Xo,color:"text-green-600"},{id:"venta",nombre:"Ventas",icono:Zo,color:"text-red-600"},{id:"transferencia",nombre:"Transferencias",icono:Hd,color:"text-blue-600"},{id:"historial",nombre:"Historial",icono:We,color:"text-gray-600"},{id:"estadisticas",nombre:"Estadísticas",icono:We,color:"text-purple-600"},{id:"exportacion",nombre:"Exportar",icono:ma,color:"text-orange-600"}],b=()=>{switch(e){case"llegada":return a.jsx(H4,{});case"venta":return a.jsx(wz,{});case"transferencia":return a.jsx(_z,{});case"historial":return a.jsx(Ez,{movimientos:c,loading:d});case"estadisticas":return a.jsx(lne,{estadisticas:m});case"exportacion":return a.jsx(one,{movimientos:c});default:return a.jsx(H4,{})}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200",children:[a.jsxs("div",{className:"px-6 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Movimientos de Animales"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona llegadas, ventas, transferencias y consulta el historial de movimientos"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por caravana, lote...",value:s,onChange:j=>l(j.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"})]}),a.jsxs("button",{onClick:()=>n(!r),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${r?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Jr,{className:"h-4 w-4"}),"Filtros"]})]})]}),a.jsx("div",{className:"flex items-center gap-1 mt-4 bg-gray-100 p-1 rounded-lg",children:y.map(j=>{const w=j.icono;return a.jsxs("button",{onClick:()=>t(j.id),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${e===j.id?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:[a.jsx(w,{className:`h-4 w-4 ${j.color}`}),a.jsx("span",{className:"font-medium",children:j.nombre})]},j.id)})})]}),r&&a.jsx("div",{className:"border-t border-gray-200 bg-gray-50",children:a.jsx(cne,{filtros:f,onAplicarFiltros:h,onLimpiarFiltros:v})})]}),a.jsxs("div",{className:"p-6",children:[m&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Llegadas (Mes)"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.llegadas_mes})]}),a.jsx(Xo,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Ventas (Mes)"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.ventas_mes})]}),a.jsx(Zo,{className:"h-8 w-8 text-red-600"})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Transferencias (Mes)"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.transferencias_mes})]}),a.jsx(Hd,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Movimientos"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.total_movimientos})]}),a.jsx(We,{className:"h-8 w-8 text-gray-600"})]})})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 min-h-[600px]",children:b()})]}),["llegada","venta","transferencia"].includes(e)&&a.jsx("div",{className:"fixed bottom-6 right-6",children:a.jsx("button",{className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors",children:a.jsx(gt,{className:"h-6 w-6"})})})]})};function une(){return a.jsxs(V8,{children:[a.jsx(dr,{path:"/login",element:a.jsx(fP,{})}),a.jsx(dr,{path:"/",element:a.jsx(Hr,{children:a.jsx(bP,{})})}),a.jsx(dr,{path:"/animales",element:a.jsx(Hr,{children:a.jsx(TP,{})})}),a.jsx(dr,{path:"/lotes",element:a.jsx(Hr,{children:a.jsx(OP,{})})}),a.jsx(dr,{path:"/compras",element:a.jsx(Hr,{children:a.jsx(UP,{})})}),a.jsx(dr,{path:"/ventas",element:a.jsx(Hr,{children:a.jsx(UB,{})})}),a.jsx(dr,{path:"/pesadas",element:a.jsx(Hr,{children:a.jsx(qB,{})})}),a.jsx(dr,{path:"/sanidad",element:a.jsx(Hr,{children:a.jsx(GB,{})})}),a.jsx(dr,{path:"/proveedores",element:a.jsx(Hr,{children:a.jsx(WB,{})})}),a.jsx(dr,{path:"/transporte",element:a.jsx(Hr,{children:a.jsx(ZB,{})})}),a.jsx(dr,{path:"/compradores",element:a.jsx(Hr,{children:a.jsx(JB,{})})}),a.jsx(dr,{path:"/configuracion",element:a.jsx(Hr,{children:a.jsx(ez,{})})}),a.jsx(dr,{path:"/ayuda",element:a.jsx(Hr,{children:a.jsx(tz,{})})}),a.jsx(dr,{path:"/usuarios",element:a.jsx(uP,{children:a.jsx(rz,{})})}),a.jsx(dr,{path:"/produccion-leche",element:a.jsx(Hr,{children:a.jsx(az,{})})}),a.jsx(dr,{path:"/tareas",element:a.jsx(Hr,{children:a.jsx(nz,{})})}),a.jsx(dr,{path:"/calendario",element:a.jsx(Hr,{children:a.jsx(fz,{})})}),a.jsx(dr,{path:"/seleccion-animales",element:a.jsx(Hr,{children:a.jsx(Nz,{})})}),a.jsx(dr,{path:"/movimientos-animales",element:a.jsx(Hr,{children:a.jsx(dne,{})})}),a.jsx(dr,{path:"*",element:a.jsx(Hb,{to:"/",replace:!0})})]})}function fne(){const e=ln(t=>t.initializeAuth);return _.useEffect(()=>{e()},[e]),a.jsx(G8,{children:a.jsx(dP,{children:a.jsx(une,{})})})}tP.createRoot(document.getElementById("root")).render(a.jsx(K8.StrictMode,{children:a.jsx(fne,{})}));
